{"version":3,"sources":["logo.svg","dispatcher.js","stores/ModelStore.js","conf.jsx","actions/MyActions.js","Dict.jsx","components/header/header.jsx","components/events/card.jsx","components/profiles/card.jsx","components/attendances/card.jsx","components/dashboard/index.jsx","components/common/validation.jsx","components/common/validate.js","components/users/wizard.jsx","components/users/login.jsx","components/users/forget.jsx","components/events/index.jsx","components/meetings/card.jsx","components/events/calendar.jsx","components/events/info.jsx","components/events/show.jsx","components/events/create.jsx","components/events/attendance.jsx","components/meetings/info.jsx","components/events/detail.jsx","components/events/name.jsx","components/meetings/masonry.jsx","components/meetings/index.jsx","socket.js","components/flyers/card.jsx","components/polls/create.jsx","components/attendances/modal.jsx","components/rooms/chat.js","components/meetings/show.jsx","components/meetings/create.jsx","components/meetings/attendance.jsx","components/exhibitions/card.jsx","components/exhibitions/index.jsx","components/questions/card.jsx","components/exhibitions/show.jsx","components/exhibitions/create.jsx","components/discussions/index.jsx","components/polls/index.jsx","components/uploads/cropper.jsx","components/uploads/create.jsx","components/flyers/create.jsx","components/users/loginJwt.jsx","components/questions/create.jsx","janus.js","components/rooms/janus-tools.js","janus-2021.js","components/rooms/janus-videoroom.js","components/rooms/janus-screenroom.js","components/rooms/dish.js","components/rooms/show.jsx","components/attendances/create.jsx","components/settings/ability.jsx","components/settings/index.jsx","components/common/calendar.jsx","components/profiles/index.jsx","components/profiles/show.jsx","App.js","reportWebVitals.js","index.js"],"names":["Dispatcher","modelStore","list","multipleList","instance","klass","reason","this","i","len","data","length","push","emit","console","log","action","type","listModel","listMultipleModel","showIntance","deleteIntance","setIntance","postFile","setIntanceFailure","EventEmitter","dispatcher","register","handleActions","bind","conf","server","getList","model","page","params","token","queryString","Object","keys","map","key","join","axios","get","headers","then","response","dispatch","catch","error","getMultipleList","getInstance","id","removeInstance","setInstance","post","payload","updateInstance","put","dict","t","Header","props","logout","state","window","localStorage","getItem","lang","dir","event_name","profile","name","initials","userAbilities","langBtnActive","eventBtnActive","ModelStore","on","removeListener","changeLang","MyActions","history","document","getKlass","setState","abilities","obj","removeItem","location","replace","administration","className","href","xmlns","class","width","height","viewBox","stroke-width","stroke","fill","stroke-linecap","stroke-linejoin","d","cx","cy","r","x","y","rx","x1","y1","x2","y2","onClick","data-bs-toggle","setItem","reload","changeEvent","cover","style","backgroundImage","data-bs-target","aria-label","avatar","languageBtn","eventBadge","points","eventsBtn","settingsBtn","React","Component","moment","locale","useGregorianParser","EventCard","cardCover","event","tagsShow","tags","result","tag","margin","title","attend","is_admin","attending","display","eventLink","calendarType","date","gregorianDate","Date","day","getDate","month","getMonth","getFullYear","getHours","getMinutes","formatGregorianDate","format","mm","Fragment","events","col","textAlign","truncated_info","event_type","start_date","end_date","eventItems","ProfileCard","src","alt","AttendanceCard","attendable_type","attendable_id","createBtn","attendees","attendee","attendeesCount","Validation","ref","modal","tabindex","aria-hidden","role","data-bs-dismiss","items","item","validateExistence","arr","flag","el","validationItems","current","click","AsyncTypeahead","withAsync","Typeahead","UserWizard","submit","handleChange","createRef","email","password","password_confirmation","bio","country","options","disableSubmit","twitter","instagram","telegram","getIntance","phone","linkdin","test","String","toLowerCase","$","addClass","removeClass","validateEmail","hide","show","signedUp","notSignedUp","onInput","e","target","value","autocomplete","aria-valuenow","aria-valuemin","aria-valuemax","disabled","classes","priorityOptions","onChange","val","rows","placeholder","allowNew","multiple","defaultSelected","isLoading","labelKey","onSearch","query","fetch","resp","json","tagSelected","renderMenuItemChildren","option","submitProfile","checkSignUp","verify","verification","verifyForm","verified","loginError","Forget","EventIndex","event_id","allTags","q","start_from","start_to","add","pages","isGregorian","concat","self","newState","assign","noEventCard","data-masonry","marginTop","changeTags","direction","marginBottom","loadMore","create_event","timePicker","tagInput","search","verticalAlign","cardMasonry","moreBtn","MeetingCard","editBtn","meeting","meetingLink","meetings","start_time","meetingItems","herf","EventCalendar","ranges","highlightRanges","today","inputFormat","inputJalaaliFormat","dateSelect","EventInfo","marginRight","isPrivateBadge","toggleCalendar","info","EventShow","flyers","quillOne","is_private","calendar","meetingLoaded","selectedMeeting","match","Quill","readOnly","uploads","attendees_count","constructCalendar","advertisable_id","advertisable_type","quill_content","html","setContents","flyer","deleteFlyer","is_default","loadContent","editFlyerBtn","parse","start_day","_d","end_day","s","color","randomColor","start","end","end_time","maxHeight","meetingList","upload","deleteUpload","upload_type","cursor","link","editUploadBtn","createFlyerBtn","createUploadBtn","showCalendar","EventCreate","deleteInstance","shortname","shortnameOk","editing","text","changeType","each","checked","prop","confirm","deleteEvent","handleShortname","tagShow","changeDefault","deleteBtn","EventAttendance","attendances","users","selectedUser","splited","split","charAt","toUpperCase","slice","getMutipleList","user_id","user","border","addParticipant","attendance","removeParticipant","userItems","attendanceItems","MeetingInfo","att","sideBlock","isEvent","meeting_type","room_id","uuidv4","forceUpdate","EventDetail","selectedTags","is","array","index","indexOf","splice","tag_ids","tagCheckbox","filterSearch","LoginJwt","notFound","notFoundNotice","MeetingMasonry","MeetingIndex","registration_status","searched","insideEvent","stored_event","noMeetingCard","selected","showTimeSelect","timeIntervals","timeCaption","dateFormat","toDate","eventOptions","eventSelect","socket","io","connect","transports","secure","reconnect","rejectUnauthorized","FlyerCard","qillLoaded","prevProps","quillTwo","maxWidth","maximizeBtn","PollCard","pollCheckBox","poll","answer_content","outcomes","includes","postPolling","stats","pollRadioBtn","outcome","rated","star","rating","answer_type","content","viewPoll","AttendanceModal","keydownHandler","keyCode","ctrlKey","send","appendChat","c","exist","chats","filter","uuid","scrollChat","stop","animate","scrollTop","scrollHeight","chatItems","chat","throttle","now","lastTime","wsSend","msg","sender","userUUID","roomId","handRaiseCreate","handRaised","handRaiseDestroy","isHandRaised","MeetingShow","socketHandle","capacity","room","fullname","userCounter","fullAlert","timelyAlert","polls","is_presenter","is_moderator","is_speaker","activeTab","addEventListener","removeEventListener","toString","pollable_type","pollable_id","parsed","room_uuid","bigblue","internal","sata","url","full","timely","isFirefox","isMobile","open","connectSocketRoom","createBigBlue","poll_id","backgroundColor","minHeight","float","marginLeft","editMeetingBtn","roomBtn","borderColor","boxShadow","time","overflowY","pollSettings","MeetingCreate","number_of_sata_displays","per_display","toggleState","deleteMeeting","changeService","sataOptions","MeetingAttendance","ExhibitionCard","exhibition","exhibitions","exhibitionItems","ExhibitionIndex","noExhibitionCard","create_exhibition","QuestionCard","questionable_type","questionable_id","questions","question","ExhibitionShow","editExhibitionBtn","addAttendance","ExhibitionCreate","is_active","deleteExhibition","DiscssionIndex","data-toggle","data-target","PollIndex","clearForm","formActivated","plural","loadPollings","pollItem","toggleForm","deletePoll","selectContent","pollsList","CropperShow","onCropChange","crop","onCropComplete","croppedArea","croppedAreaPixels","crop_settings","onZoomChange","zoom","showCropper","aspect","uploadable_type","uploadable_id","imageSrc","uploadable_link","cropped","image","min","max","step","aria-labelledby","container","UploadCreate","file","progress","advertisable_link","progressShow","config","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","FormData","append","res","uploadedRecently","err","fileAttacher","files","FlyerCreate","quill","ImageUploader","theme","modules","toolbar","imageUploader","Promise","resolve","reject","formData","delta","oldDelta","source","getContents","getText","QuestionCreate","questionable_link","RTCRtpTransceiver","Janus","sessions","isExtensionEnabled","navigator","mediaDevices","getDisplayMedia","userAgent","chromever","parseInt","maxver","extension","isInstalled","defaultExtension","extensionId","querySelector","getScreen","callback","pending","setTimeout","Error","cache","postMessage","init","origin","sourceId","clearTimeout","gatewayCallbacks","success","noop","destroyed","initDone","isWebrtcSupported","websockets","ws","wsHandlers","wsKeepaliveTimeoutId","servers","serversIndex","isArray","debug","iceServers","urls","iceTransportPolicy","bundlePolicy","ipv6Support","ipv6","withCredentials","undefined","maxev","max_poll_events","apisecret","destroyOnUnload","keepAlivePeriod","isNaN","longPollTimeout","getMaxBitrates","simulcastMaxBitrates","maxBitrates","high","medium","low","connected","sessionId","pluginHandles","that","retries","transactions","eventHandler","longpoll","getTime","encodeURIComponent","httpAPICall","verb","handleEvent","timeout","textStatus","errorThrown","warn","skipTimeout","pluginHandle","candidate","webrtcStuff","pc","remoteSdp","completed","addIceCandidate","endOfCandidates","candidates","webrtcState","hangup","detached","ondetached","detach","mediaState","slowLink","transaction","reportSuccess","code","plugindata","jsep","onmessage","close","vdebug","keepAlive","request","randomString","JSON","stringify","createSession","callbacks","onopen","onerror","onclose","eventName","newWebSocket","body","sendMessage","handleId","message","sdp","e2ee","rid_order","sendTrickleCandidate","createDataChannel","dclabel","dcprotocol","incoming","pendingData","onDataChannelStateChange","label","protocol","dcState","dataChannel","readyState","ondataopen","dcoptions","ordered","ondata","sendData","dataChanDefaultLabel","sendDtmf","dtmfSender","audioSender","getSenders","find","track","kind","dtmf","ontonechange","tone","tones","duration","gap","insertDTMF","destroyHandle","noRequest","cleanupWebrtc","streamsDone","media","stream","stopAllTracks","getAudioTracks","getVideoTracks","addTracks","myStream","update","streamExternal","isAudioSendEnabled","addAudio","replaceAudio","addTrack","unifiedPlan","audioTransceiver","transceivers","getTransceivers","receiver","replaceTrack","isVideoSendEnabled","addVideo","replaceVideo","videoTransceiver","pc_config","webRTCAdapter","browserDetails","browser","version","pc_constraints","optional","rtcConstraints","RTCRtpSender","prototype","createEncodedStreams","createEncodedAudioStreams","createEncodedVideoStreams","senderTransforms","receiverTransforms","RTCPeerConnection","getStats","volume","bitrate","trickle","oniceconnectionstatechange","iceState","iceConnectionState","onicecandidate","iceDone","mySdp","localDescription","sdpSent","sendSDP","sdpMid","sdpMLineIndex","ontrack","streams","remoteStream","onremotestream","onended","receiverStreams","createAudioEncodedStreams","readableStream","writableStream","pipeThrough","pipeTo","readable","writable","trackMutedTimeoutId","ev","removeTrack","onmute","onunmute","simulcast2","getTracks","forEach","tr","addTransceiver","sendEncodings","rid","active","maxBitrate","scaleResolutionDownBy","senderStreams","isDataEnabled","ondatachannel","channel","onlocalstream","setRemoteDescription","customizeSdp","simulcast","mediaConstraints","audioSend","audioRecv","isAudioRecvEnabled","setDirection","removeAudio","videoSend","videoRecv","isVideoRecvEnabled","removeVideo","offerToReceiveAudio","offerToReceiveVideo","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","sendVideo","parameters","getParameters","setParameters","encodings","createAnswer","answer","setLocalDescription","iceRestart","createOffer","offer","lines","video","ssrc","ssrc_fid","cname","msid","mslabel","insertAt","mline","fid","floor","random","endsWith","mungeSdpForSimulcasting","prepareWebrtc","webrtcError","audio","keepAudio","keepVideo","addData","consentDialog","at","ra","asnd","vt","rv","vsnd","isGetUserMediaAvailable","constraints","audioSupport","videoSupport","screenshareFrameRate","frameRate","screenshareHeight","screenshareWidth","captureDesktopAudio","getUserMedia","audioStream","callbackUserMedia","getScreenMedia","gsmCallback","useAudio","googLeakyBucket","screen","minFrameRate","maxFrameRate","chromeMediaSource","googTemporalLayeredScreencast","chromeMediaSourceId","mozMediaSource","mediaSource","currentTime","polly","setInterval","clearInterval","enumerateDevices","devices","audioExist","some","device","videoExist","isScreenSendEnabled","needAudioDevice","failIfNoAudio","isAudioSendRequired","needVideoDevice","failIfNoVideo","isVideoSendRequired","haveAudioDevice","haveVideoDevice","gumConstraints","prepareWebrtcPeer","getVolume","remote","timer","remoteSource","audioLevel","isMuted","enabled","mute","getBitrate","inStats","mediaType","bytesReceived","googCodecName","bsnow","tsnow","timestamp","bsbefore","tsbefore","timePassed","bitRate","hangupRequest","oncleanup","getServer","isConnected","getSessionId","getInfo","destroy","unload","notifyDestroyed","cleanupHandles","sendBeacon","unbindWebSocket","onUnbindMessage","onUnbindError","session_id","destroySession","attach","plugin","opaqueId","handleToken","session","started","getId","getPlugin","getRemoteVolume","getLocalVolume","isAudioMuted","muteAudio","unmuteAudio","isVideoMuted","muteVideo","unmuteVideo","handleRemoteJsep","sendRequest","createHandle","UseDefaultDependencies","deps","f","p","socketCls","WebSocket","proto","Array","adapter","fetchOptions","method","credentials","fetching","timerId","race","ok","useOldDependencies","jq","jQuery","contentType","xhrFields","ajax","extend","dataType","async","xhr","status","tracks","mst","trace","usedDependencies","dependencies","listDevices","attachMediaStream","element","srcObject","URL","createObjectURL","reattachMediaStream","to","from","platform","oldOBF","safariVp8","getCapabilities","codecs","codec","mimeType","testpc","tempPc","charSet","randomPoz","substring","sessionCreate","janus","username","credential","mixertest","registerUsername","participantChangeStatus","currentRole","myid","userColor","webrtcUp","joinAudioRoom","setup","muted","leaving","localStream","getElementById","echoCancellation","deviceId","microphoneDevice","publish","errorMessage","joinAudioRoomWOMic","pin","myId","changeUsername","vpin","changeOwn","participants","participant","exisitingParticipant","changeParticipant","participantId","exisiting","participantDisplay","prevState","talking","participantChangeRoom","participantRoom","toggleMute","css","forceMute","exitAudioRoom","vsessionCreate","sfutest","vregisterUsername","myVroomId","vJoined","vAddParticipant","slot","vNewRemoteFeed","vChangeOwn","isSata","feed","feeds","rfid","remoteFeed","shift","vremoveParticipant","unpublished","vStreamDettacher","videoTracks","vparticipants","vStreamAttacher","publishedCamera","simulcastStarted","subscribe","vroomId","ptype","private_id","mypvtid","videoCodec","alert","rfdisplay","disher","uuids","vChangeUsername","listParticipants","localVideo","createElement","autoplay","remove","publishCamera","keyframe","bitrate_cap","unPublishCamera","videoState","toggleVideoDevice","exitVideoRoom","toggleCamera","change","scSessionCreate","scJanus","scSfutest","scRegisterUsername","myScRoomId","scJoined","scAddParticipant","scNewRemoteFeed","scFeeds","scRemoveParticipant","scStreamDettacher","scStreamAttacher","toggleScreen","scRoomId","scParticipants","publishScreen","publishers","publishedScreen","unPublishScreen","exitScreenRoom","dishArea","Increment","Count","Width","Height","Margin","w","h","dish","cam","Scenary","offsetWidth","offsetHeight","Cameras","getElementsByClassName","setWidth","handRaiseToggle","initDevices","handleChangedRole","broadcast","changeLayout","myHand","sourceSettings","exitAll","classList","onresize","onunload","onbeforeunload","speakerDevices","microphoneDevices","cameraDevices","changeOwnLayout","timerStarted","timerDuration","timerPlaying","secret","vuuid","vsecret","is_sata","rtpforward","fileName","playFile","playingFiles","fileId","file_id","stopFile","toggleSettings","microphoneBtn","cameraBtn","presentBtn","handRaiseBtn","layoutCol","timerCard","pollCard","toggleTheme","togglePlaySound","controls","talkingIndicator","handRaiseIndicator","roleSelect","duty","changeRole","playSoundBtn","stopSound","playSound","selectDevice","deviceOptions","cameraDevice","justListen","play","isPlaying","colors","onComplete","renderAriaTime","updateTimer","remainingTime","renderTime","timerShow","toggleTimer","stopTimer","stratTimer","layoutControl","adminControl","showControl","showSettings","speakerList","listenerList","fontSize","fontWeight","webrtcAlerts","playList","sataPages","AttendanceCreate","duties","changeDuty","dutyOptions","AbilityCard","abilityForm","ability","changeAbility","searchUser","profiles","userAbility","profileItems","submitAbility","abilityShow","selectedAbility","SettingsIndex","MyCalendar","ProfileIndex","short_bio","ProfileShow","uploader","handleFileUpload","recent_events","recent_meetings","recent_exhibitions","is_owner","refs","fileInput","avatarBtn","contactBlock","socialLinks","createBrowserHistory","App","path","exact","component","UserLogin","EventEdit","EventName","ExhibitionEdit","MeetingEdit","FlyerEdit","RoomShow","DiscussionIndex","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","RtlTheme","lazy","LtrTheme","ThemeSelector","children","CHOSEN_THEME","Suspense","fallback","ReactDOM","render"],"mappings":"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","file":"static/js/main.e1785fc8.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import { Dispatcher } from \"flux\";\n\nexport default new Dispatcher;\n","import { EventEmitter } from \"events\";\n\nimport dispatcher from \"../dispatcher\";\n\nclass ModelStore extends EventEmitter {\n  constructor() {\n    super()\n    this.list = [];\n    this.multipleList = [];\n    this.instance = null;\n    this.klass= null;\n    this.reason = null;\n  }\n\n  listModel(list){\n    this.list = [];\n    this.klass = list.klass\n    for (var i = 0, len = list.data.length; i < len; ++i) {\n      this.list.push(list.data[i]);\n      if (i === len - 1 ) {\n        this.emit(\"got_list\");\n      }\n    }\n    if(list.data.length == 0){\n      this.emit(\"got_list\");\n    }\n\n  }\n\n\n  listMultipleModel(list){\n    console.log('>>>>>', list)\n    this.multipleList = list.data;\n    this.klass = list.klass\n    this.emit(\"got_multiple_list\");\n  }\n\n  showIntance(instance){\n    this.klass = instance.klass\n    this.instance = instance.data\n    this.emit(\"got_instance\");\n  }\n\n  setIntance(instance){\n    this.klass = instance.klass\n    this.instance = instance.data\n    this.emit(\"set_instance\");\n  }\n\n\n  deleteIntance(instance){\n    this.klass = instance.klass\n    this.instance = instance.data\n    this.emit(\"deleted_instance\");\n  }\n\n  postFile(instance){\n    console.log(instance)\n    this.klass = instance.klass\n    this.instance = instance.data\n    this.emit(\"file_posted\");\n  }\n\n  setIntanceFailure(){\n    this.klass = 'Error'\n    this.emit(\"set_instance\");\n  }\n\n  getReason(){\n    return this.reason\n  }\n\n  getIntance() {\n    return this.instance\n  }\n\n  getList(){\n    return this.list\n  }\n\n  getListnKlass(){\n    return [this.list, this.klass]\n  }\n\n\n  getMutipleList(){\n    return this.multipleList\n  }\n\n  getKlass(){\n    return this.klass\n  }\n\n  handleActions(action) {\n    switch(action.type) {\n      case \"LIST_MODEL_SUCCESS\": {\n        this.listModel(action.list);\n        break;\n      }\n      case \"MULTIPLE_LIST_MODEL_SUCCESS\": {\n        this.listMultipleModel(action.list);\n        break;\n      }\n      case \"GET_INSTANCE_SUCCESS\": {\n        this.showIntance(action.instance);\n        break;\n      }\n      case \"DELETE_INSTANCE_SUCCESS\": {\n        this.deleteIntance(action.instance);\n        break;\n      }\n      case \"SET_INSTANCE_SUCCESS\": {\n        this.setIntance(action.instance);\n        break;\n      }\n      case \"POST_FILE_SUCCESS\": {\n        this.postFile(action.instance);\n        break;\n      }\n      case \"SET_INSTANCE_FAILURE\": {\n        this.setIntanceFailure();\n        break;\n      }\n\n      \n    }\n  }\n}\n\n\nconst modelStore = new ModelStore;\ndispatcher.register(modelStore.handleActions.bind(modelStore));\n\nexport default modelStore;\n","export const conf = { \n//'server' : 'http://localhost:3001/v1',\n'server' : '/v1',\n'socketIOServer': 'https://connect.ut.ac.ir/',\n//'socketIOServer': 'http://localhost:8081/',\n'socketServer' : 'wss://kaarafarinan.ir/ws',\n//'socketServer' : 'ws://localhost:8080',\n//'ionSignalServer' : 'wss://kaarafarinan.ir:7000/ws',\n'ionSignalServer' : 'wss://sync.ut.ac.ir:7000/ws',\n//'janusServer' : 'https://kaarafarinan.ir:8089/janus',\n'janusServer' : 'https://sync.ut.ac.ir:8089/janus'\n};\n","import dispatcher from \"../dispatcher\";\nimport axios, {put} from 'axios';\nimport { conf } from '../conf';\nconst server= conf.server;\n//const server='/v1';\n//const server='http://95.156.255.115/api';\n\n\nexport function getList(model, page=1, params={}, token) {\n  var queryString = Object.keys(params).map(key => key + '=' + params[key]).join('&');\n  axios.get(server + '/'+ model +'?page='+page+'&'+queryString, { headers: {'Content-Type': 'application/json', 'Authorization': \"bearer \" + token } })\n  .then(function (response) {\n    dispatcher.dispatch({\n      type: \"LIST_MODEL_SUCCESS\",\n      list: response.data,\n    });\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n}\n\nexport function getMultipleList(model, page=1, params={}, token) {\n  var queryString = Object.keys(params).map(key => key + '=' + params[key]).join('&');\n  axios.get(server + '/'+ model +'?page='+page+'&'+queryString, { headers: {'Content-Type': 'application/json', 'Authorization': \"bearer \" + token } })\n  .then(function (response) {\n    dispatcher.dispatch({\n      type: \"MULTIPLE_LIST_MODEL_SUCCESS\",\n      list: response.data,\n    });\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n}\n\nexport function fileUpload(model, id , file, token){\n  const url = server + '/'+ model;\n  const formData = new FormData();\n  formData.append('upload[attached_document]',file)\n  //formData.append('profile[id]',id)\n  const config = {\n      headers: {\n          'content-type': 'multipart/form-data',\n          'Authorization': \"bearer \" + token \n      }\n  }\n  axios.post(url, formData,config).then(function (response) {\n    dispatcher.dispatch({\n      type: \"POST_FILE_SUCCESS\",\n      instance: response.data,\n    });\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n}\n\nexport function getInstance(model, id, token, page=1) {\n  axios.get(server + '/'+ model +'/'+id+'?page='+page, { headers: {'Content-Type': 'application/json', 'Authorization': \"bearer \" + token } })\n  .then(function (response) {\n    dispatcher.dispatch({\n      type: \"GET_INSTANCE_SUCCESS\",\n      instance: response.data,\n    });\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n}\n\nexport function removeInstance(model, params={}, token ) {\n  var queryString = Object.keys(params).map(key => key + '=' + params[key]).join('&');\n  axios.get(server + '/'+ model +'/delete?'+queryString, { headers: {'Content-Type': 'application/json', 'Authorization': \"bearer \" + token } })\n  .then(function (response) {\n    dispatcher.dispatch({\n      type: \"DELETE_INSTANCE_SUCCESS\",\n      instance: response.data,\n    });\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n}\n\nexport function setInstance(model, data, token) {\n  axios.post(server + '/'+ model +'/', data, { headers: {'Content-Type': 'application/json', 'Authorization': \"bearer \" + token } })\n  .then(function (response) {\n    dispatcher.dispatch({\n      type: \"SET_INSTANCE_SUCCESS\",\n      instance: response.data,\n    });\n  })\n  .catch(function (error, payload) {\n    dispatcher.dispatch({\n      type: \"SET_INSTANCE_FAILURE\",\n      instance: error,\n    });\n    \n  });\n}\n\nexport function updateInstance(model, data, token) {\n  axios.put(server + '/'+ model +'/'+data.id, data, { headers: {'Content-Type': 'application/json', 'Authorization': \"bearer \" + token } })\n  .then(function (response) {\n    dispatcher.dispatch({\n      type: \"SET_INSTANCE_SUCCESS\",\n      instance: response.data,\n    });\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n}\n","export const dict = {\n  'farsi' : {\n    'overview': ' ',\n    'events': '',\n    'home': '',\n    'meetings': ' ',\n    'users': '',\n    'your_country': '',\n    'bio':' ',\n    'write_about_yourself': '   ...',\n    'complete_your_profile':'    ',\n    'continue': '',\n    'profiles': '',\n    'settings':'',\n\n    'event_detail':' ',\n    'event_title':' ',\n    'event_info':' ',\n    'event_type':' ',\n    'event':'',\n    'create_event':' ',\n    'create_event_page':' ',\n    'in_person': '',\n    'online': '',\n    'hybrid': '',\n    'filter_events':'   ',\n    'event_start_date': ' ',\n    'event_end_date':' ',\n    'event_not_found_by_name': '     ',\n    'not_found_note': '            .             ',\n    'all_events':' ',\n    'event_shortname': ' ',\n    'shortname_note':'            ',\n\n    'abilities':' ',\n    'restrictions':'  ',\n    'reports':'',\n    '':'',\n    \n    'meeting_info':' ',\n    'meeting_title':' ',\n    'meeting_detail':' ',\n    'meeting_type':' ',\n    'meeting_capacity': ' ',\n    'meeting_external_link': ' ',\n    'meeting_start_time': ' ',\n    'meeting_end_time': ' ',\n    'related_to_event': '  ',\n    'create_meeting':' ',\n    'create_meeting_page':' ',\n    'online_external': ' ',\n    'filter_meetings': '    ',\n    'service_type':'  ',\n    'internal':' ',\n    'bigblue':'  ',\n    \n\n    'exhibition_info':'',\n    'exhibition_detail': ' ',\n    'exhibition_title':' /',\n    'related_to_event': '  ',\n    'create_exhibition':' ',\n    'create_exhibition_page':' ',\n    'exhibitions': '',\n    'stations': ' ',\n    'enter_room_with_admin': '   ',\n\n    'choose_participants': '     ',\n    'participants':' ',\n    'add_participants': '  ',\n\n    'pages':'',\n    'page_content':' ',\n    'page_title':' ',\n    'create_page':' ',\n    'default_page':'  ',\n    'default_page_info':'          ',\n\n    'create_upload':' ',\n    'upload_title':' ',\n    'default_is_private_upload':'      ',\n    'cover': '',\n    'file' : '',\n    'video': '',\n    'choose_file': ' ',\n    'resources': '',\n    'all': '',\n    'resource_type': ' ',\n\n    'q_and_a_s': '   ',\n    'create_question_page':' ',\n    'create_question':' ',\n    'question_content':' ',\n    'default_is_private_question':'     ',\n    '':'',\n\n    'take_me_home': '',\n    'chats': '',\n    'details':'',\n    'welcome':' ',\n    'welcome_note':'                  .',\n    'sign_up_now':'    ',\n    'your_email':'',\n    'your_name':' ',\n    'choose_password':' ',\n    'repeat_password':' ',\n    'password_rule':'     ',\n    'sign_up_and_continue':'   ',\n    'login_if_registered':'     ',\n    'if_not_registered': '    ',\n    'login':' ',\n    'sign_up':'  ',\n    'password':' ',\n    'enter_bigblue_room':'   ',\n    '':'',\n\n    'poll_content':'  ',\n    'single_select':'  ',\n    'multiple_select':'   ',\n    'star':'',\n    'binary':'/',\n    'trinary':'//',\n    'answer_type':' ',\n    'select_content':'    ',\n    'separate_with_enter':'  enter     .',\n    'polls':'',\n\n    'per_display':'  ',\n    'sata_displays': '  ',\n    'my_profile':' ',\n    'email_and_password_does_not_match':'     ',\n    'change_avatar': ' ',\n    'profile':'',\n    'recent_meetings':'  ',\n    'recent_events':'  ',\n    'recent_exhibitions':'  ',\n    'country':'',\n    'is_active': '',\n    'is_active_notice': '        ',\n    'forget_password': '  ',\n    'you_are_not_registered': '         ',\n    'not_registered_note':'       .',\n    'just_listen_click':'       ',\n    'piano1':' ',\n    'piano2':' ',\n    'ended':'',\n    'quran':'',\n    'applause1':'',\n    'applause2':' ',\n    'laugh':'',\n    'laughing':'',\n    'snoring':'  ',\n    'throat':'  ',\n    'footsteps':' ',\n    'play_sound':'   ',\n    'remaining':'',\n    'seconds':'',\n    'anthem-iran': '  ',\n    'Permission denied': '        ',\n    'error': '',\n    'sata': '',\n    'close': '',\n    'maximize': '',\n    'yes': '',\n    'no': '',\n    'abstention':'',\n    'viewers': '',\n    'my_calendar':' ',\n    'registeration':'  ',\n    'registered':'  ',\n    'not_registered':'  ',\n    'are_you_sure':'  ',\n    'delete':'',\n    'true':'',\n    'false':'',\n    'create_event':' ',\n    'create_exhibition':' ',\n    'modify_ability':'  ',\n    'administration':' ',\n    'view':'',\n    'out_of_time':'   ',\n    'room_is_full':'  ',\n    'unregister': '  ',\n    'register':' ',\n    'check_your_spam_folder': '     spam    ',\n    'your_account_is_not_verified': '           ',\n    'verfication_code': ' ',\n    'email':'',\n    'name':' ',\n    'password':'',\n    'password_confirmation':'  ',\n    'file':'',\n    'info': '',\n    'title': '',\n    'the_following_should_not_be_empty': '     ',\n    'error':'',\n    'no_result_to_show':'    ',\n    'try_adjusting_your_search':'      ',\n    'cas':'  ',\n    'more':'',\n    'date_from':' ',\n    'date_to':' ',\n    'logout':'',\n    'write_something':'  ...',\n    'provide_following_info':'    ',\n    'cancel':'',\n    'submit':'',    \n    'filter':' ',\n    'search_placeholder':'...',\n    'contains_words': ' ',\n    'save':'',\n    'filter_and_search':'  ',\n    'tags': ' ',\n    'is_private':'',\n    'speakers': ' ',\n    'listeners': '',\n    'moderator': '',\n    'listener': '',\n    'presenter': ' ',\n    'speaker': ' ',\n    'calendar':'',\n    'enter_room': '  ',\n    'default_is_private_info':'                ',\n  },\n\n  'english' : {\n    'overview': 'Overview',\n    'events': 'Events',\n    'home': 'Home',\n    'meetings': 'Meetings',\n    'users': 'Users',\n    'your_country': 'Your Country',\n    'bio': 'Bio',\n    'write_about_yourself': 'Write about yourself',\n    'complete_your_profile':'Complete your profile',\n    'continue': 'Continue',\n    'profiles': 'Users',\n    'settings':'Settings',\n\n    'event_detail':'Details',\n    'event_title':\"Event's title\",\n    'event_info':'More info',\n    'event_type':'Event type',\n    'event':'Event',\n    'create_event': 'Create Event',\n    'create_event_page':'Create Event',\n    'in_person': 'In person',\n    'online': 'Online',\n    'hybrid': 'Hybrid',\n    'filter_events':'Filter events',\n    'event_start_date': 'Starts at',\n    'event_end_date': 'Ends at',\n    'all_events':'All events',\n    'event_shortname': 'Event shortname',\n\n\n    'abilities':' ',\n    'restrictions':'  ',\n    'reports':'',\n    '':'',\n    \n    'meeting_info': 'More info',\n    'meeting_title':'Meeting title',\n    'meeting_detail':'Details',\n    'meeting_type': 'Meeting tpe',\n    'meeting_capacity': 'Meeting capacity',\n    'meeting_external_link': 'External link',\n    'meeting_start_time': 'Starts at',\n    'meeting_end_time': 'Ends at',\n    'related_to_event': 'Related to event',\n    'create_meeting':'Create meeting',\n    'create_meeting_page':'Create meeting',\n    'online_external': 'Online/External',\n    'filter_meetings': 'Filter & search meetings',\n    'service_type':'Service type',\n    'internal': 'Internal collaboration room',\n    'bigblue': 'BigBlueButton',\n    \n\n    'exhibition_info':'More info',\n    'exhibition_detail': 'Details',\n    'exhibition_title': 'Title',\n    'related_to_event': 'Event',\n    'create_exhibition': 'Create booth',\n    'create_exhibition_page':'Create booth',\n    'exhibitions': 'Exhibitions',\n    'stations': 'Stations',\n    'enter_room_with_admin': 'Negotiate with Exhibitor',\n\n    'choose_participants': 'Choose participants',\n    'participants': 'Participants',\n    'add_participants': 'Add participants',\n\n    'pages':'Pages',\n    'page_content':'Page content',\n    'page_title': 'Page title',\n    'create_page': 'Create page',\n    'default_page': 'Deafult page',\n    'default_page_info': 'Show this page as default',\n\n    'create_upload': 'Upload resource',\n    'upload_title': 'Resource title',\n    'default_is_private_upload': 'This resource is private. Only moderators can view this.',\n    'cover': 'Cover image',\n    'file' : 'File',\n    'video': 'Video',\n    'choose_file': 'Choose file',\n    'resources': 'Resources',\n    'all': 'All',\n    'resource_type': 'Resource type',\n\n    'q_and_a_s': 'Questions & answers',\n    'create_question_page': 'Submit question',\n    'create_question':'Ask your question',\n    'question_content': 'Content',\n    'default_is_private_question': 'Only moderators can view the question',\n    '':'',\n\n    'chats': 'Chats',\n    'details':'Details',\n    'welcome': 'Welcome',\n    'welcome_note': 'In this application, you can participate in the exisiting events or you can manage your own events.',\n    'sign_up_now': 'Sign up now',\n    'your_email':'Email',\n    'your_name': 'Fullname',\n    'choose_password': 'Choose pasword',\n    'repeat_password': 'Repeat password',\n    'password_rule': 'Password should be at least 8 character',\n    'sign_up_and_continue': 'Sign up and continue',\n    'login_if_registered': 'If you already registered',\n    'if_not_registered': 'If you did not register',\n    'login':'Login',\n    'sign_up': 'Sign up',\n    'password': 'Password',\n    'enter_bigblue_room': 'Enter room (BBB)',\n    '':'',\n\n    'poll_content':'  ',\n    'single_select':'  ',\n    'multiple_select':'   ',\n    'star':'',\n    'binary':'/',\n    'trinary':'//',\n    'answer_type':' ',\n    'select_content':'    ',\n    'separate_with_enter':'  enter     .',\n    'polls':'Polls',\n\n    'per_display': 'Per display',\n    'sata_displays': 'SATA displays',\n    'my_profile':'My profile',\n    'email_and_password_does_not_match': 'Email and password does not match',\n    'change_avatar': 'Change avatar',\n    'profile':'Profile',\n    'recent_meetings': 'Recent meetings',\n    'recent_events': 'Recent events',\n    'recent_exhibitions': 'Recent exhibitions',\n    'country':'Country',\n    'is_active': 'Active',\n    'is_active_notice': 'Only active boothes can be viewed',\n    'forget_password': 'Forget your password?',\n    'you_are_not_registered': 'You did not register in this event or meeting',\n    'not_registered_note': 'Do you want to register now?',\n    'just_listen_click': 'If you just want to listen, click here!',\n    'piano1': 'Piano 1',\n    'piano2': 'Piano 2',\n    'ended':'Ended',\n    'quran':'Quran',\n    'applause1': 'Applause 1',\n    'applause2': 'Applause 2',\n    'laugh':'',\n    'laughing':'',\n    'snoring': 'Snoring',\n    'throat': 'Clear throat',\n    'footsteps': 'footsteps',\n    'play_sound': 'Play sound',\n    'remaining':'Remaining',\n    'seconds':'Seconds',\n    'anthem-iran': 'IRI National Anthem',\n    'Permission denied': 'Permission to webcam/microphone is denied',\n    'sata': 'SATA',\n    'close': 'Close',\n    'maximize': 'Maximize',\n    'yes': 'Yes',\n    'no': 'No',\n    'abstention':'Abstention',\n    'viewers': 'Viewers',\n    'my_calendar':'My calendar',\n    'registeration': 'Status',\n    'registered': 'Registered',\n    'not_registered': 'Not registered',\n    'are_you_sure':'Are you sure?',\n    'delete':'Delete',\n    'true':'True',\n    'false':'False',\n    'create_event':'Create Event',\n    'create_exhibition': 'Create Booth',\n    'modify_ability': 'Modify user abilities',\n    'administration': 'Administration',\n    'view':'View',\n    'out_of_time': 'Out of time',\n    'room_is_full':'Room is full',\n    'unregister': 'Leave',\n    'register': 'Register',\n    'check_your_spam_folder': '     spam    ',\n    'your_account_is_not_verified': '           ',\n    'verfication_code': 'Verification code',\n    'email': 'Email',\n    'name': 'Full name',\n    'password':'Password',\n    'password_confirmation': 'Password confirmation',\n    'file':'File',\n    'info': 'Info',\n    'title': 'Title',\n    'the_following_should_not_be_empty': 'The following field(s) cannot be empty',\n    'error': 'Error',\n    'no_result_to_show': 'No results to show',\n    'try_adjusting_your_search': 'Adjust your search',\n    'cas':'  ',\n    'more':'More',\n    'date_from':'From date',\n    'date_to':'To date',\n    'logout': 'Logout',\n    'write_something': 'Write something ...',\n    'provide_following_info':'Fill out the following items',\n    'cancel':'Cancel',\n    'submit':'Submit',    \n    'filter': 'Filter results',\n    'search_placeholder':'Search ...',\n    'contains_words': 'Contains words',\n    'save':'Save',\n    'filter_and_search':'Filter results',\n    'tags': 'Tags',\n    'is_private': 'Private',\n    'speakers': 'Speakers',\n    'listeners': 'Listeners',\n    'moderator': 'Moderator',\n    'listener': 'Listener',\n    'presenter': 'Presenter',\n    'speaker': 'Speaker',\n    'calendar': 'Calendar',\n    'enter_room': 'Enter room',\n    'default_is_private_info': 'User cannot register themselves. They should be added by moderators',\n  }\n\n}\n","import React from 'react'\n//import '../../css/demo.min.css';\n//import '../../css/tabler.min.css';\nimport { useHistory } from \"react-router-dom\";\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nvar t = dict['farsi']\nexport default class Header extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.getList = this.getList.bind(this);\n        this.logout = this.logout.bind(this);\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            event_name: window.localStorage.getItem('event_name'),\n            profile: { name: '', initials: '' },\n            userAbilities: null,\n\n            langBtnActive: false,\n            eventBtnActive: false,\n        }\n\n    }\n\n\n    componentWillMount() {\n        ModelStore.on(\"got_list\", this.getList);\n        if(this.state.lang || this.state.lang !== null) {\n            t = dict[this.state.lang]\n        }     \n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"got_list\", this.getList);\n    }\n\n    componentDidMount() {\n        if (!this.state.lang || this.state.lang === '') {\n            this.changeLang('farsi', 'rtl')\n        }\n        if (this.state.token && this.state.token.length > 10) {\n            MyActions.getList('profiles/mine', 1, {}, this.state.token);\n        } else {\n            this.props.history.push(\"/login\")\n        }\n        document.dir = this.state.dir\n    }\n\n    getList() {\n        var list = ModelStore.getList()\n        var klass = ModelStore.getKlass()\n\n        if (list && klass === 'MyProfile') {\n            this.setState({\n                profile: list[0],\n                userAbilities: list[0].abilities\n            });\n        }\n    }\n\n\n\n\n    handleChange(obj) {\n\n    }\n\n    logout() {\n        this.setState({ token: null });\n        window.localStorage.removeItem('token');\n        window.location.replace('/')\n    }\n\n    settingsBtn() {\n        if (this.state.userAbilities && this.state.userAbilities.administration) {\n            return (\n                <li className=\"nav-item\">\n                    <a className=\"nav-link\" href=\"/#/settings\">\n                        <span className=\"nav-link-icon d-md-none d-lg-inline-block\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z\" /><circle cx=\"12\" cy=\"12\" r=\"3\" /></svg>\n                        </span>\n                        <span className=\"nav-link-title\">{t['settings']}</span>\n                    </a>\n                </li>\n            )\n        }\n    }\n\n    eventsBtn() {\n        if (this.state.event_name === '' || this.state.event_name === null) {\n            return (\n                <li className=\"nav-item\">\n                    <a className=\"nav-link\" href=\"/#/events\">\n                        <span className=\"nav-link-icon d-md-none d-lg-inline-block\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"4\" y=\"5\" width=\"16\" height=\"16\" rx=\"2\" /><line x1=\"16\" y1=\"3\" x2=\"16\" y2=\"7\" /><line x1=\"8\" y1=\"3\" x2=\"8\" y2=\"7\" /><line x1=\"4\" y1=\"11\" x2=\"20\" y2=\"11\" /><rect x=\"8\" y=\"15\" width=\"2\" height=\"2\" /></svg>\n                        </span>\n                        <span className=\"nav-link-title\">{t['events']}</span>\n                    </a>\n                </li>\n            )\n        }\n    }\n\n    languageBtn() {\n        return (\n            <div className=\"navbar-nav flex-row order-md-1\">\n                <div className=\"nav-item\">\n                    <div class=\"dropdown\">\n                        <button type=\"button\" onClick={() => this.setState({ langBtnActive: !this.state.langBtnActive })} className={this.state.langBtnActive ? \"btn btn-secondary dropdown-toggle show\" : \"btn btn-secondary dropdown-toggle\"} data-bs-toggle=\"dropdown\">\n                            <span className='mx-1'>Language</span>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M5 7h7m-2 -2v2a5 8 0 0 1 -5 8m1 -4a7 4 0 0 0 6.7 4\" /><path d=\"M11 19l4 -9l4 9m-.9 -2h-6.2\" /></svg>\n                        </button>\n                        <div className={this.state.langBtnActive ? \"dropdown-menu show\" : \"dropdown-menu\"}>\n                            <a class=\"dropdown-item\" onClick={() => this.changeLang('farsi', 'rtl')}>\n                                \n                            </a>\n                            <a class=\"dropdown-item\" onClick={() => this.changeLang('english', 'ltr')}>\n                                English\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    changeLang(lang, dir) {\n        window.localStorage.setItem('lang', lang)\n        window.localStorage.setItem('dir', dir)\n        window.location.reload()\n    }\n\n\n    eventBadge() {\n        if (this.state.event_name && this.state.event_name !== '') {\n            return (\n                <div className=\"navbar-nav flex-row order-md-2 mx-1\">\n                    <div className=\"nav-item\">\n                        <div class=\"dropdown\">\n                            <button type=\"button\" onClick={() => this.setState({ eventBtnActive: !this.state.eventBtnActive })} className={this.state.eventBtnActive ? \"btn btn-facebook dropdown-toggle show\" : \"btn btn-facebook dropdown-toggle\"} data-bs-toggle=\"dropdown\">\n                                <span className='mx-2'>{this.state.event_name}</span>\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"4\" y=\"5\" width=\"16\" height=\"16\" rx=\"2\" /><line x1=\"16\" y1=\"3\" x2=\"16\" y2=\"7\" /><line x1=\"8\" y1=\"3\" x2=\"8\" y2=\"7\" /><line x1=\"4\" y1=\"11\" x2=\"20\" y2=\"11\" /><line x1=\"11\" y1=\"15\" x2=\"12\" y2=\"15\" /><line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"18\" /></svg>\n                            </button>\n                            <div className={this.state.eventBtnActive ? \"dropdown-menu show\" : \"dropdown-menu\"}>\n                                <a class=\"dropdown-item\" onClick={() => this.changeEvent()}>\n                                    {t['all_events']}\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n\n    }\n\n    changeEvent() {\n        window.localStorage.setItem('event_id', '')\n        window.localStorage.setItem('event_name', '')\n        window.location.reload()\n    }\n\n    avatar(profile) {\n        if (profile.cover) {\n            return (\n                <span class=\"avatar avatar-sm\" style={{ backgroundImage: \"url(\" + profile.cover + \")\" }} ></span>\n            )\n        } else {\n            return (\n                <span class=\"avatar avatar-sm\" >\n                    {profile.initials}\n                </span>\n            )\n        }\n    }\n\n    render() {\n        return (\n            <header className=\"navbar navbar-expand-md navbar-dark d-print-none\">\n                <div className=\"container-xl\">\n                    <button\n                        className=\"navbar-toggler\"\n                        type=\"button\"\n                        data-bs-toggle=\"collapse\"\n                        data-bs-target=\"#navbar-menu\"\n                    >\n                        <span className=\"navbar-toggler-icon\"></span>\n                    </button>\n                    <h1 className=\"navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3\">\n                        <a href=\"/#/\"></a>\n                    </h1>\n                    <div className=\"navbar-nav flex-row order-md-last mx-2\">\n                        <div className=\"nav-item dropdown\">\n                            <a\n                                href=\"#\"\n                                className=\"nav-link d-flex lh-1 text-reset p-0\"\n                                data-bs-toggle=\"dropdown\"\n                                aria-label=\"Open user menu\"\n                            >\n                                {this.avatar(this.state.profile)}\n                                <div className=\"d-xl-block ps-2\">\n                                    <div>{this.state.profile.name}</div>\n                                    <div className=\"mt-1 small text-muted\"></div>\n                                </div>\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-end dropdown-menu-arrow\">\n                            <a href={'#/profiles/'+this.state.profile.id} className=\"dropdown-item\">\n                                    {t['my_profile']}\n                                </a>\n                                <a onClick={() => this.logout()} className=\"dropdown-item\">\n                                    {t['logout']}\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n\n                    {this.languageBtn()}\n                    {this.eventBadge()}\n\n                    <div className=\"collapse navbar-collapse\" id=\"navbar-menu\">\n                        <div className=\"d-flex flex-column flex-md-row flex-fill align-items-stretch align-items-md-center\">\n                            <ul className=\"navbar-nav\">\n                                <li className=\"nav-item\">\n                                    <a className=\"nav-link\" href=\"#/\">\n                                        <span className=\"nav-link-icon d-md-none d-lg-inline-block\">\n                                            <svg\n                                                xmlns=\"http://www.w3.org/2000/svg\"\n                                                className=\"icon\"\n                                                width=\"24\"\n                                                height=\"24\"\n                                                viewBox=\"0 0 24 24\"\n                                                stroke-width=\"2\"\n                                                stroke=\"currentColor\"\n                                                fill=\"none\"\n                                                stroke-linecap=\"round\"\n                                                stroke-linejoin=\"round\"\n                                            >\n                                                <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n                                                <polyline points=\"5 12 3 12 12 3 21 12 19 12\" />\n                                                <path d=\"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7\" />\n                                                <path d=\"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6\" />\n                                            </svg>\n                                        </span>\n                                        <span className=\"nav-link-title\">{t['home']}</span>\n                                    </a>\n                                </li>\n\n                                {this.eventsBtn()}\n\n                                <li className=\"nav-item\">\n                                    <a className=\"nav-link\" href={\"#/meetings\"}>\n                                        <span className=\"nav-link-icon d-md-none d-lg-inline-block\">\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"3\" y1=\"4\" x2=\"21\" y2=\"4\" /><path d=\"M4 4v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-10\" /><line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"20\" /><line x1=\"9\" y1=\"20\" x2=\"15\" y2=\"20\" /><path d=\"M8 12l3 -3l2 2l3 -3\" /></svg>\n                                        </span>\n                                        <span className=\"nav-link-title\">{t['meetings']}</span>\n                                    </a>\n                                </li>\n\n                                <li className=\"nav-item\">\n                                    <a className=\"nav-link\" href={\"#/exhibitions\"}>\n                                        <span className=\"nav-link-icon d-md-none d-lg-inline-block\">\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"9\" /><line x1=\"3.6\" y1=\"9\" x2=\"20.4\" y2=\"9\" /><line x1=\"3.6\" y1=\"15\" x2=\"20.4\" y2=\"15\" /><path d=\"M11.5 3a17 17 0 0 0 0 18\" /><path d=\"M12.5 3a17 17 0 0 1 0 18\" /></svg>\n                                        </span>\n                                        <span className=\"nav-link-title\">{t['exhibitions']}</span>\n                                    </a>\n                                </li>\n\n                                <li className=\"nav-item\">\n                                    <a className=\"nav-link\" href=\"#/calendar\">\n                                        <span className=\"nav-link-icon d-md-none d-lg-inline-block\">\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"4\" y=\"5\" width=\"16\" height=\"16\" rx=\"2\" /><line x1=\"16\" y1=\"3\" x2=\"16\" y2=\"7\" /><line x1=\"8\" y1=\"3\" x2=\"8\" y2=\"7\" /><line x1=\"4\" y1=\"11\" x2=\"20\" y2=\"11\" /><line x1=\"11\" y1=\"15\" x2=\"12\" y2=\"15\" /><line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"18\" /></svg>\n                                        </span>\n                                        <span className=\"nav-link-title\">{t['my_calendar']}</span>\n                                    </a>\n                                </li>\n\n                                <li className=\"nav-item\">\n                                    <a className=\"nav-link\" href=\"#/profiles\">\n                                        <span className=\"nav-link-icon d-md-none d-lg-inline-block\">\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"9\" cy=\"7\" r=\"4\" /><path d=\"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2\" /><path d=\"M16 3.13a4 4 0 0 1 0 7.75\" /><path d=\"M21 21v-2a4 4 0 0 0 -3 -3.85\" /></svg>\n                                        </span>\n                                        <span className=\"nav-link-title\">{t['users']}</span>\n                                    </a>\n                                </li>\n\n\n                                {this.settingsBtn()}\n\n\n\n\n\n\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </header>\n        )\n    }\n}\n\n\n\n\n","import React from \"react\";\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport { v4 as uuidv4 } from 'uuid';\nimport moment from 'jalali-moment';\nimport mm from 'moment';\n\nmoment.locale('fa', { useGregorianParser: true });\n\n\n\nconst EventCard = (props) => {\n    const t = dict[props.lang]\n    function formatGregorianDate(gregorianDate) {\n        var date = new Date(gregorianDate);\n        var day = date.getDate();\n        var month = date.getMonth() + 1;\n        var year = date.getFullYear();\n        var hours = date.getHours();\n        var minutes = date.getMinutes();\n        var fullYear = year + '/' + month + '/' + day + ' ' + hours + ':' + minutes;\n        return fullYear;\n    }\n\n\n    function cardCover(event) {\n        if (event.cover) {\n            return (\n                <a href={'/#/events/' + event.id}>\n                    <div class=\"card-img-top img-responsive img-responsive-16by9\" style={{ backgroundImage: \"url(\" + event.cover + \")\" }}></div>\n                </a>\n            )\n        }\n    }\n\n    function tagsShow(tags) {\n        var result = []\n        if (tags && tags.length > 0) {\n            tags.map((tag) => {\n                result.push(<span class=\"badge bg-lime-lt\" style={{ margin: '2px' }}>{tag.title}</span>)\n            })\n        }\n        return result\n    }\n\n\n    function attend(event) {\n        console.log('event', event)\n        if (!event.is_admin) {\n            if (event.attending) {\n                return (\n                    <div className=\"card-footer\" style={{ display: 'initial' }}>\n                        <div class=\"d-flex\">\n                            <a href={'/#/events/' + event.id} class=\"btn btn-facebook ms-auto mx-1\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"2\" /><path d=\"M12 19c-4 0 -7.333 -2.333 -10 -7c2.667 -4.667 6 -7 10 -7s7.333 2.333 10 7c-.42 .736 -.858 1.414 -1.311 2.033\" /><path d=\"M15 19l2 2l4 -4\" /></svg>\n                                {t['view']}\n                            </a>\n                            <a onClick={() => props.attend(false, event.id)} class=\"btn btn-outline-secondary\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"mx-1\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"9\" /><path d=\"M10 10l4 4m0 -4l-4 4\" /></svg>\n                                {t['unregister']}\n                            </a>\n                        </div>\n                    </div>\n                )\n            } else {\n                return (\n                    <div className=\"card-footer\" style={{ display: 'initial' }}>\n                        <div class=\"d-flex\">\n                            <a onClick={() => props.attend(true, event.id)} class=\"btn bg-dark-lt ms-auto\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"mx-1\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"9\" /><path d=\"M9 12l2 2l4 -4\" /></svg>\n                                {t['register']}\n                            </a>\n                        </div>\n                    </div>\n                )\n            }\n        }\n    }\n\n\n    function eventLink(event) {\n        if (event.attending) {\n            return (\n                <a href={'/#/events/' + event.id}>\n                    {event.title}\n                </a>\n            )\n        } else {\n            return (\n                <span>{event.title}</span>\n            )\n        }\n    }\n\n\n    function calendarType(date) {\n        if (props.lang === 'farsi') {\n            return (\n                moment(formatGregorianDate(date)).format('jYYYY/jMM/jDD')\n            )\n        } else {\n            return (\n                mm(date).format('YYYY/MM/DD')\n            )\n        }\n    }\n\n    function eventItems() {\n        var result = []\n        if (props.events) {\n            props.events.map((event) => {\n                result.push(\n\n                    <div className={props.col ? \"col-md-\" + props.col : \"col-md-8\"}>\n                        <div className=\"card\">\n                            {cardCover(event)}\n                            <div className=\"card-body\">\n                                <h3 class=\"card-title\">\n                                    {eventLink(event)}\n                                </h3>\n                                <p style={{ textAlign: 'justify' }}>\n                                    {event.truncated_info}\n                                </p>\n\n                                <h4>{t['event_type']}:</h4>\n                                <div class=\"text-muted mb-3\">\n                                    {t[event.event_type]}\n                                </div>\n\n                                <div className=\"row\">\n                                    <div className=\"col-md-6\">\n                                        <h4>{t['meeting_start_time']}:</h4>\n                                        <div class=\"text-muted mb-3\">\n                                            {calendarType(event.start_date)}\n                                        </div>\n                                    </div>\n                                    <div className=\"col-md-6\">\n                                        <h4>{t['meeting_end_time']}:</h4>\n                                        <div class=\"text-muted mb-3\">\n                                            {calendarType(event.end_date)}\n                                        </div>\n                                    </div>\n                                </div>\n\n\n\n\n\n                                <h4>{t['tags']}</h4>\n                                <div class=\"text-muted mb-3\">\n                                    {tagsShow(event.tags)}\n                                </div>\n                            </div>\n                            {attend(event)}\n                        </div>\n                    </div>\n                )\n            })\n        }\n        return result\n    }\n\n    return (\n        <React.Fragment>\n            {eventItems()}\n        </React.Fragment>\n    )\n}\nexport default EventCard;\n","import React from \"react\";\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\n\n\nconst ProfileCard = (props) => {\n    return (\n<div className=\"col-lg-4\">\n                <div className=\"card\" style={{height: '24rem'}}>\n                    <div className=\"card-header\">Pepole to follow</div>\n                  <div className=\"list-group card-list-group card-body-scrollable card-body-scrollable-shadow\">\n                    <div className=\"list-group-item\">\n                      <div className=\"row g-2 align-items-center\">\n                        <div className=\"col-auto text-h3\">\n                          1\n                        </div>\n                        <div className=\"col-auto\">\n                          <img src=\"./static/tracks/a4fb1d293bd8d3fd38352418c50fcf1369a7a87d.jpg\" className=\"rounded\" alt=\"Gr ty\" width=\"40\" height=\"40\" /> \n                        </div>\n                        <div className=\"col\">\n                          Gr ty\n                          <div className=\"text-muted\">\n                            GOLEC UORKIESTRA,\n                            Gromee,\n                            Bedoes\n                          </div>\n                        </div>\n                        <div className=\"col-auto text-muted\">\n                          03:41\n                        </div>\n                        <div className=\"col-auto\">\n                          <a href=\"#\" className=\"link-secondary\">\n                            <button className=\"switch-icon\" data-bs-toggle=\"switch-icon\">\n                              <span className=\"switch-icon-a text-muted\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                              <span className=\"switch-icon-b text-red\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-filled\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                            </button>\n                          </a>\n                        </div>\n                        <div className=\"col-auto lh-1\">\n                          <div className=\"dropdown\">\n                            <a href=\"#\" className=\"link-secondary\" data-bs-toggle=\"dropdown\">  \n                              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"5\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"19\" cy=\"12\" r=\"1\"></circle></svg>\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-end\">\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Action\n                              </a>\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Another action\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"list-group-item\">\n                      <div className=\"row g-2 align-items-center\">\n                        <div className=\"col-auto text-h3\">\n                          2\n                        </div>\n                        <div className=\"col-auto\">\n                          <img src=\"./static/tracks/f04bb6fba32e89475d9981007aff21e13745dec2.jpg\" className=\"rounded\" alt=\"High Life\" width=\"40\" height=\"40\" />\n                        </div>\n                        <div className=\"col\">\n                          High Life\n                          <div className=\"text-muted\">\n                            Daft Punk\n                          </div>\n                        </div>\n                        <div className=\"col-auto text-muted\">\n                          03:21\n                        </div>\n                        <div className=\"col-auto\">\n                          <a href=\"#\" className=\"link-secondary\">\n                            <button className=\"switch-icon\" data-bs-toggle=\"switch-icon\">\n                              <span className=\"switch-icon-a text-muted\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                              <span className=\"switch-icon-b text-red\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-filled\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                            </button>\n                          </a>\n                        </div>\n                        <div className=\"col-auto lh-1\">\n                          <div className=\"dropdown\">\n                            <a href=\"#\" className=\"link-secondary\" data-bs-toggle=\"dropdown\">  \n                              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"5\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"19\" cy=\"12\" r=\"1\"></circle></svg>\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-end\">\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Action\n                              </a>\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Another action\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"list-group-item\">\n                      <div className=\"row g-2 align-items-center\">\n                        <div className=\"col-auto text-h3\">\n                          3\n                        </div>\n                        <div className=\"col-auto\">\n                          <img src=\"./static/tracks/c3f13b4f7a674abda9aa36fd72fa341e918c0f26.jpg\" className=\"rounded\" alt=\"Houdini\" width=\"40\" height=\"40\" />\n                        </div>\n                        <div className=\"col\">\n                          Houdini\n                          <div className=\"text-muted\">\n                            Foster The People\n                          </div>\n                        </div>\n                        <div className=\"col-auto text-muted\">\n                          03:23\n                        </div>\n                        <div className=\"col-auto\">\n                          <a href=\"#\" className=\"link-secondary\">\n                            <button className=\"switch-icon\" data-bs-toggle=\"switch-icon\">\n                              <span className=\"switch-icon-a text-muted\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                              <span className=\"switch-icon-b text-red\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-filled\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                            </button>\n                          </a>\n                        </div>\n                        <div className=\"col-auto lh-1\">\n                          <div className=\"dropdown\">\n                            <a href=\"#\" className=\"link-secondary\" data-bs-toggle=\"dropdown\">  \n                              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"5\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"19\" cy=\"12\" r=\"1\"></circle></svg>\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-end\">\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Action\n                              </a>\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Another action\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"list-group-item\">\n                      <div className=\"row g-2 align-items-center\">\n                        <div className=\"col-auto text-h3\">\n                          4\n                        </div>\n                        <div className=\"col-auto\">\n                          <img src=\"./static/tracks/4d4ab714dfca7b9df41d4a02a2c39394ebdeb6b6.jpg\" className=\"rounded\" alt=\"Safe And Sound\" width=\"40\" height=\"40\"/>\n                        </div>\n                        <div className=\"col\">\n                          Safe And Sound\n                          <div className=\"text-muted\">\n                            Capital Cities\n                          </div>\n                        </div>\n                        <div className=\"col-auto text-muted\">\n                          03:12\n                        </div>\n                        <div className=\"col-auto\">\n                          <a href=\"#\" className=\"link-secondary\">\n                            <button className=\"switch-icon\" data-bs-toggle=\"switch-icon\">\n                              <span className=\"switch-icon-a text-muted\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                              <span className=\"switch-icon-b text-red\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-filled\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                            </button>\n                          </a>\n                        </div>\n                        <div className=\"col-auto lh-1\">\n                          <div className=\"dropdown\">\n                            <a href=\"#\" className=\"link-secondary\" data-bs-toggle=\"dropdown\">  \n                              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"5\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"19\" cy=\"12\" r=\"1\"></circle></svg>\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-end\">\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Action\n                              </a>\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Another action\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"list-group-item\">\n                      <div className=\"row g-2 align-items-center\">\n                        <div className=\"col-auto text-h3\">\n                          5\n                        </div>\n                        <div className=\"col-auto\">\n                          <img src=\"./static/tracks/79b2422b467ad20c07576e8f8f5f2f1692ac7142.jpg\" className=\"rounded\" alt=\"Partied Out\" width=\"40\" height=\"40\"/>\n                        </div>\n                        <div className=\"col\">\n                          Partied Out\n                          <div className=\"text-muted\">\n                            Con Bro Chill\n                          </div>\n                        </div>\n                        <div className=\"col-auto text-muted\">\n                          03:17\n                        </div>\n                        <div className=\"col-auto\">\n                          <a href=\"#\" className=\"link-secondary\">\n                            <button className=\"switch-icon\" data-bs-toggle=\"switch-icon\">\n                              <span className=\"switch-icon-a text-muted\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                              <span className=\"switch-icon-b text-red\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-filled\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                            </button>\n                          </a>\n                        </div>\n                        <div className=\"col-auto lh-1\">\n                          <div className=\"dropdown\">\n                            <a href=\"#\" className=\"link-secondary\" data-bs-toggle=\"dropdown\">  \n                              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"5\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"19\" cy=\"12\" r=\"1\"></circle></svg>\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-end\">\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Action\n                              </a>\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Another action\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"list-group-item\">\n                      <div className=\"row g-2 align-items-center\">\n                        <div className=\"col-auto text-h3\">\n                          6\n                        </div>\n                        <div className=\"col-auto\">\n                          <img src=\"./static/tracks/aac97056fc02fe02c7e95f7ff77a07c6e82f7d6e.jpg\" className=\"rounded\" alt=\"Runaway (U &amp; I)\" width=\"40\" height=\"40\" />\n                        </div>\n                        <div className=\"col\">\n                          Runaway (U &amp; I)\n                          <div className=\"text-muted\">\n                            Galantis\n                          </div>\n                        </div>\n                        <div className=\"col-auto text-muted\">\n                          03:47\n                        </div>\n                        <div className=\"col-auto\">\n                          <a href=\"#\" className=\"link-secondary\">\n                            <button className=\"switch-icon\" data-bs-toggle=\"switch-icon\">\n                              <span className=\"switch-icon-a text-muted\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                              <span className=\"switch-icon-b text-red\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-filled\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                            </button>\n                          </a>\n                        </div>\n                        <div className=\"col-auto lh-1\">\n                          <div className=\"dropdown\">\n                            <a href=\"#\" className=\"link-secondary\" data-bs-toggle=\"dropdown\">  \n                              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"5\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"19\" cy=\"12\" r=\"1\"></circle></svg>\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-end\">\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Action\n                              </a>\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Another action\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"list-group-item\">\n                      <div className=\"row g-2 align-items-center\">\n                        <div className=\"col-auto text-h3\">\n                          7\n                        </div>\n                        <div className=\"col-auto\">\n                          <img src=\"./static/tracks/859337f0eaa49b1ad6ed76719b7c1ae26d6412c8.jpg\" className=\"rounded\" alt=\"Light It Up\" width=\"40\" height=\"40\"/>\n                        </div>\n                        <div className=\"col\">\n                          Light It Up \n                          <div className=\"text-muted\">\n                            Major Lazer,\n                            Nyla,\n                            Fuse ODG\n                          </div>\n                        </div>\n                        <div className=\"col-auto text-muted\">\n                          02:46\n                        </div>\n                        <div className=\"col-auto\">\n                          <a href=\"#\" className=\"link-secondary\">\n                            <button className=\"switch-icon\" data-bs-toggle=\"switch-icon\">\n                              <span className=\"switch-icon-a text-muted\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                              <span className=\"switch-icon-b text-red\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-filled\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                            </button>\n                          </a>\n                        </div>\n                        <div className=\"col-auto lh-1\">\n                          <div className=\"dropdown\">\n                            <a href=\"#\" className=\"link-secondary\" data-bs-toggle=\"dropdown\">  \n                              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"5\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"19\" cy=\"12\" r=\"1\"></circle></svg>\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-end\">\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Action\n                              </a>\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Another action\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"list-group-item\">\n                      <div className=\"row g-2 align-items-center\">\n                        <div className=\"col-auto text-h3\">\n                          8\n                        </div>\n                        <div className=\"col-auto\">\n                          <img src=\"./static/tracks/2e7357491deb8a6796ee8d9181ca9ea1f407bb5f.jpg\" className=\"rounded\" alt=\"Hangover\" width=\"40\" height=\"40\" />\n                        </div>\n                        <div className=\"col\">\n                          Hangover\n                          <div className=\"text-muted\">\n                            Taio Cruz,\n                            Flo Rida\n                          </div>\n                        </div>\n                        <div className=\"col-auto text-muted\">\n                          04:04\n                        </div>\n                        <div className=\"col-auto\">\n                          <a href=\"#\" className=\"link-secondary\">\n                            <button className=\"switch-icon\" data-bs-toggle=\"switch-icon\">\n                              <span className=\"switch-icon-a text-muted\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                              <span className=\"switch-icon-b text-red\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-filled\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                            </button>\n                          </a>\n                        </div>\n                        <div className=\"col-auto lh-1\">\n                          <div className=\"dropdown\">\n                            <a href=\"#\" className=\"link-secondary\" data-bs-toggle=\"dropdown\">  \n                              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"5\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"19\" cy=\"12\" r=\"1\"></circle></svg>\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-end\">\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Action\n                              </a>\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Another action\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"list-group-item\">\n                      <div className=\"row g-2 align-items-center\">\n                        <div className=\"col-auto text-h3\">\n                          9\n                        </div>\n                        <div className=\"col-auto\">\n                          <img src=\"./static/tracks/c976bfc96d5e44820e553a16a6097cd02a61fd2f.jpg\" className=\"rounded\" alt=\"Shape of You\" width=\"40\" height=\"40\" />\n                        </div>\n                        <div className=\"col\">\n                          Shape of You\n                          <div className=\"text-muted\">\n                            Ed Sheeran\n                          </div>\n                        </div>\n                        <div className=\"col-auto text-muted\">\n                          03:53\n                        </div>\n                        <div className=\"col-auto\">\n                          <a href=\"#\" className=\"link-secondary\">\n                            <button className=\"switch-icon\" data-bs-toggle=\"switch-icon\">\n                              <span className=\"switch-icon-a text-muted\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                              <span className=\"switch-icon-b text-red\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-filled\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                            </button>\n                          </a>\n                        </div>\n                        <div className=\"col-auto lh-1\">\n                          <div className=\"dropdown\">\n                            <a href=\"#\" className=\"link-secondary\" data-bs-toggle=\"dropdown\">\n                              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"5\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"19\" cy=\"12\" r=\"1\"></circle></svg>\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-end\">\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Action\n                              </a>\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Another action\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"list-group-item\">\n                      <div className=\"row g-2 align-items-center\">\n                        <div className=\"col-auto text-h3\">\n                          10\n                        </div>\n                        <div className=\"col-auto\">\n                          <img src=\"./static/tracks/c9a8350feee77e9345eec4155cddc96694803d1a.jpg\" className=\"rounded\" alt=\"Alone\" width=\"40\" height=\"40\" />\n                        </div>\n                        <div className=\"col\">\n                          Alone\n                          <div className=\"text-muted\">\n                            Alan Walker\n                          </div>\n                        </div>\n                        <div className=\"col-auto text-muted\">\n                          02:41\n                        </div>\n                        <div className=\"col-auto\">\n                          <a href=\"#\" className=\"link-secondary\">\n                            <button className=\"switch-icon\" data-bs-toggle=\"switch-icon\">\n                              <span className=\"switch-icon-a text-muted\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                              <span className=\"switch-icon-b text-red\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-filled\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                            </button>\n                          </a>\n                        </div>\n                        <div className=\"col-auto lh-1\">\n                          <div className=\"dropdown\">\n                            <a href=\"#\" className=\"link-secondary\" data-bs-toggle=\"dropdown\">  \n                              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"5\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"19\" cy=\"12\" r=\"1\"></circle></svg>\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-end\">\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Action\n                              </a>\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Another action\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"list-group-item\">\n                      <div className=\"row g-2 align-items-center\">\n                        <div className=\"col-auto text-h3\">\n                          11\n                        </div>\n                        <div className=\"col-auto\">\n                          <img src=\"./static/tracks/fe4ee21d30450829e5b172e806b3c1e14ca1e5f3.jpg\" className=\"rounded\" alt=\"Langrennsfar\" width=\"40\" height=\"40\" />\n                        </div>\n                        <div className=\"col\">\n                          Langrennsfar\n                          <div className=\"text-muted\">\n                            Ylvis\n                          </div>\n                        </div>\n                        <div className=\"col-auto text-muted\">\n                          02:43\n                        </div>\n                        <div className=\"col-auto\">\n                          <a href=\"#\" className=\"link-secondary\">\n                            <button className=\"switch-icon\" data-bs-toggle=\"switch-icon\">\n                              <span className=\"switch-icon-a text-muted\">\n                               \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                              <span className=\"switch-icon-b text-red\">\n                                \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-filled\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                            </button>\n                          </a>\n                        </div>\n                        <div className=\"col-auto lh-1\">\n                          <div className=\"dropdown\">\n                            <a href=\"#\" className=\"link-secondary\" data-bs-toggle=\"dropdown\">  \n                              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"5\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"19\" cy=\"12\" r=\"1\"></circle></svg>\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-end\">\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Action\n                              </a>\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Another action\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"list-group-item\">\n                      <div className=\"row g-2 align-items-center\">\n                        <div className=\"col-auto text-h3\">\n                          12\n                        </div>\n                        <div className=\"col-auto\">\n                          <img src=\"./static/tracks/f4e96086f44c4dff1758b1fc1338cd88c1b5ce9c.jpg\" className=\"rounded\" alt=\"Skibidi\" width=\"40\" height=\"40\" />\n                        </div>\n                        <div className=\"col\">\n                          Skibidi \n                          <div className=\"text-muted\">\n                            Little Big\n                          </div>\n                        </div>\n                        <div className=\"col-auto text-muted\">\n                          03:12\n                        </div>\n                        <div className=\"col-auto\">\n                          <a href=\"#\" className=\"link-secondary\">\n                            <button className=\"switch-icon\" data-bs-toggle=\"switch-icon\">\n                              <span className=\"switch-icon-a text-muted\">\n                               \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                              <span className=\"switch-icon-b text-red\">\n                            \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon icon-filled\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572\"></path></svg>\n                              </span>\n                            </button>\n                          </a>\n                        </div>\n                        <div className=\"col-auto lh-1\">\n                          <div className=\"dropdown\">\n                            <a href=\"#\" className=\"link-secondary\" data-bs-toggle=\"dropdown\">  \n                              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"5\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"19\" cy=\"12\" r=\"1\"></circle></svg>\n                            </a>\n                            <div className=\"dropdown-menu dropdown-menu-end\">\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Action\n                              </a>\n                              <a className=\"dropdown-item\" href=\"#\">\n                                Another action\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n    )\n}\nexport default ProfileCard;\n","import React from \"react\";\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\n\n\nconst AttendanceCard = (props) => {\n    var t = dict[props.lang]\n    function avatar(profile) {\n        if (profile.cover) {\n            return (\n                <span class=\"avatar avatar-sm avatar-rounded\" style={{ backgroundImage: \"url(\" + profile.cover + \")\" }} ></span>\n            )\n        } else {\n            return (\n                <span class=\"avatar avatar-sm avatar-rounded\" >\n                    {profile.initials}\n                </span>\n            )\n        }\n    }\n    function attendees() {\n        var result = []\n        if (props.attendees) {\n            props.attendees.map((attendee) => {\n                result.push(avatar(attendee))\n            });\n        }\n        if(props.attendeesCount && props.attendeesCount > 10){\n            result.push(<span class=\"avatar avatar-sm avatar-rounded\" >{props.attendeesCount - 10}+</span>)\n        }\n\n        return result\n    }\n\n    function createBtn() {\n        if (props.is_admin) {\n            return (\n                <li class=\"nav-item ms-auto\">\n                    <a class=\"nav-link p-1\" href={\"/#/attendances/create?\" + props.attendable_type + \"_id=\" + props.attendable_id}>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"9\" cy=\"7\" r=\"4\" /><path d=\"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2\" /><path d=\"M16 11h6m-3 -3v6\" /></svg>\n                    </a>\n                </li>\n            )\n        }\n    }\n\n    return (\n\n        <div className=\"card mb-3\" style={props.height ? { height: props.height } : { height: 'auto' }}>\n            <div class=\"card-status-top bg-cyan\"></div>\n            <div className=\"card-header \" >\n                <h3 class=\"card-title\">{t['participants']}</h3>\n                <ul class=\"nav nav-pills card-header-pills\">\n                    {createBtn()}\n                </ul>\n            </div>\n            <div className=\"card-body card-body-scrollable card-body-scrollable-shadow\">\n\n                <div class=\"avatar-list avatar-list-stacked\">\n                    {attendees()}\n                </div>\n\n            </div>\n\n        </div>\n\n    )\n}\nexport default AttendanceCard;","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport Header from \"../header/header.jsx\";\nimport EventCard from \"../events/card.jsx\";\nimport ProfileCard from \"../profiles/card.jsx\";\nimport ProgressCard from \"../attendances/card.jsx\";\n\nexport default class Dashboard extends React.Component {\n\n    constructor(props) {\n        super(props);\n        //this.submit = this.submit.bind(this);\n        this.setInstance = this.setInstance.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            title: null,\n        }\n\n    }\n\n\n\n    componentWillMount() {\n        ModelStore.on(\"set_instance\", this.setInstance);\n\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n    }\n\n    componentDidMount() {\n\n    }\n\n\n\n    handleChange(obj) {\n\n    }\n\n    setInstance() {\n        \n    }\n\n\n    render() {\n\n        return (\n            <body className=\"antialiased\">\n            <div className=\"wrapper\">\n              <Header history={this.props.history}/>\n              <div className=\"page-wrapper\">\n                <div className=\"container-xl\">\n                  <div className=\"page-header d-print-none\">\n                    <div className=\"row align-items-center\"></div>\n                    <div className=\"col\">\n                      <div className=\"page-pretitle\">Overview</div>\n                      <h2 className=\"page-title\">Condensed dark layout</h2>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"page-body\">\n                  <div className=\"container-xl\">\n                    <div className=\"row row-deck row-cards\">\n                      <EventCard />\n                      <ProfileCard />\n                      <ProgressCard />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </body>\n        )\n    }\n}\n\n\n\n\n","import React from \"react\";\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport { Calendar } from 'react-datepicker2';\nimport moment from 'moment-jalaali'\n\n\nconst Validation = (props) => {\n    const t = dict[props.lang]\n    function items() {\n        var result = []\n        if (props.items) {\n            props.items.map((item) => {\n                result.push(<li>{t[item]}</li>)\n            })\n        }\n        return result\n    }\n    return (\n        <React.Fragment>\n            <a href=\"#\" ref={props.modal} class=\"btn btn-white\" data-bs-toggle=\"modal\" data-bs-target=\"#modal-danger\" style={{ display: \"none\" }}>\n                Danger modal\n            </a>\n            <div class=\"modal modal-blur fade\" id=\"modal-danger\" tabindex=\"-1\" style={{ display: \"none\" }} aria-hidden=\"true\">\n                <div class=\"modal-dialog modal-sm modal-dialog-centered\" role=\"document\">\n                    <div class=\"modal-content\">\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                        <div class=\"modal-status bg-danger\"></div>\n                        <div class=\"modal-body text-center py-2\">\n\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon mb-2 text-danger icon-lg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M12 9v2m0 4v.01\"></path><path d=\"M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75\"></path></svg>\n                            <h3>{t['error']}</h3>\n                            <div class=\"text-muted\">\n                                {t['the_following_should_not_be_empty']}\n                            </div>\n\n                        </div>\n                        <div >\n                            <ul class=\"list-unstyled px-4\">\n                                {items()}\n                            </ul>\n                        </div>\n\n                        <div class=\"modal-footer\">\n                            <div class=\"w-100\">\n                                <div class=\"row\">\n                                    <div class=\"col\"><a href=\"#\" class=\"btn btn-white w-100\" data-bs-dismiss=\"modal\">\n                                        {t['cancel']}\n                                    </a></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </React.Fragment>\n\n    )\n}\nexport default Validation;\n","import $ from \"jquery\";\nexport function validateExistence(arr) {\n  var flag = true;\n  var i = 0;\n  var items = [];\n  arr.map((el) => {\n    i = i + 1;\n    if (!this.state[el]) {\n      items.push(el);\n      flag = false;\n    }\n  });\n  if (arr.length === i) {\n    console.log(i, this.state.validationItems);\n    this.setState({ validationItems: items });\n    if (!flag) {\n      this.modal.current.click();\n    }\n    return flag;\n  }\n}\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport $ from 'jquery';\nimport { dict } from '../../Dict';\nimport { conf } from '../../conf';\nimport Validation from \"../common/validation.jsx\";\nimport { CountryDropdown, RegionDropdown, CountryRegionData } from 'react-country-region-selector';\nimport { Typeahead, withAsync } from 'react-bootstrap-typeahead';\nimport {\n    validateExistence\n} from \"../common/validate.js\";\n\nconst AsyncTypeahead = withAsync(Typeahead);\nconst server = conf.server;\nvar t = dict['farsi']\n\n\n\n\nexport default class UserWizard extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.submit = this.submit.bind(this);\n        this.setInstance = this.setInstance.bind(this);\n        this.getList = this.getList.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n        this.modal = React.createRef();\n        this.validateExistence = validateExistence.bind(this);\n\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            email: null,\n            name: null,\n            password: null,\n            password_confirmation: null,\n            id: null,\n            bio: null,\n            country: null,\n            initials: 'NN',\n            options: [],\n            tags: [],\n            validationItems: [],\n            disableSubmit: true,\n            twitter: null,\n            instagram: null,\n            telegram: null,\n            email: null,\n            phone: null,\n            linkdin: null,\n        }\n\n    }\n\n\n\n    componentWillMount() {\n        ModelStore.on(\"set_instance\", this.setInstance);\n        ModelStore.on(\"got_list\", this.getList);\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n        ModelStore.removeListener(\"got_list\", this.getList);\n    }\n\n    componentDidMount() {\n        t = dict[this.state.lang]\n        if (this.state.token && this.state.token !== '') {\n            MyActions.getList('profiles/mine', 1, {}, this.state.token);\n        }\n    }\n\n    getInstance() {\n        var profile = ModelStore.getIntance()\n        var klass = ModelStore.getKlass()\n        if (profile && klass === 'Profile') {\n            this.setState({\n                id: profile.id,\n                name: profile.name,\n                bio: profile.bio,\n                country: profile.country,\n                initials: profile.initials,\n                tags: profile.tags,\n                twitter: profile.twitter,\n                instagram: profile.instagram,\n                telegram: profile.telegram,\n                email: profile.email,\n                phone: profile.phone,\n                linkdin: profile.linkdin,\n            })\n            console.log(profile.tags)\n        }\n    }\n\n    getList() {\n        var list = ModelStore.getList()\n        var klass = ModelStore.getKlass()\n\n        if (list && klass === 'MyProfile') {\n            var profile = list[0]\n            console.log(profile)\n            this.setState({\n                id: profile.id,\n                name: profile.name,\n                bio: profile.bio,\n                country: profile.country,\n                initials: profile.initials,\n                tags: profile.tags,\n                twitter: profile.twitter,\n                instagram: profile.instagram,\n                telegram: profile.telegram,\n                email: profile.email,\n                phone: profile.phone,\n                linkdin: profile.linkdin,\n            });\n        }\n    }\n\n    validateEmail(email) {\n        const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(String(email).toLowerCase());\n    }\n\n\n    handleChange(obj) {\n        this.setState(obj);\n        if (Object.keys(obj) && Object.keys(obj)[0] && Object.keys(obj)[0] === 'password_confirmation') {\n            if (obj['password_confirmation'] !== this.state.password) {\n                this.setState({ disableSubmit: true });\n                $('#password_confirmation').addClass(' is-invalid ')\n            } else {\n                this.setState({ disableSubmit: false });\n                $('#password_confirmation').removeClass(' is-invalid ').addClass(' is-valid ')\n            }\n        }\n\n        if (Object.keys(obj) && Object.keys(obj)[0] && Object.keys(obj)[0] === 'password') {\n            if (obj['password'].length < 8) {\n                this.setState({ disableSubmit: true });\n                $('#password').addClass(' is-invalid ')\n            } else {\n                this.setState({ disableSubmit: false });\n                $('#password').removeClass(' is-invalid ').addClass(' is-valid ')\n            }\n        }\n\n        if (Object.keys(obj) && Object.keys(obj)[0] && Object.keys(obj)[0] === 'email') {\n            if (!this.validateEmail(obj['email'])) {\n                this.setState({ disableSubmit: true });\n                $('#email').addClass(' is-invalid ')\n            } else {\n                this.setState({ disableSubmit: false });\n                $('#email').removeClass(' is-invalid ').addClass(' is-valid ')\n            }\n        }\n    }\n\n    setInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (klass === 'SignUp') {\n            window.localStorage.setItem('token', model.token);\n            window.location.reload()\n        }\n        if (klass === 'Profile') {\n            this.props.history.push(\"/\")\n        }\n    }\n\n\n    submit() {\n        if (this.validateExistence(['email', 'name', 'password', 'password_confirmation'])) {\n            $('#submit-button').hide();\n            $('#submit-spinner').show();\n            var data = this.state\n            MyActions.setInstance('users/sign_up', data);\n        }\n    }\n\n    submitProfile() {\n        var data = this.state\n        MyActions.updateInstance('profiles', data, this.state.token);\n    }\n\n    tagSelected(tags) {\n        var result = []\n        tags.map((tag) => {\n            if (tag['title']) {\n                result.push(tag['title'])\n            } else {\n                result.push(tag)\n            }\n        })\n        this.setState({ tags: result }, () => console.log(this.state.tags))\n    }\n\n    checkSignUp() {\n        if (!this.state.token || this.state.token === '') {\n            return (this.notSignedUp())\n        } else {\n            return (this.signedUp())\n        }\n    }\n\n    notSignedUp() {\n        return (\n            <React.Fragment>\n                <div class=\"text-center mb-4\">\n                    <a href=\".\"><img src=\"./static/logo.svg\" height=\"36\" alt=\"\" /></a>\n                </div>\n                <div class=\"card card-md\">\n                    <div class=\"card-body text-center py-4 p-sm-5\">\n                        <img src=\"./static/illustrations/undraw_sign_in_e6hj.svg\" height=\"128\" class=\"mb-n2\" alt=\"\" />\n                        <h1 class=\"mt-5\">{t['welcome']}</h1>\n                        <p class=\"text-muted\">{t['welcome_note']}</p>\n                        <p class=\"text-muted\">{t['login_if_registered']}</p>\n                        <a href=\"/#/login\" class=\"btn btn-outline-success w-100\">\n                            {t['login']}\n                        </a>\n                    </div>\n                    <div class=\"hr-text hr-text-center hr-text-spaceless\">{t['sign_up_now']}</div>\n                    <div class=\"card-body\">\n                        <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['your_email']}</label>\n                            <input type=\"text\" id='email' name='email' onInput={(e) => { this.handleChange({ email: e.target.value }) }} class=\"form-control ps-1\" autocomplete=\"off\" />\n                            <div class=\"form-hint\"></div>\n                        </div>\n\n                        <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['your_name']}</label>\n                            <div class=\"input-group input-group-flat\">\n                                <span class=\"input-group-text\"></span>\n                                <input type=\"text\" name='fullname' onInput={(e) => { this.handleChange({ name: e.target.value }) }} class=\"form-control ps-1\" autocomplete=\"off\" />\n                            </div>\n                            <div class=\"form-hint\"></div>\n                        </div>\n\n                        <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['choose_password']}</label>\n                            <input type=\"password\" id='password' onInput={(e) => { this.handleChange({ password: e.target.value }) }} class=\"form-control ps-1 is-valid\" autocomplete=\"off\" />\n                            <div class=\"form-hint\">{t['password_rule']}</div>\n                        </div>\n\n                        <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['repeat_password']}</label>\n\n                            <input type=\"password\" id='password_confirmation' onInput={(e) => { this.handleChange({ password_confirmation: e.target.value }) }} class=\"form-control ps-1\" autocomplete=\"off\" />\n                            <div class=\"form-hint\"></div>\n                        </div>\n\n                    </div>\n                </div>\n                <div class=\"row align-items-center mt-3\">\n                    <div class=\"col-4\">\n                        <div class=\"progress\">\n                            <div class=\"progress-bar\" style={{ width: \"25%\" }} role=\"progressbar\" aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n                                <span class=\"visually-hidden\">25% Complete</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col\">\n                        <div class=\"btn-list justify-content-end\">\n                            <button id='submit-button' onClick={() => this.submit()} disabled={this.state.disableSubmit} class=\"btn btn-primary\">\n                                {t['sign_up_and_continue']}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </React.Fragment>\n        )\n    }\n\n    signedUp() {\n        if (this.state.id) {\n            return (\n                <React.Fragment>\n                    <div class=\"card card-md\">\n                        <div class=\"card-body text-center py-4 p-sm-5\">\n                            <span class=\"avatar avatar-xl mb-2 avatar-rounded\">{this.state.initials}</span>\n                            <p class=\"text-muted\"></p>\n                        </div>\n\n                        <div class=\"hr-text hr-text-center hr-text-spaceless\">{t['complete_your_profile']}</div>\n\n                        <div class=\"card-body\">\n                            <div class=\"mb-3\">\n                                <label class=\"form-label\">{t['your_country']}</label>\n                                <div class=\"input-group input-group-flat\">\n                                    <span class=\"input-group-text\"></span>\n                                    <CountryDropdown classes={\"form-control ps-1\"} priorityOptions={['CA', 'IR', 'US']} value={this.state.country} onChange={(val) => this.handleChange({ country: val })} />\n                                </div>\n                            </div>\n\n                            <div class=\"mb-3\">\n                                <label class=\"form-label\">{t['bio']}<span class=\"form-label-description\"></span></label>\n                                <textarea\n                                    class=\"form-control\"\n                                    name=\"example-textarea-input\"\n                                    rows=\"6\"\n                                    placeholder={t['write_about_yourself']}\n                                    onInput={(e) => { this.handleChange({ bio: e.target.value }) }}\n                                    value={this.state.bio}>\n                                </textarea>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label class=\"form-label\" >{t['tags']}</label>\n                                <AsyncTypeahead\n                                    id='yytyty'\n                                    allowNew\n                                    multiple\n                                    defaultSelected={this.state.tags}\n                                    isLoading={this.state.isLoading}\n                                    labelKey='title'\n                                    onSearch={(query) => {\n                                        this.setState({ isLoading: true });\n                                        fetch(server + \"/tags/search?q=\" + query)\n                                            .then((resp) => resp.json())\n                                            .then(({ items }) => {\n                                                this.setState({ options: items, isLoading: false }, () => console.log(this.state.options))\n                                            });\n                                    }}\n                                    onChange={(t) => this.tagSelected(t)}\n                                    options={this.state.options}\n                                    renderMenuItemChildren={(option, props) => (\n                                        <React.Fragment>\n                                            <span>{option.title}</span>\n                                        </React.Fragment>\n                                    )}\n                                />\n                            </div>\n                            <div class=\"mb-3\" >\n                                <div class=\"input-group input-group-flat\">\n                                    <input type=\"text\" dir='ltr' class=\"form-control\" autocomplete=\"off\" onInput={(e) => { this.handleChange({ email: e.target.value }) }} id='title' class=\"form-control\" name=\"text-input\" value={this.state.email} />\n                                    <span class=\"input-group-text\">\n                                        <a class=\"link-secondary\" >\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"3\" y=\"5\" width=\"18\" height=\"14\" rx=\"2\" /><polyline points=\"3 7 12 13 21 7\" /></svg>\n                                        </a>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"mb-3\">\n                                <div class=\"input-group input-group-flat\">\n                                    <input type=\"text\"  dir='ltr' class=\"form-control\" autocomplete=\"off\" onInput={(e) => { this.handleChange({ phone: e.target.value }) }} id='title' class=\"form-control\" name=\"text-input\" value={this.state.phone} />\n                                    <span class=\"input-group-text\">\n                                        <a class=\"link-secondary\" >\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2\" /></svg>\n                                        </a>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"mb-3\">\n                                <div class=\"input-group input-group-flat\">\n                                    <input type=\"text\"  dir='ltr' class=\"form-control\" autocomplete=\"off\" onInput={(e) => { this.handleChange({ linkdin: e.target.value }) }} id='title' class=\"form-control\" name=\"text-input\" value={this.state.linkdin} />\n                                    <span class=\"input-group-text\">\n                                        <a class=\"link-secondary\" >\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\" /><line x1=\"8\" y1=\"11\" x2=\"8\" y2=\"16\" /><line x1=\"8\" y1=\"8\" x2=\"8\" y2=\"8.01\" /><line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"11\" /><path d=\"M16 16v-3a2 2 0 0 0 -4 0\" /></svg>\n                                        </a>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"mb-3\">\n                                <div class=\"input-group input-group-flat\">\n                                    <input type=\"text\"  dir='ltr' class=\"form-control\" autocomplete=\"off\" onInput={(e) => { this.handleChange({ twitter: e.target.value }) }} id='title' class=\"form-control\" name=\"text-input\" value={this.state.twitter} />\n                                    <span class=\"input-group-text\">\n                                        <a class=\"link-secondary\" >\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z\" /></svg>\n                                        </a>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"mb-3\">\n                                <div class=\"input-group input-group-flat\">\n                                    <input type=\"text\"  dir='ltr' class=\"form-control\" autocomplete=\"off\" onInput={(e) => { this.handleChange({ telegram: e.target.value }) }} id='title' class=\"form-control\" name=\"text-input\" value={this.state.telegram} />\n                                    <span class=\"input-group-text\">\n                                        <a class=\"link-secondary\" >\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4\" /></svg>\n                                        </a>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"mb-3\">\n                                <div class=\"input-group input-group-flat\">\n                                    <input type=\"text\"   dir='ltr' class=\"form-control\" autocomplete=\"off\" onInput={(e) => { this.handleChange({ instagram: e.target.value }) }} id='title' class=\"form-control\" name=\"text-input\" value={this.state.instagram} />\n                                    <span class=\"input-group-text\">\n                                        <a class=\"link-secondary\" >\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"4\" /><circle cx=\"12\" cy=\"12\" r=\"3\" /><line x1=\"16.5\" y1=\"7.5\" x2=\"16.5\" y2=\"7.501\" /></svg>\n                                        </a>\n                                    </span>\n                                </div>\n                            </div>\n\n\n                        </div>\n                    </div>\n                    <div class=\"row align-items-center mt-3\">\n                        <div class=\"col-4\">\n                            <div class=\"progress\">\n                                <div class=\"progress-bar\" style={{ width: \"75%\" }} role=\"progressbar\" aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n                                    <span class=\"visually-hidden\">25% Complete</span>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"col\">\n                            <div class=\"btn-list justify-content-end\">\n                                <button onClick={() => this.submitProfile()} class=\"btn btn-primary\">\n                                    {t['continue']}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </React.Fragment>\n            )\n        }\n    }\n\n\n    render() {\n        return (\n            <div class=\"page page-center\">\n                <Validation items={this.state.validationItems} modal={this.modal} lang={this.state.lang} />\n                <div class=\"container-tight py-4\">\n                    {this.checkSignUp()}\n\n                </div>\n            </div>\n        )\n    }\n}\n\n\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport { conf } from '../../conf';\nimport $ from 'jquery';\nimport { CountryDropdown, RegionDropdown, CountryRegionData } from 'react-country-region-selector';\nimport { Typeahead, withAsync } from 'react-bootstrap-typeahead';\nconst AsyncTypeahead = withAsync(Typeahead);\nconst server = conf.server;\nvar t = dict['farsi']\n\nexport default class UserWizard extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.submit = this.submit.bind(this);\n        this.setInstance = this.setInstance.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            email: null,\n            password: null,\n            verify: false,\n            verification: null,\n            error: false,\n        }\n\n    }\n\n\n\n    componentWillMount() {\n        ModelStore.on(\"set_instance\", this.setInstance);\n        if (this.state.lang || this.state.lang !== null) {\n            t = dict[this.state.lang]\n        }\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n    }\n\n    componentDidMount() {\n        document.dir = this.state.dir\n    }\n\n\n\n    handleChange(obj) {\n        this.setState(obj);\n        if (Object.keys(obj) && Object.keys(obj)[0] && Object.keys(obj)[0] === 'verification') {\n            if (obj['verification'].length < 6) {\n                this.setState({ disableSubmit: true });\n                $('#verification').addClass(' is-invalid ')\n            } else {\n                this.setState({ disableSubmit: false });\n                $('#verification').removeClass(' is-invalid ').addClass(' is-valid ')\n            }\n        }\n    }\n\n    setInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (klass === 'Login') {\n            this.setState({ verify: false, error: false })\n            window.localStorage.setItem('token', model.token);\n            this.props.history.push(\"events\")\n        }\n        if (klass === 'VERIFY') {\n            this.setState({ verify: true })\n        }\n        if (klass === 'Error') {\n            this.setState({ error: true })\n        }\n    }\n\n\n    submit() {\n        var data = this.state\n        MyActions.setInstance('users/login', data);\n    }\n\n    verifyForm() {\n        if (this.state.verify) {\n            return (\n                <div class=\"mb-3\">\n                    <label class=\"form-label\">{t['verfication_code']}</label>\n                    <input type=\"text\" id='verification' onInput={(e) => { this.handleChange({ verification: e.target.value }) }} class=\"form-control ps-1 is-invalid\" autocomplete=\"off\" />\n                </div>\n            )\n        }\n    }\n\n    loginError(){\n        if(this.state.error){\n            return (\n                <div class=\"alert alert-important alert-danger alert-dismissible\" role=\"alert\">\n                    <div class=\"d-flex\">\n                        <div>\n                            <p>{t['email_and_password_does_not_match']}</p>\n                        </div>\n                    </div>\n                    <a class=\"btn-close btn-close-white\" data-bs-dismiss=\"alert\" aria-label=\"close\"></a>\n                </div>\n            )\n        }\n    }\n\n    verified() {\n        if (this.state.verify) {\n            return (\n                <div class=\"alert alert-important alert-danger alert-dismissible\" role=\"alert\">\n                    <div class=\"d-flex\">\n                        <div>\n                        </div>\n                        <div>\n                            <p>{t['your_account_is_not_verified']}</p>\n                            <p>{t['check_your_spam_folder']}</p>\n                        </div>\n                    </div>\n                    <a class=\"btn-close btn-close-white\" data-bs-dismiss=\"alert\" aria-label=\"close\"></a>\n                </div>\n            )\n        }\n\n    }\n\n    languageBtn() {\n        return (\n\n            <div class=\"dropdown\">\n                <button type=\"button\" onClick={() => this.setState({ langBtnActive: !this.state.langBtnActive })} className={this.state.langBtnActive ? \"btn btn-secondary dropdown-toggle show\" : \"btn btn-secondary dropdown-toggle\"} data-bs-toggle=\"dropdown\">\n                    <span className='mx-1'>Language</span>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M5 7h7m-2 -2v2a5 8 0 0 1 -5 8m1 -4a7 4 0 0 0 6.7 4\" /><path d=\"M11 19l4 -9l4 9m-.9 -2h-6.2\" /></svg>\n                </button>\n                <div className={this.state.langBtnActive ? \"dropdown-menu show\" : \"dropdown-menu\"}>\n                    <a class=\"dropdown-item\" onClick={() => this.changeLang('farsi', 'rtl')}>\n                        \n                    </a>\n                    <a class=\"dropdown-item\" onClick={() => this.changeLang('english', 'ltr')}>\n                        English\n                    </a>\n                </div>\n            </div>\n\n\n        )\n    }\n\n    changeLang(lang, dir) {\n        window.localStorage.setItem('lang', lang)\n        window.localStorage.setItem('dir', dir)\n        window.location.reload()\n    }\n\n\n\n    render() {\n        return (\n            <div class=\"page page-center\">\n                <div class=\"container-tight py-4\">\n                    <React.Fragment>\n                        <div class=\"text-center mb-4\">\n\n                        </div>\n                        <div class=\"card card-md\">\n                            <div class=\"card-body text-center py-4 p-sm-5\">\n                                {this.languageBtn()}\n                                <h1 class=\"mt-5\">{t['welcome']}</h1>\n                                <p class=\"text-muted\">{t['welcome_note']}</p>\n                                <p class=\"text-muted\">{t['if_not_registered']}</p>\n                                <a href=\"/#/wizard\" class=\"btn btn-outline-primary w-100\">\n                                    {t['sign_up']}\n                                </a>\n                            </div>\n\n                            <div class=\"hr-text hr-text-center hr-text-spaceless\">{t['login_now']}</div>\n                            <div class=\"card-body\">\n                                <div class=\"mb-3\">\n                                    <label class=\"form-label\">{t['your_email']}</label>\n                                    <div class=\"input-group input-group-flat\">\n                                        <span class=\"input-group-text\"></span>\n                                        <input type=\"text\" onInput={(e) => { this.handleChange({ email: e.target.value }) }} class=\"form-control ps-1\" autocomplete=\"off\" />\n                                    </div>\n                                    <div class=\"form-hint\"></div>\n                                </div>\n\n\n                                <div class=\"mb-3\">\n                                    <label class=\"form-label\">{t['password']}</label>\n                                    <div class=\"input-group input-group-flat\">\n                                        <span class=\"input-group-text\"></span>\n                                        <input type=\"password\" onInput={(e) => { this.handleChange({ password: e.target.value }) }} class=\"form-control ps-1\" autocomplete=\"off\" />\n                                    </div>\n                                    {\n                                        //<div class=\"form-hint\"><a href='#/forget'>{t['forget_password']}</a></div>\n                                    }\n                                </div>\n\n                                {this.verifyForm()}\n                            </div>\n                        </div>\n                        {this.verified()}\n                        {this.loginError()}\n                        <div class=\"row align-items-center mt-3\">\n                            <div class=\"col-4\">\n\n                            </div>\n                            <div class=\"col\">\n                                <div class=\"btn-list justify-content-end\">\n                                    <a href=\"https://auth.ut.ac.ir:8443/cas/login?service=https%3A%2F%2Fevent.ut.ac.ir%2Fusers%2Fservice\" class=\"btn bg-green-lt\">\n                                        {t['cas']}\n                                    </a>\n\n                                    <button onClick={() => this.submit()} class=\"btn btn-primary\">\n                                        {t['login']}\n                                    </button>\n\n\n                                </div>\n                            </div>\n                        </div>\n                    </React.Fragment>\n                </div>\n            </div>\n        )\n    }\n}\n\n\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport { conf } from '../../conf';\nimport $ from 'jquery';\nimport { CountryDropdown, RegionDropdown, CountryRegionData } from 'react-country-region-selector';\nimport { Typeahead, withAsync } from 'react-bootstrap-typeahead';\nconst AsyncTypeahead = withAsync(Typeahead);\nconst server = conf.server;\nvar t = dict['farsi']\n\nexport default class Forget extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.submit = this.submit.bind(this);\n        this.setInstance = this.setInstance.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            email: null,\n            password: null,\n            verify: false,\n            verification: null,\n        }\n\n    }\n\n\n\n    componentWillMount() {\n        ModelStore.on(\"set_instance\", this.setInstance);\n        t = dict[this.state.lang]\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n    }\n\n    componentDidMount() {\n        document.dir = this.state.dir\n    }\n\n\n\n    handleChange(obj) {\n        this.setState(obj);\n    }\n\n    setInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (klass === 'Login') {\n            window.localStorage.setItem('token', model.token);\n            this.props.history.push(\"/#/events\")\n        }\n        if (klass === 'VERIFY') {\n            this.setState({ verify: true })\n        }\n    }\n\n\n    submit() {\n        var data = this.state\n        MyActions.setInstance('users/login', data);\n    }\n\n    verifyForm() {\n        if (this.state.verify) {\n            return (\n                <div class=\"mb-3\">\n                    <label class=\"form-label\">{t['verfication_code']}</label>\n                    <input type=\"text\" id='verification' onInput={(e) => { this.handleChange({ verification: e.target.value }) }} class=\"form-control ps-1 is-invalid\" autocomplete=\"off\" />\n                </div>\n            )\n        }\n    }\n\n    verified() {\n        if (this.state.verify) {\n            return (\n                <div class=\"alert alert-important alert-danger alert-dismissible\" role=\"alert\">\n                    <div class=\"d-flex\">\n                        <div>\n                        </div>\n                        <div>\n                            <p>{t['your_account_is_not_verified']}</p>\n                            <p>{t['check_your_spam_folder']}</p>\n                        </div>\n                    </div>\n                    <a class=\"btn-close btn-close-white\" data-bs-dismiss=\"alert\" aria-label=\"close\"></a>\n                </div>\n            )\n        }\n\n    }\n\n\n    \n\n    render() {\n        return (\n            <div class=\"page page-center\">\n                <div class=\"container-tight py-4\">\n                    <React.Fragment>\n                        <div class=\"text-center mb-4\">\n\n                        </div>\n                        <div class=\"card card-md\">\n                            <div class=\"card-body\">\n                                <div class=\"mb-3\">\n                                    <label class=\"form-label\">{t['your_email']}</label>\n                                    <div class=\"input-group input-group-flat\">\n                                        <span class=\"input-group-text\"></span>\n                                        <input type=\"text\" onInput={(e) => { this.handleChange({ email: e.target.value }) }} class=\"form-control ps-1\" autocomplete=\"off\" />\n                                    </div>\n                                    <div class=\"form-hint\"></div>\n                                </div>\n\n\n                                <div class=\"mb-3\">\n                                    <label class=\"form-label\">{t['password']}</label>\n                                    <div class=\"input-group input-group-flat\">\n                                        <span class=\"input-group-text\"></span>\n                                        <input type=\"password\" onInput={(e) => { this.handleChange({ password: e.target.value }) }} class=\"form-control ps-1\" autocomplete=\"off\" />\n                                    </div>\n                                </div>\n\n                                {this.verifyForm()}\n                            </div>\n                        </div>\n                        {this.verified()}\n                        <div class=\"row align-items-center mt-3\">\n                            <div class=\"col-4\">\n\n                            </div>\n                            <div class=\"col\">\n                                <div class=\"btn-list justify-content-end\">\n                                    <a href=\"https://auth.ut.ac.ir:8443/cas/login?service=https%3A%2F%2Fevent.ut.ac.ir%2Fusers%2Fservice\" class=\"btn bg-green-lt\">\n                                        {t['cas']}\n                                    </a>\n\n                                    <button onClick={() => this.submit()} class=\"btn btn-primary\">\n                                        {t['login']}\n                                    </button>\n\n\n                                </div>\n                            </div>\n                        </div>\n                    </React.Fragment>\n                </div>\n            </div>\n        )\n    }\n}\n\n\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport $ from 'jquery';\nimport { dict } from '../../Dict';\nimport { conf } from '../../conf';\nimport Header from \"../header/header.jsx\";\nimport EventCard from \"./card.jsx\";\nimport moment from 'moment-jalaali';\nimport mm from 'moment';\nimport DatePicker2 from 'react-datepicker2';\nimport { Typeahead, withAsync } from 'react-bootstrap-typeahead';\nconst AsyncTypeahead = withAsync(Typeahead);\nconst server = conf.server;\n\nvar t = dict['farsi']\n\nexport default class EventIndex extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.getList = this.getList.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.attend = this.attend.bind(this);\n        this.setInstance = this.setInstance.bind(this);\n        this.getInstance = this.getInstance.bind(this);\n\n\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            event_id: window.localStorage.getItem('event_id'),\n            title: null,\n            events: null,\n            allTags: null,\n            q: '',\n            start_from: mm(),\n            start_to: mm().add(2, 'Month'),\n            tags: [],\n            page: 1,\n            pages: 0,\n            userAbilities: null,\n            isGregorian: true,\n        }\n\n    }\n\n\n    componentWillMount() {\n        ModelStore.on(\"got_list\", this.getList);\n        ModelStore.on(\"set_instance\", this.setInstance);\n        ModelStore.on(\"got_instance\", this.getInstance);\n        console.log('>>>>>>>>', this.state.lang)\n        if(this.state.lang || this.state.lang !== null) {\n            console.log('333333')\n            t = dict[this.state.lang]\n        }        \n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"got_list\", this.getList);\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n        ModelStore.removeListener(\"got_instance\", this.getInstance);\n    }\n\n    componentDidMount() {\n\n        if(this.state.lang === 'farsi') {\n            this.setState({\n                start_from: moment(),\n                start_to: moment().add(2, 'jMonth'),\n                isGregorian: false,\n            })\n        }\n        var data = {start_from: this.state.start_from, start_to: this.state.start_to}\n        MyActions.getList('events/search', this.state.page, data, this.state.token);\n        if (this.state.token && this.state.token.length > 10) {\n            //MyActions.getInstance('profiles/my', 1, this.state.token);\n            MyActions.getList('profiles/mine', 1, {}, this.state.token);\n        } else {\n            this.props.history.push(\"login\")\n        }\n        if(this.state.event_id && this.state.event_id !== ''){\n            this.props.history.push(\"meetings\")\n        }\n\n    }\n\n    getList() {\n        var list = ModelStore.getList()\n        var klass = ModelStore.getKlass()\n\n        if (list && klass === 'Event') {\n            $('#search-spinner').hide();\n            if (list[0] && list[0].page) {\n                if (list[0].page == 1) {\n                    this.setState({\n                        events: list,\n                    });\n                } else {\n                    this.setState({\n                        events: this.state.events.concat(list),\n                    });\n                }\n                this.setState({ page: list[0].page, pages: list[0].pages })\n            } else {\n                this.setState({\n                    events: [],\n                    pages: 0\n                });\n            }\n            console.log(list)\n        }\n        if (list && klass === 'Tag') {\n            this.setState({\n                allTags: list,\n            });\n        }\n        if (list && klass === 'MyProfile') {\n            this.setState({\n                profile: list[0],\n                userAbilities: list[0].abilities\n            });\n        }\n    }\n\n    setInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (model && klass === 'Event') {\n            var self = this;\n            var events = self.state.events;\n            if (events.length > 0) {\n                for (let i = 0; i < events.length; i++) {\n                    if (events[i].id == model.id) {\n                        let newState = Object.assign({}, self.state);\n                        newState.events[i] = model;\n                        self.setState(newState, () => console.log(self.state.events));\n                    }\n                }\n            }\n            console.log(model)\n        }\n    }\n\n    getInstance() {\n\n    }\n\n    handleChange(obj) {\n        this.setState(obj);\n    }\n\n\n    noEventCard() {\n        return (\n            <div class=\"card\">\n                <div class=\"empty\">\n                    <div class=\"empty-img\">\n                        <div className=\"demo-icon-preview\"><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M12 9v2m0 4v.01\"></path><path d=\"M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75\"></path></svg></div>\n                    </div>\n                    <p class=\"empty-title\">{t['no_result_to_show']}</p>\n                    <p class=\"empty-subtitle text-muted\">\n                        {t['try_adjusting_your_search']}\n                    </p>\n                </div>\n            </div>\n        )\n    }\n\n\n    checkEvent() {\n        if (this.state.events) {\n            return (\n                <React.Fragment>\n                    <div class=\"col-4\">\n                        <div class=\"card\">\n                            <div class=\"card-status-top bg-lime\"></div>\n                            <div className=\"card-header\" >\n                                <h3 class=\"card-title\">{t['events']}</h3>\n                                <ul class=\"nav nav-pills card-header-pills\">\n                                    <li class=\"nav-item ms-auto\">\n                                        <a class=\"nav-link p-1\" href={\"/#/events/create\"}>\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n                                        </a>\n                                    </li>\n                                </ul>\n                            </div>\n                            <div class=\"card-body\">\n                                <p>\n                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aperiam deleniti fugit incidunt, iste, itaque minima neque pariatur perferendis sed suscipit velit vitae voluptatem\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <EventCard events={this.state.events} col={8} lang={this.state.lang} />\n                </React.Fragment>\n            )\n        } else {\n            return (this.noEventCard())\n        }\n    }\n\n    cardMasonry() {\n        var result = []\n        if (this.state.events) {\n            if (this.state.events.length !== 0) {\n                result.push(\n                    <div class='row row-cards' data-masonry='{\"percentPosition\": true }' >\n                        <EventCard events={this.state.events} col={6} attend={this.attend} lang={this.state.lang}/>\n                    </div>\n                )\n            }\n            if (this.state.events.length === 0) {\n                result.push(this.noEventCard())\n            }\n        }\n        return result\n    }\n\n    attend(flag, attendable_id) {\n        var data = { attendable_id: attendable_id, attendable_type: 'Event', flag: flag }\n        MyActions.setInstance('attendances/attend', data, this.state.token)\n    }\n\n    search() {\n        $('#search-spinner').show();\n        var data = { q: this.state.q, start_from: this.state.start_from, start_to: this.state.start_to, tags: this.state.tags }\n        MyActions.getList('events/search', this.state.page, data, this.state.token);\n        this.setState({ page: 1 })\n    }\n\n    tagCheckbox() {\n        var result = []\n        if (this.state.allTags) {\n            this.state.allTags.map((tag) => {\n                result.push(\n                    <label class=\"form-check\">\n                        <input id={'tag-check-' + tag.id} class=\"form-check-input\" type=\"checkbox\" style={{ marginTop: '3.5px' }} value={tag.id} onChange={(e) => this.changeTags(e)} />\n                        <span class=\"form-check-label\">\n                            <span class=\"badge bg-lime-lt\" style={{ margin: '2px' }}>{tag.title}</span>\n                        </span>\n                    </label>\n                )\n            })\n        }\n        return result\n    }\n\n    tagSelected(tags) {\n        var result = []\n        tags.map((tag) => {\n            if (tag['title']) {\n                result.push(tag['title'])\n            } else {\n                result.push(tag)\n            }\n        })\n        this.setState({ tags: result }, () => console.log(this.state.tags))\n    }\n\n    tagInput() {\n        return (\n            <div style={{ direction: 'ltr', marginBottom: '70px' }}>\n                <AsyncTypeahead\n                    id='search-tag'\n                    multiple\n                    defaultSelected={this.state.tags}\n                    isLoading={this.state.isLoading}\n                    labelKey='title'\n                    onSearch={(query) => {\n                        this.setState({ isLoading: true });\n                        fetch(server + \"/tags/search?q=\" + query)\n                            .then((resp) => resp.json())\n                            .then(({ items }) => {\n                                this.setState({ options: items, isLoading: false }, () => console.log(this.state.options))\n                            });\n                    }}\n                    onChange={(t) => this.tagSelected(t)}\n                    options={this.state.options}\n                    renderMenuItemChildren={(option, props) => (\n                        <React.Fragment>\n                            <span>{option.title}</span>\n                        </React.Fragment>\n                    )}\n                />\n            </div>\n        )\n    }\n\n\n    loadMore() {\n        var data = { id: this.state.id, page: this.state.page + 1, q: this.state.q, start_from: this.state.start_from, start_to: this.state.start_to, tags: this.state.tags }\n        MyActions.getList('events/search', this.state.page, data, this.state.token);\n    }\n\n    moreBtn() {\n        if (this.state.pages > this.state.page) {\n            return (\n                <div class=\"hr-text\">\n                    <a onClick={() => this.loadMore()}>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"9\" /><line x1=\"8\" y1=\"12\" x2=\"12\" y2=\"16\" /><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\" /><line x1=\"16\" y1=\"12\" x2=\"12\" y2=\"16\" /></svg>\n                        {t['more']}\n                    </a>\n                </div>\n            )\n        }\n    }\n\n    createBtn() {\n        if (this.state.userAbilities && this.state.userAbilities.create_event) {\n            return (\n                <div class=\"btn-list\">\n                    <a href={\"/#/events/create\"} class=\"btn btn-primary\"  >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line></svg>\n                        {t['create_event']}\n                    </a>\n                </div>\n            )\n        }\n    }\n\n    calendarType(date) {\n        if (this.state.lang === 'farsi') {\n            return (\n                moment(date)\n            )\n        } else {\n            return (\n                mm(date)\n            )\n        }\n    }\n\n\n    render() {\n\n        return (\n            <body className=\"antialiased\">\n                <div className=\"wrapper\">\n                    <Header history={this.props.history} />\n                    <div className=\"page-wrapper\">\n                        <div className=\"container-xl\">\n                            <div className=\"page-header d-print-none\">\n                                <div className=\"row align-items-center\">\n                                    <div className=\"col\">\n                                        <div className=\"page-pretitle\">{t['overview']}</div>\n                                        <h2 className=\"page-title\">{t['events']}</h2>\n                                    </div>\n                                    <div class=\"col-auto ms-auto d-print-none\">\n                                    {this.createBtn()}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"page-body\">\n                            <div className=\"container-xl\">\n                                <div class=\"row\">\n                                    <div class=\"col-lg-3\">\n                                        <div class=\"card mb-3\">\n                                            <div className=\"card-header\" >\n                                                <h4 class=\"card-title\">\n                                                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M5.5 5h13a1 1 0 0 1 .5 1.5l-5 5.5l0 7l-4 -3l0 -4l-5 -5.5a1 1 0 0 1 .5 -1.5\" /></svg>\n                                                    {t['filter_events']}\n                                                </h4>\n                                            </div>\n\n                                            <div class=\"card-body\">\n                                                <div class=\"mb-3\">\n                                                    <label class=\"form-label\">{t['contains_words']}</label>\n                                                    <div class=\"input-icon mb-3\">\n                                                        <input type=\"text\" class=\"form-control\" placeholder={t['search_placeholder']} onInput={(e) => { this.handleChange({ q: e.target.value }) }} />\n                                                        <span class=\"input-icon-addon\">\n                                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"10\" cy=\"10\" r=\"7\"></circle><line x1=\"21\" y1=\"21\" x2=\"15\" y2=\"15\"></line></svg>\n                                                        </span>\n                                                    </div>\n                                                </div>\n                                                <div class=\"mb-3\" style={{ width: '100%' }}>\n                                                    <label class=\"form-label \">{t['date_from']}<span class=\"form-label-description\"></span></label>\n                                                    <DatePicker2\n                                                        isGregorian={this.state.isGregorian}\n                                                        timePicker={false}\n                                                        onChange={value => { this.setState({ start_from: value }) }}\n                                                        value={this.calendarType(this.state.start_from)}\n                                                    />\n                                                    <label class=\"form-label mt-2\">{t['date_to']}<span class=\"form-label-description\"></span></label>\n                                                    <DatePicker2\n                                                        isGregorian={this.state.isGregorian}\n                                                        timePicker={false}\n                                                        onChange={value => { this.setState({ start_to: value }) }}\n                                                        value={this.calendarType(this.state.start_to)}\n                                                    />\n                                                </div>\n\n                                                <div class=\"mb-3 \" id='tags' >\n                                                    <label class=\"form-label\" >{t['tags']}</label>\n                                                    {this.tagInput()}\n                                                </div>\n                                            </div>\n                                            <div class=\"card-body\">\n\n                                                <a onClick={() => this.search()} class=\"btn btn-primary w-100\">\n                                                    <span style={{ verticalAlign: '-2px' }}>\n                                                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M5.5 5h13a1 1 0 0 1 .5 1.5l-5 5.5l0 7l-4 -3l0 -4l-5 -5.5a1 1 0 0 1 .5 -1.5\" /></svg>\n                                                    </span>\n                                                    {t['filter_and_search']}\n                                                    <div id='search-spinner' class=\"spinner-border text-red\" role=\"status\" style={{ display: 'none' }}></div>\n                                                </a>\n                                            </div>\n\n                                        </div>\n                                    </div>\n                                    <div class=\"col-lg-9\">\n                                        {this.cardMasonry()}\n                                        {this.moreBtn()}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        )\n    }\n}\n\n\n\n\n","import React from \"react\";\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport moment from 'jalali-moment'\n\n\nconst MeetingCard = (props) => {\n    var t = dict[props.lang]\n    function formatGregorianDate(gregorianDate) {\n        var date = new Date(gregorianDate);\n        var day = date.getDate();\n        var month = date.getMonth() + 1;\n        var year = date.getFullYear();\n        var hours = date.getHours();\n        var minutes = date.getMinutes();\n        var fullYear = year + '/' + month + '/' + day + ' ' + hours + ':' + minutes;\n        return fullYear;\n    }\n\n    function editBtn(meeting) {\n        if (props.is_admin) {\n            return (\n                <div class=\"col-auto\">\n                    <a href={\"/#/meetings/edit/\" + meeting.id} class=\"list-group-item-actions show\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M9 7h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3\" /><path d=\"M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3\" /><line x1=\"16\" y1=\"5\" x2=\"19\" y2=\"8\" /></svg>\n                    </a>\n                </div>\n            )\n        }\n    }\n\n    function meetingLink(meeting) {\n        if (meeting.attending) {\n            return (\n                <a href={'/#/meetings/' + meeting.id}>\n                    {meeting.title}\n                </a>\n            )\n        } else {\n            return (\n                <span>{meeting.title}</span>\n            )\n        }\n    }\n\n    function meetingItems() {\n        var result = []\n        props.meetings.map((meeting) => {\n            result.push(\n                <div class=\"list-group-item\">\n                    <div class=\"row align-items-center\">\n                        <div class=\"col text-truncate\">\n                            {meetingLink(meeting)}\n                            <small class=\"d-block text-muted text-truncate mt-n1\">\n                                {moment(formatGregorianDate(meeting.start_time)).format('HH:mm jYYYY/jMM/jDD')}\n                            </small>\n                        </div>\n                        {editBtn(meeting)}\n                    </div>\n                </div>\n            )\n        })\n        return result\n    }\n\n    function createBtn() {\n        if (props.is_admin) {\n            return (\n                <li class=\"nav-item ms-auto\">\n                    <a class=\"nav-link p-1\" href={\"/#/meetings/create?event_id=\" + props.id}>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n                    </a>\n                </li>\n            )\n        }\n    }\n\n    return (\n        <div className={props.col ? \"col-md-\" + props.col : \"col-md-8\"}>\n            <div className=\"card mb-3\" style={props.height ? { height: props.height } : { height: 'auto' }}>\n                <div className=\"card-header header-compact\" >\n                <div class=\"card-status-top dark-bar\"></div>\n                    <h3 class=\"card-title\">{t['meetings']}</h3>\n                    <ul class=\"nav nav-pills card-header-pills\">\n                        {createBtn()}\n                    </ul>\n                </div>\n                <div class=\"list-group list-group-flush list-group-hoverable\">\n                    {meetingItems()}\n                </div>\n                <div class=\"card-footer\">\n                    <div class=\"d-flex\">\n                        <a herf=\"\" class=\"btn btn-link\"></a>\n                        <a href={'/#/meetings?event_id=' + props.id} class=\"ms-auto\">{t['all']}</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\nexport default MeetingCard;\n","import React from \"react\";\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport { Calendar } from 'react-datepicker2';\nimport moment from 'moment-jalaali'\n\nconst EventCalendar = (props) => {\n\n\n    return (\n        <Calendar\n        ranges={props.highlightRanges}\n        value={props.today}\n        isGregorian={false}\n        inputFormat=\"YYYY-M-D\"\n        inputJalaaliFormat=\"jYYYY-jM-jD\"\n        onChange={val => props.dateSelect(val)}\n      />\n    )\n}\nexport default EventCalendar;\n","import React from \"react\";\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\n\n\nconst EventInfo = (props) => {\n    const t = dict[props.lang]\n    function editBtn() {\n        if (props.is_admin) {\n            return (\n                <li class=\"nav-item ms-auto\">\n                    <a class=\"nav-link p-1\" href={\"/#/events/edit/\" + props.id}>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M9 7h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3\" /><path d=\"M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3\" /><line x1=\"16\" y1=\"5\" x2=\"19\" y2=\"8\" /></svg>\n                    </a>\n                </li>\n            )\n        }\n    }\n    function attend() {\n        if (!props.is_admin) {\n            if (props.attending) {\n                return (\n                    <div className=\"card-footer\" style={{ display: 'initial' }}>\n                        <div class=\"d-flex\">\n                            <a onClick={() => props.attend(false, props.id)} class=\"ms-auto\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M19.823 19.824a2 2 0 0 1 -1.823 1.176h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 1.175 -1.823m3.825 -.177h9a2 2 0 0 1 2 2v9\" /><line x1=\"16\" y1=\"3\" x2=\"16\" y2=\"7\" /><line x1=\"8\" y1=\"3\" x2=\"8\" y2=\"4\" /><path d=\"M4 11h7m4 0h5\" /><line x1=\"11\" y1=\"15\" x2=\"12\" y2=\"15\" /><line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"18\" /><line x1=\"3\" y1=\"3\" x2=\"21\" y2=\"21\" /></svg>\n                            </a>\n                        </div>\n                    </div>\n                )\n            } else {\n                return (\n                    <div className=\"card-footer\" style={{ display: 'initial' }}>\n                        <div class=\"d-flex\">\n                            <a onClick={() => props.attend(true, props.id)} class=\"ms-auto\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"4\" y=\"5\" width=\"16\" height=\"16\" rx=\"2\" /><line x1=\"16\" y1=\"3\" x2=\"16\" y2=\"7\" /><line x1=\"8\" y1=\"3\" x2=\"8\" y2=\"7\" /><line x1=\"4\" y1=\"11\" x2=\"20\" y2=\"11\" /><line x1=\"10\" y1=\"16\" x2=\"14\" y2=\"16\" /><line x1=\"12\" y1=\"14\" x2=\"12\" y2=\"18\" /></svg>\n\n                            </a>\n                        </div>\n                    </div>\n                )\n            }\n        }\n    }\n\n    return (\n        <div class=\"card mb-3\">\n            <div className=\"card-header dark-header\" >\n                <h3 class=\"card-title\">{props.title} </h3>\n                <ul class=\"nav nav-pills card-header-pills\">\n                    <li class=\"nav-item mx-2\" style={{ marginRight: '10px' }}>\n                        {props.isPrivateBadge()}\n                    </li>\n                    {editBtn()}\n                </ul>\n            </div>\n            <a onClick={() => props.toggleCalendar()}>\n                <div className=\"card-header cursor-pointer\" >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"4\" y=\"5\" width=\"16\" height=\"16\" rx=\"2\" /><line x1=\"16\" y1=\"3\" x2=\"16\" y2=\"7\" /><line x1=\"8\" y1=\"3\" x2=\"8\" y2=\"7\" /><line x1=\"4\" y1=\"11\" x2=\"20\" y2=\"11\" /><line x1=\"11\" y1=\"15\" x2=\"12\" y2=\"15\" /><line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"18\" /></svg>\n                    {t['calendar']}\n                    <ul class=\"nav nav-pills card-header-pills\">\n                    </ul>\n                </div>\n            </a>\n            <div class=\"card-body\">\n                <h4>{t['event_info']}</h4>\n                <div class=\"text-muted mb-3\" style={{ textAlign: 'justify' }}>\n                    {props.info}\n                </div>\n\n                <h4>{t['event_type']}</h4>\n                <div class=\"text-muted mb-3\">\n                    {t[props.event_type]}\n                </div>\n\n                <h4>{t['tags']}</h4>\n                <div class=\"text-muted mb-3\">\n                    {props.tagsShow(props.tags)}\n                </div>\n\n            </div>\n            {attend()}\n        </div>\n    )\n}\nexport default EventInfo;\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport Header from \"../header/header.jsx\";\nimport MeetingCard from \"../meetings/card.jsx\";\nimport AttendanceCard from \"../attendances/card.jsx\";\nimport { Calendar } from 'react-datepicker2';\nimport moment from 'moment-jalaali'\nimport EventCalendar from \"../events/calendar.jsx\";\nimport EventInfo from \"../events/info.jsx\";\nimport randomColor from \"randomcolor\";\nimport $ from 'jquery';\nimport Quill from 'quill';\nvar t = dict['farsi']\n\nexport default class EventShow extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.dateSelect = this.dateSelect.bind(this);\n    this.getInstance = this.getInstance.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.isPrivateBadge = this.isPrivateBadge.bind(this);\n    this.toggleCalendar = this.toggleCalendar.bind(this);\n    this.attend = this.attend.bind(this);\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      lang: window.localStorage.getItem('lang'),\n      dir: window.localStorage.getItem('dir'),\n      title: null,\n      id: null,\n      event_type: null,\n      info: null,\n      meetings: [],\n      flyers: [],\n      quillOne: null,\n      attendees: null,\n      tags: [],\n      is_private: false,\n      calendar: false,\n      today: moment(),\n      highlightRanges: [],\n      meetingLoaded: false,\n      selectedMeeting: [],\n      is_admin: false,\n      attending: false,\n      attendeesCount: 0,\n    }\n\n  }\n\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"deleted_instance\", this.getInstance);\n    ModelStore.on(\"set_instance\", this.getInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"deleted_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.getInstance);\n  }\n\n  componentDidMount() {\n    t = dict[this.state.lang]\n    MyActions.getInstance('events', this.props.match.params.id, this.state.token);\n    var quillOne = new Quill('#editor-one', {\n      //theme: 'snow',\n      readOnly: true,\n    });\n    this.setState({ quillOne: quillOne })\n  }\n\n\n\n  handleChange(obj) {\n\n  }\n\n  getInstance() {\n    var klass = ModelStore.getKlass()\n    var model = ModelStore.getIntance()\n    if (klass === 'Event') {\n      this.setState({\n        title: model.title,\n        id: model.id,\n        event_type: model.event_type,\n        info: model.info,\n        meetings: model.meetings,\n        flyers: model.flyers,\n        attendees: model.attendees,\n        tags: model.tags,\n        is_private: model.is_private,\n        uploads: model.uploads,\n        is_admin: model.is_admin,\n        attending: model.attending,\n        attendeesCount: model.attendees_count\n      }, () => {\n        this.constructCalendar();\n      })\n    }\n    console.log(model)\n  }\n\n\n\n  deleteFlyer(id) {\n    var data = { id: id, advertisable_id: this.state.id, advertisable_type: 'Meeting' }\n    MyActions.removeInstance('flyers', data, this.state.token);\n  }\n\n  loadContent(quill_content) {\n    $('#content').html();\n    this.state.quillOne.setContents(quill_content)\n  }\n\n  toggleCalendar() {\n    this.setState({ calendar: !this.state.calendar }, () => {\n      if (this.state.calendar) {\n        $('#calendar').show();\n      } else {\n        $('#calendar').hide();\n      }\n    })\n\n\n  }\n\n  editFlyerBtn(flyer) {\n    if (this.state.is_admin) {\n      return (\n        <div class=\"col-auto\">\n          <a href={\"/#/flyers/edit/\" + flyer.id} class=\"list-group-item-actions show\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M9 7h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3\" /><path d=\"M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3\" /><line x1=\"16\" y1=\"5\" x2=\"19\" y2=\"8\" /></svg>\n          </a>\n          <a onClick={() => this.deleteFlyer(flyer.id)} class=\"list-group-item-actions show\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"4\" y1=\"7\" x2=\"20\" y2=\"7\" /><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" /><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" /><path d=\"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12\" /><path d=\"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3\" /></svg>\n          </a>\n        </div>\n      )\n    }\n  }\n\n  flyers() {\n    var result = []\n    this.state.flyers.map((flyer) => {\n      if (flyer.is_default) {\n        $('#content').html();\n        this.state.quillOne.setContents(flyer.quill_content)\n      }\n    })\n    this.state.flyers.map((flyer) => {\n      result.push(\n        <div class=\"list-group-item\">\n          <div class=\"row align-items-center\">\n            <div class=\"col text-truncate\">\n              <a onClick={() => this.loadContent(flyer.quill_content)} class=\"text-body d-block\">{flyer.title}</a>\n            </div>\n            {this.editFlyerBtn(flyer)}\n          </div>\n        </div>\n      )\n    })\n    return result\n  }\n\n\n\n\n  tagsShow(tags) {\n    var result = []\n    if (tags && tags.length > 0) {\n      tags.map((tag) => {\n        result.push(<span class=\"badge bg-lime-lt\" style={{ margin: '2px' }}>{tag.title}</span>)\n      })\n    }\n    return result\n  }\n\n  isPrivateBadge() {\n    if (this.state.is_private) {\n      return (\n        <span class=\"badge bg-red\">{t['is_private']}</span>\n      )\n    }\n  }\n\n  dateSelect(val) {\n    var result = []\n    this.state.meetings.map((meeting) => {\n      if (Date.parse(meeting.start_day) <= val._d && Date.parse(meeting.end_day) >= val._d) {\n        result.push(meeting)\n      }\n    })\n    this.setState({ selectedMeeting: result })\n  }\n\n  meetingList() {\n    var result = []\n    this.state.selectedMeeting.map((s) => {\n      result.push(\n        <div class=\"list-group-item\">\n          <div class=\"row align-items-center\">\n            <div class=\"col text-truncate\">\n              <a href={\"/#/meetings/\" + s.id} class=\"text-body d-block\">{s.title}</a>\n              <small class=\"d-block text-muted text-truncate mt-n1\">{s.info}</small>\n            </div>\n            <div class=\"col-auto\">\n              {this.tagsShow(s.tags)}\n            </div>\n          </div>\n        </div>\n      )\n    })\n    return result\n  }\n\n  constructCalendar() {\n    var result = []\n    this.state.meetings.map((meeting) => {\n      console.log(meeting)\n      result.push(\n        {\n          color: randomColor(),\n          start: meeting.start_time,\n          end: meeting.end_time\n        }\n      )\n    })\n    this.setState({ highlightRanges: this.state.highlightRanges.concat(result), today: null, meetingLoaded: true, })\n  }\n\n  showCalendar() {\n    if (this.state.meetings && this.state.meetings.length > 0 && this.state.meetingLoaded) {\n      return (\n        <div class=\"row row-deck\" id='calendar' style={{ display: 'none' }}>\n          <div class=\"col-lg-6\">\n            <div class=\"card mb-3\" >\n              <div class=\"card-body\" >\n                <EventCalendar highlightRanges={this.state.highlightRanges} today={this.state.today} dateSelect={this.dateSelect} />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"col-lg-6\">\n            <div class=\"card mb-3\">\n              <div class=\"card-header\">\n                <h3 class=\"card-title\">{t['meetings']}</h3>\n              </div>\n              <div class=\"list-group list-group-flush overflow-auto\" style={{ maxHeight: '25rem' }}>\n                {this.meetingList()}\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n    }\n  }\n\n  deleteUpload(id) {\n    var data = { id: id }\n    MyActions.removeInstance('uploads', data, this.state.token);\n  }\n\n  editUploadBtn(upload) {\n    if (this.state.is_admin) {\n      return (\n        <div class=\"col-auto p-0\">\n          <a onClick={() => this.deleteUpload(upload.id)} class=\"list-group-item-actions show\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"4\" y1=\"7\" x2=\"20\" y2=\"7\" /><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" /><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" /><path d=\"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12\" /><path d=\"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3\" /></svg>\n          </a>\n        </div>\n      )\n    }\n  }\n\n  uploads() {\n    var result = []\n    if (this.state.uploads) {\n      this.state.uploads.map((upload) => {\n        if (upload.upload_type !== 'cover') {\n          result.push(\n            <div class=\"list-group-item\">\n              <div class=\"row align-items-center\">\n                <div class=\"col text-truncate\">\n                  <a style={{ cursor: 'pointer' }} href={upload.link} target='_blank' class=\"text-body d-block\">{upload.title}</a>\n                </div>\n                {this.editUploadBtn(upload)}\n              </div>\n            </div>\n          )\n        }\n      })\n    }\n    return result\n  }\n\n  createFlyerBtn() {\n    if (this.state.is_admin) {\n      return (\n        <li class=\"nav-item ms-auto\">\n          <a class=\"nav-link\" href={\"/#/flyers/create?event_id=\" + this.state.id}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n          </a>\n        </li>\n      )\n    }\n  }\n\n  createUploadBtn() {\n    if (this.state.is_admin) {\n      return (\n        <li class=\"nav-item ms-auto\">\n          <a class=\"nav-link\" href={\"/#/uploads/create?event_id=\" + this.state.id}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n          </a>\n        </li>\n      )\n    }\n  }\n\n\n  attend(flag, attendable_id) {\n    var data = { attendable_id: attendable_id, attendable_type: 'Event', flag: flag }\n    MyActions.setInstance('attendances/attend', data, this.state.token)\n  }\n\n\n\n  render() {\n\n    return (\n      <body className=\"antialiased\">\n        <div className=\"wrapper\">\n          <Header history={this.props.history} />\n          <div className=\"page-wrapper\">\n            <div className=\"container-xl\">\n              <div className=\"page-header d-print-none\">\n                <div className=\"row align-items-center\"></div>\n                <div className=\"col\">\n                  <div className=\"page-pretitle\">{t['overview']}</div>\n                  <h2 className=\"page-title\">{t['event_detail']}</h2>\n                </div>\n              </div>\n            </div>\n            <div className=\"page-body\">\n              <div className=\"container-xl\">\n                <div className=\"row  row-cards\">\n\n                  <div class=\"col-lg-4\">\n\n                    <EventInfo\n                      title={this.state.title} info={this.state.info}\n                      isPrivateBadge={this.isPrivateBadge} tagsShow={this.tagsShow}\n                      event_type={this.state.event_type} tags={this.state.tags}\n                      toggleCalendar={this.toggleCalendar} id={this.state.id}\n                      is_admin={this.state.is_admin} attend={this.attend}\n                      attending={this.state.attending}\n                      lang={this.state.lang}\n                    />\n                    \n\n                    <MeetingCard meetings={this.state.meetings} col='12' id={this.state.id} is_admin={this.state.is_admin} lang={this.state.lang} />\n\n                    <div class=\"card mb-3\">\n                      <div class=\"card-status-top dark-bar\"></div>\n                      <div class=\"card-header header-compact\">\n                        <h3 class=\"card-title\">{t['pages']}</h3>\n                        <ul class=\"nav nav-pills card-header-pills\">\n                          {this.createFlyerBtn()}\n                        </ul>\n                      </div>\n                      <div class=\"list-group list-group-flush list-group-hoverable\">\n                        {this.flyers()}\n                      </div>\n                    </div>\n\n                    <div class=\"card mb-3\">\n                      <div class=\"card-status-top dark-bar\"></div>\n                      <div class=\"card-header header-compact\">\n                        <h3 class=\"card-title\">{t['resources']}</h3>\n                        <ul class=\"nav nav-pills card-header-pills\">\n                          {this.createUploadBtn()}\n                        </ul>\n                      </div>\n                      <div class=\"list-group list-group-flush list-group-hoverable\">\n                        {this.uploads()}\n                      </div>\n                    </div>\n\n                    <AttendanceCard attendees={this.state.attendees} attendable_type='event' attendeesCount={this.state.attendeesCount} attendable_id={this.state.id} is_admin={this.state.is_admin} lang={this.state.lang} />\n\n                  </div>\n\n                  <div class=\"col-lg-8\">\n                    {this.showCalendar()}\n                    <div class=\"card\">\n                      <div class=\"card-body\" id='content' style={{ margin: 'initial' }}>\n                        <div id=\"editor-one\"></div>\n                      </div>\n                    </div>\n                  </div>\n\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </body>\n    )\n  }\n}\n\n\n\n\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport $ from 'jquery';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport Validation from \"../common/validation.jsx\";\nimport { dict } from '../../Dict';\nimport { conf } from '../../conf';\nimport Header from \"../header/header.jsx\";\nimport { Typeahead, withAsync } from 'react-bootstrap-typeahead';\nimport moment from 'moment-jalaali'\nimport DatePicker2 from 'react-datepicker2';\nimport {\n  validateExistence\n} from \"../common/validate.js\";\n\nconst AsyncTypeahead = withAsync(Typeahead);\nconst server = conf.server;\nvar t = dict['farsi']\n\nexport default class EventCreate extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.submit = this.submit.bind(this);\n    this.getInstance = this.getInstance.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.deleteInstance = this.deleteInstance.bind(this);\n    this.getList = this.getList.bind(this);\n\n    this.modal = React.createRef();\n    this.validateExistence = validateExistence.bind(this);\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      lang: window.localStorage.getItem('lang'),\n      dir: window.localStorage.getItem('dir'),\n      title: null,\n      id: null,\n      info: null,\n      event_type: null,\n      start_date: moment(),\n      end_date: moment(),\n      is_private: false,\n      options: [],\n      tags: [],\n      validationItems: [],\n      shortname: null,\n      shortnameOk: false,\n      editing: false,\n      id: null,\n    }\n\n  }\n\n\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"got_list\", this.getList);\n    ModelStore.on(\"deleted_instance\", this.deleteInstance);\n    if (this.state.lang || this.state.lang !== null) {\n      t = dict[this.state.lang]\n    }\n\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"deleted_instance\", this.deleteInstance);\n    ModelStore.removeListener(\"got_list\", this.getList);\n  }\n\n  componentDidMount() {\n    if (this.props.match.params.id) {\n      MyActions.getInstance('events', this.props.match.params.id, this.state.token);\n    }\n\n  }\n\n  deleteInstance() {\n    this.props.history.push(\"/events/\")\n  }\n\n\n\n  handleChange(obj) {\n    this.setState(obj);\n  }\n\n  handleShortname(text) {\n    const re = /^[a-z0-9]*$/g\n    if (text.length > 2 && text.match(re)) {\n      this.setState({ shortname: text }, () => {\n        MyActions.getList('events/search_shortname', this.state.page, { shortname: text }, this.state.token);\n      });\n    } else {\n      this.setState({ shortname: text, shortnameOk: false })\n    }\n\n  }\n\n\n  getList() {\n    var list = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n\n    if (list && klass === 'Event') {\n      if (list && list.length == 0) {\n        this.setState({\n          shortnameOk: true,\n        });\n      } else {\n        this.setState({\n          shortnameOk: false,\n        });\n      }\n    } else {\n      this.setState({\n        shortnameOk: false,\n      });\n    }\n    console.log(list)\n  }\n\n  setInstance() {\n    var klass = ModelStore.getKlass()\n    var model = ModelStore.getIntance()\n    if (klass === 'Event') {\n      this.props.history.push(\"/events/\" + model.id)\n    }\n  }\n\n  getInstance() {\n    var klass = ModelStore.getKlass()\n    var model = ModelStore.getIntance()\n    if (model && klass === 'Event') {\n      this.setState({\n        id: model.id,\n        title: model.title,\n        info: model.info,\n        event_type: model.event_type,\n        tags: model.tags,\n        is_private: model.is_private,\n        start_date: model.start_date,\n        end_date: model.end_date,\n        shortname: model.shortname,\n        shortnameOk: true,\n        editing: true,\n      }, () => {\n        console.log(this.state)\n        this.changeType(this.state.event_type)\n        this.tagSelected(this.state.tags);\n      })\n    }\n  }\n\n  submit() {\n    var data = this.state\n    if (this.validateExistence(['title', 'info']) && this.state.shortnameOk) {\n      $('#submit-button').hide();\n      $('#submit-spinner').show();\n      var data = {\n        title: this.state.title,\n        id: this.state.id,\n        info: this.state.info,\n        event_type: this.state.event_type,\n        start_date: this.state.start_date,\n        end_date: this.state.end_date,\n        is_private: this.state.is_private,\n        tags: this.state.tags,\n        shortname: this.state.shortname,\n      }\n      if (!this.state.editing) {\n        MyActions.setInstance('events', data, this.state.token);\n      } else {\n        MyActions.updateInstance('events', data, this.state.token);\n      }\n    }\n  }\n\n\n\n  changeType(e) {\n    var self = this;\n    $('.form-selectgroup-input').each(function () {\n      if ($(this).val() !== e) {\n        $(this).prop(\"checked\", false)\n      } else {\n        if ($(this).checked) {\n          $(this).prop(\"checked\", false)\n        } else {\n          $(this).prop(\"checked\", true)\n          self.setState({ event_type: e })\n        }\n      }\n    })\n  }\n\n  tagSelected(tags) {\n    var result = []\n    tags.map((tag) => {\n      if (tag['title']) {\n        result.push(tag['title'])\n      } else {\n        result.push(tag)\n      }\n    })\n    this.setState({ tags: result }, () => console.log(this.state.tags))\n  }\n\n  tagShow() {\n    if (this.props.match.params.id && this.state.id) {\n      return (this.tagInput())\n    }\n\n    if (!this.props.match.params.id) {\n      return (this.tagInput())\n    }\n  }\n\n  tagInput() {\n    return (\n      <div style={{ direction: 'ltr', marginBottom: '70px' }}>\n        <AsyncTypeahead\n          id='event-tag'\n          allowNew\n          multiple\n          defaultSelected={this.state.tags}\n          isLoading={this.state.isLoading}\n          labelKey='title'\n          onSearch={(query) => {\n            this.setState({ isLoading: true });\n            fetch(server + \"/tags/search?q=\" + query)\n              .then((resp) => resp.json())\n              .then(({ items }) => {\n                this.setState({ options: items, isLoading: false }, () => console.log(this.state.options))\n              });\n          }}\n          onChange={(t) => this.tagSelected(t)}\n          options={this.state.options}\n          renderMenuItemChildren={(option, props) => (\n            <React.Fragment>\n              <span>{option.title}</span>\n            </React.Fragment>\n          )}\n        />\n      </div>\n    )\n  }\n\n\n\n  deleteEvent() {\n    var data = { id: this.state.id }\n    MyActions.removeInstance('events', data, this.state.token);\n  }\n\n  deleteBtn() {\n    if (this.state.editing) {\n      return (\n        <button id='delete-button' onClick={() => { if (window.confirm(t['are_you_sure'])) this.deleteEvent() }} class=\"btn btn-danger ms-auto\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"4\" y1=\"7\" x2=\"20\" y2=\"7\" /><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" /><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" /><path d=\"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12\" /><path d=\"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3\" /></svg>\n          {t['delete']}\n        </button>\n      )\n    }\n  }\n\n\n  changeDefault(e) {\n    if (this.state.is_private) {\n      this.setState({ is_private: false })\n    } else {\n      this.setState({ is_private: true })\n    }\n  }\n\n\n\n  render() {\n    const { is_private } = this.state;\n\n    return (\n      <body className=\"antialiased\">\n        <Validation items={this.state.validationItems} modal={this.modal} lang={this.state.lang} />\n        <div className=\"wrapper\">\n          <Header history={this.props.history} />\n          <div className=\"page-wrapper\">\n            <div className=\"container-xl\">\n              <div className=\"page-header d-print-none\">\n                <div className=\"row align-items-center\"></div>\n                <div className=\"col\">\n                  <div className=\"page-pretitle\">{t['create_event_page']}</div>\n                  <h2 className=\"page-title\">{t['provide_following_info']}</h2>\n                </div>\n              </div>\n            </div>\n            <div className=\"page-body\">\n              <div className=\"container-xl\">\n                <div className=\"row row-deck row-cards\">\n                  <div class=\"col-md-8\">\n                    <div class=\"card\">\n                      <div class=\"card-header\">\n                        <h3 class=\"card-title\">{t['create_event']}</h3>\n                      </div>\n                      <div class=\"card-body\">\n                        <form>\n                          <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['event_title']}</label>\n                            <input type=\"text\" onInput={(e) => { this.handleChange({ title: e.target.value }) }} id='title' class=\"form-control\" name=\"text-input\" placeholder={t['write_something']} value={this.state.title} />\n                          </div>\n                          <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['event_info']}<span class=\"form-label-description\"></span></label>\n                            <textarea onInput={(e) => { this.handleChange({ info: e.target.value }) }} class=\"form-control\" id='content' name=\"example-textarea-input\" rows=\"6\" placeholder={t['write_something']} value={this.state.info}></textarea>\n                          </div>\n\n                          <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['event_shortname']}</label>\n                            <input type=\"text\" onInput={(e) => { this.handleShortname(e.target.value) }} id='shortanme' className={!this.state.shortnameOk ? \"form-control is-invalid\" : \"form-control is-valid\"} name=\"text-input\" placeholder={t['write_something']} value={this.state.shortname} />\n                            <div class=\"form-hint\">{t['shortname_note']}</div>\n                          </div>\n\n                          <div class=\"mb-3 \" id='tags' >\n                            <label class=\"form-label\" >{t['tags']}</label>\n                            {this.tagShow()}\n                          </div>\n\n                          <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['event_type']}</label>\n                            <div class=\"form-selectgroup\">\n                              <label class=\"form-selectgroup-item\">\n                                <input type=\"checkbox\" name=\"name\" value=\"in_person\" class=\"form-selectgroup-input\" checked=\"\" onClick={(e) => this.changeType(e.target.value)} />\n                                <span class=\"form-selectgroup-label\">{t['in_person']}</span>\n                              </label>\n                              <label class=\"form-selectgroup-item\">\n                                <input type=\"checkbox\" name=\"name\" value=\"hybrid\" class=\"form-selectgroup-input\" onClick={(e) => this.changeType(e.target.value)} />\n                                <span class=\"form-selectgroup-label\">{t['hybrid']}</span>\n                              </label>\n                              <label class=\"form-selectgroup-item\">\n                                <input type=\"checkbox\" name=\"name\" value=\"online\" class=\"form-selectgroup-input\" onClick={(e) => this.changeType(e.target.value)} />\n                                <span class=\"form-selectgroup-label\">{t['online']}</span>\n                              </label>\n                            </div>\n                          </div>\n\n\n\n                          <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['event_start_date']}<span class=\"form-label-description\"></span></label>\n                            <DatePicker2\n                              timePicker={false}\n                              isGregorian={false}\n                              onChange={value => { this.setState({ start_date: value }) }}\n                              value={moment(this.state.start_date)}\n                            />\n                          </div>\n\n                          <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['event_end_date']}<span class=\"form-label-description\"></span></label>\n                            <DatePicker2\n                              timePicker={false}\n                              isGregorian={false}\n                              onChange={value => { this.setState({ end_date: value }) }}\n                              value={moment(this.state.end_date)}\n                            />\n                          </div>\n\n                          <div class=\"mb-3\">\n                            <div class=\"form-label\">{t['is_private']}</div>\n                            <label class=\"form-check form-switch\">\n                              <input class=\"form-check-input\" type=\"checkbox\" onClick={(e) => this.changeDefault(e.target.value)} checked={is_private ? true : false} />\n                              <span class=\"form-check-label\">{t['default_is_private_info']}</span>\n                            </label>\n                          </div>\n\n                        </form>\n                      </div>\n                      <div class=\"card-footer\">\n                        <div class=\"d-flex\">\n                          <a href=\"/#/events\" class=\"btn btn-link\">{t['cancel']}</a>\n                          {this.deleteBtn()}\n                          <button id='submit-button' onClick={() => this.submit()} class=\"btn btn-primary ms-auto\">{t['submit']}</button>\n                          <div id='submit-spinner' class=\"spinner-border text-red ms-auto\" role=\"status\" style={{ display: 'none' }}></div>\n                        </div>\n                      </div>\n                      <div class=\"progress progress-sm card-progress\">\n                        <div class=\"progress-bar\" style={{ width: \"100%\" }} role=\"progressbar\" aria-valuenow=\"38\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n                          <span class=\"visually-hidden\">38% Complete</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"col-md-4\">\n                    <div class=\"card\">\n                      <div class=\"card-status-top bg-lime\"></div>\n                      <div class=\"card-body\">\n                        <h3 class=\"card-title\"></h3>\n                        <p></p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </body>\n    )\n  }\n}\n\n\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport Header from \"../header/header.jsx\";\nimport queryString from 'query-string'\n\nexport default class EventAttendance extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.setInstance = this.setInstance.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.getInstance = this.getInstance.bind(this);\n        this.getMultipleList = this.getMultipleList.bind(this);\n        this.search = this.search.bind(this);\n\n        \n        this.state = {\n            token: window.localStorage.getItem('token'),\n            title: null,\n            attendances: null,\n            users: null,\n            attendable_type: '',\n            attendable_id: 0,\n            q: '',\n            selectedUser: null,\n        }\n\n    }\n    componentWillMount() {\n        ModelStore.on(\"got_multiple_list\", this.getMultipleList);\n        ModelStore.on(\"set_instance\", this.setInstance);\n        ModelStore.on(\"deleted_instance\", this.getInstance);\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"got_multiple_list\", this.getMultipleList);\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n        ModelStore.removeListener(\"deleted_instance\", this.getInstance);\n    }\n\n    componentDidMount() {\n        const value = queryString.parse(this.props.location.search);\n        var attendable_type = '';\n        var attendable_id = 0;\n        Object.keys(value).map((key) => {\n            var splited = key.split(\"_\")\n            if (splited[0]) {\n                attendable_type = splited[0].charAt(0).toUpperCase() + splited[0].slice(1);\n                attendable_id = value[key]\n            }\n        })\n        this.setState({ attendable_type: attendable_type, attendable_id: attendable_id }, () => {\n            MyActions.getMultipleList('attendances', this.state.page, this.state, this.state.token);\n        })\n\n    }\n\n\n    getMultipleList() {\n        var multiple = ModelStore.getMutipleList()\n        var klass = ModelStore.getKlass()\n        console.log(multiple)\n        if (multiple && klass === 'Attendance') {\n            this.setState({\n                users: multiple.users,\n                attendances: multiple.attendances,\n            });\n        }\n    }\n\n\n    getInstance() {\n        MyActions.getMultipleList('attendances', this.state.page, this.state, this.state.token);\n    }\n\n\n\n    handleChange(obj) {\n        this.setState(obj);\n    }\n\n    search(q) {\n        if (q.length > 3) {\n            this.setState({ q: q }, () =>\n                MyActions.getMultipleList('attendances', this.state.page, this.state, this.state.token)\n            );\n        } else {\n            this.setState({ q: '' }, () =>\n            MyActions.getMultipleList('attendances', this.state.page, this.state, this.state.token)\n        );\n        }\n    }\n\n    setInstance() {\n        MyActions.getMultipleList('attendances', this.state.page, this.state, this.state.token);\n    }\n\n    addParticipant(user_id) {\n        if (this.state.attendable_type !== '') {\n            var data = { attendable_id: this.state.attendable_id, attendable_type: this.state.attendable_type, user_id: user_id }\n            MyActions.setInstance('attendances', data, this.state.token);\n        }\n    }\n\n    removeParticipant(id) {\n        var data = { id: id, attendable_id: this.state.attendable_id, attendable_type: this.state.attendable_type }\n        MyActions.removeInstance('attendances', data, this.state.token);\n    }\n\n    userItems(users) {\n        var result = []\n        if (users) {\n            users.map((user) => {\n                result.push(\n                    <div class=\"list-group-item\" style={{ border: 'none' }}>\n                        <div class=\"row align-items-center\">\n                            <div class=\"col-auto\">\n                                <a onClick={() => this.addParticipant(user.user_id)}>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n                                </a>\n                            </div>\n                            <div class=\"col-auto\">\n                                <a href=\"#\">\n                                    <span class=\"avatar\" >{user.initials}</span>\n                                </a>\n                            </div>\n                            <div class=\"col text-truncate\">\n                                <a href=\"#\" class=\"text-body d-block\">{user.name}</a>\n                                <small class=\"d-block text-muted text-truncate mt-n1\">{user.bio}</small>\n                            </div>\n                            <div class=\"col-auto\">\n                            </div>\n\n                        </div>\n                    </div>\n                )\n            })\n        }\n        return result\n    }\n\n    attendanceItems(attendances) {\n        var result = []\n        if (attendances) {\n            attendances.map((attendance) => {\n                var user = attendance.profile\n                result.push(\n                    <div class=\"list-group-item\" style={{ border: 'none' }}>\n                        <div class=\"row align-items-center\">\n                            <div class=\"col-auto\">\n                                <a onClick={() => this.removeParticipant(attendance.id)}>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n                                </a>\n                            </div>\n                            <div class=\"col-auto\">\n                                <a href=\"#\">\n                                    <span class=\"avatar\" >{user.initials}</span>\n                                </a>\n                            </div>\n                            <div class=\"col text-truncate\">\n                                <a href=\"#\" class=\"text-body d-block\">{user.name}</a>\n                                <small class=\"d-block text-muted text-truncate mt-n1\">{user.bio}</small>\n                            </div>\n                            <div class=\"col-auto\">\n                            </div>\n\n                        </div>\n                    </div>\n                )\n            })\n        }\n        return result\n    }\n\n\n    render() {\n\n        return (\n            <body className=\"antialiased\">\n                <div className=\"wrapper\">\n                    <Header history={this.props.history}/>\n                    <div className=\"page-wrapper\">\n                        <div className=\"container-xl\">\n                            <div className=\"page-header d-print-none\">\n                                <div className=\"row align-items-center\"></div>\n                                <div className=\"col\">\n                                    <div className=\"page-pretitle\">add participants</div>\n                                    <h2 className=\"page-title\">{this.state.title}</h2>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"page-body\">\n                            <div className=\"container-xl\">\n                                <div className=\"row row-deck row-cards\">\n                                    <div className=\"col-md-6\">\n                                        <div class=\"card mb-3\">\n                                            <div class=\"card-header\">\n                                                <h3 class=\"card-title\">All Users</h3>\n                                            </div>\n                                            <div class=\"list-group list-group-flush list-group-hoverable\">\n                                                <div class=\"list-group-item\">\n                                                    <div class=\"input-icon \">\n                                                        <input type=\"text\" class=\"form-control\" placeholder=\"Search\" onInput={(e) => { this.search(e.target.value) }} />\n                                                        <span class=\"input-icon-addon\">\n\n                                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"10\" cy=\"10\" r=\"7\"></circle><line x1=\"21\" y1=\"21\" x2=\"15\" y2=\"15\"></line></svg>\n                                                        </span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            {this.userItems(this.state.users)}\n                                        </div>\n                                    </div>\n\n                                    <div className=\"col-md-6\">\n                                        <div class=\"card mb-3\">\n                                            <div class=\"card-header\">\n                                                <h3 class=\"card-title\">Participants</h3>\n                                            </div>\n                                            <div class=\"list-group list-group-flush list-group-hoverable\">\n                                                {this.attendanceItems(this.state.attendances)}\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        )\n    }\n}\n\n\n\n\n","import React from \"react\";\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport { v4 as uuidv4 } from 'uuid';\nimport moment from 'jalali-moment'\nmoment.locale('fa', { useGregorianParser: true });\n\nconst t = dict['fa']\n\n\nconst MeetingInfo = (props) => {\n    function isEvent() {\n        if (props.event) {\n            return (\n                <React.Fragment>\n                    <h4>{t['related_to_event']}:</h4>\n                    <div class=\"text-muted mb-3\">\n                        <a href={'/#/events/' + props.event.id}>{props.event.title}</a>\n                    </div>\n                </React.Fragment>\n            )\n        }\n    }\n\n    function footerBar() {\n        if (props.page && props.page == 'meeting') {\n            return (\n                <div class=\"card-footer\">\n                    <div class=\"mt-2\">\n                        <a href={\"/#/rooms/\" + props.room_id + \"?rnd=\" + uuidv4()} onClick={props.forceUpdate} class=\"btn btn-primary bg-lime w-100\">\n                            {t['enter_room']}\n                        </a>\n                    </div>\n                </div>\n            )\n        }\n        if (props.page && props.page == 'detail') {\n            return (\n                <div class=\"card-footer\">\n                    <div class=\"row align-items-center\">\n                        <div class=\"col-auto \">\n                            <div class=\"avatar-list avatar-list-stacked\">\n                                {avatar()}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n    }\n\n    function avatar() {\n        var result = []\n        if (props.attendees) {\n            props.attendees.map((att) => {\n                result.push(<span class=\"avatar avatar-sm avatar-rounded\" >{att.initials}</span>)\n            })\n        }\n        return result\n    }\n\n    function formatGregorianDate(gregorianDate) {\n        var date = new Date(gregorianDate);\n        var day = date.getDate();\n        var month = date.getMonth() + 1;\n        var year = date.getFullYear();\n        var hours = date.getHours();\n        var minutes = date.getMinutes();\n        var fullYear = year + '/' + month + '/' + day + ' ' + hours + ':' + minutes;\n        return fullYear;\n    }\n\n    function sideBlock(item, title) {\n        if (props[item]) {\n            return (\n                <React.Fragment>\n                    <h4>{title}:</h4>\n                    <div class=\"text-muted mb-3\">\n                        {props[item]}\n                    </div>\n                </React.Fragment>\n            )\n        }\n    }\n    return (\n        <div class=\"card mb-3\">\n            <div className=\"card-header\" >\n                <h3 class=\"card-title\">{props.title}</h3>\n                <ul class=\"nav nav-pills card-header-pills\">\n                    <li class=\"nav-item\" style={{ marginRight: '10px' }}>\n                        {props.isPrivateBadge()}\n                    </li>\n                    <li class=\"nav-item ms-auto\">\n                        <a class=\"nav-link p-1\" href={\"/#/meetings/edit/\" + props.id}>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M9 7h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3\" /><path d=\"M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3\" /><line x1=\"16\" y1=\"5\" x2=\"19\" y2=\"8\" /></svg>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n            <div class=\"card-body\">\n                {isEvent()}\n                {sideBlock('info', t['meeting_info'])}\n                <React.Fragment>\n                    <h4>{t['meeting_type']}:</h4>\n                    <div class=\"text-muted mb-3\">\n                        {t[props.meeting_type]}\n                    </div>\n                </React.Fragment>\n                {sideBlock('capacity', t['meeting_capacity'])}\n                {sideBlock('external_link', t['meeting_external_link'])}\n\n                <h4>{t['meeting_start_time']}:</h4>\n                <div class=\"text-muted mb-3\">\n                    {moment(formatGregorianDate(props.start_time)).format('HH:mm jYYYY/jMM/jDD')}\n                </div>\n\n                <h4>{t['meeting_end_time']}:</h4>\n                <div class=\"text-muted mb-3\">\n                    {moment(formatGregorianDate(props.end_time)).format('HH:mm YYYY/MM/DD')}\n                </div>\n\n                <h4>{t['tags']}</h4>\n                <div class=\"text-muted mb-3\">\n                    {props.tagsShow(props.tags)}\n                </div>\n\n\n            </div>\n\n            {footerBar()}\n\n        </div>\n    )\n}\nexport default MeetingInfo;\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport Header from \"../header/header.jsx\";\nimport { Calendar } from 'react-datepicker2';\nimport moment from 'moment-jalaali'\nimport randomColor from \"randomcolor\";\nimport DatePicker2 from 'react-datepicker2';\nimport MeetingInfo from \"../meetings/info.jsx\";\nimport $ from 'jquery';\nconst t = dict['fa']\n\nexport default class EventDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.getInstance = this.getInstance.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.isPrivateBadge = this.isPrivateBadge.bind(this);\n    this.getList = this.getList.bind(this);\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      title: null,\n      id: null,\n      event_type: null,\n      info: null,\n      meetings: [],\n      tags: [],\n      is_private: false,\n      allTags: [],\n      start_time: moment(),\n      end_time: moment(),\n      selectedTags: []\n    }\n\n  }\n\n\n  componentWillMount() {\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"deleted_instance\", this.getInstance);\n    ModelStore.on(\"got_list\", this.getList);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"deleted_instance\", this.getInstance);\n    ModelStore.removeListener(\"got_list\", this.getList);\n  }\n\n  componentDidMount() {\n    MyActions.getInstance('events', this.props.match.params.id, this.state.token);\n    MyActions.getList('events/tags', this.state.page, { id: this.props.match.params.id });\n    //MyActions.getList('events/meetings', this.state.page, { id: this.props.match.params.id });\n  }\n\n\n\n  handleChange(obj) {\n\n  }\n\n  getInstance() {\n    var klass = ModelStore.getKlass()\n    var model = ModelStore.getIntance()\n    if (klass === 'Event') {\n      this.setState({\n        title: model.title,\n        id: model.id,\n        event_type: model.event_type,\n        info: model.info,\n        meetings: model.meetings,\n        tags: model.tags,\n        is_private: model.is_private\n      }, () => {\n        //this.constructCalendar();\n      })\n    }\n    console.log(model)\n  }\n\n  getList() {\n    var list = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (list && klass === 'Tag') {\n      this.setState({\n        allTags: list,\n      });\n    }\n    if (list && klass === 'Meeting') {\n      this.setState({\n        meetings: list,\n      });\n    }\n    console.log(list)\n  }\n\n\n\n\n\n\n\n  tagsShow(tags) {\n    var result = []\n    if (tags && tags.length > 0) {\n      tags.map((tag) => {\n        result.push(<span class=\"badge bg-lime-lt\" style={{ margin: '2px' }}>{tag.title}</span>)\n      })\n    }\n    return result\n  }\n\n  isPrivateBadge() {\n    if (this.state.is_private) {\n      return (\n        <span class=\"badge bg-red-lt\">{t['is_private']}</span>\n      )\n    }\n  }\n\n  changeTags(e) {\n    var self = this;\n    var el = '#tag-check-' + e.target.value\n    console.log($(el), $(el).is(':checked'))\n    if (!$(el).is(':checked')) {\n      // $('#tag-check-'+e.target.value).prop(\"checked\", false)\n      var array = [...self.state.selectedTags]; // make a separate copy of the array\n      var index = array.indexOf(e.target.value)\n      if (index !== -1) {\n        array.splice(index, 1);\n        self.setState({ selectedTags: array })\n      }\n\n    } else {\n      //  $('#tag-check-'+e.target.value).prop(\"checked\", true)\n      self.setState({ selectedTags: self.state.selectedTags.concat(e.target.value) }, () => {\n        console.log(self.state.selectedTags)\n      })\n    }\n  }\n\n  tagCheckbox() {\n    var result = []\n    if (this.state.allTags) {\n      this.state.allTags.map((tag) => {\n        result.push(\n          <label class=\"form-check\">\n            <input id={'tag-check-' + tag.id} class=\"form-check-input\" type=\"checkbox\" style={{ marginTop: '3.5px' }} value={tag.id} onChange={(e) => this.changeTags(e)} />\n            <span class=\"form-check-label\">\n              <span class=\"badge bg-lime-lt\" style={{ margin: '2px' }}>{tag.title}</span>\n            </span>\n          </label>\n        )\n      })\n    }\n    return result\n  }\n\n  checkTags() {\n\n  }\n\n\n  meetingList() {\n    var result = []\n    this.state.meetings.map((meeting) => {\n      // console.log(meeting.info)\n      result.push(\n\n        <MeetingInfo\n          title={meeting.title} info={meeting.info} start_time={meeting.start_time}\n          end_time={meeting.end_time} isPrivateBadge={this.isPrivateBadge} tagsShow={this.tagsShow}\n          meeting_type={meeting.meeting_type} tags={meeting.tags}\n          id={meeting.id} event={meeting.event} page='detail'\n          attendees={meeting.attendees}\n        />\n      )\n    })\n    return result\n  }\n\n  filterSearch() {\n    MyActions.getList('events/meetings', this.state.page, { tag_ids: this.state.selectedTags, start_time: this.state.start_time, end_time: this.state.end_time, id: this.props.match.params.id }, this.state.token);\n  }\n\n\n\n\n\n  render() {\n\n    return (\n      <body className=\"antialiased\">\n        <div className=\"wrapper\">\n          <Header history={this.props.history}/>\n          <div className=\"page-wrapper\">\n            <div className=\"container-xl\">\n              <div className=\"page-header d-print-none\">\n                <div className=\"row align-items-center\"></div>\n                <div className=\"col\">\n                  <div className=\"page-pretitle\">{t['overview']}</div>\n                  <h2 className=\"page-title\">{t['event_detail']}</h2>\n                </div>\n              </div>\n            </div>\n            <div className=\"page-body\">\n              <div className=\"container-xl\">\n                <div className=\"row  row-cards\">\n\n                  <div class=\"col-lg-3\">\n                    <div class=\"card mb-3\">\n                      <div class=\"card-header\">\n                        <h3 class=\"card-title\">\n                          <a href={\"/#/events/\" + this.state.id}>\n                            {this.state.title}\n                          </a>\n                        </h3>\n\n                      </div>\n                      <div class=\"card-header\">\n                        <div class=\"mb-3\" style={{width: '100%'}}>\n                          <label class=\"form-label \">{t['meeting_start_time']}<span class=\"form-label-description\"></span></label>\n                          <DatePicker2\n                            isGregorian={false}\n                            onChange={value => { this.setState({ start_time: value }) }}\n                            value={moment(this.state.start_time)}\n                          />\n                          <label class=\"form-label mt-2\">{t['meeting_end_time']}<span class=\"form-label-description\"></span></label>\n                          <DatePicker2\n                            isGregorian={false}\n                            onChange={value => { this.setState({ end_time: value }) }}\n                            value={moment(this.state.end_time)}\n                          />\n                        </div>\n                      </div>\n                      <div class=\"card-header\">\n                        <div class=\"mb-3\">\n                          <div class=\"subheader mb-2\">\n                            {t['tags']}\n                          </div>\n                          <div>\n                            {this.tagCheckbox()}\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"card-body\">\n\n                        <a onClick={() => this.filterSearch()} class=\"btn btn-primary w-100\">\n                          <span style={{ verticalAlign: '-2px' }}>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M5.5 5h13a1 1 0 0 1 .5 1.5l-5 5.5l0 7l-4 -3l0 -4l-5 -5.5a1 1 0 0 1 .5 -1.5\" /></svg>\n                          </span>\n                          {t['filter']}\n                        </a>\n                      </div>\n\n                    </div>\n                  </div>\n\n                  <div class=\"col-lg-9 col-xs-9\">\n                    {this.meetingList()}\n                  </div>\n\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </body>\n    )\n  }\n}\n\n\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport { conf } from '../../conf';\nimport queryString from 'query-string'\n\nvar t = dict['farsi']\n\nexport default class LoginJwt extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.getList = this.getList.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n        this.state = {\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            token: null,\n            notFound: false,\n        }\n\n    }\n\n\n\n    componentWillMount() {\n        ModelStore.on(\"got_list\", this.getList);\n    }\n\n    componentWillUnmount() {\n        t = dict[this.state.lang]\n        ModelStore.removeListener(\"got_list\", this.getList);\n    }\n\n    componentDidMount() {\n        document.dir = this.state.dir\n        MyActions.getList('events/shortname_list', 1, { shortname: this.props.match.params.shortname }, this.state.token);\n        // MyActions.getList('events/shortname_list', {}, this.props.match.params.id);\n    }\n\n\n\n    handleChange(obj) {\n        this.setState(obj);\n    }\n\n    getList() {\n        var klass = ModelStore.getKlass()\n        var list = ModelStore.getList()\n        if (klass === 'Event' && list && list[0]) {\n            window.localStorage.setItem('event_id', list[0].id);\n            window.localStorage.setItem('event_name', list[0].shortname);\n            this.props.history.push(\"/events\")\n        } else {\n            this.setState({ notFound: true })\n        }\n        console.log(list)\n    }\n\n    languageBtn() {\n        return (\n\n            <div class=\"dropdown\">\n                <button type=\"button\" onClick={() => this.setState({ langBtnActive: !this.state.langBtnActive })} className={this.state.langBtnActive ? \"btn btn-secondary dropdown-toggle show\" : \"btn btn-secondary dropdown-toggle\"} data-bs-toggle=\"dropdown\">\n                    <span className='mx-1'>Language</span>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M5 7h7m-2 -2v2a5 8 0 0 1 -5 8m1 -4a7 4 0 0 0 6.7 4\" /><path d=\"M11 19l4 -9l4 9m-.9 -2h-6.2\" /></svg>\n                </button>\n                <div className={this.state.langBtnActive ? \"dropdown-menu show\" : \"dropdown-menu\"}>\n                    <a class=\"dropdown-item\" onClick={() => this.changeLang('farsi', 'rtl')}>\n                        \n                    </a>\n                    <a class=\"dropdown-item\" onClick={() => this.changeLang('english', 'ltr')}>\n                        English\n                    </a>\n                </div>\n            </div>\n\n\n        )\n    }\n\n    changeLang(lang, dir) {\n        window.localStorage.setItem('lang', lang)\n        window.localStorage.setItem('dir', dir)\n        window.location.reload()\n    }\n\n    notFoundNotice() {\n        if (this.state.notFound) {\n            <div class=\"empty\">\n                {this.languageBtn()}\n                <div class=\"empty-img\">\n                    <div className=\"demo-icon-preview\"><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M12 9v2m0 4v.01\"></path><path d=\"M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75\"></path></svg></div>\n                </div>\n                <p class=\"empty-title\">{t['event_not_found_by_name']}</p>\n                <p class=\"empty-subtitle text-muted\">\n                    {t['not_found_note']}\n                </p>\n                <div class=\"empty-action\">\n                    <a href=\"/\" class=\"btn btn-primary\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line><line x1=\"5\" y1=\"12\" x2=\"11\" y2=\"18\"></line><line x1=\"5\" y1=\"12\" x2=\"11\" y2=\"6\"></line></svg>\n                        {t['take_me_home']}\n                    </a>\n                </div>\n            </div>\n        }\n    }\n\n    render() {\n        return (\n            <div class=\"flex-fill d-flex align-items-center justify-content-center\">\n                <div class=\"container-tight py-6\">\n                    {this.notFoundNotice()}\n                </div>\n            </div>\n        )\n    }\n}\n\n\n\n\n","import React from \"react\";\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport { v4 as uuidv4 } from 'uuid';\nimport moment from 'jalali-moment'\nimport mm from 'moment'\nmoment.locale('fa', { useGregorianParser: true });\n\n\n\nconst MeetingMasonry = (props) => {\n    var t = dict[props.lang]\n    function formatGregorianDate(gregorianDate) {\n        var date = new Date(gregorianDate);\n        var day = date.getDate();\n        var month = date.getMonth() + 1;\n        var year = date.getFullYear();\n        var hours = date.getHours();\n        var minutes = date.getMinutes();\n        var fullYear = year + '/' + month + '/' + day + ' ' + hours + ':' + minutes;\n        return fullYear;\n    }\n\n\n    function cardCover(meeting) {\n        if (meeting.cover) {\n            return (\n                <a href={'#/meetings/' + meeting.id}>\n                    <div class=\"card-img-top img-responsive img-responsive-16by9\" style={{ backgroundImage: \"url(\" + meeting.cover + \")\" }}></div>\n                </a>\n            )\n        }\n    }\n\n    function tagsShow(tags) {\n        var result = []\n        if (tags && tags.length > 0) {\n            tags.map((tag) => {\n                result.push(<span class=\"badge bg-lime-lt\" style={{ margin: '2px' }}>{tag.title}</span>)\n            })\n        }\n        return result\n    }\n\n    function attend(meeting) {\n        if (!meeting.is_admin) {\n            if (meeting.attending) {\n                return (\n                    <div className=\"card-footer\" style={{ display: 'initial' }}>\n                        <div class=\"d-flex\">\n                            <a href={'#/meetings/' + meeting.id} class=\"btn btn-facebook ms-auto mx-1\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"2\" /><path d=\"M12 19c-4 0 -7.333 -2.333 -10 -7c2.667 -4.667 6 -7 10 -7s7.333 2.333 10 7c-.42 .736 -.858 1.414 -1.311 2.033\" /><path d=\"M15 19l2 2l4 -4\" /></svg>\n                                {t['view']}\n                            </a>\n                            <a onClick={() => props.attend(false, meeting.id)} class=\"btn btn-outline-secondary \">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"mx-1\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"9\" /><path d=\"M10 10l4 4m0 -4l-4 4\" /></svg>\n                                {t['unregister']}\n                            </a>\n\n                        </div>\n                    </div>\n                )\n            } else {\n                return (\n                    <div className=\"card-footer\" style={{ display: 'initial' }}>\n                        <div class=\"d-flex\">\n                            <a onClick={() => props.attend(true, meeting.id)} class=\"btn bg-dark-lt ms-auto\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"mx-1\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"9\" /><path d=\"M9 12l2 2l4 -4\" /></svg>\n                                {t['register']}\n                            </a>\n                        </div>\n                    </div>\n                )\n            }\n        }\n    }\n\n    function meetingLink(meeting) {\n        if (meeting.attending) {\n            return (\n                <a href={'#/meetings/' + meeting.id}>\n                    {meeting.title}\n                </a>\n            )\n        } else {\n            return (\n                <span>{meeting.title}</span>\n            )\n        }\n    }\n\n    function calendarType(date) {\n        if (props.lang === 'farsi') {\n            return (\n                moment(formatGregorianDate(date)).format('HH:mm jYYYY/jMM/jDD')\n            )\n        } else {\n            return (\n                mm(date).format('YYYY/MM/DD HH:mm')\n            )\n        }\n    }\n\n    function meetingItems() {\n        var result = []\n        if (props.meetings) {\n            props.meetings.map((meeting) => {\n                result.push(\n\n\n                    <div className={props.col ? \"col-md-\" + props.col : \"col-md-8\"}>\n                        <div className=\"card mb-2\">\n                            {cardCover(meeting)}\n\n                            <div className=\"card-body\">\n                                <h3 class=\"card-title\">\n                                    {meetingLink(meeting)}\n                                </h3>\n                                <p style={{ textAlign: 'justify' }}>\n                                    {meeting.truncated_info}\n                                </p>\n\n                                <div class='row'>\n                                    <div class='col-md-6'>\n                                        <h4>{t['meeting_start_time']}:</h4>\n                                        <div class=\"text-muted mb-3\">\n                                            {calendarType(meeting.start_time)}\n                                        </div>\n                                    </div>\n                                    <div class='col-md-6'>\n                                        <h4>{t['meeting_end_time']}:</h4>\n                                        <div class=\"text-muted mb-3\">\n                                            {calendarType(meeting.end_time)}\n                                        </div>\n                                    </div>\n                                </div>\n\n\n                                <h4>{t['tags']}</h4>\n                                <div class=\"text-muted\">\n                                    {tagsShow(meeting.tags)}\n                                </div>\n                            </div>\n                            {attend(meeting)}\n                        </div>\n                    </div>\n\n                )\n            })\n        }\n        return result\n    }\n\n    return (\n        <React.Fragment>\n            {meetingItems()}\n        </React.Fragment>\n    )\n}\nexport default MeetingMasonry;\n","import React from 'react';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport $ from 'jquery';\nimport { dict } from '../../Dict';\nimport { conf } from '../../conf';\nimport queryString from 'query-string'\nimport Header from \"../header/header.jsx\";\nimport MeetingMasonry from \"./masonry.jsx\";\nimport moment from 'moment-jalaali';\nimport mm from 'moment';\nimport DatePicker2 from 'react-datepicker2';\nimport DatePicker from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { Typeahead, withAsync } from 'react-bootstrap-typeahead';\nimport {\n    isFirefox, isMobile\n} from \"react-device-detect\";\nconst AsyncTypeahead = withAsync(Typeahead);\nconst server = conf.server;\nvar t = dict['farsi']\n\nexport default class MeetingIndex extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.setInstance = this.setInstance.bind(this);\n        this.getList = this.getList.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.attend = this.attend.bind(this);\n        this.getInstance = this.getInstance.bind(this);\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            event_id: window.localStorage.getItem('event_id'),\n            title: null,\n            meetings: null,\n            events: null,\n            q: '',\n            start_from: mm(),\n            start_to: mm().add(2, 'Month'),\n            tags: [],\n            page: 1,\n            pages: 0,\n            registration_status: 'all',\n            searched: false,\n\n            isGregorian: true,\n            userAbilities: null,\n            insideEvent: false,\n        }\n\n    }\n\n\n\n    componentWillMount() {\n        ModelStore.on(\"got_list\", this.getList);\n        ModelStore.on(\"set_instance\", this.setInstance);\n        ModelStore.on(\"got_instance\", this.getInstance);\n        if (this.state.lang) {\n            t = dict[this.state.lang]\n        }\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"got_list\", this.getList);\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n        ModelStore.removeListener(\"got_instance\", this.getInstance);\n    }\n\n    componentDidMount() {\n        if (this.state.lang === 'farsi') {\n            this.setState({\n                start_from: moment(),\n                start_to: moment().add(2, 'jMonth'),\n                isGregorian: false,\n            })\n        }\n        var stored_event = window.localStorage.getItem('event_id')\n        if(stored_event !== '' && stored_event !== null) {\n            this.setState({insideEvent: true})\n        }  \n        var location = window.location.href.split('#')[0].split('/')\n        const value = queryString.parse(this.props.location.search);\n        if (value.event_id) {\n            this.setState({ event_id: value.event_id })\n            var data = { registration_status: this.state.registration_status, event_id: value.event_id, start_from: this.state.start_from, start_to: this.state.start_to }\n            this.setState({ page: 1, searched: true }, () => {\n                MyActions.getList('meetings/search', this.state.page, data, this.state.token);\n            })\n        } else {\n            var data = { registration_status: this.state.registration_status, event_id: this.state.event_id, start_from: this.state.start_from, start_to: this.state.start_to }\n            this.setState({ page: 1, searched: true }, () => {\n                MyActions.getList('meetings/search', this.state.page, data, this.state.token);\n            })\n        }\n        if (value.registration_status) {\n            this.setState({ registration_status: value.registration_status })\n        }\n        if (this.state.token && this.state.token.length > 10) {\n            //MyActions.getInstance('profiles/my', 1, this.state.token);\n            MyActions.getList('profiles/mine', 1, {}, this.state.token);\n        } else {\n            this.props.history.push(\"login\")\n        }\n\n        MyActions.getList('events/related', this.state.page, {}, this.state.token);\n    }\n\n    getList() {\n        var list = ModelStore.getList()\n        var klass = ModelStore.getKlass()\n\n        if (list && klass === 'Meeting') {\n            $('#search-spinner').hide();\n            if (list[0] && list[0].page) {\n                if (list[0].page == 1) {\n                    this.setState({\n                        meetings: list,\n                    });\n                } else {\n                    this.setState({\n                        meetings: this.state.meetings.concat(list),\n                    });\n                }\n                this.setState({ page: list[0].page, pages: list[0].pages })\n            } else {\n                this.setState({\n                    meetings: [],\n                    pages: 0,\n                });\n            }\n            console.log(list)\n        }\n        if (list && klass === 'Event') {\n            this.setState({\n                events: list,\n            });\n        }\n        if (list && klass === 'MyProfile') {\n            this.setState({\n                profile: list[0],\n                userAbilities: list[0].abilities\n            });\n        }\n    }\n\n\n\n    handleChange(obj) {\n        this.setState(obj);\n    }\n\n    setInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (model && klass === 'Meeting') {\n            var self = this;\n            var meetings = self.state.meetings;\n            if (meetings.length > 0) {\n                for (let i = 0; i < meetings.length; i++) {\n                    if (meetings[i].id == model.id) {\n                        let newState = Object.assign({}, self.state);\n                        newState.meetings[i] = model;\n                        self.setState(newState, () => console.log(self.state.meetings));\n                    }\n                }\n            }\n        }\n    }\n\n    getInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n\n        if (model && klass === 'Profile') {\n            this.setState({\n                profile: model,\n                userAbilities: model.abilities\n            });\n        }\n    }\n\n    noMeetingCard() {\n        return (\n            <div class=\"card\">\n                <div class=\"empty\">\n                    <div class=\"empty-img\">\n                        <div className=\"demo-icon-preview\"><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M12 9v2m0 4v.01\"></path><path d=\"M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75\"></path></svg></div>\n                    </div>\n                    <p class=\"empty-title\">{t['no_result_to_show']}</p>\n                    <p class=\"empty-subtitle text-muted\">\n                        {t['try_adjusting_your_search']}\n                    </p>\n                </div>\n            </div>\n        )\n    }\n\n    checkMeeting() {\n        if (this.state.meetings) {\n            return (<MeetingMasonry meetings={this.state.meetings} col={12} />)\n        } else {\n            return (this.noMeetingCard())\n        }\n    }\n\n    cardMasonry() {\n        var result = []\n        if (this.state.meetings) {\n            if (this.state.meetings.length !== 0) {\n                //if (isFirefox || isMobile) {\n                    result.push(\n                        <div className='row'>\n                                <MeetingMasonry meetings={this.state.meetings} col={6} attend={this.attend} lang={this.state.lang} />\n                        </div>\n                    )\n                //}\n                /* else {\n                    result.push(\n                        <div class='card-columns'  >\n                            <MeetingMasonry meetings={this.state.meetings} col={12} attend={this.attend} lang={this.state.lang} />\n                        </div>\n                    )\n                }*/\n\n            }\n            if (this.state.meetings.length === 0) {\n                result.push(this.noMeetingCard())\n            }\n        }\n\n        return result\n    }\n\n    search() {\n        $('#search-spinner').show();\n        var data = { q: this.state.q, registration_status: this.state.registration_status, event_id: this.state.event_id, start_from: this.state.start_from, start_to: this.state.start_to, tags: this.state.tags }\n        this.setState({ page: 1, searched: true }, () => {\n            MyActions.getList('meetings/search', this.state.page, data, this.state.token);\n        })\n    }\n\n    attend(flag, attendable_id) {\n        var data = { attendable_id: attendable_id, attendable_type: 'Meeting', flag: flag }\n        MyActions.setInstance('attendances/attend', data, this.state.token)\n    }\n\n\n    tagCheckbox() {\n        var result = []\n        if (this.state.allTags) {\n            this.state.allTags.map((tag) => {\n                result.push(\n                    <label class=\"form-check\">\n                        <input id={'tag-check-' + tag.id} class=\"form-check-input\" type=\"checkbox\" style={{ marginTop: '3.5px' }} value={tag.id} onChange={(e) => this.changeTags(e)} />\n                        <span class=\"form-check-label\">\n                            <span class=\"badge bg-lime-lt\" style={{ margin: '2px' }}>{tag.title}</span>\n                        </span>\n                    </label>\n                )\n            })\n        }\n        return result\n    }\n\n    tagSelected(tags) {\n        var result = []\n        tags.map((tag) => {\n            if (tag['title']) {\n                result.push(tag['title'])\n            } else {\n                result.push(tag)\n            }\n        })\n        this.setState({ tags: result }, () => console.log(this.state.tags))\n    }\n\n    tagInput() {\n        return (\n            <div style={{ direction: 'ltr', marginBottom: '70px' }}>\n                <AsyncTypeahead\n                    id='search-tag'\n                    multiple\n                    defaultSelected={this.state.tags}\n                    isLoading={this.state.isLoading}\n                    labelKey='title'\n                    onSearch={(query) => {\n                        this.setState({ isLoading: true });\n                        fetch(server + \"/tags/search?q=\" + query)\n                            .then((resp) => resp.json())\n                            .then(({ items }) => {\n                                this.setState({ options: items, isLoading: false }, () => console.log(this.state.options))\n                            });\n                    }}\n                    onChange={(t) => this.tagSelected(t)}\n                    options={this.state.options}\n                    renderMenuItemChildren={(option, props) => (\n                        <React.Fragment>\n                            <span>{option.title}</span>\n                        </React.Fragment>\n                    )}\n                />\n            </div>\n        )\n    }\n\n\n    loadMore() {\n       // if (this.state.searched) {\n            var data = { page: this.state.page + 1, q: this.state.q, event_id: this.state.event_id, start_from: this.state.start_from, start_to: this.state.start_to, tags: this.state.tags }\n            MyActions.getList('meetings/search', this.state.page + 1, data, this.state.token);\n       // } else {\n       //     var data = { page: this.state.page + 1 }\n       //     MyActions.getList('meetings', this.state.page + 1, data, this.state.token);\n       // }\n\n    }\n\n    eventOptions() {\n        var result = []\n        if (this.state.events) {\n            var options = [<option value=''></option>]\n\n            this.state.events.map((event) => {\n                if (event.id == this.state.event_id) {\n                    options.push(\n                        <option value={event.id} selected={true}>{event.title}</option>\n                    )\n                } else {\n                    options.push(\n                        <option value={event.id}>{event.title}</option>\n                    )\n                }\n\n            })\n            result.push(\n                <select class=\"form-select\" onChange={(e) => this.handleChange({ event_id: e.target.value })}>\n                    {options}\n                </select>\n            )\n\n        }\n        return result\n    }\n\n    moreBtn() {\n        if (this.state.pages > this.state.page) {\n            return (\n                <div class=\"hr-text\">\n                    <a onClick={() => this.loadMore()}>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"9\" /><line x1=\"8\" y1=\"12\" x2=\"12\" y2=\"16\" /><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\" /><line x1=\"16\" y1=\"12\" x2=\"12\" y2=\"16\" /></svg>\n                        {t['more']}\n                    </a>\n                </div>\n            )\n        }\n    }\n\n    changeType(e) {\n        this.setState({ registration_status: e })\n    }\n\n    calendarType() {\n        if (this.state.lang === 'farsi') {\n            return (\n                <React.Fragment>\n                    <label class=\"form-label \">{t['date_from']}<span class=\"form-label-description\"></span></label>\n                    <DatePicker2\n                        isGregorian={this.state.isGregorian}\n                        onChange={value => { this.setState({ start_from: value }) }}\n                        value={this.state.start_from}\n                    />\n                    <label class=\"form-label mt-2\">{t['date_to']}<span class=\"form-label-description\"></span></label>\n                    <DatePicker2\n                        isGregorian={this.state.isGregorian}\n                        onChange={value => { this.setState({ start_to: value }) }}\n                        value={this.state.start_to}\n                    />\n                </React.Fragment>\n            )\n        } else {\n            return (\n                <React.Fragment>\n                    <label class=\"form-label \">{t['date_from']}<span class=\"form-label-description\"></span></label>\n                    <DatePicker\n                        onChange={value => { this.setState({ start_from: value }) }}\n                        showTimeSelect\n                        timeIntervals={15}\n                        timeCaption=\"time\"\n                        dateFormat=\"yyyy/MM/dd HH:mm\"\n                        selected={mm(this.state.start_from).toDate()}\n                        className='datepicker-input'\n                    />\n                    <label class=\"form-label mt-2\">{t['date_to']}<span class=\"form-label-description\"></span></label>\n                    <DatePicker\n                        onChange={value => { this.setState({ start_to: value }) }}\n                        showTimeSelect\n                        timeIntervals={15}\n                        timeCaption=\"time\"\n                        dateFormat=\"yyyy/MM/dd HH:mm\"\n                        selected={mm(this.state.start_to).toDate()}\n                        className='datepicker-input'\n                    />\n                </React.Fragment>\n            )\n        }\n    }\n\n    createBtn() {\n        if (this.state.userAbilities && this.state.userAbilities.create_event) {\n            return (\n                <div class=\"btn-list\">\n                    <a href={\"/#/meetings/create\"} class=\"btn btn-primary\"  >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line></svg>\n                        {t['create_meeting']}\n                    </a>\n                </div>\n            )\n        }\n    }\n\n    eventSelect(){\n        if(!this.state.insideEvent){\n            return(\n                <div class=\"mb-3\" style={{ width: '100%' }}>\n                <label class=\"form-label \">{t['event']}</label>\n                {this.eventOptions()}\n            </div>\n            )\n        }\n    }\n\n    render() {\n\n        return (\n            <body className=\"antialiased\">\n                <div className=\"wrapper\">\n                    <Header history={this.props.history} />\n                    <div className=\"page-wrapper\">\n                        <div className=\"container-xl\">\n                            <div className=\"page-header d-print-none\">\n                                <div className=\"row align-items-center\">\n                                    <div className=\"col\">\n                                        <div className=\"page-pretitle\">{t['overview']}</div>\n                                        <h2 className=\"page-title\">{t['meetings']}</h2>\n                                    </div>\n                                    <div class=\"col-auto ms-auto d-print-none\">\n                                        {this.createBtn()}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"page-body\">\n                            <div className=\"container-xl\">\n                                <div class=\"row\">\n                                    <div class=\"col-lg-3\">\n                                        <div class=\"card mb-3\">\n                                            <div className=\"card-header\" >\n                                                <h4 class=\"card-title\">\n                                                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M5.5 5h13a1 1 0 0 1 .5 1.5l-5 5.5l0 7l-4 -3l0 -4l-5 -5.5a1 1 0 0 1 .5 -1.5\" /></svg>\n                                                    {t['filter_meetings']}\n                                                </h4>\n                                            </div>\n\n                                            <div class=\"card-body\">\n                                                <div class=\"mb-3\">\n                                                    <label class=\"form-label\">{t['contains_words']}</label>\n                                                    <div class=\"input-icon mb-3\">\n                                                        <input type=\"text\" class=\"form-control\" placeholder={t['search_placeholder']} onInput={(e) => { this.handleChange({ q: e.target.value }) }} />\n                                                        <span class=\"input-icon-addon\">\n                                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"10\" cy=\"10\" r=\"7\"></circle><line x1=\"21\" y1=\"21\" x2=\"15\" y2=\"15\"></line></svg>\n                                                        </span>\n                                                    </div>\n                                                </div>\n\n                                                {this.eventSelect()}\n\n                                                <div class=\"mb-3\" style={{ width: '100%' }}>\n                                                    {this.calendarType()}\n                                                </div>\n\n                                                <div class=\"mb-3\">\n                                                    <div class=\"form-label\">{t['registeration']}</div>\n                                                    <div>\n                                                        <label class=\"form-check \">\n                                                            <input class=\"form-check-input\" type=\"radio\" value='all' checked={this.state.registration_status === 'all' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                                            <span class=\"form-check-label\">{t['all']}</span>\n                                                        </label>\n                                                        <label class=\"form-check \">\n                                                            <input class=\"form-check-input\" type=\"radio\" value='registered' checked={this.state.registration_status === 'registered' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                                            <span class=\"form-check-label\">{t['registered']}</span>\n                                                        </label>\n                                                        <label class=\"form-check \">\n                                                            <input class=\"form-check-input\" type=\"radio\" value='not_registered' checked={this.state.registration_status === 'not_registered' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                                            <span class=\"form-check-label\">{t['not_registered']}</span>\n                                                        </label>\n                                                    </div>\n                                                </div>\n\n                                                <div class=\"mb-3 \" id='tags' >\n                                                    <label class=\"form-label\" >{t['tags']}</label>\n                                                    {this.tagInput()}\n                                                </div>\n                                            </div>\n                                            <div class=\"card-body\">\n\n                                                <a onClick={() => this.search()} class=\"btn btn-primary w-100\">\n                                                    <span style={{ verticalAlign: '-2px' }}>\n                                                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M5.5 5h13a1 1 0 0 1 .5 1.5l-5 5.5l0 7l-4 -3l0 -4l-5 -5.5a1 1 0 0 1 .5 -1.5\" /></svg>\n                                                    </span>\n                                                    {t['filter_and_search']}\n                                                    <div id='search-spinner' class=\"spinner-border text-red\" role=\"status\" style={{ display: 'none' }}></div>\n                                                </a>\n                                            </div>\n\n                                        </div>\n                                    </div>\n                                    <div class=\"col-lg-9\">\n                                        {this.cardMasonry()}\n                                        {this.moreBtn()}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        )\n    }\n}\n\n\n\n\n","import io from 'socket.io-client'\nimport { conf } from \"./conf\";\n//const socket = io.connect(conf.socketIOServer)\n//const socket = io.connect(conf.socketIOServer, { transports: ['websocket'] })\nconst socket = io.connect(conf.socketIOServer, \n    { transports: ['websocket'],\n    secure:true,\n    reconnect: true,\n    rejectUnauthorized : false }\n    )\nexport { socket }","import React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport { dict } from '../../Dict';\nimport { conf } from \"../../conf\";\nimport Quill from 'quill';\nimport $ from 'jquery';\nvar t = dict['farsi']\nclass FlyerCard extends Component {\n    constructor(props) {\n        super(props);\n\n\n        this.state = {\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            quillOne: null,\n            cover: null,\n            qillLoaded: false,\n\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.quill_content !== this.props.quill_content) {\n            //console.log('*****', this.props.quill_content)\n            // if(this.state.quillOne){\n            this.state.quillOne.setContents(this.props.quill_content)\n            this.state.quillTwo.setContents(this.props.quill_content)\n            this.setState({ qillLoaded: true })\n            // }\n\n        }\n        if (prevProps.cover !== this.props.cover) {\n            this.setState({ cover: this.props.cover })\n        }\n    }\n\n    componentWillUnmount() {\n\n    }\n\n\n\n\n    componentDidMount() {\n        t = dict[this.state.lang]\n        var quillOne = new Quill('#editor-one', {\n            readOnly: true,\n        });\n        var quillTwo = new Quill('#editor-two', {\n            readOnly: true,\n        });\n        this.setState({ quillOne: quillOne, quillTwo: quillTwo })\n    }\n\n\n    cardCover() {\n        if (this.state.cover) {\n            return (<div class=\"card-img-top img-responsive img-responsive-16by9\" style={{ backgroundImage: \"url(\" + this.state.cover + \")\" }}></div>)\n        }\n    }\n\n    maximizeBtn() {\n        if (this.state.qillLoaded) {\n            if ($('.ql-video').length) {\n                return (\n                    <React.Fragment>\n                        <a href=\"#\" class=\"btn btn-white\" data-bs-toggle=\"modal\" data-bs-target=\"#modal-large\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><polyline points=\"16 4 20 4 20 8\" /><line x1=\"14\" y1=\"10\" x2=\"20\" y2=\"4\" /><polyline points=\"8 20 4 20 4 16\" /><line x1=\"4\" y1=\"20\" x2=\"10\" y2=\"14\" /><polyline points=\"16 20 20 20 20 16\" /><line x1=\"14\" y1=\"14\" x2=\"20\" y2=\"20\" /><polyline points=\"8 4 4 4 4 8\" /><line x1=\"4\" y1=\"4\" x2=\"10\" y2=\"10\" /></svg>\n                            {t['maximize']}\n                        </a>\n                    </React.Fragment>\n                )\n            }\n        }\n    }\n\n\n\n    render() {\n        return (\n            <div class=\"col-lg-8\">\n                <div class=\"modal modal-blur fade\" id=\"modal-large\" tabindex=\"-1\" aria-hidden=\"true\" style={{ display: 'none' }}>\n                    <div class=\"modal-dialog modal-lg modal-dialog-centered\" role=\"document\" style={{ maxWidth: '95%' }}>\n                        <div class=\"modal-content\">\n                            <div class=\"modal-header\">\n                                <h5 class=\"modal-title\">\n                                    {t['maximize']}\n\n                                </h5>\n                                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                            </div>\n                            <div class=\"modal-body p-0\">\n                                <div id=\"editor-two\"></div>\n                            </div>\n                            <div class=\"modal-footer\">\n                                <button type=\"button\" class=\"btn me-auto\" data-bs-dismiss=\"modal\">{t['close']}</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"card\">\n                    {this.cardCover()}\n                    <div class=\"card-body\" id='content'>\n                        {this.maximizeBtn()}\n                        <div id=\"editor-one\"></div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nexport default FlyerCard;","import React from \"react\";\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport moment from 'jalali-moment'\n\n\nconst PollCard = (props) => {\n    const t = dict[props.lang]\n    function pollCheckBox(poll) {\n        var result = []\n        var i = 0\n        var items = poll.answer_content\n        var id = poll.id\n        if (items) {\n            console.log(poll.outcomes)\n            items.map((item) => {\n                result.push(\n                    <label class=\"form-check\">\n                        <input class=\"form-check-input\" disabled={props.disabled ? true : false} checked={poll.outcomes && poll.outcomes.length> 0 && poll.outcomes.includes(i) ? true : false } type=\"checkbox\" value={i} onClick={(e) => props.postPolling(id, e.target.value)} />\n                        <span class=\"form-check-label\">{item} {stats(poll, i)}</span>\n                    </label>\n                )\n                i = i + 1;\n            })\n        }\n        return result\n    }\n\n    function pollRadioBtn(poll) {\n        var result = []\n        var items = poll.answer_content\n        var id = poll.id\n        var i = 0\n        if (items) {\n            items.map((item) => {\n                result.push(\n                    <label class=\"form-check\">\n                        <input class=\"form-check-input\" disabled={props.disabled ? true : false} checked={poll.outcome === i ? true : false } name={'radio'+poll.id} type=\"radio\" value={i} onClick={(e) => props.postPolling(id, e.target.value)} />\n                        <span class=\"form-check-label\">{item} {stats(poll, i)}</span>\n                    </label>\n                )\n                i = i + 1;\n            })\n        }\n        return result\n    }\n\n    function rated(i) {\n        if (props.star >= i) {\n            return (\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z\" /></svg>\n            )\n        } else {\n            return (\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon muted\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z\" /></svg>\n            )\n        }\n    }\n\n    function rating(poll) {\n        return (\n            <div>\n                <a onClick={() => { props.postPolling(poll.id, 1); props.handleChange({ star: 1 }) }}>{rated(1)}</a>\n                <a onClick={() => { props.postPolling(poll.id, 2); props.handleChange({ star: 2 }) }}>{rated(2)}</a>\n                <a onClick={() => { props.postPolling(poll.id, 3); props.handleChange({ star: 3 }) }}>{rated(3)}</a>\n                <a onClick={() => { props.postPolling(poll.id, 4); props.handleChange({ star: 4 }) }}>{rated(4)}</a>\n                <a onClick={() => { props.postPolling(poll.id, 5); props.handleChange({ star: 5 }) }}>{rated(5)}</a>\n                <span className='fs-11 mr-2'>()</span>\n            </div>\n        )\n    }\n\n    function stats(poll, val){\n       // console.log(poll.stats, poll.stats[val])\n        if(poll.stats){\n            return '('+poll.stats[val]+')'\n        }\n    }\n\n    function viewPoll() {\n        var result = []\n        if (props.poll) {\n            var poll = props.poll\n            if (poll.answer_type === 'star') {\n                result.push(\n                    <div class=\"mb-2\">\n                        <div class=\"form-label\">{poll.content}</div>\n                        <div>\n                            {rating(poll)}\n                        </div>\n                    </div>\n                )\n            }\n            if (poll.answer_type === 'single_select') {\n                result.push(\n                    <div class=\"mb-2\">\n                        <div class=\"form-label\">{poll.content}</div>\n                        <div>\n                            {pollRadioBtn(poll)}\n                        </div>\n                    </div>\n                )\n            }\n            if (poll.answer_type === 'binary') {\n                result.push(\n                    <div class=\"mb-2\">\n                        <div class=\"form-label\">{poll.content}</div>\n                        <div>\n                            <label class=\"form-check\">\n                                <input class=\"form-check-input\" style={{ marginTop: '4px' }} disabled={props.disabled ? true : false} checked={poll.outcome === 1 ? true : false } name={'binary-'+poll.id} type=\"radio\" value='1' onClick={(e) => props.postPolling(poll.id, e.target.value)} />\n                                <span class=\"form-check-label pb-1\"><span class=\"badge bg-green-lt\">{t['yes']}</span> {stats(poll, 1)}</span>\n                            </label>\n                            <label class=\"form-check\">\n                                <input class=\"form-check-input\" style={{ marginTop: '4px' }} disabled={props.disabled ? true : false} checked={poll.outcome === -1 ? true : false } name={'binary-'+poll.id} type=\"radio\" value='-1' onClick={(e) => props.postPolling(poll.id, e.target.value)} />\n                                <span class=\"form-check-label pb-1\"><span class=\"badge bg-red-lt\">{t['no']}</span> {stats(poll, -1)}</span>\n                            </label>\n                        </div>\n                    </div>\n                )\n            }\n            if (poll.answer_type === 'trinary') {\n                result.push(\n                    <div class=\"mb-2\">\n                        <div class=\"form-label\">{poll.content}</div>\n                        <div>\n                            <label class=\"form-check\">\n                                <input class=\"form-check-input\" style={{ marginTop: '4px' }} disabled={props.disabled ? true : false} checked={poll.outcome === 1 ? true : false } name={'trinary-'+poll.id} type=\"radio\" value='1' onClick={(e) => props.postPolling(poll.id, e.target.value)} />\n                                <span class=\"form-check-label pb-1\"><span class=\"badge bg-green-lt\">{t['yes']}</span> {stats(poll, 1)}</span>\n                            </label>\n                            <label class=\"form-check\">\n                                <input class=\"form-check-input\" style={{ marginTop: '4px' }} disabled={props.disabled ? true : false}  checked={poll.outcome === 0 ? true : false } name={'trinary-'+poll.id} type=\"radio\" value='0' onClick={(e) => props.postPolling(poll.id, e.target.value)} />\n                                <span class=\"form-check-label pb-1\"><span class=\"badge bg-muted-lt\">{t['abstention']}</span> {stats(poll, 0)}</span>\n                            </label>\n                            <label class=\"form-check\">\n                                <input class=\"form-check-input\" style={{ marginTop: '4px' }}  disabled={props.disabled ? true : false} checked={poll.outcome === -1 ? true : false } name={'trinary-'+poll.id} type=\"radio\" value='-1' onClick={(e) => props.postPolling(poll.id, e.target.value)} />\n                                <span class=\"form-check-label pb-1\"><span class=\"badge bg-red-lt\">{t['no']}</span> {stats(poll, -1)}</span>\n                            </label>\n                        </div>\n                    </div>\n                )\n            }\n            if (poll.answer_type === 'multiple_select') {\n                result.push(\n                    <div class=\"mb-2\">\n                        <div class=\"form-label\">{poll.content}</div>\n                        <div>\n                            {pollCheckBox(poll)}\n                        </div>\n                    </div>\n                )\n            }\n        }\n        return result\n    }\n\n\n    return (\n        <React.Fragment>\n            {viewPoll()}\n            <div class=\"hr-text hr-text-left m-1 mb-2\"></div>\n        </React.Fragment>\n    )\n}\nexport default PollCard;\n","import React from \"react\";\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport { Calendar } from 'react-datepicker2';\nimport moment from 'moment-jalaali'\n\n\nconst AttendanceModal = (props) => {\n    const t = dict[props.lang]\n    return (\n        <React.Fragment>\n            <a href=\"#\" ref={props.modal} class=\"btn btn-white\" data-bs-toggle=\"modal\" data-bs-target=\"#modal-danger\" style={{ display: \"none\" }}>\n                \n            </a>\n            <div class=\"modal modal-blur fade\" id=\"modal-danger\" tabindex=\"-1\" style={{ display: \"none\" }} aria-hidden=\"true\">\n                <div class=\"modal-dialog modal-sm modal-dialog-centered\" role=\"document\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-body\">\n                            <div class=\"modal-title\">{t['you_are_not_registered']}</div>\n                            <div>{t['not_registered_note']}</div>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <a href='/' class=\"btn btn-link link-secondary me-auto\">{t['cancel']}</a>\n                            <a onClick={() => props.attend(true, props.id)} class=\"btn bg-dark-lt ms-auto\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"mx-1\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"9\" /><path d=\"M9 12l2 2l4 -4\" /></svg>\n                                {t['register']}\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </React.Fragment>\n\n    )\n}\nexport default AttendanceModal;\n","import $ from \"jquery\";\nimport { socket } from \"../../socket.js\";\n\n\nexport function keydownHandler(e) {\n  if (e.keyCode === 13 && e.ctrlKey) this.send();\n}\n\nexport function appendChat(c) {\n  var exist = this.state.chats.filter((item) => item.uuid === c.uuid);\n  if (exist && exist.length === 0) {\n    if (this.state.chats && this.state.chats.length > 100) {\n      this.setState({ chats: this.state.chats.slice(1).concat(c) });\n    } else {\n      this.setState({ chats: this.state.chats.concat(c) }, () => {\n        this.scrollChat();\n      });\n    }\n  }\n}\n\nexport function scrollChat() {\n  $(\"#chat-box\")\n    .stop()\n    .animate({\n      scrollTop: $(\"#chat-box\")[0].scrollHeight,\n    });\n}\n\nexport function chatItems() {\n  var result = [];\n  this.state.chats.map((chat) => {\n    result.push(\n      <div class=\"list-group-item p-tight\" id={\"chat-\" + chat.uuid}>\n        <div class=\"row\">\n          <div class=\"col-auto\">\n            <a href=\"#\">\n              <span class=\"avatar avatar-sm\">{chat.initials}</span>\n            </a>\n          </div>\n          <div class=\"col text-sm\">\n            <span class=\"chat-title\">{chat.name}</span>\n            <div class=\"form-hint mt-n1\">{chat.content}</div>\n          </div>\n        </div>\n      </div>\n    );\n  });\n  return result;\n}\n\nexport function throttle(c, t) {\n  if (Date.now() - this.state.lastTime > 100) {\n    this.setState({ lastTime: Date.now() }, () => {\n      this.wsSend({ type: t, c: c });\n    });\n  }\n}\n\nexport function send() {\n  console.log(this.state.item);\n  if (this.state.item) {\n    this.throttle(this.state.item, \"chat\");\n    this.appendChat(this.state.item);\n    $(\"#chat-form\").val(\"\");\n  }\n}\n\nexport function wsSend(msg, sender = this.state.userUUID) {\n  msg[\"room\"] = this.state.roomId;\n  msg[\"sender\"] = sender;\n  socket.emit(\"message\", msg);\n}\n\nexport function handRaiseCreate(c) {\n  this.setState({ handRaised: this.state.handRaised.concat(c.uuid) });\n}\n\nexport function handRaiseDestroy(c) {\n  this.setState({\n    handRaised: this.state.handRaised.filter((item) => item !== c.uuid),\n  });\n}\n\nexport function isHandRaised(uuid) {\n  if (this.state.handRaised.includes(uuid)) {\n    return true;\n  } else {\n    return false;\n  }\n}\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport $ from 'jquery';\nimport Header from \"../header/header.jsx\";\nimport { v4 as uuidv4 } from 'uuid';\nimport Quill from 'quill';\nimport AttendanceCard from \"../attendances/card.jsx\";\nimport moment from 'jalali-moment'\nimport { socket } from '../../socket.js'\nimport FlyerCard from \"../flyers/card.jsx\";\nimport PollCard from \"../polls/create.jsx\";\nimport AttendanceModal from \"../attendances/modal.jsx\";\n\nimport {\n  isFirefox, isMobile\n} from \"react-device-detect\";\nimport {\n  appendChat, chatItems, throttle, send, wsSend, keydownHandler, scrollChat\n} from \"../rooms/chat.js\";\n\nmoment.locale('fa', { useGregorianParser: true });\nvar t = dict['farsi']\n\nexport default class MeetingShow extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.flyers = this.flyers.bind(this);\n    this.getInstance = this.getInstance.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.postPolling = this.postPolling.bind(this);\n\n    this.socketHandle = this.socketHandle.bind(this);\n    this.appendChat = appendChat.bind(this);\n    this.chatItems = chatItems.bind(this);\n    this.throttle = throttle.bind(this);\n    this.send = send.bind(this);\n    this.wsSend = wsSend.bind(this);\n    this.keydownHandler = keydownHandler.bind(this);\n    this.scrollChat = scrollChat.bind(this);\n    this.getList = this.getList.bind(this);\n    this.attend = this.attend.bind(this);\n\n    this.modal = React.createRef();\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      lang: window.localStorage.getItem('lang'),\n      dir: window.localStorage.getItem('dir'),\n      title: null,\n      start_time: null,\n      end_time: null,\n      info: null,\n      capacity: null,\n      meeting_type: null,\n      event: { title: '', id: 0 },\n      flyers: [],\n      quillOne: null,\n      attendees: null,\n      tags: [],\n      is_private: false,\n      room_id: null,\n      roomId: null,\n      cover: null,\n      is_admin: false,\n      room: null,\n\n      name: null,\n      fullname: null,\n      initials: null,\n      userUUID: null,\n\n      userCounter: 0,\n\n      fullAlert: false,\n      timelyAlert: false,\n\n      attending: false,\n\n      chats: [],\n      lastTime: Date.now(),\n      content: null,\n      item: null,\n      quill_content: null,\n\n      polls: null,\n      star: null,\n\n      is_presenter: false,\n      is_moderator: false,\n      is_speaker: false,\n\n      activeTab: 'details',\n      attendeesCount: 0,\n    }\n\n  }\n\n\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"deleted_instance\", this.getInstance);\n    ModelStore.on(\"got_list\", this.getList);\n    document.addEventListener('keydown', this.keydownHandler);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_list\", this.getList);\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n    ModelStore.removeListener(\"deleted_instance\", this.getInstance);\n    document.removeEventListener('keydown', this.keydownHandler);\n    if (this.state.roomId && this.state.userUUID) {\n      socket.emit('leaveRoomView', { room: this.state.roomId.toString(), uuid: this.state.userUUID });\n    }\n\n  }\n\n  componentDidMount() {\n    t = dict[this.state.lang]\n    var self = this;\n    MyActions.getInstance('meetings', this.props.match.params.id, this.state.token);\n    socket.on('connect', function () {\n      if (self.state.roomId) {\n        socket.emit('room', { room: self.state.roomId.toString(), uuid: self.state.userUUID });\n      }\n    });\n\n    socket.on('message', function (data) {\n      if (data['sender'] !== self.state.userUUID) {\n        self.socketHandle(data)\n      }\n    });\n    MyActions.getList('polls', this.state.page, { pollable_type: 'Meeting', pollable_id: this.props.match.params.id }, this.state.token);\n  }\n\n  getList() {\n    var list = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n\n    if (list && klass === 'Poll') {\n      this.setState({\n        polls: list,\n      });\n    }\n    console.log(list)\n  }\n\n\n  socketHandle(msg) {\n    var self = this;\n    var parsed = msg;\n    switch (parsed.type) {\n      case \"chat\":\n        self.appendChat(parsed.c);\n        break;\n      case \"userCounter\":\n        console.log(parsed.c)\n        self.setState({ userCounter: parsed.c });\n        break;\n    }\n  }\n\n\n\n  handleChange(obj) {\n    this.setState(obj);\n  }\n\n  getInstance() {\n    var klass = ModelStore.getKlass()\n    var model = ModelStore.getIntance()\n    if (klass === 'Meeting') {\n      this.setState({\n        title: model.title,\n        id: model.id,\n        start_time: model.start_time,\n        end_time: model.end_time,\n        info: model.info,\n        capacity: model.capacity,\n        meeting_type: model.meeting_type,\n        event: model.event,\n        flyers: model.flyers,\n        attendees: model.attendees,\n        tags: model.tags,\n        is_private: model.is_private,\n        room_id: model.room_id,\n        roomId: model.room_uuid,\n        cover: model.cover,\n        uploads: model.uploads,\n        is_admin: model.is_admin,\n        is_presenter: model.is_presenter,\n        is_moderator: model.is_moderator,\n        is_speaker: model.is_speaker,\n        bigblue: model.bigblue,\n        internal: model.internal,\n        sata: model.sata,\n        attending: model.attending,\n        attendeesCount: model.attendees_count\n      }, () => {\n        if (!this.state.attending && this.state.is_private) {\n          window.location.replace('/#/meetings')\n        }\n\n        if (!this.state.attending && !this.state.is_private) {\n          this.modal.current.click();\n        }\n\n       \n        if (this.state.token && this.state.token.length > 10) {\n          MyActions.setInstance('users/validate_token', {}, this.state.token);\n        }\n        if (this.state.flyers) {\n          this.state.flyers.map((flyer) => {\n            if (flyer.is_default) {\n              this.loadContent(flyer.quill_content)\n            }\n          })\n\n        }\n      })\n    }\n    if (klass === 'MeetingUrl') {\n\n      if (model.url) {\n        console.log(model)\n        $('#bigblue-spinner').hide();\n        if (model.full && !this.state.is_admin) {\n          this.setState({ fullAlert: true })\n        }\n        if (!model.timely && !this.state.is_admin) {\n          this.setState({ timelyAlert: true })\n        }\n        if (this.state.is_admin) {\n          if (isFirefox || isMobile) {\n            window.location.replace(model.url)\n          } else {\n            window.open(model.url, '_blank')\n          }\n        }\n        if (!model.full && !this.state.is_admin && model.timely) {\n          if (isFirefox || isMobile) {\n            window.location.replace(model.url)\n          } else {\n            window.open(model.url, '_blank')\n          }\n        }\n\n      }\n    }\n  }\n\n  setInstance() {\n    var self = this;\n    var klass = ModelStore.getKlass()\n    var model = ModelStore.getIntance();\n    if (klass === 'Validate') {\n      console.log('validated')\n      this.setState({ name: model.name, fullname: model.name, initials: model.initials, userUUID: model.uuid }, () => {\n        this.connectSocketRoom();\n\n      });\n    }\n    if (klass === 'Polling') {\n      this.setState({ polls: model.polls })\n    }\n    if (klass === 'Meeting') {\n      window.location.reload()\n    }\n    console.log(model)\n  }\n\n  sideBlock(item, title) {\n    if (this.state[item]) {\n      return (\n        <React.Fragment>\n          <h4>{title}:</h4>\n          <div class=\"text-muted mb-3\">\n            {this.state[item]}\n          </div>\n        </React.Fragment>\n      )\n    }\n  }\n\n  deleteFlyer(id) {\n    var data = { id: id, advertisable_id: this.state.id, advertisable_type: 'Meeting' }\n    MyActions.removeInstance('flyers', data, this.state.token);\n  }\n\n  editFlyerBtn(flyer) {\n    if (this.state.is_admin) {\n      return (\n        <div class=\"col-auto p-0\">\n          <a href={\"/#/flyers/edit/\" + flyer.id} class=\"list-group-item-actions show\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M9 7h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3\" /><path d=\"M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3\" /><line x1=\"16\" y1=\"5\" x2=\"19\" y2=\"8\" /></svg>\n          </a>\n          <a onClick={() => this.deleteFlyer(flyer.id)} class=\"list-group-item-actions show\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"4\" y1=\"7\" x2=\"20\" y2=\"7\" /><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" /><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" /><path d=\"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12\" /><path d=\"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3\" /></svg>\n          </a>\n        </div>\n      )\n    }\n  }\n\n  flyers() {\n    var result = []\n    this.state.flyers.map((flyer) => {\n      result.push(\n        <div class=\"list-group-item\">\n          <div class=\"row align-items-center\">\n            <div class=\"col text-truncate\">\n              <a style={{ cursor: 'pointer' }} onClick={() => this.loadContent(flyer.quill_content)} class=\"text-body d-block\">{flyer.title}</a>\n            </div>\n            {this.editFlyerBtn(flyer)}\n          </div>\n        </div>\n      )\n    })\n    return result\n  }\n\n\n  loadContent(quill_content) {\n    this.setState({ quill_content: quill_content })\n  }\n\n  formatGregorianDate(gregorianDate) {\n    var date = new Date(gregorianDate);\n    var day = date.getDate();\n    var month = date.getMonth() + 1;\n    var year = date.getFullYear();\n    var hours = date.getHours();\n    var minutes = date.getMinutes();\n    var fullYear = year + '/' + month + '/' + day + ' ' + hours + ':' + minutes;\n    return fullYear;\n  }\n\n\n  tagsShow(tags) {\n    var result = []\n    if (tags && tags.length > 0) {\n      tags.map((tag) => {\n        result.push(<span class=\"badge bg-lime-lt\" style={{ margin: '2px' }}>{tag.title}</span>)\n      })\n    }\n    return result\n  }\n\n  isPrivateBadge() {\n    if (this.state.is_private) {\n      return (\n        <span class=\"badge bg-red\">{t['is_private']}</span>\n      )\n    }\n  }\n\n  cardCover() {\n    if (this.state.cover) {\n      return (<div class=\"card-img-top img-responsive img-responsive-16by9\" style={{ backgroundImage: \"url(\" + this.state.cover + \")\" }}></div>)\n    }\n  }\n\n  deleteUpload(id) {\n    var data = { id: id }\n    MyActions.removeInstance('uploads', data, this.state.token);\n  }\n\n  editUploadBtn(upload) {\n    if (this.state.is_admin) {\n      return (\n        <div class=\"col-auto p-0\">\n          <a onClick={() => this.deleteUpload(upload.id)} class=\"list-group-item-actions show\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"4\" y1=\"7\" x2=\"20\" y2=\"7\" /><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" /><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" /><path d=\"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12\" /><path d=\"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3\" /></svg>\n          </a>\n        </div>\n      )\n    }\n  }\n\n  uploads() {\n    var result = []\n    if (this.state.uploads) {\n      this.state.uploads.map((upload) => {\n        if (upload.upload_type !== 'cover') {\n          result.push(\n            <div class=\"list-group-item\">\n              <div class=\"row align-items-center\">\n                <div class=\"col text-truncate\">\n                  <a style={{ cursor: 'pointer' }} href={upload.link} target='_blank' class=\"text-body d-block\">{upload.title}</a>\n                </div>\n                {this.editUploadBtn(upload)}\n              </div>\n            </div>\n          )\n        }\n      })\n    }\n    return result\n  }\n\n  createFlyerBtn() {\n    if (this.state.is_admin) {\n      return (\n        <li class=\"nav-item ms-auto\">\n          <a class=\"nav-link\" href={\"/#/flyers/create?meeting_id=\" + this.state.id}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n          </a>\n        </li>\n      )\n    }\n  }\n\n  createUploadBtn() {\n    if (this.state.is_admin) {\n      return (\n        <li class=\"nav-item ms-auto\">\n          <a class=\"nav-link\" href={\"/#/uploads/create?meeting_id=\" + this.state.id}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n          </a>\n        </li>\n      )\n    }\n  }\n\n  editMeetingBtn() {\n    if (this.state.is_admin) {\n      return (\n        <li class=\"nav-item ms-auto\">\n          <a class=\"nav-link p-1\" href={\"/#/meetings/edit/\" + this.state.id}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M9 7h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3\" /><path d=\"M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3\" /><line x1=\"16\" y1=\"5\" x2=\"19\" y2=\"8\" /></svg>\n          </a>\n        </li>\n      )\n    }\n  }\n\n  connectSocketRoom() {\n    if (this.state.userUUID && this.state.roomId) {\n      socket.emit('room', { room: this.state.roomId.toString(), uuid: this.state.userUUID });\n      socket.emit('setRoomView', { room: this.state.roomId.toString(), uuid: this.state.userUUID });\n    }\n  }\n\n  createBigBlue() {\n    $('#bigblue-spinner').show();\n    MyActions.getInstance('meetings/join_bigblue', this.props.match.params.id, this.state.token);\n  }\n\n  roomBtn() {\n    var result = []\n    if ((this.state.internal || this.state.sata) && (this.state.is_speaker || this.state.is_moderator || this.state.is_presenter)) {\n      result.push(\n        <a href={\"/#/rooms/\" + this.state.room_id + \"?rnd=\" + uuidv4()} onClick={this.forceUpdate} class=\"btn bg-green-lt\">\n          {t['enter_room']}\n        </a>\n      )\n    }\n    if (this.state.bigblue) {\n      result.push(\n        <a onClick={() => this.createBigBlue()} class=\"btn bg-cyan-lt ms-auto\">\n          {t['enter_bigblue_room']}\n          <div id='bigblue-spinner' class=\"spinner-border text-black\" role=\"status\" style={{ display: 'none' }}></div>\n        </a>\n      )\n    }\n    return result\n  }\n\n\n  fullAlert() {\n    if (this.state.fullAlert) {\n      return (\n        <div class=\"alert alert-important alert-danger alert-dismissible\" role=\"alert\">\n          <div class=\"d-flex\">\n            <div>\n            </div>\n            <div>\n              {t['room_is_full']}\n            </div>\n          </div>\n          <a class=\"btn-close btn-close-white\" data-bs-dismiss=\"alert\" aria-label=\"close\"></a>\n        </div>\n      )\n    }\n  }\n\n\n  timelyAlert() {\n    if (this.state.timelyAlert) {\n      return (\n        <div class=\"alert alert-important alert-danger alert-dismissible\" role=\"alert\">\n          <div class=\"d-flex\">\n            <div>\n            </div>\n            <div>\n              {t['out_of_time']}\n            </div>\n          </div>\n          <a class=\"btn-close btn-close-white\" data-bs-dismiss=\"alert\" aria-label=\"close\"></a>\n        </div>\n      )\n    }\n  }\n\n\n  postPolling(id, value) {\n    var data = { poll_id: id, outcome: value }\n    MyActions.setInstance('pollings', data, this.state.token);\n  }\n\n  polls() {\n    var result = []\n    if (this.state.polls) {\n      this.state.polls.map((poll) => {\n        result.push(<PollCard postPolling={this.postPolling} star={this.state.star} handleChange={this.handleChange} poll={poll} lang={this.state.lang} />)\n      })\n    }\n    return result\n  }\n\n  pollSettings() {\n    if (this.state.is_admin) {\n      return (\n        <div style={{ backgroundColor: '#f4f6fa', minHeight: '25px', marginTop: '0px' }}>\n          <div className=\"col-auto\">\n            <a href={'/#/polls?meeting_id=' + this.state.id}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" style={{ float: 'left', marginTop: '3px', marginLeft: '5px' }} width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z\" /><circle cx=\"12\" cy=\"12\" r=\"3\" /></svg>\n            </a>\n          </div>\n        </div>\n      )\n    }\n  }\n\n  attend(flag, attendable_id) {\n    var data = { attendable_id: attendable_id, attendable_type: 'Meeting', flag: flag }\n    MyActions.setInstance('attendances/attend', data, this.state.token)\n}\n\n  render() {\n    return (\n      <body className=\"antialiased\">\n        <AttendanceModal modal={this.modal} lang={this.state.lang} attend={this.attend} id={this.state.id}/>\n        <div className=\"wrapper\">\n          <Header history={this.props.history} />\n          <div className=\"page-wrapper\">\n            <div className=\"container-xl\">\n              <div className=\"page-header d-print-none\">\n                <div className=\"row align-items-center\"></div>\n                <div className=\"col\">\n                  <div className=\"page-pretitle\">{t['overview']}</div>\n                  <h2 className=\"page-title\">{t['meeting_detail']}</h2>\n                </div>\n              </div>\n            </div>\n            <div className=\"page-body\">\n              <div className=\"container-xl\">\n                <div className=\"row  row-cards\">\n\n                  <div class=\"col-lg-4\">\n                    <div class=\"card mb-3\">\n                      <div className=\"card-header dark-header\" >\n                        <h3 class=\"card-title\">{this.state.title}</h3>\n                        <ul class=\"nav nav-pills card-header-pills\">\n                          <li class=\"nav-item mx-2\">\n                            {this.isPrivateBadge()}\n                          </li>\n                          {this.editMeetingBtn()}\n                        </ul>\n                      </div>\n                      <ul class=\"nav nav-tabs\" data-bs-toggle=\"tabs\">\n                        <li class=\"nav-item\">\n                          <a onClick={() => this.setState({ activeTab: 'details' })} className={this.state.activeTab == \"details\" ? \"nav-link active\" : \"nav-link\"} data-bs-toggle=\"tab\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"9\" /><line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\" /><polyline points=\"11 12 12 12 12 16 13 16\" /></svg>\n                            {t['details']}\n                          </a>\n                        </li>\n                        <li class=\"nav-item\">\n                          <a onClick={() => { this.scrollChat(); this.setState({ activeTab: 'chats' }) }} className={this.state.activeTab == \"chats\" ? \"nav-link active\" : \"nav-link\"} data-bs-toggle=\"tab\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M21 14l-3 -3h-7a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1h9a1 1 0 0 1 1 1v10\" /><path d=\"M14 15v2a1 1 0 0 1 -1 1h-7l-3 3v-10a1 1 0 0 1 1 -1h2\" /></svg>\n                            {t['chats']}\n                          </a>\n                        </li>\n                        <li class=\"nav-item\">\n                          <div onClick={() => this.setState({ activeTab: 'polls' })} className={this.state.activeTab == \"polls\" ? \"nav-link active\" : \"nav-link\"} data-bs-toggle=\"tab \">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><polyline points=\"12 3 20 7.5 20 16.5 12 21 4 16.5 4 7.5 12 3\" /><line x1=\"12\" y1=\"12\" x2=\"20\" y2=\"7.5\" /><line x1=\"12\" y1=\"12\" x2=\"12\" y2=\"21\" /><line x1=\"12\" y1=\"12\" x2=\"4\" y2=\"7.5\" /></svg>\n                            {t['polls']}\n                          </div>\n                        </li>\n                        <span class=\"badge bg-teal ms-auto mt-2 mx-2\">\n                          {t['viewers']} {this.state.userCounter}\n                        </span>\n                      </ul>\n\n\n                      <div class=\"tab-content\">\n                        <div className={this.state.activeTab == \"details\" ? \"tab-pane active show\" : \"tab-pane\"}>\n                          <div class=\"card-body\">\n                            <h4>{t['related_to_event']}:</h4>\n                            <div class=\"text-muted mb-3\">\n                              <a href={'/#/events/' + this.state.event.id}>{this.state.event.title}</a>\n                            </div>\n\n                            {this.sideBlock('info', t['meeting_info'])}\n                            <div className='row'>\n                              <div className='col-6'>\n                                <h4>{t['meeting_type']}:</h4>\n                                <div class=\"text-muted mb-3\">\n                                  {t[this.state.meeting_type]}\n                                </div>\n                              </div>\n                              <div className='col-6'>\n                                {this.sideBlock('capacity', t['meeting_capacity'])}\n                              </div>\n                            </div>\n\n                            {this.sideBlock('external_link', t['meeting_external_link'])}\n\n                            <div className='row'>\n                              <div className='col-6'>\n                                <h4>{t['meeting_start_time']}:</h4>\n                                <div class=\"text-muted mb-3\">\n                                  {moment(this.formatGregorianDate(this.state.start_time)).format('HH:mm jYYYY/jMM/jDD')}\n                                </div>\n                              </div>\n                              <div className='col-6'>\n                                <h4>{t['meeting_end_time']}:</h4>\n                                <div class=\"text-muted mb-3\">\n                                  {moment(this.formatGregorianDate(this.state.end_time)).format('HH:mm YYYY/MM/DD')}\n                                </div>\n                              </div>\n                            </div>\n\n                            <h4>{t['tags']}</h4>\n                            <div class=\"text-muted mb-3\">\n                              {this.tagsShow(this.state.tags)}\n                            </div>\n\n                          </div>\n                          <div class=\"card-footer\">\n                            <div class=\"d-flex\">\n                              {this.roomBtn()}\n                            </div>\n                          </div>\n                        </div>\n                        {this.fullAlert()}\n                        {this.timelyAlert()}\n\n                        <div className={this.state.activeTab == \"chats\" ? \"tab-pane active show\" : \"tab-pane\"} id='tabs-profile-9' >\n                          <div class=\"card mb-3 maxh-250 minh-250\" style={{ borderColor: 'white', boxShadow: 'none' }}>\n                            <div class=\"list-group list-group-flush overflow-auto\" id='chat-box' style={{ maxHeight: '25rem' }}>\n                              {this.chatItems()}\n                            </div>\n                            <div class=\"card-footer\" style={{ borderColor: 'white' }} >\n                              <div class=\"row\">\n                                <div class=\"col\">\n                                  <input id='chat-form' type=\"text\" class=\"form-control\" placeholder={t['write_something']} onChange={(e) => {\n                                    this.handleChange({ item: { content: e.target.value, name: this.state.name, initials: this.state.initials, time: Date.now(), uuid: uuidv4() } })\n                                  }} />\n                                </div>\n                                <div class=\"col-auto\">\n                                  <a onClick={() => this.send()} class=\"btn btn-white btn-icon\" aria-label=\"Button\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M9 20v-8h-3.586a1 1 0 0 1 -.707 -1.707l6.586 -6.586a1 1 0 0 1 1.414 0l6.586 6.586a1 1 0 0 1 -.707 1.707h-3.586v8a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z\" /></svg>\n                                  </a>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n\n                        <div className={this.state.activeTab == \"polls\" ? \"tab-pane active show\" : \"tab-pane\"} id='tabs-vote' >\n                          <div class=\"card mb-3\" style={{ borderColor: 'white', boxShadow: 'none' }}>\n                            <div className='card-body p-0' style={{ maxHeight: '250px', overflowY: 'scroll' }}>\n                              {this.pollSettings()}\n                              <div className='p-2'>\n                                {this.polls()}\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class=\"card mb-3\">\n                      <div class=\"card-status-top dark-bar\"></div>\n                      <div class=\"card-header header-compact\">\n                        <h3 class=\"card-title\">{t['pages']}</h3>\n                        <ul class=\"nav nav-pills card-header-pills\">\n                          {this.createFlyerBtn()}\n                        </ul>\n                      </div>\n                      <div class=\"list-group list-group-flush list-group-hoverable\">\n                        {this.flyers()}\n                      </div>\n                    </div>\n\n                    <div class=\"card mb-3\">\n                      <div class=\"card-status-top dark-bar\"></div>\n                      <div class=\"card-header header-compact\">\n                        <h3 class=\"card-title\">{t['resources']}</h3>\n                        <ul class=\"nav nav-pills card-header-pills\">\n                          {this.createUploadBtn()}\n                        </ul>\n\n                      </div>\n                      <div class=\"list-group list-group-flush list-group-hoverable\">\n                        {this.uploads()}\n                      </div>\n                    </div>\n\n                    <AttendanceCard is_admin={this.state.is_admin} attendees={this.state.attendees} attendeesCount={this.state.attendeesCount} attendable_type='meeting' attendable_id={this.state.id} lang={this.state.lang} />\n\n\n                  </div>\n\n                  <FlyerCard quill_content={this.state.quill_content} cover={this.state.cover} />\n\n                </div>\n              </div>\n            </div>\n          </div>\n        </div >\n      </body >\n    )\n  }\n}\n\n\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport $ from 'jquery';\nimport { dict } from '../../Dict';\nimport { conf } from '../../conf';\nimport Header from \"../header/header.jsx\";\nimport Validation from \"../common/validation.jsx\";\nimport DatePicker from \"react-datepicker\";\nimport queryString from 'query-string'\nimport RangeSlider from 'react-bootstrap-range-slider';\nimport moment from 'moment-jalaali'\nimport mm from 'moment';\nimport DatePicker2 from 'react-datepicker2';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { Typeahead, withAsync } from 'react-bootstrap-typeahead';\nimport {\n  validateExistence\n} from \"../common/validate.js\";\n\nconst AsyncTypeahead = withAsync(Typeahead);\nconst server = conf.server;\nvar t = dict['farsi']\n\nexport default class MeetingCreate extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.getInstance = this.getInstance.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.getList = this.getList.bind(this);\n    this.deleteInstance = this.deleteInstance.bind(this);\n\n    this.modal = React.createRef();\n    this.validateExistence = validateExistence.bind(this);\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      lang: window.localStorage.getItem('lang'),\n      dir: window.localStorage.getItem('dir'),\n      event_id: window.localStorage.getItem('event_id'),\n      id: null,\n      title: null,\n      info: null,\n      meeting_type: 'online',\n      start_time: mm(),\n      end_time: mm().add(2, 'Hour'),\n      capacity: 20,\n      editing: false,\n      options: [],\n      tags: [],\n      is_private: false,\n      is_admin: false,\n      events: [],\n      bigblue: true,\n      internal: false,\n      sata: false,\n      validationItems: [],\n      number_of_sata_displays: 0,\n      per_display: 0,\n\n      isGregorian: false,\n      insideEvent: false,\n    }\n\n  }\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"got_list\", this.getList);\n    ModelStore.on(\"deleted_instance\", this.deleteInstance);\n    if (this.state.lang || this.state.lang !== null) {\n      t = dict[this.state.lang]\n    }\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"got_list\", this.getList);\n    ModelStore.removeListener(\"deleted_instance\", this.deleteInstance);\n  }\n\n  componentDidMount() {\n    t = dict[this.state.lang]\n    if (this.state.lang === 'farsi') {\n      this.setState({\n        start_from: moment(),\n        start_to: moment().add(2, 'jMonth'),\n        isGregorian: false,\n      })\n    }\n    var stored_event = window.localStorage.getItem('event_id')\n    if (stored_event !== '' && stored_event !== null) {\n      this.setState({ insideEvent: true })\n    }\n    const value = queryString.parse(this.props.location.search);\n    if (value && value.event_id) {\n      this.setState({ event_id: value.event_id })\n    }\n    if (this.props.match.params.id) {\n      MyActions.getInstance('meetings', this.props.match.params.id, this.state.token);\n    }\n    MyActions.getList('events/owner', this.state.page, {}, this.state.token);\n\n  }\n\n\n  handleChange(obj) {\n    this.setState(obj);\n  }\n\n  deleteInstance() {\n    this.props.history.push(\"/meetings/\")\n  }\n\n  setInstance() {\n    var klass = ModelStore.getKlass()\n    var model = ModelStore.getIntance()\n    if (klass === 'Meeting') {\n      this.props.history.push(\"/meetings/\" + model.id)\n    }\n  }\n\n  getList() {\n    var list = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (list && klass === 'Event') {\n      this.setState({\n        events: list,\n      });\n    }\n  }\n\n  getInstance() {\n    var klass = ModelStore.getKlass()\n    var model = ModelStore.getIntance()\n    if (model && klass === 'Meeting') {\n      this.setState({\n        id: model.id,\n        title: model.title,\n        info: model.info,\n        meeting_type: model.meeting_type,\n        start_time: model.start_time,\n        end_time: model.end_time,\n        event_id: model.event.id,\n        capacity: model.capacity,\n        tags: model.tags,\n        is_private: model.is_private,\n        bigblue: model.bigblue,\n        internal: model.internal,\n        sata: model.sata,\n        is_admin: model.is_admin,\n        number_of_sata_displays: this.state.number_of_sata_displays,\n        per_display: this.state.per_display,\n        editing: true,\n      }, () => {\n        console.log(this.state)\n        this.changeType(this.state.meeting_type)\n        this.tagSelected(this.state.tags);\n        if (!this.state.is_admin) {\n          this.props.history.push(\"/meetings/\")\n        }\n      })\n    }\n  }\n\n  submit() {\n    var data = this.state\n    if (this.validateExistence(['title', 'info'])) {\n      $('#submit-button').hide();\n      $('#submit-spinner').show();\n      var data = {\n        event_id: this.state.event_id,\n        title: this.state.title,\n        info: this.state.info,\n        meeting_type: this.state.meeting_type,\n        start_time: this.state.start_time,\n        end_time: this.state.end_time,\n        capacity: this.state.capacity,\n        tags: this.state.tags,\n        is_private: this.state.is_private,\n        bigblue: this.state.bigblue,\n        internal: this.state.internal,\n        sata: this.state.sata,\n        id: this.state.id,\n        number_of_sata_displays: this.state.number_of_sata_displays,\n        per_display: this.state.per_display,\n      }\n      if (!this.state.editing) {\n        MyActions.setInstance('meetings', data, this.state.token);\n      } else {\n        MyActions.updateInstance('meetings', data, this.state.token);\n      }\n    }\n  }\n\n\n\n  changeType(e) {\n    this.setState({ meeting_type: e })\n    // this.modal.current.click();\n  }\n\n  addDisplay() {\n\n  }\n\n  changeService(e) {\n    this.toggleState(e)\n  }\n\n  toggleState(s) {\n    if (this.state[s]) {\n      this.setState({ [`${s}`]: false })\n    } else {\n      this.setState({ [`${s}`]: true }, () => console.log(this.state))\n    }\n  }\n\n  tagSelected(tags) {\n    var result = []\n    tags.map((tag) => {\n      if (tag['title']) {\n        result.push(tag['title'])\n      } else {\n        result.push(tag)\n      }\n    })\n    this.setState({ tags: result }, () => console.log(this.state.tags))\n  }\n\n  tagShow() {\n    if (this.props.match.params.id && this.state.id) {\n      return (this.tagInput())\n    }\n\n    if (!this.props.match.params.id) {\n      return (this.tagInput())\n    }\n  }\n\n  tagInput() {\n    return (\n      <div style={{ direction: 'ltr', marginBottom: '70px' }}>\n        <AsyncTypeahead\n          id='event-tag'\n          allowNew\n          multiple\n          defaultSelected={this.state.tags}\n          isLoading={this.state.isLoading}\n          labelKey='title'\n          onSearch={(query) => {\n            this.setState({ isLoading: true });\n            fetch(server + \"/tags/search?q=\" + query)\n              .then((resp) => resp.json())\n              .then(({ items }) => {\n                this.setState({ options: items, isLoading: false }, () => console.log(this.state.options))\n              });\n          }}\n          onChange={(t) => this.tagSelected(t)}\n          options={this.state.options}\n          renderMenuItemChildren={(option, props) => (\n            <React.Fragment>\n              <span>{option.title}</span>\n            </React.Fragment>\n          )}\n        />\n      </div>\n    )\n  }\n\n  changeDefault(e) {\n    if (this.state.is_private) {\n      this.setState({ is_private: false })\n    } else {\n      this.setState({ is_private: true })\n    }\n  }\n\n  isPrivateBadge() {\n    if (this.state.is_private) {\n      return (\n        <span class=\"badge bg-red-lt\">{t['private']}</span>\n      )\n    }\n  }\n\n  eventOptions() {\n    var result = []\n    if (this.state.events) {\n      var options = [<option value=''></option>]\n\n      this.state.events.map((event) => {\n        options.push(\n          <option value={event.id} selected={this.state.event_id == event.id ? true : false}>{event.title}</option>\n        )\n      })\n      result.push(\n        <select class=\"form-select\" onChange={(e) => this.handleChange({ event_id: e.target.value })}>\n          {options}\n        </select>\n      )\n\n    }\n    return result\n  }\n\n  deleteMeeting() {\n    var data = { id: this.state.id }\n    MyActions.removeInstance('meetings', data, this.state.token);\n  }\n\n  deleteBtn() {\n    if (this.state.editing) {\n      return (\n        <button id='delete-button' onClick={() => { if (window.confirm(t['are_you_sure'])) this.deleteMeeting() }} class=\"btn btn-danger ms-auto\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"4\" y1=\"7\" x2=\"20\" y2=\"7\" /><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" /><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" /><path d=\"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12\" /><path d=\"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3\" /></svg>\n          {t['delete']}\n        </button>\n      )\n    }\n  }\n\n  calendarType() {\n    if (this.state.lang === 'farsi') {\n      return (\n        <React.Fragment>\n          <div class=\"mb-3\">\n            <label class=\"form-label\">{t['meeting_start_time']}<span class=\"form-label-description\"></span></label>\n            <DatePicker2\n              isGregorian={false}\n              onChange={value => { this.setState({ start_time: value }) }}\n              value={moment(this.state.start_time)}\n            />\n          </div>\n\n          <div class=\"mb-3\">\n            <label class=\"form-label\">{t['meeting_end_time']}<span class=\"form-label-description\"></span></label>\n            <DatePicker2\n              isGregorian={false}\n              onChange={value => { this.setState({ end_time: value }) }}\n              value={moment(this.state.end_time)}\n            />\n          </div>\n        </React.Fragment>\n      )\n    } else {\n      return (\n        <React.Fragment>\n          <div class=\"mb-3\">\n            <label class=\"form-label\">{t['meeting_start_time']}<span class=\"form-label-description\"></span></label>\n            <DatePicker\n              onChange={value => { this.setState({ start_time: value }) }}\n              showTimeSelect\n              timeIntervals={15}\n              timeCaption=\"time\"\n              dateFormat=\"yyyy/MM/dd HH:mm\"\n              selected={mm(this.state.start_time).toDate()}\n              className='datepicker-input'\n            />\n          </div>\n          <div class=\"mb-3\">\n            <label class=\"form-label\">{t['meeting_end_time']}<span class=\"form-label-description\"></span></label>\n            <DatePicker\n              onChange={value => { this.setState({ end_time: value }) }}\n              showTimeSelect\n              timeIntervals={15}\n              timeCaption=\"time\"\n              dateFormat=\"yyyy/MM/dd HH:mm\"\n              selected={mm(this.state.end_time).toDate()}\n              className='datepicker-input'\n            />\n          </div>\n        </React.Fragment>\n      )\n    }\n  }\n\n  eventSelect() {\n    if (!this.state.insideEvent) {\n      return (\n        <div class=\"mb-3\" style={{ width: '100%' }}>\n          <label class=\"form-label \">{t['event']}</label>\n          {this.eventOptions()}\n        </div>\n      )\n    }\n  }\n\n  sataOptions() {\n    if (this.state.sata) {\n      return (\n        <React.Fragment>\n          <div class=\"mb-3\">\n            <label class=\"form-label\">{t['sata_displays']}</label>\n            <input type=\"integer\" class=\"form-control\" name=\"text-input\" onInput={(e) => { this.handleChange({ number_of_sata_displays: e.target.value }) }} value={this.state.number_of_sata_displays} />\n          </div>\n\n          <div class=\"mb-3\">\n            <label class=\"form-label\">{t['per_display']}</label>\n            <input type=\"integer\" class=\"form-control\" name=\"text-input\" onInput={(e) => { this.handleChange({ per_display: e.target.value }) }} value={this.state.per_display} />\n          </div>\n        </React.Fragment>\n      )\n    }\n  }\n\n  render() {\n    const { is_private } = this.state;\n    return (\n      <body className=\"antialiased\">\n        <Validation items={this.state.validationItems} modal={this.modal} lang={this.state.lang} />\n        <div className=\"wrapper\">\n          <Header history={this.props.history} />\n          <div className=\"page-wrapper\">\n            <div className=\"container-xl\">\n              <div className=\"page-header d-print-none\">\n                <div className=\"row align-items-center\"></div>\n                <div className=\"col\">\n                  <div className=\"page-pretitle\">{t['create_meeting_page']}</div>\n                  <h2 className=\"page-title\">{t['provide_following_info']}</h2>\n                </div>\n              </div>\n            </div>\n            <div className=\"page-body\">\n              <div className=\"container-xl\">\n                <div className=\"row row-deck row-cards\">\n                  <div class=\"col-md-8\">\n                    <div class=\"card\">\n                      <div class=\"card-header\">\n                        <h3 class=\"card-title\">{t['create_meeting']}</h3>\n                      </div>\n                      <div class=\"card-body\">\n                        <form>\n                          <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['meeting_title']}</label>\n                            <input type=\"text\" class=\"form-control\" name=\"text-input\" placeholder={t['write_something']} onInput={(e) => { this.handleChange({ title: e.target.value }) }} value={this.state.title} />\n                          </div>\n                          <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['meeting_info']}<span class=\"form-label-description\"></span></label>\n                            <textarea class=\"form-control\" name=\"example-textarea-input\" rows=\"6\" placeholder={t['write_something']} onInput={(e) => { this.handleChange({ info: e.target.value }) }} value={this.state.info}></textarea>\n                          </div>\n\n                          {this.eventSelect()}\n\n                          <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['meeting_type']}</label>\n                            <div class=\"form-selectgroup\">\n                              <label class=\"form-selectgroup-item\">\n                                <input type=\"checkbox\" name=\"name\" value=\"in_person\" class=\"form-selectgroup-input\" checked={this.state.meeting_type === 'in_person' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                <span class=\"form-selectgroup-label\">{t['in_person']}</span>\n                              </label>\n                              <label class=\"form-selectgroup-item\">\n                                <input type=\"checkbox\" name=\"name\" value=\"hybrid\" class=\"form-selectgroup-input\" checked={this.state.meeting_type === 'hybrid' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                <span class=\"form-selectgroup-label\">{t['hybrid']}</span>\n                              </label>\n                              <label class=\"form-selectgroup-item\">\n                                <input type=\"checkbox\" name=\"name\" value=\"online\" class=\"form-selectgroup-input\" checked={this.state.meeting_type === 'online' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                <span class=\"form-selectgroup-label\">{t['online']}</span>\n                              </label>\n                              <label class=\"form-selectgroup-item\">\n                                <input type=\"checkbox\" name=\"name\" value=\"online_external\" class=\"form-selectgroup-input\" checked={this.state.meeting_type === 'online_external' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                <span class=\"form-selectgroup-label\">{t['online_external']}</span>\n                              </label>\n                            </div>\n                          </div>\n\n\n\n\n                          <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['service_type']}</label>\n                            <div class=\"form-selectgroup\">\n                              <label class=\"form-selectgroup-item\">\n                                <input type=\"checkbox\" name=\"name\" value=\"internal\" class=\"form-selectgroup-input\" checked={this.state.internal ? true : false} onClick={(e) => this.changeService(e.target.value)} />\n                                <span class=\"form-selectgroup-label\">{t['internal']}</span>\n                              </label>\n                              <label class=\"form-selectgroup-item\">\n                                <input type=\"checkbox\" name=\"name\" value=\"sata\" class=\"form-selectgroup-input\" checked={this.state.sata ? true : false} onClick={(e) => this.changeService(e.target.value)} />\n                                <span class=\"form-selectgroup-label\">{t['sata']}</span>\n                              </label>\n                              <label class=\"form-selectgroup-item\">\n                                <input type=\"checkbox\" name=\"name\" value=\"bigblue\" class=\"form-selectgroup-input\" checked={this.state.bigblue ? true : false} onClick={(e) => this.changeService(e.target.value)} />\n                                <span class=\"form-selectgroup-label\">{t['bigblue']}</span>\n                              </label>\n                            </div>\n                          </div>\n\n                          {this.sataOptions()}\n\n                          <div class=\"mb-3 \" id='tags' >\n                            <label class=\"form-label\" >{t['tags']}</label>\n                            {this.tagShow()}\n                          </div>\n\n                          <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['meeting_capacity']}</label>\n                            <RangeSlider\n                              value={this.state.capacity}\n                              onChange={(e) => { this.handleChange({ capacity: e.target.value }) }}\n                            />\n                          </div>\n\n\n                          {this.calendarType()}\n\n\n                          <div class=\"mb-3\">\n                            <div class=\"form-label\">{t['is_private']}</div>\n                            <label class=\"form-check form-switch\">\n                              <input class=\"form-check-input\" type=\"checkbox\" onClick={(e) => this.changeDefault(e.target.value)} checked={is_private ? true : false} />\n                              <span class=\"form-check-label\">{t['default_is_private_info']}</span>\n                            </label>\n                          </div>\n\n\n\n\n                        </form>\n                      </div>\n                      <div class=\"card-footer\">\n                        <div class=\"d-flex\">\n                          <a href=\"/#/meetings\" class=\"btn btn-link\">{t['cancel']}</a>\n                          {this.deleteBtn()}\n                          <button id='submit-button' onClick={() => this.submit()} class=\"btn btn-primary ms-auto\">{t['submit']}</button>\n                          <div id='submit-spinner' class=\"spinner-border text-red ms-auto\" role=\"status\" style={{ display: 'none' }}></div>\n                        </div>\n                      </div>\n                      <div class=\"progress progress-sm card-progress\">\n                        <div class=\"progress-bar\" style={{ width: \"100%\" }} role=\"progressbar\" aria-valuenow=\"38\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n                          <span class=\"visually-hidden\">38% Complete</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"col-md-4\">\n                    <div class=\"card\">\n                      <div class=\"card-status-top bg-lime\"></div>\n                      <div class=\"card-body\">\n                        <h3 class=\"card-title\"></h3>\n                        <p></p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </body>\n    )\n  }\n}\n\n\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport Header from \"../header/header.jsx\";\n\nexport default class MeetingAttendance extends React.Component {\n\n    constructor(props) {\n        super(props);\n        //this.submit = this.submit.bind(this);\n        this.setInstance = this.setInstance.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            title: null,\n        }\n\n    }\n\n\n\n    componentWillMount() {\n        ModelStore.on(\"set_instance\", this.setInstance);\n\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n    }\n\n    componentDidMount() {\n\n    }\n\n\n\n    handleChange(obj) {\n\n    }\n\n    setInstance() {\n\n    }\n\n\n    render() {\n\n        return (\n            <body className=\"antialiased\">\n                <div className=\"wrapper\">\n                    <Header history={this.props.history}/>\n                    <div className=\"page-wrapper\">\n                        <div className=\"container-xl\">\n                            <div className=\"page-header d-print-none\">\n                                <div className=\"row align-items-center\"></div>\n                                <div className=\"col\">\n                                    <div className=\"page-pretitle\">Overview</div>\n                                    <h2 className=\"page-title\">Condensed dark layout</h2>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"page-body\">\n                            <div className=\"container-xl\">\n                                <div className=\"row row-deck row-cards\">\n\n                                    <div className=\"col-md-6\">\n                                        <div class=\"card mb-3\">\n                                            <div class=\"card-header\">\n                                                <h3 class=\"card-title\">Add Attendees</h3>\n                                            </div>\n                                            <div class=\"list-group list-group-flush list-group-hoverable\">\n                                                <div class=\"list-group-item\">\n                                                    <div class=\"input-icon mb-3\">\n                                                        <input type=\"text\" class=\"form-control\" placeholder=\"Search\" />\n                                                        <span class=\"input-icon-addon\">\n\n                                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"10\" cy=\"10\" r=\"7\"></circle><line x1=\"21\" y1=\"21\" x2=\"15\" y2=\"15\"></line></svg>\n                                                        </span>\n                                                    </div>\n                                                </div>\n\n                                                <div class=\"list-group-item\">\n                                                    <div class=\"row align-items-center\">\n                                                        <div class=\"col-auto\"><span class=\"badge bg-red\"></span></div>\n                                                        <div class=\"col-auto\">\n                                                            <a href=\"#\">\n                                                                <span class=\"avatar\" ></span>\n                                                            </a>\n                                                        </div>\n                                                        <div class=\"col text-truncate\">\n                                                            <a href=\"#\" class=\"text-body d-block\">Pawe Kuna</a>\n                                                            <small class=\"d-block text-muted text-truncate mt-n1\">Change deprecated html tags to text decoration classes (#29604)</small>\n                                                        </div>\n                                                        <div class=\"col-auto\">\n                                                            <a href=\"#\" class=\"list-group-item-actions\">\n                                                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon text-muted\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z\"></path></svg>\n                                                            </a>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        )\n    }\n}\n\n\n\n\n","import React from \"react\";\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport { v4 as uuidv4 } from 'uuid';\nimport moment from 'jalali-moment'\nmoment.locale('fa', { useGregorianParser: true });\n\n\nconst ExhibitionCard = (props) => {\n\n    var  t = dict[props.lang]\n    function formatGregorianDate(gregorianDate) {\n        var date = new Date(gregorianDate);\n        var day = date.getDate();\n        var month = date.getMonth() + 1;\n        var year = date.getFullYear();\n        var hours = date.getHours();\n        var minutes = date.getMinutes();\n        var fullYear = year + '/' + month + '/' + day + ' ' + hours + ':' + minutes;\n        return fullYear;\n    }\n\n\n    function cardCover(exhibition) {\n        if (exhibition.cover) {\n            return (\n                <a href={'/#/exhibitions/' + exhibition.id}>\n                    <div class=\"card-img-top img-responsive img-responsive-16by9\" style={{ backgroundImage: \"url(\" + exhibition.cover + \")\" }}></div>\n                </a>\n            )\n        }\n    }\n\n    function tagsShow(tags) {\n        var result = []\n        if (tags && tags.length > 0) {\n            tags.map((tag) => {\n                result.push(<span class=\"badge bg-lime-lt\" style={{ margin: '2px' }}>{tag.title}</span>)\n            })\n        }\n        return result\n    }\n\n    function exhibitionItems() {\n        var result = []\n        if (props.exhibitions) {\n            props.exhibitions.map((exhibition) => {\n                result.push(\n\n                    <div className={props.col ? \"col-md-\" + props.col : \"col-md-8\"} >\n                        <div className=\"card\">\n                            {cardCover(exhibition)}\n                            <div className=\"card-body\">\n                                <h3 class=\"card-title\">\n                                    <a href={'/#/exhibitions/' + exhibition.id}>\n                                        {exhibition.title}\n                                    </a>\n                                </h3>\n                                <p style={{ textAlign: 'justify' }}>\n                                    {exhibition.truncated_info}\n                                </p>\n\n\n\n\n                                <h4>{t['tags']}</h4>\n                                <div class=\"text-muted mb-3\">\n                                    {tagsShow(exhibition.tags)}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )\n            })\n        }\n        return result\n    }\n\n    return (\n        <React.Fragment>\n            {exhibitionItems()}\n        </React.Fragment>\n    )\n}\nexport default ExhibitionCard;\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport $ from 'jquery';\nimport { dict } from '../../Dict';\nimport { conf } from '../../conf';\nimport Header from \"../header/header.jsx\";\nimport ExhibitionCard from \"./card.jsx\";\nimport moment from 'moment-jalaali'\nimport queryString from 'query-string'\nimport DatePicker2 from 'react-datepicker2';\nimport { Typeahead, withAsync } from 'react-bootstrap-typeahead';\nconst AsyncTypeahead = withAsync(Typeahead);\nconst server = conf.server;\n\nvar t = dict['farsi']\n\nexport default class ExhibitionIndex extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.getList = this.getList.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.getInstance = this.getInstance.bind(this);\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            event_id: window.localStorage.getItem('event_id'),\n            title: null,\n            exhibitions: null,\n            allTags: null,\n            q: '',\n            start_from: moment(),\n            start_to: moment().add(2, 'jMonth'),\n            tags: [],\n            page: 1,\n            userAbilities: null,\n            events: [],\n        }\n\n    }\n\n\n    componentWillMount() {\n        ModelStore.on(\"got_list\", this.getList);\n        ModelStore.on(\"got_instance\", this.getInstance);\n        t = dict[this.state.lang]\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"got_list\", this.getList);\n        ModelStore.removeListener(\"got_instance\", this.getInstance);\n    }\n\n    componentDidMount() {\n        var location = window.location.href.split('#')[0].split('/')\n        const value = queryString.parse(this.props.location.search);\n        if (value.event_id) {\n            this.setState({ event_id: value.event_id })\n            MyActions.getList('exhibitions/search', this.state.page, { event_id: value.event_id }, this.state.token);\n        } else {\n            MyActions.getList('exhibitions/search', this.state.page, {event_id: this.state.event_id}, this.state.token);\n        }\n\n        if (this.state.token && this.state.token.length > 10) {\n            //MyActions.getInstance('profiles/my', 1, this.state.token);\n            MyActions.getList('profiles/mine', 1, {}, this.state.token);\n        } else {\n            this.props.history.push(\"login\")\n        }\n    }\n\n    getList() {\n        var list = ModelStore.getList()\n        var klass = ModelStore.getKlass()\n\n        if (list && klass === 'Exhibition') {\n            $('#search-spinner').hide();\n            if (list[0] && list[0].page) {\n                if (list[0].page == 1) {\n                    this.setState({\n                        exhibitions: list,\n                    });\n                } else {\n                    this.setState({\n                        exhibitions: this.state.exhibitions.concat(list),\n                    });\n                }\n                this.setState({ page: list[0].page, pages: list[0].pages })\n            } else {\n                this.setState({\n                    exhibitions: [],\n                    page: 0,\n                });\n            }\n            console.log(list)\n        }\n        if (list && klass === 'MyProfile') {\n            this.setState({\n                profile: list[0],\n                userAbilities: list[0].abilities\n            });\n        }\n    }\n\n    getInstance() {\n\n    }\n\n\n    handleChange(obj) {\n        this.setState(obj);\n    }\n\n\n\n    noExhibitionCard() {\n        <div class=\"col-12\">\n            <div class=\"card\">\n                <div class=\"empty\">\n                    <div class=\"empty-img\"><img src=\"./static/illustrations/undraw_quitting_time_dm8t.svg\" height=\"128\" alt=\"\" />\n                    </div>\n                    <p class=\"empty-title\">No results found</p>\n                    <p class=\"empty-subtitle text-muted\">\n                        Try adjusting your search or filter to find what you're looking for.\n                    </p>\n                    <div class=\"empty-action\">\n                        <a href=\"/#/exhibitions/create\" class=\"btn btn-primary\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"4\" y=\"5\" width=\"16\" height=\"16\" rx=\"2\" /><line x1=\"16\" y1=\"3\" x2=\"16\" y2=\"7\" /><line x1=\"8\" y1=\"3\" x2=\"8\" y2=\"7\" /><line x1=\"4\" y1=\"11\" x2=\"20\" y2=\"11\" /><line x1=\"10\" y1=\"16\" x2=\"14\" y2=\"16\" /><line x1=\"12\" y1=\"14\" x2=\"12\" y2=\"18\" /></svg>\n                            Create an exhibition\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    }\n\n    checkExhibition() {\n        if (this.state.exhibitions) {\n            return (\n                <React.Fragment>\n                    <div class=\"col-4\">\n                        <div class=\"card\">\n                            <div class=\"card-status-top bg-lime\"></div>\n                            <div className=\"card-header\" >\n                                <h3 class=\"card-title\">{t['exhibitions']}</h3>\n                                <ul class=\"nav nav-pills card-header-pills\">\n                                    <li class=\"nav-item ms-auto\">\n                                        <a class=\"nav-link p-1\" href={\"/#/exhibitions/create\"}>\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n                                        </a>\n                                    </li>\n                                </ul>\n                            </div>\n                            <div class=\"card-body\">\n                                <p>\n                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aperiam deleniti fugit incidunt, iste, itaque minima neque pariatur perferendis sed suscipit velit vitae voluptatem\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <ExhibitionCard exhibitions={this.state.exhibitions} col={8} lang={this.state.lang} />\n                </React.Fragment>\n            )\n        } else {\n            return (this.noExhibitionCard())\n        }\n    }\n\n    cardMasonry() {\n        if (this.state.exhibitions) {\n            return (\n                <div class='row row-cards' data-masonry='{\"percentPosition\": true }'  >\n                    <ExhibitionCard exhibitions={this.state.exhibitions} col={6}  lang={this.state.lang}/>\n                </div>\n            )\n        }\n    }\n\n    search() {\n        $('#search-spinner').show();\n        var data = { q: this.state.q, tags: this.state.tags, event_id: this.state.event_id }\n        this.setState({ page: 1 }, () => {\n            MyActions.getList('exhibitions/search', this.state.page, data, this.state.token);\n        })\n    }\n\n    tagCheckbox() {\n        var result = []\n        if (this.state.allTags) {\n            this.state.allTags.map((tag) => {\n                result.push(\n                    <label class=\"form-check\">\n                        <input id={'tag-check-' + tag.id} class=\"form-check-input\" type=\"checkbox\" style={{ marginTop: '3.5px' }} value={tag.id} onChange={(e) => this.changeTags(e)} />\n                        <span class=\"form-check-label\">\n                            <span class=\"badge bg-lime-lt\" style={{ margin: '2px' }}>{tag.title}</span>\n                        </span>\n                    </label>\n                )\n            })\n        }\n        return result\n    }\n\n    tagSelected(tags) {\n        var result = []\n        tags.map((tag) => {\n            if (tag['title']) {\n                result.push(tag['title'])\n            } else {\n                result.push(tag)\n            }\n        })\n        this.setState({ tags: result }, () => console.log(this.state.tags))\n    }\n\n    tagInput() {\n        return (\n            <div style={{ direction: 'ltr', marginBottom: '70px' }}>\n                <AsyncTypeahead\n                    id='search-tag'\n                    multiple\n                    defaultSelected={this.state.tags}\n                    isLoading={this.state.isLoading}\n                    labelKey='title'\n                    onSearch={(query) => {\n                        this.setState({ isLoading: true });\n                        fetch(server + \"/tags/search?q=\" + query)\n                            .then((resp) => resp.json())\n                            .then(({ items }) => {\n                                this.setState({ options: items, isLoading: false }, () => console.log(this.state.options))\n                            });\n                    }}\n                    onChange={(t) => this.tagSelected(t)}\n                    options={this.state.options}\n                    renderMenuItemChildren={(option, props) => (\n                        <React.Fragment>\n                            <span>{option.title}</span>\n                        </React.Fragment>\n                    )}\n                />\n            </div>\n        )\n    }\n\n\n    loadMore() {\n        var data = { id: this.state.id, page: this.state.page + 1, q: this.state.q, tags: this.state.tags }\n        MyActions.getList('exhibitions/search', this.state.page + 1, data, this.state.token);\n    }\n\n\n    createBtn() {\n        if (this.state.userAbilities && this.state.userAbilities.create_exhibition) {\n            return (\n                <div class=\"btn-list\">\n                    <a href={\"#/exhibitions/create\"} class=\"btn btn-primary\"  >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line></svg>\n                        {t['create_exhibition']}\n                    </a>\n                </div>\n            )\n        }\n    }\n\n    moreBtn() {\n        if (this.state.pages > this.state.page) {\n            return (\n                <div class=\"hr-text\">\n                    <a onClick={() => this.loadMore()}>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"9\" /><line x1=\"8\" y1=\"12\" x2=\"12\" y2=\"16\" /><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\" /><line x1=\"16\" y1=\"12\" x2=\"12\" y2=\"16\" /></svg>\n                        {t['more']}\n                    </a>\n                </div>\n            )\n        }\n    }\n\n    render() {\n\n        return (\n            <body className=\"antialiased\">\n                <div className=\"wrapper\">\n                    <Header history={this.props.history} />\n                    <div className=\"page-wrapper\">\n                        <div className=\"container-xl\">\n                            <div className=\"page-header d-print-none\">\n                                <div className=\"row align-items-center\">\n                                    <div className=\"col\">\n                                        <div className=\"page-pretitle\">{t['overview']}</div>\n                                        <h2 className=\"page-title\">{t['exhibitions']}</h2>\n                                    </div>\n                                    <div class=\"col-auto ms-auto d-print-none\">\n                                        {this.createBtn()}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"page-body\">\n                            <div className=\"container-xl\">\n                                <div class=\"row\">\n                                    <div class=\"col-lg-3\">\n                                        <div class=\"card mb-3\">\n                                            <div className=\"card-header\" >\n                                                <h4 class=\"card-title\">\n                                                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M5.5 5h13a1 1 0 0 1 .5 1.5l-5 5.5l0 7l-4 -3l0 -4l-5 -5.5a1 1 0 0 1 .5 -1.5\" /></svg>\n                                                    {t['filter_events']}\n                                                </h4>\n                                            </div>\n\n                                            <div class=\"card-body\">\n                                                <div class=\"mb-3\">\n                                                    <label class=\"form-label\">{t['contains_words']}</label>\n                                                    <div class=\"input-icon mb-3\">\n                                                        <input type=\"text\" class=\"form-control\" placeholder={t['search_placeholder']} onInput={(e) => { this.handleChange({ q: e.target.value }) }} />\n                                                        <span class=\"input-icon-addon\">\n                                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"10\" cy=\"10\" r=\"7\"></circle><line x1=\"21\" y1=\"21\" x2=\"15\" y2=\"15\"></line></svg>\n                                                        </span>\n                                                    </div>\n                                                </div>\n\n                                                <div class=\"mb-3 \" id='tags' >\n                                                    <label class=\"form-label\" >{t['tags']}</label>\n                                                    {this.tagInput()}\n                                                </div>\n                                            </div>\n                                            <div class=\"card-footer\">\n\n                                                <a onClick={() => this.search()} class=\"btn btn-primary w-100\">\n                                                    <span style={{ verticalAlign: '-2px' }}>\n                                                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M5.5 5h13a1 1 0 0 1 .5 1.5l-5 5.5l0 7l-4 -3l0 -4l-5 -5.5a1 1 0 0 1 .5 -1.5\" /></svg>\n                                                    </span>\n                                                    {t['filter_and_search']}\n                                                    <div id='search-spinner' class=\"spinner-border text-red\" role=\"status\" style={{ display: 'none' }}></div>\n                                                </a>\n                                            </div>\n\n                                        </div>\n                                    </div>\n                                    <div class=\"col-lg-9\">\n                                        {this.cardMasonry()}\n                                        {this.moreBtn()}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        )\n    }\n}\n\n\n\n\n","import React from \"react\";\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\n\n\nconst QuestionCard = (props) => {\n    const t = dict[props.lang]\n    function questions() {\n        var result = []\n        if (props.questions) {\n            props.questions.map((question) => {\n                if (question.content) {\n                    result.push(\n                        <div class=\"list-group-item\">\n                            <div class=\"row align-items-center\">\n                                <div class=\"col text-truncate\">\n                                    <a onClick=\"\" class=\"text-body d-block\">{question.content}</a>\n                                </div>\n                            </div>\n                        </div>)\n                }\n            });\n        }\n\n        return result\n    }\n\n    function createBtn() {\n        if (props.is_admin) {\n            return (\n                <li class=\"nav-item ms-auto\">\n                    <a class=\"nav-link p-1\" href={\"/#/questions/create?\" + props.questionable_type + \"_id=\" + props.questionable_id}>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n                    </a>\n                </li>\n            )\n        }\n    }\n\n    return (\n\n        <div className=\"card mb-3\" style={props.height ? { height: props.height } : { height: 'auto' }}>\n            <div className=\"card-header\" >\n                <h3 class=\"card-title\">{t['q_and_a_s']}</h3>\n                <ul class=\"nav nav-pills card-header-pills\">\n                    {createBtn()}\n                </ul>\n            </div>\n            <div class=\"list-group list-group-flush list-group-hoverable\">\n                {questions()}\n            </div>\n        </div>\n\n    )\n}\nexport default QuestionCard;","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport Header from \"../header/header.jsx\";\nimport MeetingCard from \"../meetings/card.jsx\";\nimport { v4 as uuidv4 } from 'uuid';\nimport $ from 'jquery';\nimport AttendanceCard from \"../attendances/card.jsx\";\nimport QuestionCard from \"../questions/card.jsx\";\nimport Quill from 'quill';\nimport { socket } from '../../socket.js'\nimport FlyerCard from \"../flyers/card.jsx\";\nimport {\n  appendChat, chatItems, throttle, send, wsSend, keydownHandler, scrollChat\n} from \"../rooms/chat.js\";\n\nvar t = dict['farsi']\n\nexport default class ExhibitionShow extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.getInstance = this.getInstance.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.socketHandle = this.socketHandle.bind(this);\n    \n    this.appendChat = appendChat.bind(this);\n    this.chatItems = chatItems.bind(this);\n    this.throttle = throttle.bind(this);\n    this.send = send.bind(this);\n    this.wsSend = wsSend.bind(this);\n    this.keydownHandler = keydownHandler.bind(this);\n    this.scrollChat = scrollChat.bind(this);\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      lang: window.localStorage.getItem('lang'),\n      dir: window.localStorage.getItem('dir'),\n      title: null,\n      id: null,\n      info: null,\n      flyers: [],\n      questions: [],\n      quillOne: null,\n      tags: [],\n      uploads: null,\n      is_admin: false,\n      attendees: [],\n      room_id: null,\n      roomId: null,\n      cover: null,\n\n      name: null,\n      fullname: null,\n      initials: null,\n      userUUID: null,\n\n      chats: [],\n      lastTime: Date.now(),\n      content: null,\n      item: null,\n      quill_content: null,\n\n      activeTab: 'details'\n    }\n\n  }\n\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"deleted_instance\", this.getInstance);\n    document.addEventListener('keydown', this.keydownHandler);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"deleted_instance\", this.getInstance);\n    document.removeEventListener('keydown', this.keydownHandler);\n  }\n\n  componentDidMount() {\n    t = dict[this.state.lang]\n    var self = this;\n    MyActions.getInstance('exhibitions', this.props.match.params.id, this.state.token);\n    socket.on('connect', function () {\n      if (self.state.roomId) {\n        socket.emit('room', { room: self.state.roomId.toString(), uuid: self.state.userUUID });\n      }\n    });\n\n    socket.on('message', function (data) {\n      if (data['sender'] !== self.state.userUUID) {\n        self.socketHandle(data)\n      }\n    });\n  }\n\n  socketHandle(msg) {\n    var self = this;\n    var parsed = msg;\n    switch (parsed.type) {\n      case \"chat\":\n        self.appendChat(parsed.c);\n        break;\n      case \"userCounter\":\n        self.setState({ userCounter: parsed.c });\n        break;\n    }\n  }\n\n\n\n  handleChange(obj) {\n    this.setState(obj);\n  }\n\n  getInstance() {\n    var klass = ModelStore.getKlass()\n    var model = ModelStore.getIntance()\n    if (klass === 'Exhibition') {\n      this.setState({\n        title: model.title,\n        id: model.id,\n        info: model.info,\n        flyers: model.flyers,\n        tags: model.tags,\n        uploads: model.uploads,\n        is_admin: model.is_admin,\n        attendees: model.attendees,\n        room_id: model.room_id,\n        roomId: model.room_uuid,\n        cover: model.cover,\n        questions: model.questions\n      }, () => {\n        if (this.state.token && this.state.token.length > 10) {\n          MyActions.setInstance('users/validate_token', {}, this.state.token);\n        }\n        if (this.state.flyers && this.state.flyers[0]) {\n          this.loadContent(this.state.flyers[0].quill_content)\n        }\n      })\n    }\n    console.log(model)\n  }\n\n  setInstance() {\n    var self = this;\n    var klass = ModelStore.getKlass()\n    var user = ModelStore.getIntance();\n    if (klass === 'Validate') {\n      this.setState({ name: user.name, fullname: user.name, initials: user.initials, userUUID: user.uuid }, () => {\n        this.connectSocketRoom();\n        //console.log(self.state)\n      });\n    }\n  }\n\n\n  deleteFlyer(id) {\n    var data = { id: id, advertisable_id: this.state.id, advertisable_type: 'Meeting' }\n    MyActions.removeInstance('flyers', data, this.state.token);\n  }\n\n  loadContent(quill_content) {\n    this.setState({ quill_content: quill_content })\n  }\n\n  editFlyerBtn(flyer) {\n    if (this.state.is_admin) {\n      return (\n        <div class=\"col-auto\">\n          <a href={\"/#/flyers/edit/\" + flyer.id} class=\"list-group-item-actions show\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M9 7h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3\" /><path d=\"M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3\" /><line x1=\"16\" y1=\"5\" x2=\"19\" y2=\"8\" /></svg>\n          </a>\n          <a onClick={() => this.deleteFlyer(flyer.id)} class=\"list-group-item-actions show\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"4\" y1=\"7\" x2=\"20\" y2=\"7\" /><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" /><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" /><path d=\"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12\" /><path d=\"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3\" /></svg>\n          </a>\n        </div>\n      )\n    }\n  }\n\n  flyers() {\n    var result = []\n    this.state.flyers.map((flyer) => {\n      if (flyer.is_default) {\n        // $('#content').html();\n        // this.state.quillOne.setContents(flyer.quill_content)\n      }\n    })\n    this.state.flyers.map((flyer) => {\n      result.push(\n        <div class=\"list-group-item\">\n          <div class=\"row align-items-center\">\n            <div class=\"col text-truncate\">\n              <a onClick={() => this.loadContent(flyer.quill_content)} class=\"text-body d-block\">{flyer.title}</a>\n            </div>\n            {this.editFlyerBtn(flyer)}\n          </div>\n        </div>\n      )\n    })\n    return result\n  }\n\n  tagsShow(tags) {\n    var result = []\n    if (tags && tags.length > 0) {\n      tags.map((tag) => {\n        result.push(<span class=\"badge bg-lime-lt\" style={{ margin: '2px' }}>{tag.title}</span>)\n      })\n    }\n    return result\n  }\n\n\n  deleteUpload(id) {\n    var data = { id: id }\n    MyActions.removeInstance('uploads', data, this.state.token);\n  }\n\n  editUploadBtn(upload) {\n    if (this.state.is_admin) {\n      return (\n        <div class=\"col-auto p-0\">\n          <a onClick={() => this.deleteUpload(upload.id)} class=\"list-group-item-actions show\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"4\" y1=\"7\" x2=\"20\" y2=\"7\" /><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" /><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" /><path d=\"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12\" /><path d=\"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3\" /></svg>\n          </a>\n        </div>\n      )\n    }\n  }\n\n  uploads() {\n    var result = []\n    if (this.state.uploads) {\n      this.state.uploads.map((upload) => {\n        if (upload.upload_type !== 'cover') {\n          result.push(\n            <div class=\"list-group-item\">\n              <div class=\"row align-items-center\">\n                <div class=\"col text-truncate\">\n                  <a style={{ cursor: 'pointer' }} href={upload.link} class=\"text-body d-block\">{upload.title}</a>\n                </div>\n                {this.editUploadBtn(upload)}\n              </div>\n            </div>\n          )\n        }\n      })\n    }\n    return result\n  }\n\n  createFlyerBtn() {\n    if (this.state.is_admin) {\n      return (\n        <li class=\"nav-item ms-auto\">\n          <a class=\"nav-link\" href={\"/#/flyers/create?exhibition_id=\" + this.state.id}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n          </a>\n        </li>\n      )\n    }\n  }\n\n  createUploadBtn() {\n    if (this.state.is_admin) {\n      return (\n        <li class=\"nav-item ms-auto\">\n          <a class=\"nav-link\" href={\"/#/uploads/create?exhibition_id=\" + this.state.id}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n          </a>\n        </li>\n      )\n    }\n  }\n\n  editExhibitionBtn() {\n    if (this.state.is_admin) {\n      return (\n        <li class=\"nav-item ms-auto\">\n          <a class=\"nav-link p-1\" href={\"/#/exhibitions/edit/\" + this.state.id}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M9 7h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3\" /><path d=\"M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3\" /><line x1=\"16\" y1=\"5\" x2=\"19\" y2=\"8\" /></svg>\n          </a>\n        </li>\n      )\n    }\n  }\n\n  addAttendance() {\n    if (this.state.is_admin) {\n      return (\n        <AttendanceCard is_admin={this.state.is_admin} attendees={this.state.attendees} attendable_type='exhibition' attendable_id={this.state.id} lang={this.state.lang}/>\n      )\n    }\n\n  }\n\n  connectSocketRoom() {\n    if (this.state.userUUID && this.state.roomId) {\n      socket.emit('room', { room: this.state.roomId, uuid: this.state.userUUID });\n    }\n  }\n\n\n  render() {\n\n    return (\n      <body className=\"antialiased\">\n        <div className=\"wrapper\">\n          <Header history={this.props.history} />\n          <div className=\"page-wrapper\">\n            <div className=\"container-xl\">\n              <div className=\"page-header d-print-none\">\n                <div className=\"row align-items-center\"></div>\n                <div className=\"col\">\n                  <div className=\"page-pretitle\">{t['overview']}</div>\n                  <h2 className=\"page-title\">{t['exhibition_detail']}</h2>\n                </div>\n              </div>\n            </div>\n            <div className=\"page-body\">\n              <div className=\"container-xl\">\n                <div className=\"row  row-cards\">\n\n                  <div class=\"col-lg-4\">\n                    <div class=\"card mb-3\">\n                      <div className=\"card-header bg-dark-lt\" >\n                        <h3 class=\"card-title\">{this.state.title} </h3>\n                        <ul class=\"nav nav-pills card-header-pills\">\n                          {this.editExhibitionBtn()}\n                        </ul>\n                      </div>\n                      <ul class=\"nav nav-tabs\" data-bs-toggle=\"tabs\">\n                        <li class=\"nav-item\">\n                          <a onClick={() => this.setState({activeTab: 'details'})}  className={this.state.activeTab == \"details\" ? \"nav-link active\" : \"nav-link\"} data-bs-toggle=\"tab\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"9\" /><line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\" /><polyline points=\"11 12 12 12 12 16 13 16\" /></svg>\n                            {t['details']}\n                          </a>\n                        </li>\n                        <li class=\"nav-item\">\n                          <a onClick={() => {this.scrollChat(); this.setState({activeTab: 'chats'})}}  className={this.state.activeTab == \"chats\" ? \"nav-link active\" : \"nav-link\"}  data-bs-toggle=\"tab\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M21 14l-3 -3h-7a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1h9a1 1 0 0 1 1 1v10\" /><path d=\"M14 15v2a1 1 0 0 1 -1 1h-7l-3 3v-10a1 1 0 0 1 1 -1h2\" /></svg>\n                            {t['chats']}\n                          </a>\n                        </li>\n                      </ul>\n\n                      <div class=\"tab-content\">\n                        <div className={this.state.activeTab == \"details\" ? \"tab-pane active show\" : \"tab-pane\"}>\n\n                          <div class=\"card-body\">\n                            <h4>{t['exhibition_info']}</h4>\n                            <div class=\"text-muted mb-3\" style={{ textAlign: 'justify' }}>\n                              {this.state.info}\n                            </div>\n\n\n                            <h4>{t['tags']}</h4>\n                            <div class=\"text-muted mb-3\">\n                              {this.tagsShow(this.state.tags)}\n                            </div>\n                          </div>\n                          <div class=\"card-footer\">\n                            <div class=\"mt-2\">\n                              <a href={\"/#/rooms/\" + this.state.room_id + \"?rnd=\" + uuidv4()} class=\"btn btn-primary bg-green-lt w-100\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"3\" y=\"4\" width=\"18\" height=\"16\" rx=\"3\" /><circle cx=\"9\" cy=\"10\" r=\"2\" /><line x1=\"15\" y1=\"8\" x2=\"17\" y2=\"8\" /><line x1=\"15\" y1=\"12\" x2=\"17\" y2=\"12\" /><line x1=\"7\" y1=\"16\" x2=\"17\" y2=\"16\" /></svg>\n                                {t['enter_room_with_admin']}\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n\n                        <div className={this.state.activeTab == \"chats\" ? \"tab-pane active show\" : \"tab-pane\"} >\n                          <div class=\"card mb-3 maxh-250 minh-250\" style={{ borderColor: 'white', boxShadow: 'none' }}>\n                            <div class=\"list-group list-group-flush overflow-auto\" id='chat-box' style={{ maxHeight: '25rem' }}>\n                              {this.chatItems()}\n                            </div>\n                            <div class=\"card-footer\" style={{ borderColor: 'white' }} >\n                              <div class=\"row\">\n                                <div class=\"col\">\n                                  <input id='chat-form' type=\"text\" class=\"form-control\" placeholder={t['write_something']} onChange={(e) => {\n                                    this.handleChange({ item: { content: e.target.value, name: this.state.name, initials: this.state.initials, time: Date.now(), uuid: uuidv4() } })\n                                  }} />\n                                </div>\n                                <div class=\"col-auto\">\n                                  <a onClick={() => this.send()} class=\"btn btn-white btn-icon\" aria-label=\"Button\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M9 20v-8h-3.586a1 1 0 0 1 -.707 -1.707l6.586 -6.586a1 1 0 0 1 1.414 0l6.586 6.586a1 1 0 0 1 -.707 1.707h-3.586v8a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z\" /></svg>\n                                  </a>\n                                </div>\n                              </div>\n                            </div>\n\n                          </div>\n\n                        </div>\n                      </div>\n                    </div>\n\n                    {this.addAttendance()}\n\n                    <QuestionCard is_admin={this.state.is_admin} questions={this.state.questions} questionable_type='exhibition' questionable_id={this.state.id} lang={this.state.lang} />\n\n                    <div class=\"card mb-3\">\n                      <div class=\"card-header\">\n                        <h3 class=\"card-title\">{t['pages']}</h3>\n                        <ul class=\"nav nav-pills card-header-pills\">\n                          {this.createFlyerBtn()}\n                        </ul>\n                      </div>\n                      <div class=\"list-group list-group-flush list-group-hoverable\">\n                        {this.flyers()}\n                      </div>\n                    </div>\n\n                    <div class=\"card mb-3\">\n                      <div class=\"card-header\">\n                        <h3 class=\"card-title\">{t['resources']}</h3>\n                        <ul class=\"nav nav-pills card-header-pills\">\n                          {this.createUploadBtn()}\n                        </ul>\n\n                      </div>\n                      <div class=\"list-group list-group-flush list-group-hoverable\">\n                        {this.uploads()}\n                      </div>\n                    </div>\n\n                  </div>\n\n                  <FlyerCard quill_content={this.state.quill_content} cover={this.state.cover} />\n\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </body>\n    )\n  }\n}\n\n\n\n\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport $ from 'jquery';\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport { conf } from '../../conf';\nimport Header from \"../header/header.jsx\";\nimport Validation from \"../common/validation.jsx\";\nimport { Typeahead, withAsync } from 'react-bootstrap-typeahead';\nimport {\n  validateExistence\n} from \"../common/validate.js\";\n\nconst AsyncTypeahead = withAsync(Typeahead);\nconst server = conf.server;\nvar t = dict['farsi']\n\nexport default class ExhibitionCreate extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.submit = this.submit.bind(this);\n    this.getInstance = this.getInstance.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.deleteInstance = this.deleteInstance.bind(this);\n    this.getList = this.getList.bind(this);\n\n    this.modal = React.createRef();\n    this.validateExistence = validateExistence.bind(this);\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      lang: window.localStorage.getItem('lang'),\n      dir: window.localStorage.getItem('dir'),\n      event_id: window.localStorage.getItem('event_id'),\n      title: null,\n      id: null,\n      info: null,\n      options: [],\n      tags: [],\n      is_admin: false,\n      validationItems: [],\n      events: [],\n      is_active: false,\n    }\n\n  }\n\n\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"deleted_instance\", this.deleteInstance);\n    ModelStore.on(\"got_list\", this.getList);\n\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"got_list\", this.getList);\n    ModelStore.removeListener(\"deleted_instance\", this.deleteInstance);\n  }\n\n  componentDidMount() {\n    t = dict[this.state.lang]\n    if (this.props.match.params.id) {\n      MyActions.getInstance('exhibitions', this.props.match.params.id, this.state.token);\n    }\n\n    var location = window.location.href.split('#')[0].split('/')\n\n    \n    MyActions.getList('events/owner', this.state.page, {event_id: this.state.event_id}, this.state.token);\n  }\n\n  deleteInstance() {\n    this.props.history.push(\"/exhibitions/\")\n  }\n\n\n  handleChange(obj) {\n    this.setState(obj);\n  }\n\n  setInstance() {\n    var klass = ModelStore.getKlass()\n    var model = ModelStore.getIntance()\n    if (klass === 'Exhibition') {\n      this.props.history.push(\"/exhibitions/\" + model.id)\n    }\n  }\n\n  getInstance() {\n    var klass = ModelStore.getKlass()\n    var model = ModelStore.getIntance()\n    if (model && klass === 'Exhibition') {\n      this.setState({\n        id: model.id,\n        title: model.title,\n        info: model.info,\n        tags: model.tags,\n        is_admin: model.is_admin,\n        event_id: model.event_id,\n        is_active: model.is_active,\n        editing: true,\n      }, () => {\n        //console.log(this.state)\n        this.tagSelected(this.state.tags);\n        if(!this.state.is_admin){\n          this.props.history.push(\"/exhibitions/\")\n        }\n      })\n    }\n  }\n\n  getList() {\n    var list = ModelStore.getList()\n    var klass = ModelStore.getKlass()\n    if (list && klass === 'Event') {\n      this.setState({\n        events: list,\n      });\n    }\n  }\n\n  submit() {\n    var data = this.state\n    if (this.validateExistence(['title', 'info'])) {\n      $('#submit-button').hide();\n      $('#submit-spinner').show();\n      if (!this.state.editing) {\n        MyActions.setInstance('exhibitions', data, this.state.token);\n      } else {\n        MyActions.updateInstance('exhibitions', data, this.state.token);\n      }\n    }\n  }\n\n\n\n  tagSelected(tags) {\n    var result = []\n    tags.map((tag) => {\n      if (tag['title']) {\n        result.push(tag['title'])\n      } else {\n        result.push(tag)\n      }\n    })\n    this.setState({ tags: result }, () => console.log(this.state.tags))\n  }\n\n  tagShow() {\n    if (this.props.match.params.id && this.state.id) {\n      return (this.tagInput())\n    }\n\n    if (!this.props.match.params.id) {\n      return (this.tagInput())\n    }\n  }\n\n  tagInput() {\n    return (\n      <div style={{ direction: 'ltr', marginBottom: '70px' }}>\n        <AsyncTypeahead\n          id='exhibition-tag'\n          allowNew\n          multiple\n          defaultSelected={this.state.tags}\n          isLoading={this.state.isLoading}\n          labelKey='title'\n          onSearch={(query) => {\n            this.setState({ isLoading: true });\n            fetch(server + \"/tags/search?q=\" + query)\n              .then((resp) => resp.json())\n              .then(({ items }) => {\n                this.setState({ options: items, isLoading: false }, () => console.log(this.state.options))\n              });\n          }}\n          onChange={(t) => this.tagSelected(t)}\n          options={this.state.options}\n          renderMenuItemChildren={(option, props) => (\n            <React.Fragment>\n              <span>{option.title}</span>\n            </React.Fragment>\n          )}\n        />\n      </div>\n    )\n  }\n\n\n  changeDefault(e) {\n    if (this.state.is_active) {\n      this.setState({ is_active: false })\n    } else {\n      this.setState({ is_active: true })\n    }\n  }\n\n  deleteExhibition() {\n    var data = { id: this.state.id }\n    MyActions.removeInstance('exhibitions', data, this.state.token);\n  }\n\n  deleteBtn() {\n    if (this.state.editing) {\n      return (\n        <button id='delete-button' onClick={() =>{ if (window.confirm(t['are_you_sure'])) this.deleteExhibition()}} class=\"btn btn-danger ms-auto\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"4\" y1=\"7\" x2=\"20\" y2=\"7\" /><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" /><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" /><path d=\"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12\" /><path d=\"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3\" /></svg>\n          {t['delete']}\n        </button>\n      )\n    }\n  }\n\n  eventOptions() {\n    var result = []\n    if (this.state.events) {\n      var options = []\n\n      this.state.events.map((event) => {\n        options.push(\n          <option value={event.id} selected={this.state.event_id == event.id ? true : false}>{event.title}</option>\n        )\n      })\n      result.push(\n        <select class=\"form-select\" onChange={(e) => this.handleChange({ event_id: e.target.value })}>\n          {options}\n        </select>\n      )\n\n    }\n    return result\n  }\n\n\n\n  render() {\n    const { is_private, is_active } = this.state;\n\n    return (\n      <body className=\"antialiased\">\n        <Validation items={this.state.validationItems} modal={this.modal} lang={this.state.lang}/>\n        <div className=\"wrapper\">\n          <Header history={this.props.history} />\n          <div className=\"page-wrapper\">\n            <div className=\"container-xl\">\n              <div className=\"page-header d-print-none\">\n                <div className=\"row align-items-center\"></div>\n                <div className=\"col\">\n                  <div className=\"page-pretitle\">{t['create_exhibition_page']}</div>\n                  <h2 className=\"page-title\">{t['provide_following_info']}</h2>\n                </div>\n              </div>\n            </div>\n            <div className=\"page-body\">\n              <div className=\"container-xl\">\n                <div className=\"row row-deck row-cards\">\n                  <div class=\"col-md-8\">\n                    <div class=\"card\">\n                      <div class=\"card-header\">\n                        <h3 class=\"card-title\">{t['create_exhibition']}</h3>\n                      </div>\n                      <div class=\"card-body\">\n                        <form>\n                          <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['exhibition_title']}</label>\n                            <input type=\"text\" onInput={(e) => { this.handleChange({ title: e.target.value }) }} id='title' class=\"form-control\" name=\"text-input\" placeholder={t['write_something']} value={this.state.title} />\n                          </div>\n                          <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['exhibition_info']}<span class=\"form-label-description\"></span></label>\n                            <textarea onInput={(e) => { this.handleChange({ info: e.target.value }) }} class=\"form-control\" id='content' name=\"example-textarea-input\" rows=\"6\" placeholder={t['write_something']} value={this.state.info}></textarea>\n                          </div>\n\n                          <div class=\"mb-3\" style={{ width: '100%' }}>\n                            <label class=\"form-label \">{t['event']}</label>\n                            {this.eventOptions()}\n                          </div>\n\n                          <div class=\"mb-3\">\n                            <div class=\"form-label\">{t['is_active']}</div>\n                            <label class=\"form-check form-switch\">\n                              <input class=\"form-check-input\" type=\"checkbox\" onClick={(e) => this.changeDefault(e.target.value)} checked={is_active ? true : false} />\n                              <span class=\"form-check-label\">{t['is_active_notice']}</span>\n                            </label>\n                          </div>\n\n\n\n                          <div class=\"mb-3 \" id='tags' >\n                            <label class=\"form-label\" >{t['tags']}</label>\n                            {this.tagShow()}\n                          </div>\n                        </form>\n                      </div>\n                      <div class=\"card-footer\">\n                        <div class=\"d-flex\">\n                          <a href=\"/#/exhibitions\" class=\"btn btn-link\">{t['cancel']}</a>\n                          {this.deleteBtn()}\n                          <button id='submit-button' onClick={() => this.submit()} class=\"btn btn-primary ms-auto\">{t['submit']}</button>\n                          <div id='submit-spinner' class=\"spinner-border text-red ms-auto\" role=\"status\" style={{ display: 'none' }}></div>\n                        </div>\n                      </div>\n                      <div class=\"progress progress-sm card-progress\">\n                        <div class=\"progress-bar\" style={{ width: \"100%\" }} role=\"progressbar\" aria-valuenow=\"38\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n                          <span class=\"visually-hidden\">38% Complete</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"col-md-4\">\n                    <div class=\"card\">\n                      <div class=\"card-status-top bg-lime\"></div>\n                      <div class=\"card-body\">\n                        <h3 class=\"card-title\"></h3>\n                        <p></p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </body>\n    )\n  }\n}\n\n\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport Header from \"../header/header.jsx\";\n\nexport default class DiscssionIndex extends React.Component {\n\n    constructor(props) {\n        super(props);\n        //this.submit = this.submit.bind(this);\n        this.setInstance = this.setInstance.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            title: null,\n        }\n\n    }\n\n\n\n    componentWillMount() {\n        ModelStore.on(\"set_instance\", this.setInstance);\n\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n    }\n\n    componentDidMount() {\n\n    }\n\n\n\n    handleChange(obj) {\n\n    }\n\n    setInstance() {\n\n    }\n\n\n    render() {\n\n        return (\n            <body className=\"antialiased\">\n                <div className=\"wrapper\">\n                    <Header history={this.props.history}/>\n                    <div className=\"page-wrapper\">\n\n                        <div className=\"page-body\">\n                            <div className=\"container-xl\">\n                                <div className=\"row row-deck row-cards\">\n\n\n                                    <div class=\"card chat-app\">\n                                        <div id=\"plist\" class=\"people-list\">\n\n                                            <div class=\"input-icon mb-3\">\n                                                <input type=\"text\" class=\"form-control\" placeholder=\"Search\" />\n                                                <span class=\"input-icon-addon\">\n                                                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"10\" cy=\"10\" r=\"7\"></circle><line x1=\"21\" y1=\"21\" x2=\"15\" y2=\"15\"></line></svg>\n                                                </span>\n                                            </div>\n                                            <ul class=\"list-unstyled chat-list mt-2 mb-0\">\n                                                <li class=\"clearfix\">\n                                                    <img src=\"https://bootdey.com/img/Content/avatar/avatar1.png\" alt=\"avatar\" />\n                                                    <div class=\"about\">\n                                                        <div class=\"name\">Vincent Porter</div>\n                                                        <div class=\"status\"> <i class=\"fa fa-circle offline\"></i> left 7 mins ago </div>\n                                                    </div>\n                                                </li>\n                                                <li class=\"clearfix active\">\n                                                    <img src=\"https://bootdey.com/img/Content/avatar/avatar2.png\" alt=\"avatar\" />\n                                                    <div class=\"about\">\n                                                        <div class=\"name\">Aiden Chavez</div>\n                                                        <div class=\"status\"> <i class=\"fa fa-circle online\"></i> online </div>\n                                                    </div>\n                                                </li>\n                                                <li class=\"clearfix\">\n                                                    <img src=\"https://bootdey.com/img/Content/avatar/avatar3.png\" alt=\"avatar\" />\n                                                    <div class=\"about\">\n                                                        <div class=\"name\">Mike Thomas</div>\n                                                        <div class=\"status\"> <i class=\"fa fa-circle online\"></i> online </div>\n                                                    </div>\n                                                </li>\n                                                <li class=\"clearfix\">\n                                                    <img src=\"https://bootdey.com/img/Content/avatar/avatar7.png\" alt=\"avatar\" />\n                                                    <div class=\"about\">\n                                                        <div class=\"name\">Christian Kelly</div>\n                                                        <div class=\"status\"> <i class=\"fa fa-circle offline\"></i> left 10 hours ago </div>\n                                                    </div>\n                                                </li>\n                                                <li class=\"clearfix\">\n                                                    <img src=\"https://bootdey.com/img/Content/avatar/avatar8.png\" alt=\"avatar\" />\n                                                    <div class=\"about\">\n                                                        <div class=\"name\">Monica Ward</div>\n                                                        <div class=\"status\"> <i class=\"fa fa-circle online\"></i> online </div>\n                                                    </div>\n                                                </li>\n                                                <li class=\"clearfix\">\n                                                    <img src=\"https://bootdey.com/img/Content/avatar/avatar3.png\" alt=\"avatar\" />\n                                                    <div class=\"about\">\n                                                        <div class=\"name\">Dean Henry</div>\n                                                        <div class=\"status\"> <i class=\"fa fa-circle offline\"></i> offline since Oct 28 </div>\n                                                    </div>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                        <div class=\"chat\">\n                                            <div class=\"chat-header clearfix\">\n                                                <div class=\"row\">\n                                                    <div class=\"col-lg-6\">\n                                                        <a href=\"javascript:void(0);\" data-toggle=\"modal\" data-target=\"#view_info\">\n                                                            <img src=\"https://bootdey.com/img/Content/avatar/avatar2.png\" alt=\"avatar\" />\n                                                        </a>\n                                                        <div class=\"chat-about\">\n                                                            <h6 class=\"m-b-0\">Aiden Chavez</h6>\n                                                            <small>Last seen: 2 hours ago</small>\n                                                        </div>\n                                                    </div>\n                                                    <div class=\"col-lg-6 hidden-sm text-right\">\n\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class=\"chat-history\">\n                                                <ul class=\"m-b-0\">\n                                                    <li class=\"clearfix\">\n                                                        <div class=\"message-data text-right\">\n                                                            <span class=\"message-data-time\">10:10 AM, Today</span>\n                                                            <img src=\"https://bootdey.com/img/Content/avatar/avatar7.png\" alt=\"avatar\" />\n                                                        </div>\n                                                        <div class=\"message other-message float-right\"> Hi Aiden, how are you? How is the project coming along? </div>\n                                                    </li>\n                                                    <li class=\"clearfix\">\n                                                        <div class=\"message-data\">\n                                                            <span class=\"message-data-time\">10:12 AM, Today</span>\n                                                        </div>\n                                                        <div class=\"message my-message\">Are we meeting today?</div>\n                                                    </li>\n                                                    <li class=\"clearfix\">\n                                                        <div class=\"message-data\">\n                                                            <span class=\"message-data-time\">10:15 AM, Today</span>\n                                                        </div>\n                                                        <div class=\"message my-message\">Project has been already finished and I have results to show you.</div>\n                                                    </li>\n                                                </ul>\n                                            </div>\n                                            <div class=\"chat-message clearfix\">\n                                                <div class=\"input-group mb-2\">\n                                                    <input type=\"text\" class=\"form-control\" placeholder=\"Type here\" />\n                                                    <button class=\"btn\" type=\"button\">Send</button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        )\n    }\n}\n\n\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport $ from 'jquery';\nimport queryString from 'query-string'\nimport Header from \"../header/header.jsx\";\nimport PollCard from \"../polls/create.jsx\";\nvar t = dict['farsi'];\n\nexport default class PollIndex extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.submit = this.submit.bind(this);\n        this.setInstance = this.setInstance.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.getList = this.getList.bind(this);\n        this.getInstance = this.getInstance.bind(this);\n        this.clearForm = this.clearForm.bind(this);\n        this.deleteInstance = this.deleteInstance.bind(this);\n\n        \n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            pollable_type: null,\n            pollable_id: null,\n            answer_type: 'star',\n            polls: null,\n            content: null,\n            answer_content: null,\n            title: null,\n            formActivated: false,\n            poll: null,\n            star: null,\n        }\n\n    }\n\n\n\n    componentWillMount() {\n        ModelStore.on(\"got_list\", this.getList);\n        ModelStore.on(\"set_instance\", this.setInstance);\n        ModelStore.on(\"got_instance\", this.getInstance);\n        ModelStore.on(\"deleted_instance\", this.deleteInstance);\n\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"got_list\", this.getList);\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n        ModelStore.removeListener(\"got_instance\", this.getInstance);\n        ModelStore.removeListener(\"deleted_instance\", this.deleteInstance);\n    }\n\n    componentDidMount() {\n        t = dict[this.state.lang]\n        var self = this;\n        const value = queryString.parse(this.props.location.search);\n        var pollable_type = '';\n        var pollable_id = 0;\n        var plural = ''\n        Object.keys(value).map((key) => {\n            var splited = key.split(\"_\")\n            if (splited[0]) {\n                pollable_type = splited[0].charAt(0).toUpperCase() + splited[0].slice(1);\n                pollable_id = value[key]\n                plural = splited[0] + 's'\n            }\n        })\n        this.setState({ pollable_type: pollable_type, pollable_id: pollable_id }, () => {\n            MyActions.getList('polls', this.state.page, { pollable_type: pollable_type, pollable_id: pollable_id }, this.state.token);\n            MyActions.getInstance(plural, pollable_id, this.state.token);\n        })\n\n    }\n\n    deleteInstance() {\n        \n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (klass === 'Poll') {\n            MyActions.getList('polls', this.state.page, { pollable_type: this.state.pollable_type, pollable_id: this.state.pollable_id }, this.state.token);\n        }\n    }\n\n    getList() {\n        var list = ModelStore.getList()\n        var klass = ModelStore.getKlass()\n\n        if (list && klass === 'Poll') {\n            this.setState({\n                polls: list,\n            });\n        }\n        console.log(list)\n    }\n\n    getInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (klass === 'Meeting' || klass === 'Event') {\n            this.setState({\n                title: model.title,\n                is_admin: model.is_admin\n            });\n        }\n        if (klass === 'Poll') {\n            this.setState({\n                poll: model,\n            });\n        }\n        console.log(model)\n    }\n\n    handleChange(obj) {\n        this.setState(obj);\n    }\n\n    setInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (klass === 'Poll') {\n            this.clearForm();\n            MyActions.getList('polls', this.state.page, { pollable_type: this.state.pollable_type, pollable_id: this.state.pollable_id }, this.state.token);\n        }\n    }\n\n    changeType(e) {\n        this.setState({ answer_type: e })\n    }\n\n    selectContent() {\n        console.log(this.state.answer_type)\n        if (this.state.answer_type && (this.state.answer_type === 'single_select' || this.state.answer_type === 'multiple_select')) {\n            return (\n                <div class=\"mb-3\">\n                    <label class=\"form-label\">{t['select_content']}<span class=\"form-label-description\"></span></label>\n                    <textarea onInput={(e) => { this.handleChange({ answer_content: e.target.value }) }} class=\"form-control text-dark\" id='content' name=\"example-textarea-input\" rows=\"6\" placeholder={t['write_something']} value={this.state.answer_content}></textarea>\n                    <div class=\"form-hint\">{t['separate_with_enter']}</div>\n                </div>\n            )\n        }\n    }\n\n    clearForm() {\n        this.setState({\n            answer_type: 'star',\n            content: null,\n            answer_content: null\n        });\n        $('#content').val('');\n    }\n\n    pollItem(item) {\n        return (\n            <div className=\"list-group-item\">\n                <div class=\"row align-items-center\">\n                    <div class=\"col text-truncate\">\n                        <a onClick={() => this.loadPollings(item.id)} class=\"text-body d-block\">{item.content}</a>\n                        <small class=\"d-block text-muted text-truncate mt-n1\"></small>\n                    </div>\n                    <div class=\"col-auto\">\n                        <span class=\"badge bg-cyan-lt\">{t[item.answer_type]}</span>\n                        {this.deleteBtn(item.id)}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    pollsList() {\n        var result = []\n        if (this.state.polls) {\n            this.state.polls.map((item) => {\n                result.push(this.pollItem(item))\n            })\n        }\n        return result\n    }\n\n    submit() {\n        var data = {\n            pollable_type: this.state.pollable_type,\n            pollable_id: this.state.pollable_id,\n            answer_type: this.state.answer_type,\n            content: this.state.content,\n            answer_content: this.state.answer_content\n        }\n        MyActions.setInstance('polls', data, this.state.token);\n    }\n\n    toggleForm() {\n        this.setState({ formActivated: !this.state.formActivated })\n    }\n\n    createBtn() {\n        if (this.state.is_admin) {\n            return (\n                <li class=\"nav-item ms-auto\">\n                    <a class=\"nav-link p-1\" onClick={() => this.toggleForm()}>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n                    </a>\n                </li>\n            )\n        }\n    }\n\n    loadPollings(id) {\n        MyActions.getInstance('polls/overview', id, this.state.token);\n    }\n\n    postPolling(id, value) {\n        var data = { poll_id: id, outcome: value }\n        MyActions.setInstance('pollings', data, this.state.token);\n    }\n\n    deletePoll(id) {\n        var data = { id: id }\n        MyActions.removeInstance('polls', data, this.state.token);\n    }\n\n\n    deleteBtn(id) {\n        if (id) {\n            return (\n                <a onClick={() => { if (window.confirm(t['are_you_sure'])) this.deletePoll(id) }} class=\" ms-auto\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"4\" y1=\"7\" x2=\"20\" y2=\"7\" /><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" /><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" /><path d=\"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12\" /><path d=\"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3\" /></svg>\n                </a>\n            )\n        }\n    }\n\n    render() {\n\n        return (\n            <body className=\"antialiased\">\n                <div className=\"wrapper\">\n                    <Header history={this.props.history} />\n                    <div className=\"page-wrapper\">\n                        <div className=\"container-xl\">\n                            <div className=\"page-header d-print-none\">\n                                <div className=\"row align-items-center\"></div>\n                                <div className=\"col\">\n                                    <div className=\"page-pretitle\">{t['overview']}</div>\n                                    <h2 className=\"page-title\">{t['polls']}</h2>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"page-body\">\n                            <div className=\"container-xl\">\n                                <div className='col-md-12'>\n                                    <div className=\"row row-cards\">\n                                        <div className='col-md-6'>\n                                            <div className='card'>\n                                                <div className=\"card-header bg-dark-lt\" >\n                                                    <h3 class=\"card-title\">{this.state.title}</h3>\n                                                    <ul class=\"nav nav-pills card-header-pills\">\n                                                        {this.createBtn()}\n                                                    </ul>\n                                                </div>\n\n                                                <div className={this.state.formActivated ? 'show-element' : 'hide-element'}>\n                                                    <div className={\"card-body bg-dark text-white\"}>\n                                                        <form >\n                                                            <div class=\"mb-3\">\n                                                                <label class=\"form-label\">{t['poll_content']}</label>\n                                                                <input id='content' type=\"text\" class=\"form-control text-dark\" name=\"text-input\" placeholder={t['write_something']} onInput={(e) => { this.handleChange({ content: e.target.value }) }} value={this.state.content} />\n                                                            </div>\n                                                            <div class=\"mb-3\">\n                                                                <label class=\"form-label\">{t['answer_type']}</label>\n                                                                <div class=\"form-selectgroup\">\n                                                                    <label class=\"form-selectgroup-item\">\n                                                                        <input type=\"checkbox\" name=\"name\" value=\"single_select\" class=\"form-selectgroup-input\" checked={this.state.answer_type === 'single_select' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                                                        <span class=\"form-selectgroup-label\">{t['single_select']}</span>\n                                                                    </label>\n                                                                    <label class=\"form-selectgroup-item\">\n                                                                        <input type=\"checkbox\" name=\"name\" value=\"multiple_select\" class=\"form-selectgroup-input\" checked={this.state.answer_type === 'multiple_select' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                                                        <span class=\"form-selectgroup-label\">{t['multiple_select']}</span>\n                                                                    </label>\n                                                                    <label class=\"form-selectgroup-item\">\n                                                                        <input type=\"checkbox\" name=\"name\" value=\"star\" class=\"form-selectgroup-input\" checked={this.state.answer_type === 'star' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                                                        <span class=\"form-selectgroup-label\">{t['star']}</span>\n                                                                    </label>\n                                                                    <label class=\"form-selectgroup-item\">\n                                                                        <input type=\"checkbox\" name=\"name\" value=\"binary\" class=\"form-selectgroup-input\" checked={this.state.answer_type === 'binary' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                                                        <span class=\"form-selectgroup-label\">{t['binary']}</span>\n                                                                    </label>\n                                                                    <label class=\"form-selectgroup-item\">\n                                                                        <input type=\"checkbox\" name=\"name\" value=\"trinary\" class=\"form-selectgroup-input\" checked={this.state.answer_type === 'trinary' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                                                        <span class=\"form-selectgroup-label\">{t['trinary']}</span>\n                                                                    </label>\n                                                                </div>\n                                                            </div>\n                                                            {this.selectContent()}\n                                                        </form>\n                                                        <div class=\"d-flex\">\n                                                            <a onClick={() => { this.clearForm(); this.toggleForm() }} class=\"btn btn-link\">{t['cancel']}</a>\n                                                            <button id='submit-button' onClick={() => this.submit()} class=\"btn btn-primary ms-auto\">{t['submit']}</button>\n                                                            <div id='submit-spinner' class=\"spinner-border text-red ms-auto\" role=\"status\" style={{ display: 'none' }}></div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div className=\"list-group list-group-flush list-group-hoverable\">\n                                                    {this.pollsList()}\n                                                </div>\n                                            </div>\n\n                                        </div>\n                                        <div className='col-md-6'>\n                                            <div className='card'>\n                                                <div className='card-body' >\n                                                    <PollCard postPolling={this.postPolling} disabled={true} star={this.state.star} handleChange={this.handleChange} poll={this.state.poll} lang={this.state.lang}/>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        )\n    }\n}\n\n\n\n\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport Slider from '@material-ui/core/Slider'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport Cropper from 'react-easy-crop';\nimport queryString from 'query-string';\nimport RangeSlider from 'react-bootstrap-range-slider';\nimport { dict } from '../../Dict';\nvar t = dict['farsi']\n\nexport default class CropperShow extends React.Component {\n    constructor(props) {\n        super(props);\n        this.getInstance = this.getInstance.bind(this);\n        this.setInstance = this.setInstance.bind(this);\n        this.showCropper = this.showCropper.bind(this);\n\n        this.state = {\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            crop: { x: 0, y: 0 },\n            zoom: 1,\n            aspect: 16 / 5,\n            uploadable_type: null,\n            uploadable_id: null,\n            id: null,\n            imageSrc: null,\n            crop_settings: null,\n            uploadable_link: null,\n        }\n\n    }\n\n    componentWillMount() {\n        ModelStore.on(\"got_instance\", this.getInstance);\n        ModelStore.on(\"set_instance\", this.setInstance);\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"got_instance\", this.getInstance);\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n    }\n\n    componentDidMount() {\n        t = dict[this.state.lang]\n        MyActions.getInstance('uploads', this.props.match.params.id, this.state.token);\n        const value = queryString.parse(this.props.location.search);\n        if (value.profile) {\n            this.setState({aspect: 1})\n        }\n    }\n\n    getInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (klass === 'UploadShow') {\n            this.setState({\n                id: model.id,\n                crop_settings: model.crop,\n                uploadable_type: model.uploadable_type,\n                uploadable_id: model.uploadable_id,\n                imageSrc: model.link,\n                uploadable_link: model.uploadable_link\n            }, () => {\n               \n            })\n        }\n        console.log(model.cropped)\n        \n    }\n\n    onCropChange = (crop) => {\n        this.setState({ crop })\n    }\n\n    onCropComplete = (croppedArea, croppedAreaPixels) => {\n        console.log(croppedArea, croppedAreaPixels)\n        this.setState({ crop_settings: croppedAreaPixels })\n        \n    }\n\n    onZoomChange = (zoom) => {\n        this.setState({ zoom })\n    }\n\n    submit() {\n        MyActions.updateInstance('uploads', {id: this.state.id, crop_settings: this.state.crop_settings}, this.state.token);\n    }\n\n    setInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (klass === 'Upload') {\n            this.props.history.push('/'+ this.state.uploadable_link)\n        }\n    }\n\n    showCropper() {\n        if(this.state.imageSrc){\n            console.log(this.state.imageSrc)\n            return(\n                <Cropper\n                image={this.state.imageSrc}\n                crop={this.state.crop}\n                zoom={this.state.zoom}\n                aspect={this.state.aspect}\n                onCropChange={this.onCropChange}\n                onCropComplete={this.onCropComplete}\n                onZoomChange={this.onZoomChange}\n            />\n            )\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"App\">\n                <div className=\"crop-container\">\n                    {this.showCropper()}\n                </div>\n                <div className=\"controls\">\n                    <RangeSlider\n                        value={this.state.zoom}\n                        min={1}\n                        max={3}\n                        step={0.1}\n                        aria-labelledby=\"Zoom\"\n                        onChange={(e, zoom) => this.onZoomChange(zoom)}\n                        classes={{ container: 'slider' }}\n                    />\n\n\n                </div>\n                <div className=\"crop-save\">\n                    <a onClick={() => this.submit()} class=\"btn btn-primary\">\n                        {t['save']}\n                    </a>\n                </div>\n            </div>\n        )\n    }\n}\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport $ from 'jquery';\nimport { dict } from '../../Dict';\nimport Header from \"../header/header.jsx\";\nimport { conf } from '../../conf';\nimport queryString from 'query-string'\nimport axios, { put } from 'axios';\nimport Validation from \"../common/validation.jsx\";\nimport {\n    validateExistence\n} from \"../common/validate.js\";\n\nconst server = conf.server;\nvar t = dict['farsi']\n\nexport default class UploadCreate extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.getInstance = this.getInstance.bind(this);\n        this.setInstance = this.setInstance.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n        this.modal = React.createRef();\n        this.validateExistence = validateExistence.bind(this);\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            title: null,\n            id: null,\n            upload_type: 'file',\n            file: null,\n            progress: 0,\n            validationItems: [],\n        }\n\n    }\n\n\n\n    componentWillMount() {\n        ModelStore.on(\"set_instance\", this.setInstance);\n        ModelStore.on(\"got_instance\", this.getInstance);\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n        ModelStore.removeListener(\"got_instance\", this.getInstance);\n    }\n\n    componentDidMount() {\n        t = dict[this.state.lang]\n        var self = this;\n        const value = queryString.parse(this.props.location.search);\n        var uploadable_type = '';\n        var uploadable_id = 0;\n        Object.keys(value).map((key) => {\n            var splited = key.split(\"_\")\n            if (splited[0]) {\n                uploadable_type = splited[0].charAt(0).toUpperCase() + splited[0].slice(1);\n                uploadable_id = value[key]\n            }\n        })\n        this.setState({ uploadable_type: uploadable_type, uploadable_id: uploadable_id })\n        if (this.props.match.params.id) {\n            MyActions.getInstance('uploads', this.props.match.params.id, this.state.token);\n        }\n    }\n\n\n    handleChange(obj) {\n        this.setState(obj);\n    }\n\n    setInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (klass === 'Upload') {\n            this.props.history.push('/' + model.advertisable_link)\n        }\n    }\n\n    getInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (model && klass === 'Upload') {\n            this.setState({\n                id: model.id,\n                title: model.title,\n                uploadable_type: model.uploadable_type,\n                uploadable_id: model.uploadable_id,\n                editing: true,\n            })\n        }\n\n    }\n\n    changeDefault(e) {\n        if (this.state.is_private) {\n            this.setState({ is_private: false })\n        } else {\n            this.setState({ is_private: true })\n        }\n    }\n\n    changeType(e) {\n        var self = this;\n        self.setState({ upload_type: e })\n    }\n\n    fileAttacher(file) {\n        this.setState({ file: file })\n    }\n\n    submit() {\n        if (this.validateExistence(['title', 'file'])) {\n            var self = this;\n            $('#submit-button').hide();\n            $('#submit-spinner').show();\n            self.setState({ progressShow: true }, () => console.log(this.state.progressShow))\n            const config = {\n                onUploadProgress: function (progressEvent) {\n                    var percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total)\n                    console.log(percentCompleted)\n                    self.setState({ progress: percentCompleted })\n\n                },\n                headers: { 'Content-Type': 'application/json', 'Authorization': \"bearer \" + self.state.token }\n            }\n\n            let data = new FormData()\n            data.append('upload[attached_document]', this.state.file)\n            data.append('upload[title]', this.state.title)\n            data.append('upload[uploadable_type]', this.state.uploadable_type)\n            data.append('upload[uploadable_id]', this.state.uploadable_id)\n            data.append('upload[is_private]', this.state.is_private)\n            data.append('upload[upload_type]', this.state.upload_type)\n\n            axios.post(conf.server + '/uploads', data, config)\n                .then(res => {\n                    self.setState({ progressShow: false, uploadedRecently: true });\n                    var upload = res.data.data\n                    $('#submit-spinner').hide();\n                    if (upload.upload_type === 'cover') {\n                        this.props.history.push(\"/uploads/cropper/\" + upload.uuid)\n                    } else {\n                        this.props.history.push('/' + upload.uploadable_link)\n                    }\n                })\n                .catch(err => self.setState({ progressShow: false }))\n        }\n    }\n\n    render() {\n        const { is_private } = this.state;\n        return (\n            <body className=\"antialiased\">\n                <Validation items={this.state.validationItems} modal={this.modal} lang={this.state.lang}/>\n                <div className=\"wrapper\">\n                    <Header history={this.props.history} />\n                    <div className=\"page-wrapper\">\n                        <div className=\"container-xl\">\n                            <div className=\"page-header d-print-none\">\n                                <div className=\"row align-items-center\"></div>\n                                <div className=\"col\">\n                                    <div className=\"page-pretitle\">{t['create_upload']}</div>\n                                    <h2 className=\"page-title\">{t['provide_following_info']}</h2>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"page-body\">\n                            <div className=\"container-xl\">\n                                <div className=\"row row-deck row-cards\">\n                                    <div class=\"col-md-8\">\n                                        <div class=\"card\">\n                                            <div class=\"card-header\">\n                                                <h3 class=\"card-title\">{t['create_upload']}</h3>\n                                            </div>\n                                            <div class=\"card-body\">\n                                                <form>\n                                                    <div class=\"mb-3\">\n                                                        <label class=\"form-label\">{t['upload_title']}</label>\n                                                        <input type=\"text\" class=\"form-control\" name=\"text-input\" placeholder={t['write_something']} onInput={(e) => { this.handleChange({ title: e.target.value }) }} value={this.state.title} />\n                                                    </div>\n\n                                                    <div class=\"mb-3\">\n                                                        <label class=\"form-label\">{t['resource_type']}</label>\n                                                        <div class=\"form-selectgroup\">\n                                                            <label class=\"form-selectgroup-item\">\n                                                                <input type=\"checkbox\" name=\"name\" value=\"cover\" class=\"form-selectgroup-input\" checked={this.state.upload_type === 'cover' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                                                <span class=\"form-selectgroup-label\">{t['cover']}</span>\n                                                            </label>\n                                                            <label class=\"form-selectgroup-item\">\n                                                                <input type=\"checkbox\" name=\"name\" value=\"file\" class=\"form-selectgroup-input\" checked={this.state.upload_type === 'file' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                                                <span class=\"form-selectgroup-label\">{t['file']}</span>\n                                                            </label>\n                                                            <label class=\"form-selectgroup-item\">\n                                                                <input type=\"checkbox\" name=\"name\" value=\"video\" class=\"form-selectgroup-input\" checked={this.state.upload_type === 'video' ? true : false} onClick={(e) => this.changeType(e.target.value)} />\n                                                                <span class=\"form-selectgroup-label\">{t['video']}</span>\n                                                            </label>\n                                                        </div>\n                                                    </div>\n\n                                                    <div class=\"mb-3\">\n                                                        <div class=\"form-label\">{t['choose_file']}</div>\n                                                        <input type=\"file\" class=\"form-control\" onInput={(e) => { this.fileAttacher(e.target.files[0]); }} />\n                                                    </div>\n\n\n                                                    <div class=\"mb-3\">\n                                                        <div class=\"form-label\">{t['is_private']}</div>\n                                                        <label class=\"form-check form-switch\">\n                                                            <input class=\"form-check-input\" type=\"checkbox\" onClick={(e) => this.changeDefault(e.target.value)} checked={is_private ? true : false} />\n                                                            <span class=\"form-check-label\">{t['default_is_private_upload']}</span>\n                                                        </label>\n                                                    </div>\n\n\n\n\n\n                                                </form>\n                                            </div>\n                                            <div class=\"card-footer\">\n                                                <div class=\"d-flex\">\n                                                    <a href=\"/#/meetings\" class=\"btn btn-link\">{t['cancel']}</a>\n                                                    <button id='submit-button' onClick={() => this.submit()} class=\"btn btn-primary ms-auto\">\n                                                        {t['submit']}\n                                                    </button>\n                                                    <div id='submit-spinner' class=\"spinner-border text-red ms-auto\" role=\"status\" style={{ display: 'none' }}></div>\n                                                </div>\n                                            </div>\n                                            <div class=\"progress progress-sm card-progress\">\n                                                <div class=\"progress-bar\" style={{ width: this.state.progress + \"%\" }} role=\"progressbar\" aria-valuenow=\"38\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n                                                    <span class=\"visually-hidden\">38% Complete</span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div class=\"col-md-4\">\n                                        <div class=\"card\">\n                                            <div class=\"card-status-top bg-lime\"></div>\n                                            <div class=\"card-body\">\n                                                <h3 class=\"card-title\"></h3>\n                                                <p></p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        )\n    }\n}\n\n\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport $ from 'jquery';\nimport { dict } from '../../Dict';\nimport Header from \"../header/header.jsx\";\nimport Validation from \"../common/validation.jsx\";\nimport { conf } from '../../conf';\nimport queryString from 'query-string'\nimport Quill from 'quill';\nimport ImageUploader from \"quill-image-uploader\";\nimport axios, { put } from 'axios';\nimport {\n    validateExistence\n} from \"../common/validate.js\";\n\nconst server = conf.server;\nvar t = dict['farsi']\n\nexport default class FlyerCreate extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.getInstance = this.getInstance.bind(this);\n        this.setInstance = this.setInstance.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n        this.modal = React.createRef();\n        this.validateExistence = validateExistence.bind(this);\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            title: null,\n            id: null,\n            content: null,\n            advertisable_type: null,\n            advertisable_id: null,\n            quill: null,\n            quill_content: {},\n            editing: false,\n            is_default: false,\n            validationItems: [],\n        }\n\n    }\n\n\n\n    componentWillMount() {\n        ModelStore.on(\"set_instance\", this.setInstance);\n        ModelStore.on(\"got_instance\", this.getInstance);\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n        ModelStore.removeListener(\"got_instance\", this.getInstance);\n    }\n\n    componentDidMount() {\n        t = dict[this.state.lang]\n        var self = this;\n        const value = queryString.parse(this.props.location.search);\n        var advertisable_type = '';\n        var advertisable_id = 0;\n        Object.keys(value).map((key) => {\n            var splited = key.split(\"_\")\n            if (splited[0]) {\n                advertisable_type = splited[0].charAt(0).toUpperCase() + splited[0].slice(1);\n                advertisable_id = value[key]\n            }\n        })\n        this.setState({ advertisable_type: advertisable_type, advertisable_id: advertisable_id })\n        if (this.props.match.params.id) {\n            MyActions.getInstance('flyers', this.props.match.params.id, this.state.token);\n        }\n        var toolbarOptions = [\n            ['bold', 'italic', 'underline', 'strike'],        // toggled buttons\n            [{ 'list': 'ordered' }, { 'list': 'bullet' }],      // superscript/subscript\n            [{ 'indent': '-1' }, { 'indent': '+1' }],          // outdent/indent\n            [{ 'direction': 'ltr' }, { 'direction': 'rtl' }],                         // text direction\n            ['image'],\n            ['video'],\n            [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n            [{ 'color': [] }, { 'background': [] }],          // dropdown with defaults from theme\n            [{ 'align': [] }],\n        ];\n        Quill.register(\"modules/imageUploader\", ImageUploader);\n        var quillOne = new Quill('#editor-one', {\n            theme: 'snow',\n            modules: {\n                toolbar: toolbarOptions,\n                imageUploader: {\n                    upload: (file) => {\n                        return new Promise((resolve, reject) => {\n                            const url = server + '/uploads';\n                            const formData = new FormData();\n                            formData.append('upload[attached_document]', file)\n                            //formData.append('profile[id]',id)\n                            const config = {\n                                headers: {\n                                    'content-type': 'multipart/form-data',\n                                    'Authorization': \"bearer \" + this.state.token\n                                }\n                            }\n                            axios.post(url, formData, config).then(function (response) {\n                                resolve(response.data.data.link)\n                            })\n                                .catch(function (error) {\n                                    console.log(error);\n                                });\n                        });\n                    },\n                },\n            },\n        });\n\n        quillOne.on('text-change', function (delta, oldDelta, source) {\n            if (source == 'api') {\n                // console.log(\"An API call triggered this change.\");\n            } else if (source == 'user') {\n                self.setState({ quill_content: quillOne.getContents(), content: quillOne.getText() })\n                // console.log(\"A user action triggered this change.\");\n            }\n        });\n\n\n\n        this.setState({ quill: quillOne })\n    }\n\n\n    handleChange(obj) {\n        this.setState(obj);\n    }\n\n    setInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (klass === 'Flyer') {\n            this.props.history.push('/' + model.advertisable_link)\n        }\n    }\n\n    getInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (model && klass === 'Flyer') {\n            this.setState({\n                id: model.id,\n                title: model.title,\n                content: model.content,\n                advertisable_type: model.advertisable_type,\n                advertisable_id: model.advertisable_id,\n                quill_content: model.quill_content,\n                is_default: model.is_default,\n                editing: true,\n            }, () => {\n                console.log(this.state)\n                this.state.quill.setContents(this.state.quill_content)\n            })\n        }\n\n    }\n\n    submit() {\n        var data = {\n            id: this.state.id,\n            title: this.state.title,\n            content: this.state.content,\n            advertisable_type: this.state.advertisable_type,\n            advertisable_id: this.state.advertisable_id,\n            quill_content: this.state.quill_content,\n            is_default: this.state.is_default,\n        }\n        if (this.validateExistence(['title'])) {\n            $('#submit-button').hide();\n            $('#submit-spinner').show();\n            if (!this.state.editing) {\n                MyActions.setInstance('flyers', data, this.state.token);\n            } else {\n                MyActions.updateInstance('flyers', data, this.state.token);\n            }\n        }\n\n    }\n\n    changeDefault(e) {\n        console.log(e)\n        var self = this;\n        if (this.state.is_default) {\n            this.setState({ is_default: false })\n        } else {\n            this.setState({ is_default: true })\n        }\n    }\n\n\n    render() {\n        const { is_default } = this.state;\n        return (\n            <body className=\"antialiased\">\n                <Validation items={this.state.validationItems} modal={this.modal} lang={this.state.lang}/>\n                <div className=\"wrapper\">\n                    <Header history={this.props.history} />\n                    <div className=\"page-wrapper\">\n                        <div className=\"container-xl\">\n                            <div className=\"page-header d-print-none\">\n                                <div className=\"row align-items-center\"></div>\n                                <div className=\"col\">\n                                    <div className=\"page-pretitle\">{t['create_page']}</div>\n                                    <h2 className=\"page-title\">{t['provide_following_info']}</h2>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"page-body\">\n                            <div className=\"container-xl\">\n                                <div className=\"row row-deck row-cards\">\n                                    <div class=\"col-md-8\">\n                                        <div class=\"card\">\n                                            <div class=\"card-header\">\n                                                <h3 class=\"card-title\">{t['create_page']}</h3>\n                                            </div>\n                                            <div class=\"card-body\">\n                                                <form>\n                                                    <div class=\"mb-3\">\n                                                        <label class=\"form-label\">{t['page_title']}</label>\n                                                        <input type=\"text\" class=\"form-control\" name=\"text-input\" placeholder={t['write_something']} onInput={(e) => { this.handleChange({ title: e.target.value }) }} value={this.state.title} />\n                                                    </div>\n                                                    <div class=\"mb-3\">\n                                                        <label class=\"form-label\">{t['page_content']}<span class=\"form-label-description\"></span></label>\n                                                        <div id=\"editor-one\"></div>\n                                                    </div>\n                                                    <div class=\"mb-3\">\n                                                        <div class=\"form-label\">{t['default_page']}</div>\n                                                        <label class=\"form-check form-switch\">\n                                                            <input class=\"form-check-input\" type=\"checkbox\" onClick={(e) => this.changeDefault(e.target.value)} checked={is_default ? true : false} />\n                                                            <span class=\"form-check-label\">{t['default_page_info']}</span>\n                                                        </label>\n                                                    </div>\n\n\n\n\n                                                </form>\n                                            </div>\n                                            <div class=\"card-footer\">\n                                                <div class=\"d-flex\">\n                                                    <a href=\"/#/meetings\" class=\"btn btn-link\">{t['cancel']}</a>\n                                                    <button id='submit-button' onClick={() => this.submit()} class=\"btn btn-primary ms-auto\">{t['submit']}</button>\n                                                    <div id='submit-spinner' class=\"spinner-border text-red ms-auto\" role=\"status\" style={{ display: 'none' }}></div>\n                                                </div>\n                                            </div>\n                                            <div class=\"progress progress-sm card-progress\">\n                                                <div class=\"progress-bar\" style={{ width: \"100%\" }} role=\"progressbar\" aria-valuenow=\"38\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n                                                    <span class=\"visually-hidden\">38% Complete</span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div class=\"col-md-4\">\n                                        <div class=\"card\">\n                                            <div class=\"card-status-top bg-lime\"></div>\n                                            <div class=\"card-body\">\n                                                <h3 class=\"card-title\"></h3>\n                                                <p></p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        )\n    }\n}\n\n\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport { conf } from '../../conf';\nimport queryString from 'query-string'\n\nconst t = dict['fa']\n\nexport default class LoginJwt extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.setInstance = this.setInstance.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n        this.state = {\n            token: null,\n        }\n\n    }\n\n\n\n    componentWillMount() {\n        ModelStore.on(\"set_instance\", this.setInstance);\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n    }\n\n    componentDidMount() {\n        MyActions.setInstance('users/validate_token', {}, this.props.match.params.id);\n    }\n\n\n\n    handleChange(obj) {\n        this.setState(obj);\n    }\n\n    setInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (klass === 'Validate') {\n            window.localStorage.setItem('token', model.token);\n            this.props.history.push(\"/#/events\")\n        }\n    }\n\n    render() {\n        return (null)\n    }\n}\n\n\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport $ from 'jquery';\nimport { dict } from '../../Dict';\nimport { conf } from '../../conf';\nimport Header from \"../header/header.jsx\";\nimport DatePicker from \"react-datepicker\";\nimport queryString from 'query-string'\nimport RangeSlider from 'react-bootstrap-range-slider';\nimport moment from 'moment-jalaali'\nimport DatePicker2 from 'react-datepicker2';\nimport { Typeahead, withAsync } from 'react-bootstrap-typeahead';\nconst AsyncTypeahead = withAsync(Typeahead);\nconst server = conf.server;\nvar t = dict['farsi']\n\nexport default class QuestionCreate extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.setInstance = this.setInstance.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      lang: window.localStorage.getItem('lang'),\n      dir: window.localStorage.getItem('dir'),\n      content: null,\n      tags: [],\n      is_private: false,\n      questionable_type: null,\n      questionable_id: null,\n    }\n\n  }\n\n\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n  }\n\n  componentDidMount() {\n    t = dict[this.state.lang]\n    var self = this;\n    const value = queryString.parse(this.props.location.search);\n    var questionable_type = '';\n    var questionable_id = 0;\n    Object.keys(value).map((key) => {\n        var splited = key.split(\"_\")\n        if (splited[0]) {\n            questionable_type = splited[0].charAt(0).toUpperCase() + splited[0].slice(1);\n            questionable_id = value[key]\n        }\n    })\n    this.setState({ questionable_type: questionable_type, questionable_id: questionable_id })\n  }\n\n\n  handleChange(obj) {\n    this.setState(obj);\n  }\n\n  setInstance() {\n    var klass = ModelStore.getKlass()\n    var model = ModelStore.getIntance()\n    if (klass === 'Question') {\n        this.props.history.push('/'+model.questionable_link)\n    }\n  }\n\n\n  submit() {\n    var data = this.state\n    if (!this.state.editing) {\n      MyActions.setInstance('questions', data, this.state.token);\n    } \n  }\n\n\n  tagSelected(tags) {\n    var result = []\n    tags.map((tag) => {\n      if (tag['title']) {\n        result.push(tag['title'])\n      } else {\n        result.push(tag)\n      }\n    })\n    this.setState({ tags: result }, () => console.log(this.state.tags))\n  }\n\n  tagShow() {\n    if (this.props.match.params.id && this.state.id) {\n      return (this.tagInput())\n    }\n\n    if (!this.props.match.params.id) {\n      return (this.tagInput())\n    }\n  }\n\n  tagInput() {\n    return (\n      <div style={{ direction: 'ltr', marginBottom: '70px' }}>\n        <AsyncTypeahead\n          id='event-tag'\n          allowNew\n          multiple\n          defaultSelected={this.state.tags}\n          isLoading={this.state.isLoading}\n          labelKey='title'\n          onSearch={(query) => {\n            this.setState({ isLoading: true });\n            fetch(server + \"/tags/search?q=\" + query)\n              .then((resp) => resp.json())\n              .then(({ items }) => {\n                this.setState({ options: items, isLoading: false }, () => console.log(this.state.options))\n              });\n          }}\n          onChange={(t) => this.tagSelected(t)}\n          options={this.state.options}\n          renderMenuItemChildren={(option, props) => (\n            <React.Fragment>\n              <span>{option.title}</span>\n            </React.Fragment>\n          )}\n        />\n      </div>\n    )\n  }\n\n  changeDefault(e) {\n    if(this.state.is_private){\n        this.setState({is_private: false})\n    } else {\n        this.setState({is_private: true})\n    }\n  }\n\n  isPrivateBadge(){\n    if(this.state.is_private){\n      return(\n        <span class=\"badge bg-red-lt\">{t['private']}</span>\n      )\n    }\n  }\n\n\n  render() {\n    const { is_private} = this.state; \n    return (\n      <body className=\"antialiased\">\n        <div className=\"wrapper\">\n          <Header history={this.props.history}/>\n          <div className=\"page-wrapper\">\n            <div className=\"container-xl\">\n              <div className=\"page-header d-print-none\">\n                <div className=\"row align-items-center\"></div>\n                <div className=\"col\">\n                  <div className=\"page-pretitle\">{t['create_question_page']}</div>\n                  <h2 className=\"page-title\">{t['provide_following_info']}</h2>\n                </div>\n              </div>\n            </div>\n            <div className=\"page-body\">\n              <div className=\"container-xl\">\n                <div className=\"row row-deck row-cards\">\n                  <div class=\"col-md-8\">\n                    <div class=\"card\">\n                      <div class=\"card-header\">\n                        <h3 class=\"card-title\">{t['create_question']}</h3>\n                      </div>\n                      <div class=\"card-body\">\n                        <form>\n                          <div class=\"mb-3\">\n                            <label class=\"form-label\">{t['question_content']}<span class=\"form-label-description\"></span></label>\n                            <textarea class=\"form-control\" name=\"example-textarea-input\" rows=\"6\" placeholder={t['write_something']} onInput={(e) => { this.handleChange({ content: e.target.value }) }} value={this.state.info}></textarea>\n                          </div>\n\n\n                          <div class=\"mb-3 \" id='tags' >\n                            <label class=\"form-label\" >{t['tags']}</label>\n                            {this.tagShow()}\n                          </div>\n\n\n\n                          <div class=\"mb-3\">\n                            <div class=\"form-label\">{t['is_private']}</div>\n                            <label class=\"form-check form-switch\">\n                              <input class=\"form-check-input\" type=\"checkbox\" onClick={(e) => this.changeDefault(e.target.value)} checked={is_private ? true : false} />\n                              <span class=\"form-check-label\">{t['default_is_private_question']}</span>\n                            </label>\n                          </div>\n\n\n\n\n                        </form>\n                      </div>\n                      <div class=\"card-footer\">\n                        <div class=\"d-flex\">\n                          <a href=\"/#/questions\" class=\"btn btn-link\">{t['cancel']}</a>\n                          <button onClick={() => this.submit()} class=\"btn btn-primary ms-auto\">{t['submit']}</button>\n                        </div>\n                      </div>\n                      <div class=\"progress progress-sm card-progress\">\n                        <div class=\"progress-bar\" style={{ width: \"100%\" }} role=\"progressbar\" aria-valuenow=\"38\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n                          <span class=\"visually-hidden\">38% Complete</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"col-4\">\n                    <div class=\"card\">\n                      <div class=\"card-status-top bg-lime\"></div>\n                      <div class=\"card-body\">\n                        <h3 class=\"card-title\">Help</h3>\n                        <p></p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </body>\n    )\n  }\n}\n\n\n\n\n","/*\n\tThe MIT License (MIT)\n\n\tCopyright (c) 2016 Meetecho\n\n\tPermission is hereby granted, free of charge, to any person obtaining\n\ta copy of this software and associated documentation files (the \"Software\"),\n\tto deal in the Software without restriction, including without limitation\n\tthe rights to use, copy, modify, merge, publish, distribute, sublicense,\n\tand/or sell copies of the Software, and to permit persons to whom the\n\tSoftware is furnished to do so, subject to the following conditions:\n\n\tThe above copyright notice and this permission notice shall be included\n\tin all copies or substantial portions of the Software.\n\n\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\tOR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n\tTHE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR\n\tOTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\n\tARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n\tOTHER DEALINGS IN THE SOFTWARE.\n */\n\n// List of sessions\nimport jQuery from 'jquery';\nimport adapter from 'webrtc-adapter';\n\nconst RTCRtpTransceiver = window.RTCRtpTransceiver;\nJanus.sessions = {};\n\nJanus.isExtensionEnabled = function() {\n\tif(navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {\n\t\t// No need for the extension, getDisplayMedia is supported\n\t\treturn true;\n\t}\n\tif(window.navigator.userAgent.match('Chrome')) {\n\t\tvar chromever = parseInt(window.navigator.userAgent.match(/Chrome\\/(.*) /)[1], 10);\n\t\tvar maxver = 33;\n\t\tif(window.navigator.userAgent.match('Linux'))\n\t\t\tmaxver = 35;\t// \"known\" crash in chrome 34 and 35 on linux\n\t\tif(chromever >= 26 && chromever <= maxver) {\n\t\t\t// Older versions of Chrome don't support this extension-based approach, so lie\n\t\t\treturn true;\n\t\t}\n\t\treturn Janus.extension.isInstalled();\n\t} else {\n\t\t// Firefox and others, no need for the extension (but this doesn't mean it will work)\n\t\treturn true;\n\t}\n};\n\nvar defaultExtension = {\n\t// Screensharing Chrome Extension ID\n\textensionId: 'hapfgfdkleiggjjpfpenajgdnfckjpaj',\n\tisInstalled: function() { return document.querySelector('#janus-extension-installed') !== null; },\n\tgetScreen: function (callback) {\n\t\tvar pending = window.setTimeout(function () {\n\t\t\tvar error = new Error('NavigatorUserMediaError');\n\t\t\terror.name = 'The required Chrome extension is not installed: click <a href=\"#\">here</a> to install it. (NOTE: this will need you to refresh the page)';\n\t\t\treturn callback(error);\n\t\t}, 1000);\n\t\tthis.cache[pending] = callback;\n\t\twindow.postMessage({ type: 'janusGetScreen', id: pending }, '*');\n\t},\n\tinit: function () {\n\t\tvar cache = {};\n\t\tthis.cache = cache;\n\t\t// Wait for events from the Chrome Extension\n\t\twindow.addEventListener('message', function (event) {\n\t\t\tif(event.origin != window.location.origin)\n\t\t\t\treturn;\n\t\t\tif(event.data.type == 'janusGotScreen' && cache[event.data.id]) {\n\t\t\t\tvar callback = cache[event.data.id];\n\t\t\t\tdelete cache[event.data.id];\n\n\t\t\t\tif (event.data.sourceId === '') {\n\t\t\t\t\t// user canceled\n\t\t\t\t\tvar error = new Error('NavigatorUserMediaError');\n\t\t\t\t\terror.name = 'You cancelled the request for permission, giving up...';\n\t\t\t\t\tcallback(error);\n\t\t\t\t} else {\n\t\t\t\t\tcallback(null, event.data.sourceId);\n\t\t\t\t}\n\t\t\t} else if (event.data.type == 'janusGetScreenPending') {\n\t\t\t\tconsole.log('clearing ', event.data.id);\n\t\t\t\twindow.clearTimeout(event.data.id);\n\t\t\t}\n\t\t});\n\t}\n};\n\nJanus.UseDefaultDependencies = function (deps) {\n\tvar f = (deps && deps.fetch) || fetch;\n\tvar p = (deps && deps.Promise) || Promise;\n\tvar socketCls = (deps && deps.WebSocket) || WebSocket;\n\n\treturn {\n\t\tnewWebSocket: function(server, proto) { return new socketCls(server, proto); },\n\t\textension: (deps && deps.extension) || defaultExtension,\n\t\tisArray: function(arr) { return Array.isArray(arr); },\n\t\twebRTCAdapter: (deps && deps.adapter) || adapter,\n\t\thttpAPICall: function(url, options) {\n\t\t\tvar fetchOptions = {\n\t\t\t\tmethod: options.verb,\n\t\t\t\theaders: {\n\t\t\t\t\t'Accept': 'application/json, text/plain, */*'\n\t\t\t\t},\n\t\t\t\tcache: 'no-cache'\n\t\t\t};\n\t\t\tif(options.verb === \"POST\") {\n\t\t\t\tfetchOptions.headers['Content-Type'] = 'application/json';\n\t\t\t}\n\t\t\tif(options.withCredentials !== undefined) {\n\t\t\t\tfetchOptions.credentials = options.withCredentials === true ? 'include' : (options.withCredentials ? options.withCredentials : 'omit');\n\t\t\t}\n\t\t\tif(options.body) {\n\t\t\t\tfetchOptions.body = JSON.stringify(options.body);\n\t\t\t}\n\n\t\t\tvar fetching = f(url, fetchOptions).catch(function(error) {\n\t\t\t\treturn p.reject({message: 'Probably a network error, is the server down?', error: error});\n\t\t\t});\n\n\t\t\t/*\n\t\t\t * fetch() does not natively support timeouts.\n\t\t\t * Work around this by starting a timeout manually, and racing it agains the fetch() to see which thing resolves first.\n\t\t\t */\n\n\t\t\tif(options.timeout) {\n\t\t\t\tvar timeout = new p(function(resolve, reject) {\n\t\t\t\t\tvar timerId = setTimeout(function() {\n\t\t\t\t\t\tclearTimeout(timerId);\n\t\t\t\t\t\treturn reject({message: 'Request timed out', timeout: options.timeout});\n\t\t\t\t\t}, options.timeout);\n\t\t\t\t});\n\t\t\t\tfetching = p.race([fetching, timeout]);\n\t\t\t}\n\n\t\t\tfetching.then(function(response) {\n\t\t\t\tif(response.ok) {\n\t\t\t\t\tif(typeof(options.success) === typeof(Janus.noop)) {\n\t\t\t\t\t\treturn response.json().then(function(parsed) {\n\t\t\t\t\t\t\toptions.success(parsed);\n\t\t\t\t\t\t}).catch(function(error) {\n\t\t\t\t\t\t\treturn p.reject({message: 'Failed to parse response body', error: error, response: response});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn p.reject({message: 'API call failed', response: response});\n\t\t\t\t}\n\t\t\t}).catch(function(error) {\n\t\t\t\tif(typeof(options.error) === typeof(Janus.noop)) {\n\t\t\t\t\toptions.error(error.message || '<< internal error >>', error);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn fetching;\n\t\t}\n\t}\n};\n\nJanus.useOldDependencies = function (deps) {\n\tvar jq = (deps && deps.jQuery) || jQuery;\n\tvar socketCls = (deps && deps.WebSocket) || WebSocket;\n\treturn {\n\t\tnewWebSocket: function(server, proto) { return new socketCls(server, proto); },\n\t\tisArray: function(arr) { return jq.isArray(arr); },\n\t\textension: (deps && deps.extension) || defaultExtension,\n\t\twebRTCAdapter: (deps && deps.adapter) || adapter,\n\t\thttpAPICall: function(url, options) {\n\t\t\tvar payload = options.body !== undefined ? {\n\t\t\t\tcontentType: 'application/json',\n\t\t\t\tdata: JSON.stringify(options.body)\n\t\t\t} : {};\n\t\t\tvar credentials = options.withCredentials !== undefined ? {xhrFields: {withCredentials: options.withCredentials}} : {};\n\n\t\t\treturn jq.ajax(jq.extend(payload, credentials, {\n\t\t\t\turl: url,\n\t\t\t\ttype: options.verb,\n\t\t\t\tcache: false,\n\t\t\t\tdataType: 'json',\n\t\t\t\tasync: options.async,\n\t\t\t\ttimeout: options.timeout,\n\t\t\t\tsuccess: function(result) {\n\t\t\t\t\tif(typeof(options.success) === typeof(Janus.noop)) {\n\t\t\t\t\t\toptions.success(result);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function(xhr, status, err) {\n\t\t\t\t\tif(typeof(options.error) === typeof(Janus.noop)) {\n\t\t\t\t\t\toptions.error(status, err);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t};\n};\n\nJanus.noop = function() {};\n\nJanus.dataChanDefaultLabel = \"JanusDataChannel\";\n\n// Note: in the future we may want to change this, e.g., as was\n// attempted in https://github.com/meetecho/janus-gateway/issues/1670\nJanus.endOfCandidates = null;\n\n// Stop all tracks from a given stream\nJanus.stopAllTracks = function(stream) {\n\ttry {\n\t\t// Try a MediaStreamTrack.stop() for each track\n\t\tvar tracks = stream.getTracks();\n\t\tfor(var mst of tracks) {\n\t\t\tJanus.log(mst);\n\t\t\tif(mst) {\n\t\t\t\tmst.stop();\n\t\t\t}\n\t\t}\n\t} catch(e) {\n\t\t// Do nothing if this fails\n\t}\n}\n\n// Initialization\nJanus.init = function(options) {\n\toptions = options || {};\n\toptions.callback = (typeof options.callback == \"function\") ? options.callback : Janus.noop;\n\tif(Janus.initDone) {\n\t\t// Already initialized\n\t\toptions.callback();\n\t} else {\n\t\tif(typeof console == \"undefined\" || typeof console.log == \"undefined\") {\n\t\t\tconsole = { log: function() {} };\n\t\t}\n\t\t// Console logging (all debugging disabled by default)\n\t\tJanus.trace = Janus.noop;\n\t\tJanus.debug = Janus.noop;\n\t\tJanus.vdebug = Janus.noop;\n\t\tJanus.log = Janus.noop;\n\t\tJanus.warn = Janus.noop;\n\t\tJanus.error = Janus.noop;\n\t\tif(options.debug === true || options.debug === \"all\") {\n\t\t\t// Enable all debugging levels\n\t\t\tJanus.trace = console.trace.bind(console);\n\t\t\tJanus.debug = console.debug.bind(console);\n\t\t\tJanus.vdebug = console.debug.bind(console);\n\t\t\tJanus.log = console.log.bind(console);\n\t\t\tJanus.warn = console.warn.bind(console);\n\t\t\tJanus.error = console.error.bind(console);\n\t\t} else if(Array.isArray(options.debug)) {\n\t\t\tfor(var d of options.debug) {\n\t\t\t\tswitch(d) {\n\t\t\t\t\tcase \"trace\":\n\t\t\t\t\t\tJanus.trace = console.trace.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"debug\":\n\t\t\t\t\t\tJanus.debug = console.debug.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"vdebug\":\n\t\t\t\t\t\tJanus.vdebug = console.debug.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"log\":\n\t\t\t\t\t\tJanus.log = console.log.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"warn\":\n\t\t\t\t\t\tJanus.warn = console.warn.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"error\":\n\t\t\t\t\t\tJanus.error = console.error.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.error(\"Unknown debugging option '\" + d + \"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tJanus.log(\"Initializing library\");\n\n\t\tvar usedDependencies = options.dependencies || Janus.UseDefaultDependencies();\n\t\tJanus.isArray = usedDependencies.isArray;\n\t\tJanus.webRTCAdapter = usedDependencies.webRTCAdapter;\n\t\tJanus.httpAPICall = usedDependencies.httpAPICall;\n\t\tJanus.newWebSocket = usedDependencies.newWebSocket;\n\t\tJanus.extension = usedDependencies.extension;\n\t\tJanus.extension.init();\n\n\t\t// Helper method to enumerate devices\n\t\tJanus.listDevices = function(callback, config) {\n\t\t\tcallback = (typeof callback == \"function\") ? callback : Janus.noop;\n\t\t\tif (config == null) config = { audio: true, video: true };\n\t\t\tif(Janus.isGetUserMediaAvailable()) {\n\t\t\t\tnavigator.mediaDevices.getUserMedia(config)\n\t\t\t\t.then(function(stream) {\n\t\t\t\t\tnavigator.mediaDevices.enumerateDevices().then(function(devices) {\n\t\t\t\t\t\tJanus.debug(devices);\n\t\t\t\t\t\tcallback(devices);\n\t\t\t\t\t\t// Get rid of the now useless stream\n\t\t\t\t\t\tJanus.stopAllTracks(stream)\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(function(err) {\n\t\t\t\t\tJanus.error(err);\n\t\t\t\t\tcallback([]);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tJanus.warn(\"navigator.mediaDevices unavailable\");\n\t\t\t\tcallback([]);\n\t\t\t}\n\t\t};\n\t\t// Helper methods to attach/reattach a stream to a video element (previously part of adapter.js)\n\t\tJanus.attachMediaStream = function(element, stream) {\n\t\t\ttry {\n\t\t\t\telement.srcObject = stream;\n\t\t\t} catch (e) {\n\t\t\t\ttry {\n\t\t\t\t\telement.src = URL.createObjectURL(stream);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tJanus.error(\"Error attaching stream to element\");\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tJanus.reattachMediaStream = function(to, from) {\n\t\t\ttry {\n\t\t\t\tto.srcObject = from.srcObject;\n\t\t\t} catch (e) {\n\t\t\t\ttry {\n\t\t\t\t\tto.src = from.src;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tJanus.error(\"Error reattaching stream to element\");\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t// Detect tab close: make sure we don't loose existing onbeforeunload handlers\n\t\t// (note: for iOS we need to subscribe to a different event, 'pagehide', see\n\t\t// https://gist.github.com/thehunmonkgroup/6bee8941a49b86be31a787fe8f4b8cfe)\n\t\tvar iOS = ['iPad', 'iPhone', 'iPod'].indexOf(navigator.platform) >= 0;\n\t\tvar eventName = iOS ? 'pagehide' : 'beforeunload';\n\t\tvar oldOBF = window[\"on\" + eventName];\n\t\twindow.addEventListener(eventName, function(event) {\n\t\t\tJanus.log(\"Closing window\");\n\t\t\tfor(var s in Janus.sessions) {\n\t\t\t\tif(Janus.sessions[s] && Janus.sessions[s].destroyOnUnload) {\n\t\t\t\t\tJanus.log(\"Destroying session \" + s);\n\t\t\t\t\tJanus.sessions[s].destroy({unload: true, notifyDestroyed: false});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(oldOBF && typeof oldOBF == \"function\") {\n\t\t\t\toldOBF();\n\t\t\t}\n\t\t});\n\t\t// If this is a Safari Technology Preview, check if VP8 is supported\n\t\tJanus.safariVp8 = false;\n\t\tif(Janus.webRTCAdapter.browserDetails.browser === 'safari' &&\n\t\t\t\tJanus.webRTCAdapter.browserDetails.version >= 605) {\n\t\t\t// Let's see if RTCRtpSender.getCapabilities() is there\n\t\t\tif(RTCRtpSender && RTCRtpSender.getCapabilities && RTCRtpSender.getCapabilities(\"video\") &&\n\t\t\t\t\tRTCRtpSender.getCapabilities(\"video\").codecs && RTCRtpSender.getCapabilities(\"video\").codecs.length) {\n\t\t\t\tfor(var codec of RTCRtpSender.getCapabilities(\"video\").codecs) {\n\t\t\t\t\tif(codec && codec.mimeType && codec.mimeType.toLowerCase() === \"video/vp8\") {\n\t\t\t\t\t\tJanus.safariVp8 = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(Janus.safariVp8) {\n\t\t\t\t\tJanus.log(\"This version of Safari supports VP8\");\n\t\t\t\t} else {\n\t\t\t\t\tJanus.warn(\"This version of Safari does NOT support VP8: if you're using a Technology Preview, \" +\n\t\t\t\t\t\t\"try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// We do it in a very ugly way, as there's no alternative...\n\t\t\t\t// We create a PeerConnection to see if VP8 is in an offer\n\t\t\t\tvar testpc = new RTCPeerConnection({});\n\t\t\t\ttestpc.createOffer({offerToReceiveVideo: true}).then(function(offer) {\n\t\t\t\t\tJanus.safariVp8 = offer.sdp.indexOf(\"VP8\") !== -1;\n\t\t\t\t\tif(Janus.safariVp8) {\n\t\t\t\t\t\tJanus.log(\"This version of Safari supports VP8\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tJanus.warn(\"This version of Safari does NOT support VP8: if you're using a Technology Preview, \" +\n\t\t\t\t\t\t\t\"try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu\");\n\t\t\t\t\t}\n\t\t\t\t\ttestpc.close();\n\t\t\t\t\ttestpc = null;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t// Check if this browser supports Unified Plan and transceivers\n\t\t// Based on https://codepen.io/anon/pen/ZqLwWV?editors=0010\n\t\tJanus.unifiedPlan = false;\n\t\tif(Janus.webRTCAdapter.browserDetails.browser === 'firefox' &&\n\t\t\t\tJanus.webRTCAdapter.browserDetails.version >= 59) {\n\t\t\t// Firefox definitely does, starting from version 59\n\t\t\tJanus.unifiedPlan = true;\n\t\t} else if(Janus.webRTCAdapter.browserDetails.browser === 'chrome' &&\n\t\t\t\tJanus.webRTCAdapter.browserDetails.version >= 72) {\n\t\t\t// Chrome does, but it's only usable from version 72 on\n\t\t\tJanus.unifiedPlan = true;\n\t\t} else if(!window.RTCRtpTransceiver || !('currentDirection' in RTCRtpTransceiver.prototype)) {\n\t\t\t// Safari supports addTransceiver() but not Unified Plan when\n\t\t\t// currentDirection is not defined (see codepen above).\n\t\t\tJanus.unifiedPlan = false;\n\t\t} else {\n\t\t\t// Check if addTransceiver() throws an exception\n\t\t\tvar tempPc = new RTCPeerConnection();\n\t\t\ttry {\n\t\t\t\ttempPc.addTransceiver('audio');\n\t\t\t\tJanus.unifiedPlan = true;\n\t\t\t} catch (e) {}\n\t\t\ttempPc.close();\n\t\t}\n\t\tJanus.initDone = true;\n\t\toptions.callback();\n\t}\n};\n\n// Helper method to check whether WebRTC is supported by this browser\nJanus.isWebrtcSupported = function() {\n\treturn !!window.RTCPeerConnection;\n};\n// Helper method to check whether devices can be accessed by this browser (e.g., not possible via plain HTTP)\nJanus.isGetUserMediaAvailable = function() {\n\treturn navigator.mediaDevices && navigator.mediaDevices.getUserMedia;\n};\n\n// Helper method to create random identifiers (e.g., transaction)\nJanus.randomString = function(len) {\n\tvar charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\tvar randomString = '';\n\tfor (var i = 0; i < len; i++) {\n\t\tvar randomPoz = Math.floor(Math.random() * charSet.length);\n\t\trandomString += charSet.substring(randomPoz,randomPoz+1);\n\t}\n\treturn randomString;\n};\n\nfunction Janus(gatewayCallbacks) {\n\tgatewayCallbacks = gatewayCallbacks || {};\n\tgatewayCallbacks.success = (typeof gatewayCallbacks.success == \"function\") ? gatewayCallbacks.success : Janus.noop;\n\tgatewayCallbacks.error = (typeof gatewayCallbacks.error == \"function\") ? gatewayCallbacks.error : Janus.noop;\n\tgatewayCallbacks.destroyed = (typeof gatewayCallbacks.destroyed == \"function\") ? gatewayCallbacks.destroyed : Janus.noop;\n\tif(!Janus.initDone) {\n\t\tgatewayCallbacks.error(\"Library not initialized\");\n\t\treturn {};\n\t}\n\tif(!Janus.isWebrtcSupported()) {\n\t\tgatewayCallbacks.error(\"WebRTC not supported by this browser\");\n\t\treturn {};\n\t}\n\tJanus.log(\"Library initialized: \" + Janus.initDone);\n\tif(!gatewayCallbacks.server) {\n\t\tgatewayCallbacks.error(\"Invalid server url\");\n\t\treturn {};\n\t}\n\tvar websockets = false;\n\tvar ws = null;\n\tvar wsHandlers = {};\n\tvar wsKeepaliveTimeoutId = null;\n\tvar servers = null;\n\tvar serversIndex = 0;\n\tvar server = gatewayCallbacks.server;\n\tif(Janus.isArray(server)) {\n\t\tJanus.log(\"Multiple servers provided (\" + server.length + \"), will use the first that works\");\n\t\tserver = null;\n\t\tservers = gatewayCallbacks.server;\n\t\tJanus.debug(servers);\n\t} else {\n\t\tif(server.indexOf(\"ws\") === 0) {\n\t\t\twebsockets = true;\n\t\t\tJanus.log(\"Using WebSockets to contact Janus: \" + server);\n\t\t} else {\n\t\t\twebsockets = false;\n\t\t\tJanus.log(\"Using REST API to contact Janus: \" + server);\n\t\t}\n\t}\n\tvar iceServers = gatewayCallbacks.iceServers || [{urls: \"stun:stun.l.google.com:19302\"}];\n\tvar iceTransportPolicy = gatewayCallbacks.iceTransportPolicy;\n\tvar bundlePolicy = gatewayCallbacks.bundlePolicy;\n\t// Whether IPv6 candidates should be gathered\n\tvar ipv6Support = (gatewayCallbacks.ipv6 === true);\n\t// Whether we should enable the withCredentials flag for XHR requests\n\tvar withCredentials = false;\n\tif(gatewayCallbacks.withCredentials !== undefined && gatewayCallbacks.withCredentials !== null)\n\t\twithCredentials = gatewayCallbacks.withCredentials === true;\n\t// Optional max events\n\tvar maxev = 10;\n\tif(gatewayCallbacks.max_poll_events !== undefined && gatewayCallbacks.max_poll_events !== null)\n\t\tmaxev = gatewayCallbacks.max_poll_events;\n\tif(maxev < 1)\n\t\tmaxev = 1;\n\t// Token to use (only if the token based authentication mechanism is enabled)\n\tvar token = null;\n\tif(gatewayCallbacks.token !== undefined && gatewayCallbacks.token !== null)\n\t\ttoken = gatewayCallbacks.token;\n\t// API secret to use (only if the shared API secret is enabled)\n\tvar apisecret = null;\n\tif(gatewayCallbacks.apisecret !== undefined && gatewayCallbacks.apisecret !== null)\n\t\tapisecret = gatewayCallbacks.apisecret;\n\t// Whether we should destroy this session when onbeforeunload is called\n\tthis.destroyOnUnload = true;\n\tif(gatewayCallbacks.destroyOnUnload !== undefined && gatewayCallbacks.destroyOnUnload !== null)\n\t\tthis.destroyOnUnload = (gatewayCallbacks.destroyOnUnload === true);\n\t// Some timeout-related values\n\tvar keepAlivePeriod = 25000;\n\tif(gatewayCallbacks.keepAlivePeriod !== undefined && gatewayCallbacks.keepAlivePeriod !== null)\n\t\tkeepAlivePeriod = gatewayCallbacks.keepAlivePeriod;\n\tif(isNaN(keepAlivePeriod))\n\t\tkeepAlivePeriod = 25000;\n\tvar longPollTimeout = 60000;\n\tif(gatewayCallbacks.longPollTimeout !== undefined && gatewayCallbacks.longPollTimeout !== null)\n\t\tlongPollTimeout = gatewayCallbacks.longPollTimeout;\n\tif(isNaN(longPollTimeout))\n\t\tlongPollTimeout = 60000;\n\n\t// overrides for default maxBitrate values for simulcasting\n\tfunction getMaxBitrates(simulcastMaxBitrates) {\n\t\tvar maxBitrates = {\n\t\t\thigh: 900000,\n\t\t\tmedium: 300000,\n\t\t\tlow: 100000,\n\t\t};\n\n\t\tif (simulcastMaxBitrates !== undefined && simulcastMaxBitrates !== null) {\n\t\t\tif (simulcastMaxBitrates.high)\n\t\t\t\tmaxBitrates.high = simulcastMaxBitrates.high;\n\t\t\tif (simulcastMaxBitrates.medium)\n\t\t\t\tmaxBitrates.medium = simulcastMaxBitrates.medium;\n\t\t\tif (simulcastMaxBitrates.low)\n\t\t\t\tmaxBitrates.low = simulcastMaxBitrates.low;\n\t\t}\n\n\t\treturn maxBitrates;\n\t}\n\n\tvar connected = false;\n\tvar sessionId = null;\n\tvar pluginHandles = {};\n\tvar that = this;\n\tvar retries = 0;\n\tvar transactions = {};\n\tcreateSession(gatewayCallbacks);\n\n\t// Public methods\n\tthis.getServer = function() { return server; };\n\tthis.isConnected = function() { return connected; };\n\tthis.reconnect = function(callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tcallbacks[\"reconnect\"] = true;\n\t\tcreateSession(callbacks);\n\t};\n\tthis.getSessionId = function() { return sessionId; };\n\tthis.getInfo = function(callbacks) { getInfo(callbacks); };\n\tthis.destroy = function(callbacks) { destroySession(callbacks); };\n\tthis.attach = function(callbacks) { createHandle(callbacks); };\n\n\tfunction eventHandler() {\n\t\tif(sessionId == null)\n\t\t\treturn;\n\t\tJanus.debug('Long poll...');\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar longpoll = server + \"/\" + sessionId + \"?rid=\" + new Date().getTime();\n\t\tif(maxev)\n\t\t\tlongpoll = longpoll + \"&maxev=\" + maxev;\n\t\tif(token)\n\t\t\tlongpoll = longpoll + \"&token=\" + encodeURIComponent(token);\n\t\tif(apisecret)\n\t\t\tlongpoll = longpoll + \"&apisecret=\" + encodeURIComponent(apisecret);\n\t\tJanus.httpAPICall(longpoll, {\n\t\t\tverb: 'GET',\n\t\t\twithCredentials: withCredentials,\n\t\t\tsuccess: handleEvent,\n\t\t\ttimeout: longPollTimeout,\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\n\t\t\t\tretries++;\n\t\t\t\tif(retries > 3) {\n\t\t\t\t\t// Did we just lose the server? :-(\n\t\t\t\t\tconnected = false;\n\t\t\t\t\tgatewayCallbacks.error(\"Lost connection to the server (is it down?)\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\teventHandler();\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private event handler: this will trigger plugin callbacks, if set\n\tfunction handleEvent(json, skipTimeout) {\n\t\tretries = 0;\n\t\tif(!websockets && sessionId !== undefined && sessionId !== null && skipTimeout !== true)\n\t\t\teventHandler();\n\t\tif(!websockets && Janus.isArray(json)) {\n\t\t\t// We got an array: it means we passed a maxev > 1, iterate on all objects\n\t\t\tfor(var i=0; i<json.length; i++) {\n\t\t\t\thandleEvent(json[i], true);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif(json[\"janus\"] === \"keepalive\") {\n\t\t\t// Nothing happened\n\t\t\tJanus.vdebug(\"Got a keepalive on session \" + sessionId);\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"server_info\") {\n\t\t\t// Just info on the Janus instance\n\t\t\tJanus.debug(\"Got info on the Janus instance\");\n\t\t\tJanus.debug(json);\n\t\t\tvar transaction = json[\"transaction\"];\n\t\t\tif(transaction) {\n\t\t\t\tvar reportSuccess = transactions[transaction];\n\t\t\t\tif(reportSuccess)\n\t\t\t\t\treportSuccess(json);\n\t\t\t\tdelete transactions[transaction];\n\t\t\t}\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"ack\") {\n\t\t\t// Just an ack, we can probably ignore\n\t\t\tJanus.debug(\"Got an ack on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar transaction = json[\"transaction\"];\n\t\t\tif(transaction) {\n\t\t\t\tvar reportSuccess = transactions[transaction];\n\t\t\t\tif(reportSuccess)\n\t\t\t\t\treportSuccess(json);\n\t\t\t\tdelete transactions[transaction];\n\t\t\t}\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"success\") {\n\t\t\t// Success!\n\t\t\tJanus.debug(\"Got a success on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar transaction = json[\"transaction\"];\n\t\t\tif(transaction) {\n\t\t\t\tvar reportSuccess = transactions[transaction];\n\t\t\t\tif(reportSuccess)\n\t\t\t\t\treportSuccess(json);\n\t\t\t\tdelete transactions[transaction];\n\t\t\t}\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"trickle\") {\n\t\t\t// We got a trickle candidate from Janus\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar candidate = json[\"candidate\"];\n\t\t\tJanus.debug(\"Got a trickled candidate on session \" + sessionId);\n\t\t\tJanus.debug(candidate);\n\t\t\tvar config = pluginHandle.webrtcStuff;\n\t\t\tif(config.pc && config.remoteSdp) {\n\t\t\t\t// Add candidate right now\n\t\t\t\tJanus.debug(\"Adding remote candidate:\", candidate);\n\t\t\t\tif(!candidate || candidate.completed === true) {\n\t\t\t\t\t// end-of-candidates\n\t\t\t\t\tconfig.pc.addIceCandidate(Janus.endOfCandidates);\n\t\t\t\t} else {\n\t\t\t\t\t// New candidate\n\t\t\t\t\tconfig.pc.addIceCandidate(candidate);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// We didn't do setRemoteDescription (trickle got here before the offer?)\n\t\t\t\tJanus.debug(\"We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate\");\n\t\t\t\tif(!config.candidates)\n\t\t\t\t\tconfig.candidates = [];\n\t\t\t\tconfig.candidates.push(candidate);\n\t\t\t\tJanus.debug(config.candidates);\n\t\t\t}\n\t\t} else if(json[\"janus\"] === \"webrtcup\") {\n\t\t\t// The PeerConnection with the server is up! Notify this\n\t\t\tJanus.debug(\"Got a webrtcup event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.webrtcState(true);\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"hangup\") {\n\t\t\t// A plugin asked the core to hangup a PeerConnection on one of our handles\n\t\t\tJanus.debug(\"Got a hangup event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.webrtcState(false, json[\"reason\"]);\n\t\t\tpluginHandle.hangup();\n\t\t} else if(json[\"janus\"] === \"detached\") {\n\t\t\t// A plugin asked the core to detach one of our handles\n\t\t\tJanus.debug(\"Got a detached event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\t// Don't warn here because destroyHandle causes this situation.\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.detached = true;\n\t\t\tpluginHandle.ondetached();\n\t\t\tpluginHandle.detach();\n\t\t} else if(json[\"janus\"] === \"media\") {\n\t\t\t// Media started/stopped flowing\n\t\t\tJanus.debug(\"Got a media event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.mediaState(json[\"type\"], json[\"receiving\"]);\n\t\t} else if(json[\"janus\"] === \"slowlink\") {\n\t\t\tJanus.debug(\"Got a slowlink event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\t// Trouble uplink or downlink\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.slowLink(json[\"uplink\"], json[\"lost\"]);\n\t\t} else if(json[\"janus\"] === \"error\") {\n\t\t\t// Oops, something wrong happened\n\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\tJanus.debug(json);\n\t\t\tvar transaction = json[\"transaction\"];\n\t\t\tif(transaction) {\n\t\t\t\tvar reportSuccess = transactions[transaction];\n\t\t\t\tif(reportSuccess) {\n\t\t\t\t\treportSuccess(json);\n\t\t\t\t}\n\t\t\t\tdelete transactions[transaction];\n\t\t\t}\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"event\") {\n\t\t\tJanus.debug(\"Got a plugin event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar plugindata = json[\"plugindata\"];\n\t\t\tif(!plugindata) {\n\t\t\t\tJanus.warn(\"Missing plugindata...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tJanus.debug(\"  -- Event is coming from \" + sender + \" (\" + plugindata[\"plugin\"] + \")\");\n\t\t\tvar data = plugindata[\"data\"];\n\t\t\tJanus.debug(data);\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.warn(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar jsep = json[\"jsep\"];\n\t\t\tif(jsep) {\n\t\t\t\tJanus.debug(\"Handling SDP as well...\");\n\t\t\t\tJanus.debug(jsep);\n\t\t\t}\n\t\t\tvar callback = pluginHandle.onmessage;\n\t\t\tif(callback) {\n\t\t\t\tJanus.debug(\"Notifying application...\");\n\t\t\t\t// Send to callback specified when attaching plugin handle\n\t\t\t\tcallback(data, jsep);\n\t\t\t} else {\n\t\t\t\t// Send to generic callback (?)\n\t\t\t\tJanus.debug(\"No provided notification callback\");\n\t\t\t}\n\t\t} else if(json[\"janus\"] === \"timeout\") {\n\t\t\tJanus.error(\"Timeout on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tif (websockets) {\n\t\t\t\tws.close(3504, \"Gateway timeout\");\n\t\t\t}\n\t\t\treturn;\n\t\t} else {\n\t\t\tJanus.warn(\"Unknown message/event  '\" + json[\"janus\"] + \"' on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t}\n\t}\n\n\t// Private helper to send keep-alive messages on WebSockets\n\tfunction keepAlive() {\n\t\tif(!server || !websockets || !connected)\n\t\t\treturn;\n\t\twsKeepaliveTimeoutId = setTimeout(keepAlive, keepAlivePeriod);\n\t\tvar request = { \"janus\": \"keepalive\", \"session_id\": sessionId, \"transaction\": Janus.randomString(12) };\n\t\tif(token)\n\t\t\trequest[\"token\"] = token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tws.send(JSON.stringify(request));\n\t}\n\n\t// Private method to create a session\n\tfunction createSession(callbacks) {\n\t\tvar transaction = Janus.randomString(12);\n\t\tvar request = { \"janus\": \"create\", \"transaction\": transaction };\n\t\tif(callbacks[\"reconnect\"]) {\n\t\t\t// We're reconnecting, claim the session\n\t\t\tconnected = false;\n\t\t\trequest[\"janus\"] = \"claim\";\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\t// If we were using websockets, ignore the old connection\n\t\t\tif(ws) {\n\t\t\t\tws.onopen = null;\n\t\t\t\tws.onerror = null;\n\t\t\t\tws.onclose = null;\n\t\t\t\tif(wsKeepaliveTimeoutId) {\n\t\t\t\t\tclearTimeout(wsKeepaliveTimeoutId);\n\t\t\t\t\twsKeepaliveTimeoutId = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(token)\n\t\t\trequest[\"token\"] = token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(!server && Janus.isArray(servers)) {\n\t\t\t// We still need to find a working server from the list we were given\n\t\t\tserver = servers[serversIndex];\n\t\t\tif(server.indexOf(\"ws\") === 0) {\n\t\t\t\twebsockets = true;\n\t\t\t\tJanus.log(\"Server #\" + (serversIndex+1) + \": trying WebSockets to contact Janus (\" + server + \")\");\n\t\t\t} else {\n\t\t\t\twebsockets = false;\n\t\t\t\tJanus.log(\"Server #\" + (serversIndex+1) + \": trying REST API to contact Janus (\" + server + \")\");\n\t\t\t}\n\t\t}\n\t\tif(websockets) {\n\t\t\tws = Janus.newWebSocket(server, 'janus-protocol');\n\t\t\twsHandlers = {\n\t\t\t\t'error': function() {\n\t\t\t\t\tJanus.error(\"Error connecting to the Janus WebSockets server... \" + server);\n\t\t\t\t\tif (Janus.isArray(servers) && !callbacks[\"reconnect\"]) {\n\t\t\t\t\t\tserversIndex++;\n\t\t\t\t\t\tif (serversIndex === servers.length) {\n\t\t\t\t\t\t\t// We tried all the servers the user gave us and they all failed\n\t\t\t\t\t\t\tcallbacks.error(\"Error connecting to any of the provided Janus servers: Is the server down?\");\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Let's try the next server\n\t\t\t\t\t\tserver = null;\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tcreateSession(callbacks);\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcallbacks.error(\"Error connecting to the Janus WebSockets server: Is the server down?\");\n\t\t\t\t},\n\n\t\t\t\t'open': function() {\n\t\t\t\t\t// We need to be notified about the success\n\t\t\t\t\ttransactions[transaction] = function(json) {\n\t\t\t\t\t\tJanus.debug(json);\n\t\t\t\t\t\tif (json[\"janus\"] !== \"success\") {\n\t\t\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\t\t\tcallbacks.error(json[\"error\"].reason);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\twsKeepaliveTimeoutId = setTimeout(keepAlive, keepAlivePeriod);\n\t\t\t\t\t\tconnected = true;\n\t\t\t\t\t\tsessionId = json[\"session_id\"] ? json[\"session_id\"] : json.data[\"id\"];\n\t\t\t\t\t\tif(callbacks[\"reconnect\"]) {\n\t\t\t\t\t\t\tJanus.log(\"Claimed session: \" + sessionId);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tJanus.log(\"Created session: \" + sessionId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.sessions[sessionId] = that;\n\t\t\t\t\t\tcallbacks.success();\n\t\t\t\t\t};\n\t\t\t\t\tws.send(JSON.stringify(request));\n\t\t\t\t},\n\n\t\t\t\t'message': function(event) {\n\t\t\t\t\thandleEvent(JSON.parse(event.data));\n\t\t\t\t},\n\n\t\t\t\t'close': function() {\n\t\t\t\t\tif (!server || !connected) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconnected = false;\n\t\t\t\t\t// FIXME What if this is called when the page is closed?\n\t\t\t\t\tgatewayCallbacks.error(\"Lost connection to the server (is it down?)\");\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfor(var eventName in wsHandlers) {\n\t\t\t\tws.addEventListener(eventName, wsHandlers[eventName]);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\tcallbacks.error(json[\"error\"].reason);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconnected = true;\n\t\t\t\tsessionId = json[\"session_id\"] ? json[\"session_id\"] : json.data[\"id\"];\n\t\t\t\tif(callbacks[\"reconnect\"]) {\n\t\t\t\t\tJanus.log(\"Claimed session: \" + sessionId);\n\t\t\t\t} else {\n\t\t\t\t\tJanus.log(\"Created session: \" + sessionId);\n\t\t\t\t}\n\t\t\t\tJanus.sessions[sessionId] = that;\n\t\t\t\teventHandler();\n\t\t\t\tcallbacks.success();\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\tif(Janus.isArray(servers) && !callbacks[\"reconnect\"]) {\n\t\t\t\t\tserversIndex++;\n\t\t\t\t\tif(serversIndex === servers.length) {\n\t\t\t\t\t\t// We tried all the servers the user gave us and they all failed\n\t\t\t\t\t\tcallbacks.error(\"Error connecting to any of the provided Janus servers: Is the server down?\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// Let's try the next server\n\t\t\t\t\tserver = null;\n\t\t\t\t\tsetTimeout(function() { createSession(callbacks); }, 200);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(errorThrown === \"\")\n\t\t\t\t\tcallbacks.error(textStatus + \": Is the server down?\");\n\t\t\t\telse\n\t\t\t\t\tcallbacks.error(textStatus + \": \" + errorThrown);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to get info on the server\n\tfunction getInfo(callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\t// FIXME This method triggers a success even when we fail\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tJanus.log(\"Getting info on Janus instance\");\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\tcallbacks.error(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\t// We just need to send an \"info\" request\n\t\tvar transaction = Janus.randomString(12);\n\t\tvar request = { \"janus\": \"info\", \"transaction\": transaction };\n\t\tif(token)\n\t\t\trequest[\"token\"] = token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(websockets) {\n\t\t\ttransactions[transaction] = function(json) {\n\t\t\t\tJanus.log(\"Server info:\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"server_info\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t}\n\t\t\t\tcallbacks.success(json);\n\t\t\t}\n\t\t\tws.send(JSON.stringify(request));\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.log(\"Server info:\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"server_info\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t}\n\t\t\t\tcallbacks.success(json);\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\tif(errorThrown === \"\")\n\t\t\t\t\tcallbacks.error(textStatus + \": Is the server down?\");\n\t\t\t\telse\n\t\t\t\t\tcallbacks.error(textStatus + \": \" + errorThrown);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to destroy a session\n\tfunction destroySession(callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\t// FIXME This method triggers a success even when we fail\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar unload = (callbacks.unload === true);\n\t\tvar notifyDestroyed = true;\n\t\tif(callbacks.notifyDestroyed !== undefined && callbacks.notifyDestroyed !== null)\n\t\t\tnotifyDestroyed = (callbacks.notifyDestroyed === true);\n\t\tvar cleanupHandles = (callbacks.cleanupHandles === true);\n\t\tJanus.log(\"Destroying session \" + sessionId + \" (unload=\" + unload + \")\");\n\t\tif(!sessionId) {\n\t\t\tJanus.warn(\"No session to destroy\");\n\t\t\tcallbacks.success();\n\t\t\tif(notifyDestroyed)\n\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\treturn;\n\t\t}\n\t\tif(cleanupHandles) {\n\t\t\tfor(var handleId in pluginHandles)\n\t\t\t\tdestroyHandle(handleId, { noRequest: true });\n\t\t}\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\tsessionId = null;\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\t// No need to destroy all handles first, Janus will do that itself\n\t\tvar request = { \"janus\": \"destroy\", \"transaction\": Janus.randomString(12) };\n\t\tif(token)\n\t\t\trequest[\"token\"] = token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(unload) {\n\t\t\t// We're unloading the page: use sendBeacon for HTTP instead,\n\t\t\t// or just close the WebSocket connection if we're using that\n\t\t\tif(websockets) {\n\t\t\t\tws.onclose = null;\n\t\t\t\tws.close();\n\t\t\t\tws = null;\n\t\t\t} else {\n\t\t\t\tnavigator.sendBeacon(server + \"/\" + sessionId, JSON.stringify(request));\n\t\t\t}\n\t\t\tJanus.log(\"Destroyed session:\");\n\t\t\tsessionId = null;\n\t\t\tconnected = false;\n\t\t\tcallbacks.success();\n\t\t\tif(notifyDestroyed)\n\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\treturn;\n\t\t}\n\t\tif(websockets) {\n\t\t\trequest[\"session_id\"] = sessionId;\n\n\t\t\tvar unbindWebSocket = function() {\n\t\t\t\tfor(var eventName in wsHandlers) {\n\t\t\t\t\tws.removeEventListener(eventName, wsHandlers[eventName]);\n\t\t\t\t}\n\t\t\t\tws.removeEventListener('message', onUnbindMessage);\n\t\t\t\tws.removeEventListener('error', onUnbindError);\n\t\t\t\tif(wsKeepaliveTimeoutId) {\n\t\t\t\t\tclearTimeout(wsKeepaliveTimeoutId);\n\t\t\t\t}\n\t\t\t\tws.close();\n\t\t\t};\n\n\t\t\tvar onUnbindMessage = function(event){\n\t\t\t\tvar data = JSON.parse(event.data);\n\t\t\t\tif(data.session_id == request.session_id && data.transaction == request.transaction) {\n\t\t\t\t\tunbindWebSocket();\n\t\t\t\t\tcallbacks.success();\n\t\t\t\t\tif(notifyDestroyed)\n\t\t\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar onUnbindError = function(event) {\n\t\t\t\tunbindWebSocket();\n\t\t\t\tcallbacks.error(\"Failed to destroy the server: Is the server down?\");\n\t\t\t\tif(notifyDestroyed)\n\t\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\t};\n\n\t\t\tws.addEventListener('message', onUnbindMessage);\n\t\t\tws.addEventListener('error', onUnbindError);\n\n\t\t\tif (ws.readyState === 1) {\n\t\t\t\tws.send(JSON.stringify(request));\n\t\t\t} else {\n\t\t\t\tonUnbindError();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.log(\"Destroyed session:\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tsessionId = null;\n\t\t\t\tconnected = false;\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t}\n\t\t\t\tcallbacks.success();\n\t\t\t\tif(notifyDestroyed)\n\t\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\t// Reset everything anyway\n\t\t\t\tsessionId = null;\n\t\t\t\tconnected = false;\n\t\t\t\tcallbacks.success();\n\t\t\t\tif(notifyDestroyed)\n\t\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to create a plugin handle\n\tfunction createHandle(callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tcallbacks.consentDialog = (typeof callbacks.consentDialog == \"function\") ? callbacks.consentDialog : Janus.noop;\n\t\tcallbacks.iceState = (typeof callbacks.iceState == \"function\") ? callbacks.iceState : Janus.noop;\n\t\tcallbacks.mediaState = (typeof callbacks.mediaState == \"function\") ? callbacks.mediaState : Janus.noop;\n\t\tcallbacks.webrtcState = (typeof callbacks.webrtcState == \"function\") ? callbacks.webrtcState : Janus.noop;\n\t\tcallbacks.slowLink = (typeof callbacks.slowLink == \"function\") ? callbacks.slowLink : Janus.noop;\n\t\tcallbacks.onmessage = (typeof callbacks.onmessage == \"function\") ? callbacks.onmessage : Janus.noop;\n\t\tcallbacks.onlocalstream = (typeof callbacks.onlocalstream == \"function\") ? callbacks.onlocalstream : Janus.noop;\n\t\tcallbacks.onremotestream = (typeof callbacks.onremotestream == \"function\") ? callbacks.onremotestream : Janus.noop;\n\t\tcallbacks.ondata = (typeof callbacks.ondata == \"function\") ? callbacks.ondata : Janus.noop;\n\t\tcallbacks.ondataopen = (typeof callbacks.ondataopen == \"function\") ? callbacks.ondataopen : Janus.noop;\n\t\tcallbacks.oncleanup = (typeof callbacks.oncleanup == \"function\") ? callbacks.oncleanup : Janus.noop;\n\t\tcallbacks.ondetached = (typeof callbacks.ondetached == \"function\") ? callbacks.ondetached : Janus.noop;\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\tcallbacks.error(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar plugin = callbacks.plugin;\n\t\tif(!plugin) {\n\t\t\tJanus.error(\"Invalid plugin\");\n\t\t\tcallbacks.error(\"Invalid plugin\");\n\t\t\treturn;\n\t\t}\n\t\tvar opaqueId = callbacks.opaqueId;\n\t\tvar handleToken = callbacks.token ? callbacks.token : token;\n\t\tvar transaction = Janus.randomString(12);\n\t\tvar request = { \"janus\": \"attach\", \"plugin\": plugin, \"opaque_id\": opaqueId, \"transaction\": transaction };\n\t\tif(handleToken)\n\t\t\trequest[\"token\"] = handleToken;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(websockets) {\n\t\t\ttransactions[transaction] = function(json) {\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\tcallbacks.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar handleId = json.data[\"id\"];\n\t\t\t\tJanus.log(\"Created handle: \" + handleId);\n\t\t\t\tvar pluginHandle =\n\t\t\t\t\t{\n\t\t\t\t\t\tsession : that,\n\t\t\t\t\t\tplugin : plugin,\n\t\t\t\t\t\tid : handleId,\n\t\t\t\t\t\ttoken : handleToken,\n\t\t\t\t\t\tdetached : false,\n\t\t\t\t\t\twebrtcStuff : {\n\t\t\t\t\t\t\tstarted : false,\n\t\t\t\t\t\t\tmyStream : null,\n\t\t\t\t\t\t\tstreamExternal : false,\n\t\t\t\t\t\t\tremoteStream : null,\n\t\t\t\t\t\t\tmySdp : null,\n\t\t\t\t\t\t\tmediaConstraints : null,\n\t\t\t\t\t\t\tpc : null,\n\t\t\t\t\t\t\tdataChannel : {},\n\t\t\t\t\t\t\tdtmfSender : null,\n\t\t\t\t\t\t\ttrickle : true,\n\t\t\t\t\t\t\ticeDone : false,\n\t\t\t\t\t\t\tvolume : {\n\t\t\t\t\t\t\t\tvalue : null,\n\t\t\t\t\t\t\t\ttimer : null\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbitrate : {\n\t\t\t\t\t\t\t\tvalue : null,\n\t\t\t\t\t\t\t\tbsnow : null,\n\t\t\t\t\t\t\t\tbsbefore : null,\n\t\t\t\t\t\t\t\ttsnow : null,\n\t\t\t\t\t\t\t\ttsbefore : null,\n\t\t\t\t\t\t\t\ttimer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetId : function() { return handleId; },\n\t\t\t\t\t\tgetPlugin : function() { return plugin; },\n\t\t\t\t\t\tgetVolume : function() { return getVolume(handleId, true); },\n\t\t\t\t\t\tgetRemoteVolume : function() { return getVolume(handleId, true); },\n\t\t\t\t\t\tgetLocalVolume : function() { return getVolume(handleId, false); },\n\t\t\t\t\t\tisAudioMuted : function() { return isMuted(handleId, false); },\n\t\t\t\t\t\tmuteAudio : function() { return mute(handleId, false, true); },\n\t\t\t\t\t\tunmuteAudio : function() { return mute(handleId, false, false); },\n\t\t\t\t\t\tisVideoMuted : function() { return isMuted(handleId, true); },\n\t\t\t\t\t\tmuteVideo : function() { return mute(handleId, true, true); },\n\t\t\t\t\t\tunmuteVideo : function() { return mute(handleId, true, false); },\n\t\t\t\t\t\tgetBitrate : function() { return getBitrate(handleId); },\n\t\t\t\t\t\tsend : function(callbacks) { sendMessage(handleId, callbacks); },\n\t\t\t\t\t\tdata : function(callbacks) { sendData(handleId, callbacks); },\n\t\t\t\t\t\tdtmf : function(callbacks) { sendDtmf(handleId, callbacks); },\n\t\t\t\t\t\tconsentDialog : callbacks.consentDialog,\n\t\t\t\t\t\ticeState : callbacks.iceState,\n\t\t\t\t\t\tmediaState : callbacks.mediaState,\n\t\t\t\t\t\twebrtcState : callbacks.webrtcState,\n\t\t\t\t\t\tslowLink : callbacks.slowLink,\n\t\t\t\t\t\tonmessage : callbacks.onmessage,\n\t\t\t\t\t\tcreateOffer : function(callbacks) { prepareWebrtc(handleId, true, callbacks); },\n\t\t\t\t\t\tcreateAnswer : function(callbacks) { prepareWebrtc(handleId, false, callbacks); },\n\t\t\t\t\t\thandleRemoteJsep : function(callbacks) { prepareWebrtcPeer(handleId, callbacks); },\n\t\t\t\t\t\tonlocalstream : callbacks.onlocalstream,\n\t\t\t\t\t\tonremotestream : callbacks.onremotestream,\n\t\t\t\t\t\tondata : callbacks.ondata,\n\t\t\t\t\t\tondataopen : callbacks.ondataopen,\n\t\t\t\t\t\toncleanup : callbacks.oncleanup,\n\t\t\t\t\t\tondetached : callbacks.ondetached,\n\t\t\t\t\t\thangup : function(sendRequest) { cleanupWebrtc(handleId, sendRequest === true); },\n\t\t\t\t\t\tdetach : function(callbacks) { destroyHandle(handleId, callbacks); }\n\t\t\t\t\t};\n\t\t\t\tpluginHandles[handleId] = pluginHandle;\n\t\t\t\tcallbacks.success(pluginHandle);\n\t\t\t};\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\tws.send(JSON.stringify(request));\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\tcallbacks.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar handleId = json.data[\"id\"];\n\t\t\t\tJanus.log(\"Created handle: \" + handleId);\n\t\t\t\tvar pluginHandle =\n\t\t\t\t\t{\n\t\t\t\t\t\tsession : that,\n\t\t\t\t\t\tplugin : plugin,\n\t\t\t\t\t\tid : handleId,\n\t\t\t\t\t\ttoken : handleToken,\n\t\t\t\t\t\tdetached : false,\n\t\t\t\t\t\twebrtcStuff : {\n\t\t\t\t\t\t\tstarted : false,\n\t\t\t\t\t\t\tmyStream : null,\n\t\t\t\t\t\t\tstreamExternal : false,\n\t\t\t\t\t\t\tremoteStream : null,\n\t\t\t\t\t\t\tmySdp : null,\n\t\t\t\t\t\t\tmediaConstraints : null,\n\t\t\t\t\t\t\tpc : null,\n\t\t\t\t\t\t\tdataChannel : {},\n\t\t\t\t\t\t\tdtmfSender : null,\n\t\t\t\t\t\t\ttrickle : true,\n\t\t\t\t\t\t\ticeDone : false,\n\t\t\t\t\t\t\tvolume : {\n\t\t\t\t\t\t\t\tvalue : null,\n\t\t\t\t\t\t\t\ttimer : null\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbitrate : {\n\t\t\t\t\t\t\t\tvalue : null,\n\t\t\t\t\t\t\t\tbsnow : null,\n\t\t\t\t\t\t\t\tbsbefore : null,\n\t\t\t\t\t\t\t\ttsnow : null,\n\t\t\t\t\t\t\t\ttsbefore : null,\n\t\t\t\t\t\t\t\ttimer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetId : function() { return handleId; },\n\t\t\t\t\t\tgetPlugin : function() { return plugin; },\n\t\t\t\t\t\tgetVolume : function() { return getVolume(handleId, true); },\n\t\t\t\t\t\tgetRemoteVolume : function() { return getVolume(handleId, true); },\n\t\t\t\t\t\tgetLocalVolume : function() { return getVolume(handleId, false); },\n\t\t\t\t\t\tisAudioMuted : function() { return isMuted(handleId, false); },\n\t\t\t\t\t\tmuteAudio : function() { return mute(handleId, false, true); },\n\t\t\t\t\t\tunmuteAudio : function() { return mute(handleId, false, false); },\n\t\t\t\t\t\tisVideoMuted : function() { return isMuted(handleId, true); },\n\t\t\t\t\t\tmuteVideo : function() { return mute(handleId, true, true); },\n\t\t\t\t\t\tunmuteVideo : function() { return mute(handleId, true, false); },\n\t\t\t\t\t\tgetBitrate : function() { return getBitrate(handleId); },\n\t\t\t\t\t\tsend : function(callbacks) { sendMessage(handleId, callbacks); },\n\t\t\t\t\t\tdata : function(callbacks) { sendData(handleId, callbacks); },\n\t\t\t\t\t\tdtmf : function(callbacks) { sendDtmf(handleId, callbacks); },\n\t\t\t\t\t\tconsentDialog : callbacks.consentDialog,\n\t\t\t\t\t\ticeState : callbacks.iceState,\n\t\t\t\t\t\tmediaState : callbacks.mediaState,\n\t\t\t\t\t\twebrtcState : callbacks.webrtcState,\n\t\t\t\t\t\tslowLink : callbacks.slowLink,\n\t\t\t\t\t\tonmessage : callbacks.onmessage,\n\t\t\t\t\t\tcreateOffer : function(callbacks) { prepareWebrtc(handleId, true, callbacks); },\n\t\t\t\t\t\tcreateAnswer : function(callbacks) { prepareWebrtc(handleId, false, callbacks); },\n\t\t\t\t\t\thandleRemoteJsep : function(callbacks) { prepareWebrtcPeer(handleId, callbacks); },\n\t\t\t\t\t\tonlocalstream : callbacks.onlocalstream,\n\t\t\t\t\t\tonremotestream : callbacks.onremotestream,\n\t\t\t\t\t\tondata : callbacks.ondata,\n\t\t\t\t\t\tondataopen : callbacks.ondataopen,\n\t\t\t\t\t\toncleanup : callbacks.oncleanup,\n\t\t\t\t\t\tondetached : callbacks.ondetached,\n\t\t\t\t\t\thangup : function(sendRequest) { cleanupWebrtc(handleId, sendRequest === true); },\n\t\t\t\t\t\tdetach : function(callbacks) { destroyHandle(handleId, callbacks); }\n\t\t\t\t\t}\n\t\t\t\tpluginHandles[handleId] = pluginHandle;\n\t\t\t\tcallbacks.success(pluginHandle);\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\tif(errorThrown === \"\")\n\t\t\t\t\tcallbacks.error(textStatus + \": Is the server down?\");\n\t\t\t\telse\n\t\t\t\t\tcallbacks.error(textStatus + \": \" + errorThrown);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to send a message\n\tfunction sendMessage(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\tcallbacks.error(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar message = callbacks.message;\n\t\tvar jsep = callbacks.jsep;\n\t\tvar transaction = Janus.randomString(12);\n\t\tvar request = { \"janus\": \"message\", \"body\": message, \"transaction\": transaction };\n\t\tif(pluginHandle.token)\n\t\t\trequest[\"token\"] = pluginHandle.token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(jsep) {\n\t\t\trequest.jsep = {\n\t\t\t\ttype: jsep.type,\n\t\t\t\tsdp: jsep.sdp\n\t\t\t};\n\t\t\tif(jsep.e2ee)\n\t\t\t\trequest.jsep.e2ee = true;\n\t\t\tif(jsep.rid_order === \"hml\" || jsep.rid_order === \"lmh\")\n\t\t\t\trequest.jsep.rid_order = jsep.rid_order;\n\t\t}\n\t\tJanus.debug(\"Sending message to plugin (handle=\" + handleId + \"):\");\n\t\tJanus.debug(request);\n\t\tif(websockets) {\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\trequest[\"handle_id\"] = handleId;\n\t\t\ttransactions[transaction] = function(json) {\n\t\t\t\tJanus.debug(\"Message sent!\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] === \"success\") {\n\t\t\t\t\t// We got a success, must have been a synchronous transaction\n\t\t\t\t\tvar plugindata = json[\"plugindata\"];\n\t\t\t\t\tif(!plugindata) {\n\t\t\t\t\t\tJanus.warn(\"Request succeeded, but missing plugindata...\");\n\t\t\t\t\t\tcallbacks.success();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tJanus.log(\"Synchronous transaction successful (\" + plugindata[\"plugin\"] + \")\");\n\t\t\t\t\tvar data = plugindata[\"data\"];\n\t\t\t\t\tJanus.debug(data);\n\t\t\t\t\tcallbacks.success(data);\n\t\t\t\t\treturn;\n\t\t\t\t} else if(json[\"janus\"] !== \"ack\") {\n\t\t\t\t\t// Not a success and not an ack, must be an error\n\t\t\t\t\tif(json[\"error\"]) {\n\t\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\t\tcallbacks.error(json[\"error\"].code + \" \" + json[\"error\"].reason);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tJanus.error(\"Unknown error\");\t// FIXME\n\t\t\t\t\t\tcallbacks.error(\"Unknown error\");\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// If we got here, the plugin decided to handle the request asynchronously\n\t\t\t\tcallbacks.success();\n\t\t\t};\n\t\t\tws.send(JSON.stringify(request));\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId + \"/\" + handleId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.debug(\"Message sent!\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] === \"success\") {\n\t\t\t\t\t// We got a success, must have been a synchronous transaction\n\t\t\t\t\tvar plugindata = json[\"plugindata\"];\n\t\t\t\t\tif(!plugindata) {\n\t\t\t\t\t\tJanus.warn(\"Request succeeded, but missing plugindata...\");\n\t\t\t\t\t\tcallbacks.success();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tJanus.log(\"Synchronous transaction successful (\" + plugindata[\"plugin\"] + \")\");\n\t\t\t\t\tvar data = plugindata[\"data\"];\n\t\t\t\t\tJanus.debug(data);\n\t\t\t\t\tcallbacks.success(data);\n\t\t\t\t\treturn;\n\t\t\t\t} else if(json[\"janus\"] !== \"ack\") {\n\t\t\t\t\t// Not a success and not an ack, must be an error\n\t\t\t\t\tif(json[\"error\"]) {\n\t\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\t\tcallbacks.error(json[\"error\"].code + \" \" + json[\"error\"].reason);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tJanus.error(\"Unknown error\");\t// FIXME\n\t\t\t\t\t\tcallbacks.error(\"Unknown error\");\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// If we got here, the plugin decided to handle the request asynchronously\n\t\t\t\tcallbacks.success();\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\tcallbacks.error(textStatus + \": \" + errorThrown);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to send a trickle candidate\n\tfunction sendTrickleCandidate(handleId, candidate) {\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar request = { \"janus\": \"trickle\", \"candidate\": candidate, \"transaction\": Janus.randomString(12) };\n\t\tif(pluginHandle.token)\n\t\t\trequest[\"token\"] = pluginHandle.token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tJanus.vdebug(\"Sending trickle candidate (handle=\" + handleId + \"):\");\n\t\tJanus.vdebug(request);\n\t\tif(websockets) {\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\trequest[\"handle_id\"] = handleId;\n\t\t\tws.send(JSON.stringify(request));\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId + \"/\" + handleId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.vdebug(\"Candidate sent!\");\n\t\t\t\tJanus.vdebug(json);\n\t\t\t\tif(json[\"janus\"] !== \"ack\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to create a data channel\n\tfunction createDataChannel(handleId, dclabel, dcprotocol, incoming, pendingData) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.pc) {\n\t\t\tJanus.warn(\"Invalid PeerConnection\");\n\t\t\treturn;\n\t\t}\n\t\tvar onDataChannelMessage = function(event) {\n\t\t\tJanus.log('Received message on data channel:', event);\n\t\t\tvar label = event.target.label;\n\t\t\tpluginHandle.ondata(event.data, label);\n\t\t};\n\t\tvar onDataChannelStateChange = function(event) {\n\t\t\tJanus.log('Received state change on data channel:', event);\n\t\t\tvar label = event.target.label;\n\t\t\tvar protocol = event.target.protocol;\n\t\t\tvar dcState = config.dataChannel[label] ? config.dataChannel[label].readyState : \"null\";\n\t\t\tJanus.log('State change on <' + label + '> data channel: ' + dcState);\n\t\t\tif(dcState === 'open') {\n\t\t\t\t// Any pending messages to send?\n\t\t\t\tif(config.dataChannel[label].pending && config.dataChannel[label].pending.length > 0) {\n\t\t\t\t\tJanus.log(\"Sending pending messages on <\" + label + \">:\", config.dataChannel[label].pending.length);\n\t\t\t\t\tfor(var data of config.dataChannel[label].pending) {\n\t\t\t\t\t\tJanus.log(\"Sending data on data channel <\" + label + \">\");\n\t\t\t\t\t\tJanus.debug(data);\n\t\t\t\t\t\tconfig.dataChannel[label].send(data);\n\t\t\t\t\t}\n\t\t\t\t\tconfig.dataChannel[label].pending = [];\n\t\t\t\t}\n\t\t\t\t// Notify the open data channel\n\t\t\t\tpluginHandle.ondataopen(label, protocol);\n\t\t\t}\n\t\t};\n\t\tvar onDataChannelError = function(error) {\n\t\t\tJanus.error('Got error on data channel:', error);\n\t\t\t// TODO\n\t\t};\n\t\tif(!incoming) {\n\t\t\t// FIXME Add options (ordered, maxRetransmits, etc.)\n\t\t\tvar dcoptions = { ordered: true };\n\t\t\tif(dcprotocol)\n\t\t\t\tdcoptions.protocol = dcprotocol;\n\t\t\tconfig.dataChannel[dclabel] = config.pc.createDataChannel(dclabel, dcoptions);\n\t\t} else {\n\t\t\t// The channel was created by Janus\n\t\t\tconfig.dataChannel[dclabel] = incoming;\n\t\t}\n\t\tconfig.dataChannel[dclabel].onmessage = onDataChannelMessage;\n\t\tconfig.dataChannel[dclabel].onopen = onDataChannelStateChange;\n\t\tconfig.dataChannel[dclabel].onclose = onDataChannelStateChange;\n\t\tconfig.dataChannel[dclabel].onerror = onDataChannelError;\n\t\tconfig.dataChannel[dclabel].pending = [];\n\t\tif(pendingData)\n\t\t\tconfig.dataChannel[dclabel].pending.push(pendingData);\n\t}\n\n\t// Private method to send a data channel message\n\tfunction sendData(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tvar data = callbacks.text || callbacks.data;\n\t\tif(!data) {\n\t\t\tJanus.warn(\"Invalid data\");\n\t\t\tcallbacks.error(\"Invalid data\");\n\t\t\treturn;\n\t\t}\n\t\tvar label = callbacks.label ? callbacks.label : Janus.dataChanDefaultLabel;\n\t\tif(!config.dataChannel[label]) {\n\t\t\t// Create new data channel and wait for it to open\n\t\t\tcreateDataChannel(handleId, label, callbacks.protocol, false, data, callbacks.protocol);\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tif(config.dataChannel[label].readyState !== \"open\") {\n\t\t\tconfig.dataChannel[label].pending.push(data);\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tJanus.log(\"Sending data on data channel <\" + label + \">\");\n\t\tJanus.debug(data);\n\t\tconfig.dataChannel[label].send(data);\n\t\tcallbacks.success();\n\t}\n\n\t// Private method to send a DTMF tone\n\tfunction sendDtmf(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.dtmfSender) {\n\t\t\t// Create the DTMF sender the proper way, if possible\n\t\t\tif(config.pc) {\n\t\t\t\tvar senders = config.pc.getSenders();\n\t\t\t\tvar audioSender = senders.find(function(sender) {\n\t\t\t\t\treturn sender.track && sender.track.kind === 'audio';\n\t\t\t\t});\n\t\t\t\tif(!audioSender) {\n\t\t\t\t\tJanus.warn(\"Invalid DTMF configuration (no audio track)\");\n\t\t\t\t\tcallbacks.error(\"Invalid DTMF configuration (no audio track)\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconfig.dtmfSender = audioSender.dtmf;\n\t\t\t\tif(config.dtmfSender) {\n\t\t\t\t\tJanus.log(\"Created DTMF Sender\");\n\t\t\t\t\tconfig.dtmfSender.ontonechange = function(tone) { Janus.debug(\"Sent DTMF tone: \" + tone.tone); };\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!config.dtmfSender) {\n\t\t\t\tJanus.warn(\"Invalid DTMF configuration\");\n\t\t\t\tcallbacks.error(\"Invalid DTMF configuration\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tvar dtmf = callbacks.dtmf;\n\t\tif(!dtmf) {\n\t\t\tJanus.warn(\"Invalid DTMF parameters\");\n\t\t\tcallbacks.error(\"Invalid DTMF parameters\");\n\t\t\treturn;\n\t\t}\n\t\tvar tones = dtmf.tones;\n\t\tif(!tones) {\n\t\t\tJanus.warn(\"Invalid DTMF string\");\n\t\t\tcallbacks.error(\"Invalid DTMF string\");\n\t\t\treturn;\n\t\t}\n\t\tvar duration = (typeof dtmf.duration === 'number') ? dtmf.duration : 500; // We choose 500ms as the default duration for a tone\n\t\tvar gap = (typeof dtmf.gap === 'number') ? dtmf.gap : 50; // We choose 50ms as the default gap between tones\n\t\tJanus.debug(\"Sending DTMF string \" + tones + \" (duration \" + duration + \"ms, gap \" + gap + \"ms)\");\n\t\tconfig.dtmfSender.insertDTMF(tones, duration, gap);\n\t\tcallbacks.success();\n\t}\n\n\t// Private method to destroy a plugin handle\n\tfunction destroyHandle(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar noRequest = (callbacks.noRequest === true);\n\t\tJanus.log(\"Destroying handle \" + handleId + \" (only-locally=\" + noRequest + \")\");\n\t\tcleanupWebrtc(handleId);\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || pluginHandle.detached) {\n\t\t\t// Plugin was already detached by Janus, calling detach again will return a handle not found error, so just exit here\n\t\t\tdelete pluginHandles[handleId];\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tif(noRequest) {\n\t\t\t// We're only removing the handle locally\n\t\t\tdelete pluginHandles[handleId];\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\tcallbacks.error(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar request = { \"janus\": \"detach\", \"transaction\": Janus.randomString(12) };\n\t\tif(pluginHandle.token)\n\t\t\trequest[\"token\"] = pluginHandle.token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(websockets) {\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\trequest[\"handle_id\"] = handleId;\n\t\t\tws.send(JSON.stringify(request));\n\t\t\tdelete pluginHandles[handleId];\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId + \"/\" + handleId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.log(\"Destroyed handle:\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t}\n\t\t\t\tdelete pluginHandles[handleId];\n\t\t\t\tcallbacks.success();\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\t// We cleanup anyway\n\t\t\t\tdelete pluginHandles[handleId];\n\t\t\t\tcallbacks.success();\n\t\t\t}\n\t\t});\n\t}\n\n\t// WebRTC stuff\n\tfunction streamsDone(handleId, jsep, media, callbacks, stream) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\t// Close all tracks if the given stream has been created internally\n\t\t\tif(!callbacks.stream) {\n\t\t\t\tJanus.stopAllTracks(stream);\n\t\t\t}\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tJanus.debug(\"streamsDone:\", stream);\n\t\tif(stream) {\n\t\t\tJanus.debug(\"  -- Audio tracks:\", stream.getAudioTracks());\n\t\t\tJanus.debug(\"  -- Video tracks:\", stream.getVideoTracks());\n\t\t}\n\t\t// We're now capturing the new stream: check if we're updating or if it's a new thing\n\t\tvar addTracks = false;\n\t\tif(!config.myStream || !media.update || config.streamExternal) {\n\t\t\tconfig.myStream = stream;\n\t\t\taddTracks = true;\n\t\t} else {\n\t\t\t// We only need to update the existing stream\n\t\t\tif(((!media.update && isAudioSendEnabled(media)) || (media.update && (media.addAudio || media.replaceAudio))) &&\n\t\t\t\t\tstream.getAudioTracks() && stream.getAudioTracks().length) {\n\t\t\t\tconfig.myStream.addTrack(stream.getAudioTracks()[0]);\n\t\t\t\tif(Janus.unifiedPlan) {\n\t\t\t\t\t// Use Transceivers\n\t\t\t\t\tJanus.log((media.replaceAudio ? \"Replacing\" : \"Adding\") + \" audio track:\", stream.getAudioTracks()[0]);\n\t\t\t\t\tvar audioTransceiver = null;\n\t\t\t\t\tvar transceivers = config.pc.getTransceivers();\n\t\t\t\t\tif(transceivers && transceivers.length > 0) {\n\t\t\t\t\t\tfor(var t of transceivers) {\n\t\t\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"audio\") ||\n\t\t\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"audio\")) {\n\t\t\t\t\t\t\t\taudioTransceiver = t;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(audioTransceiver && audioTransceiver.sender) {\n\t\t\t\t\t\taudioTransceiver.sender.replaceTrack(stream.getAudioTracks()[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig.pc.addTrack(stream.getAudioTracks()[0], stream);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tJanus.log((media.replaceAudio ? \"Replacing\" : \"Adding\") + \" audio track:\", stream.getAudioTracks()[0]);\n\t\t\t\t\tconfig.pc.addTrack(stream.getAudioTracks()[0], stream);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(((!media.update && isVideoSendEnabled(media)) || (media.update && (media.addVideo || media.replaceVideo))) &&\n\t\t\t\t\tstream.getVideoTracks() && stream.getVideoTracks().length) {\n\t\t\t\tconfig.myStream.addTrack(stream.getVideoTracks()[0]);\n\t\t\t\tif(Janus.unifiedPlan) {\n\t\t\t\t\t// Use Transceivers\n\t\t\t\t\tJanus.log((media.replaceVideo ? \"Replacing\" : \"Adding\") + \" video track:\", stream.getVideoTracks()[0]);\n\t\t\t\t\tvar videoTransceiver = null;\n\t\t\t\t\tvar transceivers = config.pc.getTransceivers();\n\t\t\t\t\tif(transceivers && transceivers.length > 0) {\n\t\t\t\t\t\tfor(var t of transceivers) {\n\t\t\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"video\") ||\n\t\t\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"video\")) {\n\t\t\t\t\t\t\t\tvideoTransceiver = t;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(videoTransceiver && videoTransceiver.sender) {\n\t\t\t\t\t\tvideoTransceiver.sender.replaceTrack(stream.getVideoTracks()[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig.pc.addTrack(stream.getVideoTracks()[0], stream);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tJanus.log((media.replaceVideo ? \"Replacing\" : \"Adding\") + \" video track:\", stream.getVideoTracks()[0]);\n\t\t\t\t\tconfig.pc.addTrack(stream.getVideoTracks()[0], stream);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// If we still need to create a PeerConnection, let's do that\n\t\tif(!config.pc) {\n\t\t\tvar pc_config = {\"iceServers\": iceServers, \"iceTransportPolicy\": iceTransportPolicy, \"bundlePolicy\": bundlePolicy};\n\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"chrome\") {\n\t\t\t\t// For Chrome versions before 72, we force a plan-b semantic, and unified-plan otherwise\n\t\t\t\tpc_config[\"sdpSemantics\"] = (Janus.webRTCAdapter.browserDetails.version < 72) ? \"plan-b\" : \"unified-plan\";\n\t\t\t}\n\t\t\tvar pc_constraints = {\n\t\t\t\t\"optional\": [{\"DtlsSrtpKeyAgreement\": true}]\n\t\t\t};\n\t\t\tif(ipv6Support) {\n\t\t\t\tpc_constraints.optional.push({\"googIPv6\":true});\n\t\t\t}\n\t\t\t// Any custom constraint to add?\n\t\t\tif(callbacks.rtcConstraints && typeof callbacks.rtcConstraints === 'object') {\n\t\t\t\tJanus.debug(\"Adding custom PeerConnection constraints:\", callbacks.rtcConstraints);\n\t\t\t\tfor(var i in callbacks.rtcConstraints) {\n\t\t\t\t\tpc_constraints.optional.push(callbacks.rtcConstraints[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"edge\") {\n\t\t\t\t// This is Edge, enable BUNDLE explicitly\n\t\t\t\tpc_config.bundlePolicy = \"max-bundle\";\n\t\t\t}\n\t\t\t// Check if a sender or receiver transform has been provided\n\t\t\tif(RTCRtpSender && (RTCRtpSender.prototype.createEncodedStreams ||\n\t\t\t\t\t(RTCRtpSender.prototype.createEncodedAudioStreams &&\n\t\t\t\t\tRTCRtpSender.prototype.createEncodedVideoStreams)) &&\n\t\t\t\t\t(callbacks.senderTransforms || callbacks.receiverTransforms)) {\n\t\t\t\tconfig.senderTransforms = callbacks.senderTransforms;\n\t\t\t\tconfig.receiverTransforms = callbacks.receiverTransforms;\n\t\t\t\tpc_config[\"forceEncodedAudioInsertableStreams\"] = true;\n\t\t\t\tpc_config[\"forceEncodedVideoInsertableStreams\"] = true;\n\t\t\t\tpc_config[\"encodedInsertableStreams\"] = true;\n\t\t\t}\n\t\t\tJanus.log(\"Creating PeerConnection\");\n\t\t\tJanus.debug(pc_constraints);\n\t\t\tconfig.pc = new RTCPeerConnection(pc_config, pc_constraints);\n\t\t\tJanus.debug(config.pc);\n\t\t\tif(config.pc.getStats) {\t// FIXME\n\t\t\t\tconfig.volume = {};\n\t\t\t\tconfig.bitrate.value = \"0 kbits/sec\";\n\t\t\t}\n\t\t\tJanus.log(\"Preparing local SDP and gathering candidates (trickle=\" + config.trickle + \")\");\n\t\t\tconfig.pc.oniceconnectionstatechange = function(e) {\n\t\t\t\tif(config.pc)\n\t\t\t\t\tpluginHandle.iceState(config.pc.iceConnectionState);\n\t\t\t};\n\t\t\tconfig.pc.onicecandidate = function(event) {\n\t\t\t\tif (!event.candidate ||\n\t\t\t\t\t\t(Janus.webRTCAdapter.browserDetails.browser === 'edge' && event.candidate.candidate.indexOf('endOfCandidates') > 0)) {\n\t\t\t\t\tJanus.log(\"End of candidates.\");\n\t\t\t\t\tconfig.iceDone = true;\n\t\t\t\t\tif(config.trickle === true) {\n\t\t\t\t\t\t// Notify end of candidates\n\t\t\t\t\t\tsendTrickleCandidate(handleId, {\"completed\": true});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// No trickle, time to send the complete SDP (including all candidates)\n\t\t\t\t\t\tsendSDP(handleId, callbacks);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// JSON.stringify doesn't work on some WebRTC objects anymore\n\t\t\t\t\t// See https://code.google.com/p/chromium/issues/detail?id=467366\n\t\t\t\t\tvar candidate = {\n\t\t\t\t\t\t\"candidate\": event.candidate.candidate,\n\t\t\t\t\t\t\"sdpMid\": event.candidate.sdpMid,\n\t\t\t\t\t\t\"sdpMLineIndex\": event.candidate.sdpMLineIndex\n\t\t\t\t\t};\n\t\t\t\t\tif(config.trickle === true) {\n\t\t\t\t\t\t// Send candidate\n\t\t\t\t\t\tsendTrickleCandidate(handleId, candidate);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tconfig.pc.ontrack = function(event) {\n\t\t\t\tJanus.log(\"Handling Remote Track\");\n\t\t\t\tJanus.debug(event);\n\t\t\t\tif(!event.streams)\n\t\t\t\t\treturn;\n\t\t\t\tconfig.remoteStream = event.streams[0];\n\t\t\t\tpluginHandle.onremotestream(config.remoteStream);\n\t\t\t\tif(event.track.onended)\n\t\t\t\t\treturn;\n\t\t\t\tif(config.receiverTransforms) {\n\t\t\t\t\tvar receiverStreams = null;\n\t\t\t\t\tif(RTCRtpSender.prototype.createEncodedStreams) {\n\t\t\t\t\t\treceiverStreams = event.receiver.createEncodedStreams();\n\t\t\t\t\t} else if(RTCRtpSender.prototype.createAudioEncodedStreams || RTCRtpSender.prototype.createEncodedVideoStreams) {\n\t\t\t\t\t\tif(event.track.kind === \"audio\" && config.receiverTransforms[\"audio\"]) {\n\t\t\t\t\t\t\treceiverStreams = event.receiver.createEncodedAudioStreams();\n\t\t\t\t\t\t} else if(event.track.kind === \"video\" && config.receiverTransforms[\"video\"]) {\n\t\t\t\t\t\t\treceiverStreams = event.receiver.createEncodedVideoStreams();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(receiverStreams) {\n\t\t\t\t\t\tconsole.log(receiverStreams);\n\t\t\t\t\t\tif(receiverStreams.readableStream && receiverStreams.writableStream) {\n\t\t\t\t\t\t\treceiverStreams.readableStream\n\t\t\t\t\t\t\t\t.pipeThrough(config.receiverTransforms[event.track.kind])\n\t\t\t\t\t\t\t\t.pipeTo(receiverStreams.writableStream);\n\t\t\t\t\t\t} else if(receiverStreams.readable && receiverStreams.writable) {\n\t\t\t\t\t\t\treceiverStreams.readable\n\t\t\t\t\t\t\t\t.pipeThrough(config.receiverTransforms[event.track.kind])\n\t\t\t\t\t\t\t\t.pipeTo(receiverStreams.writable);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar trackMutedTimeoutId = null;\n\t\t\t\tJanus.log(\"Adding onended callback to track:\", event.track);\n\t\t\t\tevent.track.onended = function(ev) {\n\t\t\t\t\tJanus.log(\"Remote track removed:\", ev);\n\t\t\t\t\tif(config.remoteStream) {\n\t\t\t\t\t\tclearTimeout(trackMutedTimeoutId);\n\t\t\t\t\t\tconfig.remoteStream.removeTrack(ev.target);\n\t\t\t\t\t\tpluginHandle.onremotestream(config.remoteStream);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tevent.track.onmute = function(ev) {\n\t\t\t\t\tJanus.log(\"Remote track muted:\", ev);\n\t\t\t\t\tif(config.remoteStream && trackMutedTimeoutId == null) {\n\t\t\t\t\t\ttrackMutedTimeoutId = setTimeout(function() {\n\t\t\t\t\t\t\tJanus.log(\"Removing remote track\");\n\t\t\t\t\t\t\tif (config.remoteStream) {\n\t\t\t\t\t\t\t\tconfig.remoteStream.removeTrack(ev.target);\n\t\t\t\t\t\t\t\tpluginHandle.onremotestream(config.remoteStream);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttrackMutedTimeoutId = null;\n\t\t\t\t\t\t// Chrome seems to raise mute events only at multiples of 834ms;\n\t\t\t\t\t\t// we set the timeout to three times this value (rounded to 840ms)\n\t\t\t\t\t\t}, 3 * 840);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tevent.track.onunmute = function(ev) {\n\t\t\t\t\tJanus.log(\"Remote track flowing again:\", ev);\n\t\t\t\t\tif(trackMutedTimeoutId != null) {\n\t\t\t\t\t\tclearTimeout(trackMutedTimeoutId);\n\t\t\t\t\t\ttrackMutedTimeoutId = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconfig.remoteStream.addTrack(ev.target);\n\t\t\t\t\t\t\tpluginHandle.onremotestream(config.remoteStream);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\t\tif(addTracks && stream) {\n\t\t\tJanus.log('Adding local stream');\n\t\t\tvar simulcast2 = (callbacks.simulcast2 === true);\n\t\t\tstream.getTracks().forEach(function(track) {\n\t\t\t\tJanus.log('Adding local track:', track);\n\t\t\t\tvar sender = null;\n\t\t\t\tif(!simulcast2 || track.kind === 'audio') {\n\t\t\t\t\tsender = config.pc.addTrack(track, stream);\n\t\t\t\t} else {\n\t\t\t\t\tJanus.log('Enabling rid-based simulcasting:', track);\n\t\t\t\t\tvar maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);\n\t\t\t\t\tvar tr = config.pc.addTransceiver(track, {\n\t\t\t\t\t\tdirection: \"sendrecv\",\n\t\t\t\t\t\tstreams: [stream],\n\t\t\t\t\t\tsendEncodings: callbacks.sendEncodings || [\n\t\t\t\t\t\t\t{ rid: \"h\", active: true, maxBitrate: maxBitrates.high },\n\t\t\t\t\t\t\t{ rid: \"m\", active: true, maxBitrate: maxBitrates.medium, scaleResolutionDownBy: 2 },\n\t\t\t\t\t\t\t{ rid: \"l\", active: true, maxBitrate: maxBitrates.low, scaleResolutionDownBy: 4 }\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t\tif(tr)\n\t\t\t\t\t\tsender = tr.sender;\n\t\t\t\t}\n\t\t\t\t// Check if insertable streams are involved\n\t\t\t\tif(sender && config.senderTransforms) {\n\t\t\t\t\tvar senderStreams = null;\n\t\t\t\t\tif(RTCRtpSender.prototype.createEncodedStreams) {\n\t\t\t\t\t\tsenderStreams = sender.createEncodedStreams();\n\t\t\t\t\t} else if(RTCRtpSender.prototype.createAudioEncodedStreams || RTCRtpSender.prototype.createEncodedVideoStreams) {\n\t\t\t\t\t\tif(sender.track.kind === \"audio\" && config.senderTransforms[\"audio\"]) {\n\t\t\t\t\t\t\tsenderStreams = sender.createEncodedAudioStreams();\n\t\t\t\t\t\t} else if(sender.track.kind === \"video\" && config.senderTransforms[\"video\"]) {\n\t\t\t\t\t\t\tsenderStreams = sender.createEncodedVideoStreams();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(senderStreams) {\n\t\t\t\t\t\tconsole.log(senderStreams);\n\t\t\t\t\t\tif(senderStreams.readableStream && senderStreams.writableStream) {\n\t\t\t\t\t\t\tsenderStreams.readableStream\n\t\t\t\t\t\t\t\t.pipeThrough(config.senderTransforms[sender.track.kind])\n\t\t\t\t\t\t\t\t.pipeTo(senderStreams.writableStream);\n\t\t\t\t\t\t} else if(senderStreams.readable && senderStreams.writable) {\n\t\t\t\t\t\t\tsenderStreams.readable\n\t\t\t\t\t\t\t\t.pipeThrough(config.senderTransforms[sender.track.kind])\n\t\t\t\t\t\t\t\t.pipeTo(senderStreams.writable);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// Any data channel to create?\n\t\tif(isDataEnabled(media) && !config.dataChannel[Janus.dataChanDefaultLabel]) {\n\t\t\tJanus.log(\"Creating default data channel\");\n\t\t\tcreateDataChannel(handleId, Janus.dataChanDefaultLabel, null, false);\n\t\t\tconfig.pc.ondatachannel = function(event) {\n\t\t\t\tJanus.log(\"Data channel created by Janus:\", event);\n\t\t\t\tcreateDataChannel(handleId, event.channel.label, event.channel.protocol, event.channel);\n\t\t\t};\n\t\t}\n\t\t// If there's a new local stream, let's notify the application\n\t\tif(config.myStream) {\n\t\t\tpluginHandle.onlocalstream(config.myStream);\n\t\t}\n\t\t// Create offer/answer now\n\t\tif(!jsep) {\n\t\t\tcreateOffer(handleId, media, callbacks);\n\t\t} else {\n\t\t\tconfig.pc.setRemoteDescription(jsep)\n\t\t\t\t.then(function() {\n\t\t\t\t\tJanus.log(\"Remote description accepted!\");\n\t\t\t\t\tconfig.remoteSdp = jsep.sdp;\n\t\t\t\t\t// Any trickle candidate we cached?\n\t\t\t\t\tif(config.candidates && config.candidates.length > 0) {\n\t\t\t\t\t\tfor(var i = 0; i< config.candidates.length; i++) {\n\t\t\t\t\t\t\tvar candidate = config.candidates[i];\n\t\t\t\t\t\t\tJanus.debug(\"Adding remote candidate:\", candidate);\n\t\t\t\t\t\t\tif(!candidate || candidate.completed === true) {\n\t\t\t\t\t\t\t\t// end-of-candidates\n\t\t\t\t\t\t\t\tconfig.pc.addIceCandidate(Janus.endOfCandidates);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// New candidate\n\t\t\t\t\t\t\t\tconfig.pc.addIceCandidate(candidate);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconfig.candidates = [];\n\t\t\t\t\t}\n\t\t\t\t\t// Create the answer now\n\t\t\t\t\tcreateAnswer(handleId, media, callbacks);\n\t\t\t\t}, callbacks.error);\n\t\t}\n\t}\n\n\tfunction prepareWebrtc(handleId, offer, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : webrtcError;\n\t\tvar jsep = callbacks.jsep;\n\t\tif(offer && jsep) {\n\t\t\tJanus.error(\"Provided a JSEP to a createOffer\");\n\t\t\tcallbacks.error(\"Provided a JSEP to a createOffer\");\n\t\t\treturn;\n\t\t} else if(!offer && (!jsep || !jsep.type || !jsep.sdp)) {\n\t\t\tJanus.error(\"A valid JSEP is required for createAnswer\");\n\t\t\tcallbacks.error(\"A valid JSEP is required for createAnswer\");\n\t\t\treturn;\n\t\t}\n\t\t/* Check that callbacks.media is a (not null) Object */\n\t\tcallbacks.media = (typeof callbacks.media === 'object' && callbacks.media) ? callbacks.media : { audio: true, video: true };\n\t\tvar media = callbacks.media;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tconfig.trickle = isTrickleEnabled(callbacks.trickle);\n\t\t// Are we updating a session?\n\t\tif(!config.pc) {\n\t\t\t// Nope, new PeerConnection\n\t\t\tmedia.update = false;\n\t\t\tmedia.keepAudio = false;\n\t\t\tmedia.keepVideo = false;\n\t\t} else {\n\t\t\tJanus.log(\"Updating existing media session\");\n\t\t\tmedia.update = true;\n\t\t\t// Check if there's anything to add/remove/replace, or if we\n\t\t\t// can go directly to preparing the new SDP offer or answer\n\t\t\tif(callbacks.stream) {\n\t\t\t\t// External stream: is this the same as the one we were using before?\n\t\t\t\tif(callbacks.stream !== config.myStream) {\n\t\t\t\t\tJanus.log(\"Renegotiation involves a new external stream\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Check if there are changes on audio\n\t\t\t\tif(media.addAudio) {\n\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\tmedia.replaceAudio = false;\n\t\t\t\t\tmedia.removeAudio = false;\n\t\t\t\t\tmedia.audioSend = true;\n\t\t\t\t\tif(config.myStream && config.myStream.getAudioTracks() && config.myStream.getAudioTracks().length) {\n\t\t\t\t\t\tJanus.error(\"Can't add audio stream, there already is one\");\n\t\t\t\t\t\tcallbacks.error(\"Can't add audio stream, there already is one\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else if(media.removeAudio) {\n\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\tmedia.replaceAudio = false;\n\t\t\t\t\tmedia.addAudio = false;\n\t\t\t\t\tmedia.audioSend = false;\n\t\t\t\t} else if(media.replaceAudio) {\n\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\tmedia.addAudio = false;\n\t\t\t\t\tmedia.removeAudio = false;\n\t\t\t\t\tmedia.audioSend = true;\n\t\t\t\t}\n\t\t\t\tif(!config.myStream) {\n\t\t\t\t\t// No media stream: if we were asked to replace, it's actually an \"add\"\n\t\t\t\t\tif(media.replaceAudio) {\n\t\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\t\tmedia.replaceAudio = false;\n\t\t\t\t\t\tmedia.addAudio = true;\n\t\t\t\t\t\tmedia.audioSend = true;\n\t\t\t\t\t}\n\t\t\t\t\tif(isAudioSendEnabled(media)) {\n\t\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\t\tmedia.addAudio = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {\n\t\t\t\t\t\t// No audio track: if we were asked to replace, it's actually an \"add\"\n\t\t\t\t\t\tif(media.replaceAudio) {\n\t\t\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\t\t\tmedia.replaceAudio = false;\n\t\t\t\t\t\t\tmedia.addAudio = true;\n\t\t\t\t\t\t\tmedia.audioSend = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(isAudioSendEnabled(media)) {\n\t\t\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\t\t\tmedia.addAudio = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// We have an audio track: should we keep it as it is?\n\t\t\t\t\t\tif(isAudioSendEnabled(media) &&\n\t\t\t\t\t\t\t\t!media.removeAudio && !media.replaceAudio) {\n\t\t\t\t\t\t\tmedia.keepAudio = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Check if there are changes on video\n\t\t\t\tif(media.addVideo) {\n\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\tmedia.replaceVideo = false;\n\t\t\t\t\tmedia.removeVideo = false;\n\t\t\t\t\tmedia.videoSend = true;\n\t\t\t\t\tif(config.myStream && config.myStream.getVideoTracks() && config.myStream.getVideoTracks().length) {\n\t\t\t\t\t\tJanus.error(\"Can't add video stream, there already is one\");\n\t\t\t\t\t\tcallbacks.error(\"Can't add video stream, there already is one\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else if(media.removeVideo) {\n\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\tmedia.replaceVideo = false;\n\t\t\t\t\tmedia.addVideo = false;\n\t\t\t\t\tmedia.videoSend = false;\n\t\t\t\t} else if(media.replaceVideo) {\n\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\tmedia.addVideo = false;\n\t\t\t\t\tmedia.removeVideo = false;\n\t\t\t\t\tmedia.videoSend = true;\n\t\t\t\t}\n\t\t\t\tif(!config.myStream) {\n\t\t\t\t\t// No media stream: if we were asked to replace, it's actually an \"add\"\n\t\t\t\t\tif(media.replaceVideo) {\n\t\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\t\tmedia.replaceVideo = false;\n\t\t\t\t\t\tmedia.addVideo = true;\n\t\t\t\t\t\tmedia.videoSend = true;\n\t\t\t\t\t}\n\t\t\t\t\tif(isVideoSendEnabled(media)) {\n\t\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\t\tmedia.addVideo = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {\n\t\t\t\t\t\t// No video track: if we were asked to replace, it's actually an \"add\"\n\t\t\t\t\t\tif(media.replaceVideo) {\n\t\t\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\t\t\tmedia.replaceVideo = false;\n\t\t\t\t\t\t\tmedia.addVideo = true;\n\t\t\t\t\t\t\tmedia.videoSend = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(isVideoSendEnabled(media)) {\n\t\t\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\t\t\tmedia.addVideo = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// We have a video track: should we keep it as it is?\n\t\t\t\t\t\tif(isVideoSendEnabled(media) && !media.removeVideo && !media.replaceVideo) {\n\t\t\t\t\t\t\tmedia.keepVideo = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Data channels can only be added\n\t\t\t\tif(media.addData) {\n\t\t\t\t\tmedia.data = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If we're updating and keeping all tracks, let's skip the getUserMedia part\n\t\t\tif((isAudioSendEnabled(media) && media.keepAudio) &&\n\t\t\t\t\t(isVideoSendEnabled(media) && media.keepVideo)) {\n\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, config.myStream);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// If we're updating, check if we need to remove/replace one of the tracks\n\t\tif(media.update && !config.streamExternal) {\n\t\t\tif(media.removeAudio || media.replaceAudio) {\n\t\t\t\tif(config.myStream && config.myStream.getAudioTracks() && config.myStream.getAudioTracks().length) {\n\t\t\t\t\tvar at = config.myStream.getAudioTracks()[0];\n\t\t\t\t\tJanus.log(\"Removing audio track:\", at);\n\t\t\t\t\tconfig.myStream.removeTrack(at);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tat.stop();\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t}\n\t\t\t\tif(config.pc.getSenders() && config.pc.getSenders().length) {\n\t\t\t\t\tvar ra = true;\n\t\t\t\t\tif(media.replaceAudio && Janus.unifiedPlan) {\n\t\t\t\t\t\t// We can use replaceTrack\n\t\t\t\t\t\tra = false;\n\t\t\t\t\t}\n\t\t\t\t\tif(ra) {\n\t\t\t\t\t\tfor(var asnd of config.pc.getSenders()) {\n\t\t\t\t\t\t\tif(asnd && asnd.track && asnd.track.kind === \"audio\") {\n\t\t\t\t\t\t\t\tJanus.log(\"Removing audio sender:\", asnd);\n\t\t\t\t\t\t\t\tconfig.pc.removeTrack(asnd);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(media.removeVideo || media.replaceVideo) {\n\t\t\t\tif(config.myStream && config.myStream.getVideoTracks() && config.myStream.getVideoTracks().length) {\n\t\t\t\t\tvar vt = config.myStream.getVideoTracks()[0];\n\t\t\t\t\tJanus.log(\"Removing video track:\", vt);\n\t\t\t\t\tconfig.myStream.removeTrack(vt);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvt.stop();\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t}\n\t\t\t\tif(config.pc.getSenders() && config.pc.getSenders().length) {\n\t\t\t\t\tvar rv = true;\n\t\t\t\t\tif(media.replaceVideo && Janus.unifiedPlan) {\n\t\t\t\t\t\t// We can use replaceTrack\n\t\t\t\t\t\trv = false;\n\t\t\t\t\t}\n\t\t\t\t\tif(rv) {\n\t\t\t\t\t\tfor(var vsnd of config.pc.getSenders()) {\n\t\t\t\t\t\t\tif(vsnd && vsnd.track && vsnd.track.kind === \"video\") {\n\t\t\t\t\t\t\t\tJanus.log(\"Removing video sender:\", vsnd);\n\t\t\t\t\t\t\t\tconfig.pc.removeTrack(vsnd);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Was a MediaStream object passed, or do we need to take care of that?\n\t\tif(callbacks.stream) {\n\t\t\tvar stream = callbacks.stream;\n\t\t\tJanus.log(\"MediaStream provided by the application\");\n\t\t\tJanus.debug(stream);\n\t\t\t// If this is an update, let's check if we need to release the previous stream\n\t\t\tif(media.update) {\n\t\t\t\tif(config.myStream && config.myStream !== callbacks.stream && !config.streamExternal) {\n\t\t\t\t\t// We're replacing a stream we captured ourselves with an external one\n\t\t\t\t\tJanus.stopAllTracks(config.myStream);\n\t\t\t\t\tconfig.myStream = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Skip the getUserMedia part\n\t\t\tconfig.streamExternal = true;\n\t\t\tpluginHandle.consentDialog(false);\n\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\treturn;\n\t\t}\n\t\tif(isAudioSendEnabled(media) || isVideoSendEnabled(media)) {\n\t\t\tif(!Janus.isGetUserMediaAvailable()) {\n\t\t\t\tcallbacks.error(\"getUserMedia not available\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar constraints = { mandatory: {}, optional: []};\n\t\t\tpluginHandle.consentDialog(true);\n\t\t\tvar audioSupport = isAudioSendEnabled(media);\n\t\t\tif(audioSupport && media && typeof media.audio === 'object')\n\t\t\t\taudioSupport = media.audio;\n\t\t\tvar videoSupport = isVideoSendEnabled(media);\n\t\t\tif(videoSupport && media) {\n\t\t\t\tvar simulcast = (callbacks.simulcast === true);\n\t\t\t\tvar simulcast2 = (callbacks.simulcast2 === true);\n\t\t\t\tif((simulcast || simulcast2) && !jsep && !media.video)\n\t\t\t\t\tmedia.video = \"hires\";\n\t\t\t\tif(media.video && media.video != 'screen' && media.video != 'window') {\n\t\t\t\t\tif(typeof media.video === 'object') {\n\t\t\t\t\t\tvideoSupport = media.video;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar width = 0;\n\t\t\t\t\t\tvar height = 0, maxHeight = 0;\n\t\t\t\t\t\tif(media.video === 'lowres') {\n\t\t\t\t\t\t\t// Small resolution, 4:3\n\t\t\t\t\t\t\theight = 240;\n\t\t\t\t\t\t\tmaxHeight = 240;\n\t\t\t\t\t\t\twidth = 320;\n\t\t\t\t\t\t} else if(media.video === 'lowres-16:9') {\n\t\t\t\t\t\t\t// Small resolution, 16:9\n\t\t\t\t\t\t\theight = 180;\n\t\t\t\t\t\t\tmaxHeight = 180;\n\t\t\t\t\t\t\twidth = 320;\n\t\t\t\t\t\t} else if(media.video === 'hires' || media.video === 'hires-16:9' || media.video === 'hdres') {\n\t\t\t\t\t\t\t// High(HD) resolution is only 16:9\n\t\t\t\t\t\t\theight = 720;\n\t\t\t\t\t\t\tmaxHeight = 720;\n\t\t\t\t\t\t\twidth = 1280;\n\t\t\t\t\t\t} else if(media.video === 'fhdres') {\n\t\t\t\t\t\t\t// Full HD resolution is only 16:9\n\t\t\t\t\t\t\theight = 1080;\n\t\t\t\t\t\t\tmaxHeight = 1080;\n\t\t\t\t\t\t\twidth = 1920;\n\t\t\t\t\t\t} else if(media.video === '4kres') {\n\t\t\t\t\t\t\t// 4K resolution is only 16:9\n\t\t\t\t\t\t\theight = 2160;\n\t\t\t\t\t\t\tmaxHeight = 2160;\n\t\t\t\t\t\t\twidth = 3840;\n\t\t\t\t\t\t} else if(media.video === 'stdres') {\n\t\t\t\t\t\t\t// Normal resolution, 4:3\n\t\t\t\t\t\t\theight = 480;\n\t\t\t\t\t\t\tmaxHeight = 480;\n\t\t\t\t\t\t\twidth = 640;\n\t\t\t\t\t\t} else if(media.video === 'stdres-16:9') {\n\t\t\t\t\t\t\t// Normal resolution, 16:9\n\t\t\t\t\t\t\theight = 360;\n\t\t\t\t\t\t\tmaxHeight = 360;\n\t\t\t\t\t\t\twidth = 640;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tJanus.log(\"Default video setting is stdres 4:3\");\n\t\t\t\t\t\t\theight = 480;\n\t\t\t\t\t\t\tmaxHeight = 480;\n\t\t\t\t\t\t\twidth = 640;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Adding media constraint:\", media.video);\n\t\t\t\t\t\tvideoSupport = {\n\t\t\t\t\t\t\t'height': {'ideal': height},\n\t\t\t\t\t\t\t'width': {'ideal': width}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tJanus.log(\"Adding video constraint:\", videoSupport);\n\t\t\t\t\t}\n\t\t\t\t} else if(media.video === 'screen' || media.video === 'window') {\n\t\t\t\t\tif(navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {\n\t\t\t\t\t\t// The new experimental getDisplayMedia API is available, let's use that\n\t\t\t\t\t\t// https://groups.google.com/forum/#!topic/discuss-webrtc/Uf0SrR4uxzk\n\t\t\t\t\t\t// https://webrtchacks.com/chrome-screensharing-getdisplaymedia/\n\t\t\t\t\t\tconstraints.video = {};\n\t\t\t\t\t\tif(media.screenshareFrameRate) {\n\t\t\t\t\t\t\tconstraints.video.frameRate = media.screenshareFrameRate;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(media.screenshareHeight) {\n\t\t\t\t\t\t\tconstraints.video.height = media.screenshareHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(media.screenshareWidth) {\n\t\t\t\t\t\t\tconstraints.video.width = media.screenshareWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconstraints.audio = media.captureDesktopAudio;\n\t\t\t\t\t\tnavigator.mediaDevices.getDisplayMedia(constraints)\n\t\t\t\t\t\t\t.then(function(stream) {\n\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\tif(isAudioSendEnabled(media) && !media.keepAudio) {\n\t\t\t\t\t\t\t\t\tnavigator.mediaDevices.getUserMedia({ audio: true, video: false })\n\t\t\t\t\t\t\t\t\t.then(function (audioStream) {\n\t\t\t\t\t\t\t\t\t\tstream.addTrack(audioStream.getAudioTracks()[0]);\n\t\t\t\t\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, function (error) {\n\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\tcallbacks.error(error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// We're going to try and use the extension for Chrome 34+, the old approach\n\t\t\t\t\t// for older versions of Chrome, or the experimental support in Firefox 33+\n\t\t\t\t\tfunction callbackUserMedia (error, stream) {\n\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\tif(error) {\n\t\t\t\t\t\t\tcallbacks.error(error);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfunction getScreenMedia(constraints, gsmCallback, useAudio) {\n\t\t\t\t\t\tJanus.log(\"Adding media constraint (screen capture)\");\n\t\t\t\t\t\tJanus.debug(constraints);\n\t\t\t\t\t\tnavigator.mediaDevices.getUserMedia(constraints)\n\t\t\t\t\t\t\t.then(function(stream) {\n\t\t\t\t\t\t\t\tif(useAudio) {\n\t\t\t\t\t\t\t\t\tnavigator.mediaDevices.getUserMedia({ audio: true, video: false })\n\t\t\t\t\t\t\t\t\t.then(function (audioStream) {\n\t\t\t\t\t\t\t\t\t\tstream.addTrack(audioStream.getAudioTracks()[0]);\n\t\t\t\t\t\t\t\t\t\tgsmCallback(null, stream);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tgsmCallback(null, stream);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(function(error) { pluginHandle.consentDialog(false); gsmCallback(error); });\n\t\t\t\t\t}\n\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === 'chrome') {\n\t\t\t\t\t\tvar chromever = Janus.webRTCAdapter.browserDetails.version;\n\t\t\t\t\t\tvar maxver = 33;\n\t\t\t\t\t\tif(window.navigator.userAgent.match('Linux'))\n\t\t\t\t\t\t\tmaxver = 35;\t// \"known\" crash in chrome 34 and 35 on linux\n\t\t\t\t\t\tif(chromever >= 26 && chromever <= maxver) {\n\t\t\t\t\t\t\t// Chrome 26->33 requires some awkward chrome://flags manipulation\n\t\t\t\t\t\t\tconstraints = {\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\tmandatory: {\n\t\t\t\t\t\t\t\t\t\tgoogLeakyBucket: true,\n\t\t\t\t\t\t\t\t\t\tmaxWidth: window.screen.width,\n\t\t\t\t\t\t\t\t\t\tmaxHeight: window.screen.height,\n\t\t\t\t\t\t\t\t\t\tminFrameRate: media.screenshareFrameRate,\n\t\t\t\t\t\t\t\t\t\tmaxFrameRate: media.screenshareFrameRate,\n\t\t\t\t\t\t\t\t\t\tchromeMediaSource: 'screen'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taudio: isAudioSendEnabled(media) && !media.keepAudio\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tgetScreenMedia(constraints, callbackUserMedia);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Chrome 34+ requires an extension\n\t\t\t\t\t\t\tJanus.extension.getScreen(function (error, sourceId) {\n\t\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\t\treturn callbacks.error(error);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconstraints = {\n\t\t\t\t\t\t\t\t\taudio: false,\n\t\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\t\tmandatory: {\n\t\t\t\t\t\t\t\t\t\t\tchromeMediaSource: 'desktop',\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth: window.screen.width,\n\t\t\t\t\t\t\t\t\t\t\tmaxHeight: window.screen.height,\n\t\t\t\t\t\t\t\t\t\t\tminFrameRate: media.screenshareFrameRate,\n\t\t\t\t\t\t\t\t\t\t\tmaxFrameRate: media.screenshareFrameRate,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\toptional: [\n\t\t\t\t\t\t\t\t\t\t\t{googLeakyBucket: true},\n\t\t\t\t\t\t\t\t\t\t\t{googTemporalLayeredScreencast: true}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tconstraints.video.mandatory.chromeMediaSourceId = sourceId;\n\t\t\t\t\t\t\t\tgetScreenMedia(constraints, callbackUserMedia,\n\t\t\t\t\t\t\t\t\tisAudioSendEnabled(media) && !media.keepAudio);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if(Janus.webRTCAdapter.browserDetails.browser === 'firefox') {\n\t\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.version >= 33) {\n\t\t\t\t\t\t\t// Firefox 33+ has experimental support for screen sharing\n\t\t\t\t\t\t\tconstraints = {\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\tmozMediaSource: media.video,\n\t\t\t\t\t\t\t\t\tmediaSource: media.video\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taudio: isAudioSendEnabled(media) && !media.keepAudio\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tgetScreenMedia(constraints, function (err, stream) {\n\t\t\t\t\t\t\t\tcallbackUserMedia(err, stream);\n\t\t\t\t\t\t\t\t// Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=1045810\n\t\t\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\t\t\tvar lastTime = stream.currentTime;\n\t\t\t\t\t\t\t\t\tvar polly = window.setInterval(function () {\n\t\t\t\t\t\t\t\t\t\tif(!stream)\n\t\t\t\t\t\t\t\t\t\t\twindow.clearInterval(polly);\n\t\t\t\t\t\t\t\t\t\tif(stream.currentTime == lastTime) {\n\t\t\t\t\t\t\t\t\t\t\twindow.clearInterval(polly);\n\t\t\t\t\t\t\t\t\t\t\tif(stream.onended) {\n\t\t\t\t\t\t\t\t\t\t\t\tstream.onended();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tlastTime = stream.currentTime;\n\t\t\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar error = new Error('NavigatorUserMediaError');\n\t\t\t\t\t\t\terror.name = 'Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)';\n\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\tcallbacks.error(error);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If we got here, we're not screensharing\n\t\t\tif(!media || media.video !== 'screen') {\n\t\t\t\t// Check whether all media sources are actually available or not\n\t\t\t\tnavigator.mediaDevices.enumerateDevices().then(function(devices) {\n\t\t\t\t\tvar audioExist = devices.some(function(device) {\n\t\t\t\t\t\treturn device.kind === 'audioinput';\n\t\t\t\t\t}),\n\t\t\t\t\tvideoExist = isScreenSendEnabled(media) || devices.some(function(device) {\n\t\t\t\t\t\treturn device.kind === 'videoinput';\n\t\t\t\t\t});\n\n\t\t\t\t\t// Check whether a missing device is really a problem\n\t\t\t\t\tvar audioSend = isAudioSendEnabled(media);\n\t\t\t\t\tvar videoSend = isVideoSendEnabled(media);\n\t\t\t\t\tvar needAudioDevice = isAudioSendRequired(media);\n\t\t\t\t\tvar needVideoDevice = isVideoSendRequired(media);\n\t\t\t\t\tif(audioSend || videoSend || needAudioDevice || needVideoDevice) {\n\t\t\t\t\t\t// We need to send either audio or video\n\t\t\t\t\t\tvar haveAudioDevice = audioSend ? audioExist : false;\n\t\t\t\t\t\tvar haveVideoDevice = videoSend ? videoExist : false;\n\t\t\t\t\t\tif(!haveAudioDevice && !haveVideoDevice) {\n\t\t\t\t\t\t\t// FIXME Should we really give up, or just assume recvonly for both?\n\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\tcallbacks.error('No capture device found');\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} else if(!haveAudioDevice && needAudioDevice) {\n\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\tcallbacks.error('Audio capture is required, but no capture device found');\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} else if(!haveVideoDevice && needVideoDevice) {\n\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\tcallbacks.error('Video capture is required, but no capture device found');\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar gumConstraints = {\n\t\t\t\t\t\taudio: (audioExist && !media.keepAudio) ? audioSupport : false,\n\t\t\t\t\t\tvideo: (videoExist && !media.keepVideo) ? videoSupport : false\n\t\t\t\t\t};\n\t\t\t\t\tJanus.debug(\"getUserMedia constraints\", gumConstraints);\n\t\t\t\t\tif (!gumConstraints.audio && !gumConstraints.video) {\n\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnavigator.mediaDevices.getUserMedia(gumConstraints)\n\t\t\t\t\t\t\t.then(function(stream) {\n\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t\t\t}).catch(function(error) {\n\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\tcallbacks.error({code: error.code, name: error.name, message: error.message});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\tcallbacks.error(error);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\t// No need to do a getUserMedia, create offer/answer right away\n\t\t\tstreamsDone(handleId, jsep, media, callbacks);\n\t\t}\n\t}\n\n\tfunction prepareWebrtcPeer(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : webrtcError;\n\t\tvar jsep = callbacks.jsep;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(jsep) {\n\t\t\tif(!config.pc) {\n\t\t\t\tJanus.warn(\"Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep\");\n\t\t\t\tcallbacks.error(\"No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconfig.pc.setRemoteDescription(jsep)\n\t\t\t\t.then(function() {\n\t\t\t\t\tJanus.log(\"Remote description accepted!\");\n\t\t\t\t\tconfig.remoteSdp = jsep.sdp;\n\t\t\t\t\t// Any trickle candidate we cached?\n\t\t\t\t\tif(config.candidates && config.candidates.length > 0) {\n\t\t\t\t\t\tfor(var i = 0; i< config.candidates.length; i++) {\n\t\t\t\t\t\t\tvar candidate = config.candidates[i];\n\t\t\t\t\t\t\tJanus.debug(\"Adding remote candidate:\", candidate);\n\t\t\t\t\t\t\tif(!candidate || candidate.completed === true) {\n\t\t\t\t\t\t\t\t// end-of-candidates\n\t\t\t\t\t\t\t\tconfig.pc.addIceCandidate(Janus.endOfCandidates);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// New candidate\n\t\t\t\t\t\t\t\tconfig.pc.addIceCandidate(candidate);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconfig.candidates = [];\n\t\t\t\t\t}\n\t\t\t\t\t// Done\n\t\t\t\t\tcallbacks.success();\n\t\t\t\t}, callbacks.error);\n\t\t} else {\n\t\t\tcallbacks.error(\"Invalid JSEP\");\n\t\t}\n\t}\n\n\tfunction createOffer(handleId, media, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tcallbacks.customizeSdp = (typeof callbacks.customizeSdp == \"function\") ? callbacks.customizeSdp : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tvar simulcast = (callbacks.simulcast === true);\n\t\tif(!simulcast) {\n\t\t\tJanus.log(\"Creating offer (iceDone=\" + config.iceDone + \")\");\n\t\t} else {\n\t\t\tJanus.log(\"Creating offer (iceDone=\" + config.iceDone + \", simulcast=\" + simulcast + \")\");\n\t\t}\n\t\t// https://code.google.com/p/webrtc/issues/detail?id=3508\n\t\tvar mediaConstraints = {};\n\t\tif(Janus.unifiedPlan) {\n\t\t\t// We can use Transceivers\n\t\t\tvar audioTransceiver = null, videoTransceiver = null;\n\t\t\tvar transceivers = config.pc.getTransceivers();\n\t\t\tif(transceivers && transceivers.length > 0) {\n\t\t\t\tfor(var t of transceivers) {\n\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"audio\") ||\n\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"audio\")) {\n\t\t\t\t\t\tif(!audioTransceiver) {\n\t\t\t\t\t\t\taudioTransceiver = t;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"video\") ||\n\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"video\")) {\n\t\t\t\t\t\tif(!videoTransceiver) {\n\t\t\t\t\t\t\tvideoTransceiver = t;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Handle audio (and related changes, if any)\n\t\t\tvar audioSend = isAudioSendEnabled(media);\n\t\t\tvar audioRecv = isAudioRecvEnabled(media);\n\t\t\tif(!audioSend && !audioRecv) {\n\t\t\t\t// Audio disabled: have we removed it?\n\t\t\t\tif(media.removeAudio && audioTransceiver) {\n\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\taudioTransceiver.setDirection(\"inactive\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\taudioTransceiver.direction = \"inactive\";\n\t\t\t\t\t}\n\t\t\t\t\tJanus.log(\"Setting audio transceiver to inactive:\", audioTransceiver);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Take care of audio m-line\n\t\t\t\tif(audioSend && audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\taudioTransceiver.setDirection(\"sendrecv\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taudioTransceiver.direction = \"sendrecv\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to sendrecv:\", audioTransceiver);\n\t\t\t\t\t}\n\t\t\t\t} else if(audioSend && !audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\taudioTransceiver.setDirection(\"sendonly\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taudioTransceiver.direction = \"sendonly\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to sendonly:\", audioTransceiver);\n\t\t\t\t\t}\n\t\t\t\t} else if(!audioSend && audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\taudioTransceiver.setDirection(\"recvonly\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taudioTransceiver.direction = \"recvonly\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to recvonly:\", audioTransceiver);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// In theory, this is the only case where we might not have a transceiver yet\n\t\t\t\t\t\taudioTransceiver = config.pc.addTransceiver(\"audio\", { direction: \"recvonly\" });\n\t\t\t\t\t\tJanus.log(\"Adding recvonly audio transceiver:\", audioTransceiver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Handle video (and related changes, if any)\n\t\t\tvar videoSend = isVideoSendEnabled(media);\n\t\t\tvar videoRecv = isVideoRecvEnabled(media);\n\t\t\tif(!videoSend && !videoRecv) {\n\t\t\t\t// Video disabled: have we removed it?\n\t\t\t\tif(media.removeVideo && videoTransceiver) {\n\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\tvideoTransceiver.setDirection(\"inactive\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvideoTransceiver.direction = \"inactive\";\n\t\t\t\t\t}\n\t\t\t\t\tJanus.log(\"Setting video transceiver to inactive:\", videoTransceiver);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Take care of video m-line\n\t\t\t\tif(videoSend && videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"sendrecv\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvideoTransceiver.direction = \"sendrecv\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting video transceiver to sendrecv:\", videoTransceiver);\n\t\t\t\t\t}\n\t\t\t\t} else if(videoSend && !videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"sendonly\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvideoTransceiver.direction = \"sendonly\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting video transceiver to sendonly:\", videoTransceiver);\n\t\t\t\t\t}\n\t\t\t\t} else if(!videoSend && videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"recvonly\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvideoTransceiver.direction = \"recvonly\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting video transceiver to recvonly:\", videoTransceiver);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// In theory, this is the only case where we might not have a transceiver yet\n\t\t\t\t\t\tvideoTransceiver = config.pc.addTransceiver(\"video\", { direction: \"recvonly\" });\n\t\t\t\t\t\tJanus.log(\"Adding recvonly video transceiver:\", videoTransceiver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tmediaConstraints[\"offerToReceiveAudio\"] = isAudioRecvEnabled(media);\n\t\t\tmediaConstraints[\"offerToReceiveVideo\"] = isVideoRecvEnabled(media);\n\t\t}\n\t\tvar iceRestart = (callbacks.iceRestart === true);\n\t\tif(iceRestart) {\n\t\t\tmediaConstraints[\"iceRestart\"] = true;\n\t\t}\n\t\tJanus.debug(mediaConstraints);\n\t\t// Check if this is Firefox and we've been asked to do simulcasting\n\t\tvar sendVideo = isVideoSendEnabled(media);\n\t\tif(sendVideo && simulcast && Janus.webRTCAdapter.browserDetails.browser === \"firefox\") {\n\t\t\t// FIXME Based on https://gist.github.com/voluntas/088bc3cc62094730647b\n\t\t\tJanus.log(\"Enabling Simulcasting for Firefox (RID)\");\n\t\t\tvar sender = config.pc.getSenders().find(function(s) {return s.track.kind === \"video\"});\n\t\t\tif(sender) {\n\t\t\t\tvar parameters = sender.getParameters();\n\t\t\t\tif(!parameters) {\n\t\t\t\t\tparameters = {};\n\t\t\t\t}\n\t\t\t\tvar maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);\n\t\t\t\tparameters.encodings = callbacks.sendEncodings || [\n\t\t\t\t\t{ rid: \"h\", active: true, maxBitrate: maxBitrates.high },\n\t\t\t\t\t{ rid: \"m\", active: true, maxBitrate: maxBitrates.medium, scaleResolutionDownBy: 2 },\n\t\t\t\t\t{ rid: \"l\", active: true, maxBitrate: maxBitrates.low, scaleResolutionDownBy: 4 }\n\t\t\t\t];\n\t\t\t\tsender.setParameters(parameters);\n\t\t\t}\n\t\t}\n\t\tconfig.pc.createOffer(mediaConstraints)\n\t\t\t.then(function(offer) {\n\t\t\t\tJanus.debug(offer);\n\t\t\t\t// JSON.stringify doesn't work on some WebRTC objects anymore\n\t\t\t\t// See https://code.google.com/p/chromium/issues/detail?id=467366\n\t\t\t\tvar jsep = {\n\t\t\t\t\t\"type\": offer.type,\n\t\t\t\t\t\"sdp\": offer.sdp\n\t\t\t\t};\n\t\t\t\tcallbacks.customizeSdp(jsep);\n\t\t\t\toffer.sdp = jsep.sdp;\n\t\t\t\tJanus.log(\"Setting local description\");\n\t\t\t\tif(sendVideo && simulcast) {\n\t\t\t\t\t// This SDP munging only works with Chrome (Safari STP may support it too)\n\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"chrome\" ||\n\t\t\t\t\t\t\tJanus.webRTCAdapter.browserDetails.browser === \"safari\") {\n\t\t\t\t\t\tJanus.log(\"Enabling Simulcasting for Chrome (SDP munging)\");\n\t\t\t\t\t\toffer.sdp = mungeSdpForSimulcasting(offer.sdp);\n\t\t\t\t\t} else if(Janus.webRTCAdapter.browserDetails.browser !== \"firefox\") {\n\t\t\t\t\t\tJanus.warn(\"simulcast=true, but this is not Chrome nor Firefox, ignoring\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconfig.mySdp = offer.sdp;\n\t\t\t\tconfig.pc.setLocalDescription(offer)\n\t\t\t\t\t.catch(callbacks.error);\n\t\t\t\tconfig.mediaConstraints = mediaConstraints;\n\t\t\t\tif(!config.iceDone && !config.trickle) {\n\t\t\t\t\t// Don't do anything until we have all candidates\n\t\t\t\t\tJanus.log(\"Waiting for all candidates...\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// If transforms are present, notify Janus that the media is end-to-end encrypted\n\t\t\t\tif(config.senderTransforms || config.receiverTransforms) {\n\t\t\t\t\toffer[\"e2ee\"] = true;\n\t\t\t\t}\n\t\t\t\tcallbacks.success(offer);\n\t\t\t}, callbacks.error);\n\t}\n\n\tfunction createAnswer(handleId, media, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tcallbacks.customizeSdp = (typeof callbacks.customizeSdp == \"function\") ? callbacks.customizeSdp : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tvar simulcast = (callbacks.simulcast === true);\n\t\tif(!simulcast) {\n\t\t\tJanus.log(\"Creating answer (iceDone=\" + config.iceDone + \")\");\n\t\t} else {\n\t\t\tJanus.log(\"Creating answer (iceDone=\" + config.iceDone + \", simulcast=\" + simulcast + \")\");\n\t\t}\n\t\tvar mediaConstraints = null;\n\t\tif(Janus.unifiedPlan) {\n\t\t\t// We can use Transceivers\n\t\t\tmediaConstraints = {};\n\t\t\tvar audioTransceiver = null, videoTransceiver = null;\n\t\t\tvar transceivers = config.pc.getTransceivers();\n\t\t\tif(transceivers && transceivers.length > 0) {\n\t\t\t\tfor(var t of transceivers) {\n\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"audio\") ||\n\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"audio\")) {\n\t\t\t\t\t\tif(!audioTransceiver)\n\t\t\t\t\t\t\taudioTransceiver = t;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"video\") ||\n\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"video\")) {\n\t\t\t\t\t\tif(!videoTransceiver)\n\t\t\t\t\t\t\tvideoTransceiver = t;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Handle audio (and related changes, if any)\n\t\t\tvar audioSend = isAudioSendEnabled(media);\n\t\t\tvar audioRecv = isAudioRecvEnabled(media);\n\t\t\tif(!audioSend && !audioRecv) {\n\t\t\t\t// Audio disabled: have we removed it?\n\t\t\t\tif(media.removeAudio && audioTransceiver) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\taudioTransceiver.setDirection(\"inactive\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taudioTransceiver.direction = \"inactive\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to inactive:\", audioTransceiver);\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Take care of audio m-line\n\t\t\t\tif(audioSend && audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\t\taudioTransceiver.setDirection(\"sendrecv\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\taudioTransceiver.direction = \"sendrecv\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to sendrecv:\", audioTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if(audioSend && !audioRecv) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\t\taudioTransceiver.setDirection(\"sendonly\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\taudioTransceiver.direction = \"sendonly\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to sendonly:\", audioTransceiver);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t}\n\t\t\t\t} else if(!audioSend && audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\t\taudioTransceiver.setDirection(\"recvonly\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\taudioTransceiver.direction = \"recvonly\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to recvonly:\", audioTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// In theory, this is the only case where we might not have a transceiver yet\n\t\t\t\t\t\taudioTransceiver = config.pc.addTransceiver(\"audio\", { direction: \"recvonly\" });\n\t\t\t\t\t\tJanus.log(\"Adding recvonly audio transceiver:\", audioTransceiver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Handle video (and related changes, if any)\n\t\t\tvar videoSend = isVideoSendEnabled(media);\n\t\t\tvar videoRecv = isVideoRecvEnabled(media);\n\t\t\tif(!videoSend && !videoRecv) {\n\t\t\t\t// Video disabled: have we removed it?\n\t\t\t\tif(media.removeVideo && videoTransceiver) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"inactive\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvideoTransceiver.direction = \"inactive\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting video transceiver to inactive:\", videoTransceiver);\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Take care of video m-line\n\t\t\t\tif(videoSend && videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"sendrecv\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvideoTransceiver.direction = \"sendrecv\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting video transceiver to sendrecv:\", videoTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if(videoSend && !videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"sendonly\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvideoTransceiver.direction = \"sendonly\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting video transceiver to sendonly:\", videoTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if(!videoSend && videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"recvonly\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvideoTransceiver.direction = \"recvonly\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting video transceiver to recvonly:\", videoTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// In theory, this is the only case where we might not have a transceiver yet\n\t\t\t\t\t\tvideoTransceiver = config.pc.addTransceiver(\"video\", { direction: \"recvonly\" });\n\t\t\t\t\t\tJanus.log(\"Adding recvonly video transceiver:\", videoTransceiver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"firefox\" || Janus.webRTCAdapter.browserDetails.browser === \"edge\") {\n\t\t\t\tmediaConstraints = {\n\t\t\t\t\tofferToReceiveAudio: isAudioRecvEnabled(media),\n\t\t\t\t\tofferToReceiveVideo: isVideoRecvEnabled(media)\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tmediaConstraints = {\n\t\t\t\t\tmandatory: {\n\t\t\t\t\t\tOfferToReceiveAudio: isAudioRecvEnabled(media),\n\t\t\t\t\t\tOfferToReceiveVideo: isVideoRecvEnabled(media)\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tJanus.debug(mediaConstraints);\n\t\t// Check if this is Firefox and we've been asked to do simulcasting\n\t\tvar sendVideo = isVideoSendEnabled(media);\n\t\tif(sendVideo && simulcast && Janus.webRTCAdapter.browserDetails.browser === \"firefox\") {\n\t\t\t// FIXME Based on https://gist.github.com/voluntas/088bc3cc62094730647b\n\t\t\tJanus.log(\"Enabling Simulcasting for Firefox (RID)\");\n\t\t\tvar sender = config.pc.getSenders()[1];\n\t\t\tJanus.log(sender);\n\t\t\tvar parameters = sender.getParameters();\n\t\t\tJanus.log(parameters);\n\n\t\t\tvar maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);\n\t\t\tsender.setParameters({encodings: callbacks.sendEncodings || [\n\t\t\t\t{ rid: \"h\", active: true, maxBitrate: maxBitrates.high },\n\t\t\t\t{ rid: \"m\", active: true, maxBitrate: maxBitrates.medium, scaleResolutionDownBy: 2},\n\t\t\t\t{ rid: \"l\", active: true, maxBitrate: maxBitrates.low, scaleResolutionDownBy: 4}\n\t\t\t]});\n\t\t}\n\t\tconfig.pc.createAnswer(mediaConstraints)\n\t\t\t.then(function(answer) {\n\t\t\t\tJanus.debug(answer);\n\t\t\t\t// JSON.stringify doesn't work on some WebRTC objects anymore\n\t\t\t\t// See https://code.google.com/p/chromium/issues/detail?id=467366\n\t\t\t\tvar jsep = {\n\t\t\t\t\t\"type\": answer.type,\n\t\t\t\t\t\"sdp\": answer.sdp\n\t\t\t\t};\n\t\t\t\tcallbacks.customizeSdp(jsep);\n\t\t\t\tanswer.sdp = jsep.sdp;\n\t\t\t\tJanus.log(\"Setting local description\");\n\t\t\t\tif(sendVideo && simulcast) {\n\t\t\t\t\t// This SDP munging only works with Chrome\n\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"chrome\") {\n\t\t\t\t\t\t// FIXME Apparently trying to simulcast when answering breaks video in Chrome...\n\t\t\t\t\t\t//~ Janus.log(\"Enabling Simulcasting for Chrome (SDP munging)\");\n\t\t\t\t\t\t//~ answer.sdp = mungeSdpForSimulcasting(answer.sdp);\n\t\t\t\t\t\tJanus.warn(\"simulcast=true, but this is an answer, and video breaks in Chrome if we enable it\");\n\t\t\t\t\t} else if(Janus.webRTCAdapter.browserDetails.browser !== \"firefox\") {\n\t\t\t\t\t\tJanus.warn(\"simulcast=true, but this is not Chrome nor Firefox, ignoring\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconfig.mySdp = answer.sdp;\n\t\t\t\tconfig.pc.setLocalDescription(answer)\n\t\t\t\t\t.catch(callbacks.error);\n\t\t\t\tconfig.mediaConstraints = mediaConstraints;\n\t\t\t\tif(!config.iceDone && !config.trickle) {\n\t\t\t\t\t// Don't do anything until we have all candidates\n\t\t\t\t\tJanus.log(\"Waiting for all candidates...\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// If transforms are present, notify Janus that the media is end-to-end encrypted\n\t\t\t\tif(config.senderTransforms || config.receiverTransforms) {\n\t\t\t\t\tanswer[\"e2ee\"] = true;\n\t\t\t\t}\n\t\t\t\tcallbacks.success(answer);\n\t\t\t}, callbacks.error);\n\t}\n\n\tfunction sendSDP(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle, not sending anything\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tJanus.log(\"Sending offer/answer SDP...\");\n\t\tif(!config.mySdp) {\n\t\t\tJanus.warn(\"Local SDP instance is invalid, not sending anything...\");\n\t\t\treturn;\n\t\t}\n\t\tconfig.mySdp = {\n\t\t\t\"type\": config.pc.localDescription.type,\n\t\t\t\"sdp\": config.pc.localDescription.sdp\n\t\t};\n\t\tif(config.trickle === false)\n\t\t\tconfig.mySdp[\"trickle\"] = false;\n\t\tJanus.debug(callbacks);\n\t\tconfig.sdpSent = true;\n\t\tcallbacks.success(config.mySdp);\n\t}\n\n\tfunction getVolume(handleId, remote) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn 0;\n\t\t}\n\t\tvar stream = remote ? \"remote\" : \"local\";\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.volume[stream])\n\t\t\tconfig.volume[stream] = { value: 0 };\n\t\t// Start getting the volume, if audioLevel in getStats is supported (apparently\n\t\t// they're only available in Chrome/Safari right now: https://webrtc-stats.callstats.io/)\n\t\tif(config.pc.getStats && (Janus.webRTCAdapter.browserDetails.browser === \"chrome\" ||\n\t\t\t\tJanus.webRTCAdapter.browserDetails.browser === \"safari\")) {\n\t\t\tif(remote && !config.remoteStream) {\n\t\t\t\tJanus.warn(\"Remote stream unavailable\");\n\t\t\t\treturn 0;\n\t\t\t} else if(!remote && !config.myStream) {\n\t\t\t\tJanus.warn(\"Local stream unavailable\");\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif(!config.volume[stream].timer) {\n\t\t\t\tJanus.log(\"Starting \" + stream + \" volume monitor\");\n\t\t\t\tconfig.volume[stream].timer = setInterval(function() {\n\t\t\t\t\tconfig.pc.getStats()\n\t\t\t\t\t\t.then(function(stats) {\n\t\t\t\t\t\t\tstats.forEach(function (res) {\n\t\t\t\t\t\t\t\tif(!res || res.kind !== \"audio\")\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\tif((remote && !res.remoteSource) || (!remote && res.type !== \"media-source\"))\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\tconfig.volume[stream].value = (res.audioLevel ? res.audioLevel : 0);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t}, 200);\n\t\t\t\treturn 0;\t// We don't have a volume to return yet\n\t\t\t}\n\t\t\treturn config.volume[stream].value;\n\t\t} else {\n\t\t\t// audioInputLevel and audioOutputLevel seem only available in Chrome? audioLevel\n\t\t\t// seems to be available on Chrome and Firefox, but they don't seem to work\n\t\t\tJanus.warn(\"Getting the \" + stream + \" volume unsupported by browser\");\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tfunction isMuted(handleId, video) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn true;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.pc) {\n\t\t\tJanus.warn(\"Invalid PeerConnection\");\n\t\t\treturn true;\n\t\t}\n\t\tif(!config.myStream) {\n\t\t\tJanus.warn(\"Invalid local MediaStream\");\n\t\t\treturn true;\n\t\t}\n\t\tif(video) {\n\t\t\t// Check video track\n\t\t\tif(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {\n\t\t\t\tJanus.warn(\"No video track\");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn !config.myStream.getVideoTracks()[0].enabled;\n\t\t} else {\n\t\t\t// Check audio track\n\t\t\tif(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {\n\t\t\t\tJanus.warn(\"No audio track\");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn !config.myStream.getAudioTracks()[0].enabled;\n\t\t}\n\t}\n\n\tfunction mute(handleId, video, mute) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn false;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.pc) {\n\t\t\tJanus.warn(\"Invalid PeerConnection\");\n\t\t\treturn false;\n\t\t}\n\t\tif(!config.myStream) {\n\t\t\tJanus.warn(\"Invalid local MediaStream\");\n\t\t\treturn false;\n\t\t}\n\t\tif(video) {\n\t\t\t// Mute/unmute video track\n\t\t\tif(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {\n\t\t\t\tJanus.warn(\"No video track\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconfig.myStream.getVideoTracks()[0].enabled = !mute;\n\t\t\treturn true;\n\t\t} else {\n\t\t\t// Mute/unmute audio track\n\t\t\tif(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {\n\t\t\t\tJanus.warn(\"No audio track\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconfig.myStream.getAudioTracks()[0].enabled = !mute;\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tfunction getBitrate(handleId) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn \"Invalid handle\";\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.pc)\n\t\t\treturn \"Invalid PeerConnection\";\n\t\t// Start getting the bitrate, if getStats is supported\n\t\tif(config.pc.getStats) {\n\t\t\tif(!config.bitrate.timer) {\n\t\t\t\tJanus.log(\"Starting bitrate timer (via getStats)\");\n\t\t\t\tconfig.bitrate.timer = setInterval(function() {\n\t\t\t\t\tconfig.pc.getStats()\n\t\t\t\t\t\t.then(function(stats) {\n\t\t\t\t\t\t\tstats.forEach(function (res) {\n\t\t\t\t\t\t\t\tif(!res)\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\tvar inStats = false;\n\t\t\t\t\t\t\t\t// Check if these are statistics on incoming media\n\t\t\t\t\t\t\t\tif((res.mediaType === \"video\" || res.id.toLowerCase().indexOf(\"video\") > -1) &&\n\t\t\t\t\t\t\t\t\t\tres.type === \"inbound-rtp\" && res.id.indexOf(\"rtcp\") < 0) {\n\t\t\t\t\t\t\t\t\t// New stats\n\t\t\t\t\t\t\t\t\tinStats = true;\n\t\t\t\t\t\t\t\t} else if(res.type == 'ssrc' && res.bytesReceived &&\n\t\t\t\t\t\t\t\t\t\t(res.googCodecName === \"VP8\" || res.googCodecName === \"\")) {\n\t\t\t\t\t\t\t\t\t// Older Chromer versions\n\t\t\t\t\t\t\t\t\tinStats = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Parse stats now\n\t\t\t\t\t\t\t\tif(inStats) {\n\t\t\t\t\t\t\t\t\tconfig.bitrate.bsnow = res.bytesReceived;\n\t\t\t\t\t\t\t\t\tconfig.bitrate.tsnow = res.timestamp;\n\t\t\t\t\t\t\t\t\tif(config.bitrate.bsbefore === null || config.bitrate.tsbefore === null) {\n\t\t\t\t\t\t\t\t\t\t// Skip this round\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.bsbefore = config.bitrate.bsnow;\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.tsbefore = config.bitrate.tsnow;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// Calculate bitrate\n\t\t\t\t\t\t\t\t\t\tvar timePassed = config.bitrate.tsnow - config.bitrate.tsbefore;\n\t\t\t\t\t\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"safari\")\n\t\t\t\t\t\t\t\t\t\t\ttimePassed = timePassed/1000;\t// Apparently the timestamp is in microseconds, in Safari\n\t\t\t\t\t\t\t\t\t\tvar bitRate = Math.round((config.bitrate.bsnow - config.bitrate.bsbefore) * 8 / timePassed);\n\t\t\t\t\t\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"safari\")\n\t\t\t\t\t\t\t\t\t\t\tbitRate = parseInt(bitRate/1000);\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.value = bitRate + ' kbits/sec';\n\t\t\t\t\t\t\t\t\t\t//~ Janus.log(\"Estimated bitrate is \" + config.bitrate.value);\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.bsbefore = config.bitrate.bsnow;\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.tsbefore = config.bitrate.tsnow;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t}, 1000);\n\t\t\t\treturn \"0 kbits/sec\";\t// We don't have a bitrate value yet\n\t\t\t}\n\t\t\treturn config.bitrate.value;\n\t\t} else {\n\t\t\tJanus.warn(\"Getting the video bitrate unsupported by browser\");\n\t\t\treturn \"Feature unsupported by browser\";\n\t\t}\n\t}\n\n\tfunction webrtcError(error) {\n\t\tJanus.error(\"WebRTC error:\", error);\n\t}\n\n\tfunction cleanupWebrtc(handleId, hangupRequest) {\n\t\tJanus.log(\"Cleaning WebRTC stuff\");\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle) {\n\t\t\t// Nothing to clean\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(config) {\n\t\t\tif(hangupRequest === true) {\n\t\t\t\t// Send a hangup request (we don't really care about the response)\n\t\t\t\tvar request = { \"janus\": \"hangup\", \"transaction\": Janus.randomString(12) };\n\t\t\t\tif(pluginHandle.token)\n\t\t\t\t\trequest[\"token\"] = pluginHandle.token;\n\t\t\t\tif(apisecret)\n\t\t\t\t\trequest[\"apisecret\"] = apisecret;\n\t\t\t\tJanus.debug(\"Sending hangup request (handle=\" + handleId + \"):\");\n\t\t\t\tJanus.debug(request);\n\t\t\t\tif(websockets) {\n\t\t\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\t\t\trequest[\"handle_id\"] = handleId;\n\t\t\t\t\tws.send(JSON.stringify(request));\n\t\t\t\t} else {\n\t\t\t\t\tJanus.httpAPICall(server + \"/\" + sessionId + \"/\" + handleId, {\n\t\t\t\t\t\tverb: 'POST',\n\t\t\t\t\t\twithCredentials: withCredentials,\n\t\t\t\t\t\tbody: request\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Cleanup stack\n\t\t\tconfig.remoteStream = null;\n\t\t\tif(config.volume) {\n\t\t\t\tif(config.volume[\"local\"] && config.volume[\"local\"].timer)\n\t\t\t\t\tclearInterval(config.volume[\"local\"].timer);\n\t\t\t\tif(config.volume[\"remote\"] && config.volume[\"remote\"].timer)\n\t\t\t\t\tclearInterval(config.volume[\"remote\"].timer);\n\t\t\t}\n\t\t\tconfig.volume = {};\n\t\t\tif(config.bitrate.timer)\n\t\t\t\tclearInterval(config.bitrate.timer);\n\t\t\tconfig.bitrate.timer = null;\n\t\t\tconfig.bitrate.bsnow = null;\n\t\t\tconfig.bitrate.bsbefore = null;\n\t\t\tconfig.bitrate.tsnow = null;\n\t\t\tconfig.bitrate.tsbefore = null;\n\t\t\tconfig.bitrate.value = null;\n\t\t\tif(!config.streamExternal && config.myStream) {\n\t\t\t\tJanus.log(\"Stopping local stream tracks\");\n\t\t\t\tJanus.stopAllTracks(config.myStream);\n\t\t\t}\n\t\t\tconfig.streamExternal = false;\n\t\t\tconfig.myStream = null;\n\t\t\t// Close PeerConnection\n\t\t\ttry {\n\t\t\t\tconfig.pc.close();\n\t\t\t} catch(e) {\n\t\t\t\t// Do nothing\n\t\t\t}\n\t\t\tconfig.pc = null;\n\t\t\tconfig.candidates = null;\n\t\t\tconfig.mySdp = null;\n\t\t\tconfig.remoteSdp = null;\n\t\t\tconfig.iceDone = false;\n\t\t\tconfig.dataChannel = {};\n\t\t\tconfig.dtmfSender = null;\n\t\t\tconfig.senderTransforms = null;\n\t\t\tconfig.receiverTransforms = null;\n\t\t}\n\t\tpluginHandle.oncleanup();\n\t}\n\n\t// Helper method to munge an SDP to enable simulcasting (Chrome only)\n\tfunction mungeSdpForSimulcasting(sdp) {\n\t\t// Let's munge the SDP to add the attributes for enabling simulcasting\n\t\t// (based on https://gist.github.com/ggarber/a19b4c33510028b9c657)\n\t\tvar lines = sdp.split(\"\\r\\n\");\n\t\tvar video = false;\n\t\tvar ssrc = [ -1 ], ssrc_fid = [ -1 ];\n\t\tvar cname = null, msid = null, mslabel = null, label = null;\n\t\tvar insertAt = -1;\n\t\tfor(var i=0; i<lines.length; i++) {\n\t\t\tvar mline = lines[i].match(/m=(\\w+) */);\n\t\t\tif(mline) {\n\t\t\t\tvar medium = mline[1];\n\t\t\t\tif(medium === \"video\") {\n\t\t\t\t\t// New video m-line: make sure it's the first one\n\t\t\t\t\tif(ssrc[0] < 0) {\n\t\t\t\t\t\tvideo = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// We're done, let's add the new attributes here\n\t\t\t\t\t\tinsertAt = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// New non-video m-line: do we have what we were looking for?\n\t\t\t\t\tif(ssrc[0] > -1) {\n\t\t\t\t\t\t// We're done, let's add the new attributes here\n\t\t\t\t\t\tinsertAt = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(!video)\n\t\t\t\tcontinue;\n\t\t\tvar fid = lines[i].match(/a=ssrc-group:FID (\\d+) (\\d+)/);\n\t\t\tif(fid) {\n\t\t\t\tssrc[0] = fid[1];\n\t\t\t\tssrc_fid[0] = fid[2];\n\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(ssrc[0]) {\n\t\t\t\tvar match = lines[i].match('a=ssrc:' + ssrc[0] + ' cname:(.+)')\n\t\t\t\tif(match) {\n\t\t\t\t\tcname = match[1];\n\t\t\t\t}\n\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' msid:(.+)')\n\t\t\t\tif(match) {\n\t\t\t\t\tmsid = match[1];\n\t\t\t\t}\n\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' mslabel:(.+)')\n\t\t\t\tif(match) {\n\t\t\t\t\tmslabel = match[1];\n\t\t\t\t}\n\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' label:(.+)')\n\t\t\t\tif(match) {\n\t\t\t\t\tlabel = match[1];\n\t\t\t\t}\n\t\t\t\tif(lines[i].indexOf('a=ssrc:' + ssrc_fid[0]) === 0) {\n\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif(lines[i].indexOf('a=ssrc:' + ssrc[0]) === 0) {\n\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(lines[i].length == 0) {\n\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tif(ssrc[0] < 0) {\n\t\t\t// Couldn't find a FID attribute, let's just take the first video SSRC we find\n\t\t\tinsertAt = -1;\n\t\t\tvideo = false;\n\t\t\tfor(var i=0; i<lines.length; i++) {\n\t\t\t\tvar mline = lines[i].match(/m=(\\w+) */);\n\t\t\t\tif(mline) {\n\t\t\t\t\tvar medium = mline[1];\n\t\t\t\t\tif(medium === \"video\") {\n\t\t\t\t\t\t// New video m-line: make sure it's the first one\n\t\t\t\t\t\tif(ssrc[0] < 0) {\n\t\t\t\t\t\t\tvideo = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// We're done, let's add the new attributes here\n\t\t\t\t\t\t\tinsertAt = i;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// New non-video m-line: do we have what we were looking for?\n\t\t\t\t\t\tif(ssrc[0] > -1) {\n\t\t\t\t\t\t\t// We're done, let's add the new attributes here\n\t\t\t\t\t\t\tinsertAt = i;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif(!video)\n\t\t\t\t\tcontinue;\n\t\t\t\tif(ssrc[0] < 0) {\n\t\t\t\t\tvar value = lines[i].match(/a=ssrc:(\\d+)/);\n\t\t\t\t\tif(value) {\n\t\t\t\t\t\tssrc[0] = value[1];\n\t\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar match = lines[i].match('a=ssrc:' + ssrc[0] + ' cname:(.+)')\n\t\t\t\t\tif(match) {\n\t\t\t\t\t\tcname = match[1];\n\t\t\t\t\t}\n\t\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' msid:(.+)')\n\t\t\t\t\tif(match) {\n\t\t\t\t\t\tmsid = match[1];\n\t\t\t\t\t}\n\t\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' mslabel:(.+)')\n\t\t\t\t\tif(match) {\n\t\t\t\t\t\tmslabel = match[1];\n\t\t\t\t\t}\n\t\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' label:(.+)')\n\t\t\t\t\tif(match) {\n\t\t\t\t\t\tlabel = match[1];\n\t\t\t\t\t}\n\t\t\t\t\tif(lines[i].indexOf('a=ssrc:' + ssrc_fid[0]) === 0) {\n\t\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif(lines[i].indexOf('a=ssrc:' + ssrc[0]) === 0) {\n\t\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(lines[i].length === 0) {\n\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(ssrc[0] < 0) {\n\t\t\t// Still nothing, let's just return the SDP we were asked to munge\n\t\t\tJanus.warn(\"Couldn't find the video SSRC, simulcasting NOT enabled\");\n\t\t\treturn sdp;\n\t\t}\n\t\tif(insertAt < 0) {\n\t\t\t// Append at the end\n\t\t\tinsertAt = lines.length;\n\t\t}\n\t\t// Generate a couple of SSRCs (for retransmissions too)\n\t\t// Note: should we check if there are conflicts, here?\n\t\tssrc[1] = Math.floor(Math.random()*0xFFFFFFFF);\n\t\tssrc[2] = Math.floor(Math.random()*0xFFFFFFFF);\n\t\tssrc_fid[1] = Math.floor(Math.random()*0xFFFFFFFF);\n\t\tssrc_fid[2] = Math.floor(Math.random()*0xFFFFFFFF);\n\t\t// Add attributes to the SDP\n\t\tfor(var i=0; i<ssrc.length; i++) {\n\t\t\tif(cname) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' cname:' + cname);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(msid) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' msid:' + msid);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(mslabel) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' mslabel:' + mslabel);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(label) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' label:' + label);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\t// Add the same info for the retransmission SSRC\n\t\t\tif(cname) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' cname:' + cname);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(msid) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' msid:' + msid);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(mslabel) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' mslabel:' + mslabel);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(label) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' label:' + label);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t}\n\t\tlines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[2] + ' ' + ssrc_fid[2]);\n\t\tlines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[1] + ' ' + ssrc_fid[1]);\n\t\tlines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[0] + ' ' + ssrc_fid[0]);\n\t\tlines.splice(insertAt, 0, 'a=ssrc-group:SIM ' + ssrc[0] + ' ' + ssrc[1] + ' ' + ssrc[2]);\n\t\tsdp = lines.join(\"\\r\\n\");\n\t\tif(!sdp.endsWith(\"\\r\\n\"))\n\t\t\tsdp += \"\\r\\n\";\n\t\treturn sdp;\n\t}\n\n\t// Helper methods to parse a media object\n\tfunction isAudioSendEnabled(media) {\n\t\tJanus.debug(\"isAudioSendEnabled:\", media);\n\t\tif(!media)\n\t\t\treturn true;\t// Default\n\t\tif(media.audio === false)\n\t\t\treturn false;\t// Generic audio has precedence\n\t\tif(media.audioSend === undefined || media.audioSend === null)\n\t\t\treturn true;\t// Default\n\t\treturn (media.audioSend === true);\n\t}\n\n\tfunction isAudioSendRequired(media) {\n\t\tJanus.debug(\"isAudioSendRequired:\", media);\n\t\tif(!media)\n\t\t\treturn false;\t// Default\n\t\tif(media.audio === false || media.audioSend === false)\n\t\t\treturn false;\t// If we're not asking to capture audio, it's not required\n\t\tif(media.failIfNoAudio === undefined || media.failIfNoAudio === null)\n\t\t\treturn false;\t// Default\n\t\treturn (media.failIfNoAudio === true);\n\t}\n\n\tfunction isAudioRecvEnabled(media) {\n\t\tJanus.debug(\"isAudioRecvEnabled:\", media);\n\t\tif(!media)\n\t\t\treturn true;\t// Default\n\t\tif(media.audio === false)\n\t\t\treturn false;\t// Generic audio has precedence\n\t\tif(media.audioRecv === undefined || media.audioRecv === null)\n\t\t\treturn true;\t// Default\n\t\treturn (media.audioRecv === true);\n\t}\n\n\tfunction isVideoSendEnabled(media) {\n\t\tJanus.debug(\"isVideoSendEnabled:\", media);\n\t\tif(!media)\n\t\t\treturn true;\t// Default\n\t\tif(media.video === false)\n\t\t\treturn false;\t// Generic video has precedence\n\t\tif(media.videoSend === undefined || media.videoSend === null)\n\t\t\treturn true;\t// Default\n\t\treturn (media.videoSend === true);\n\t}\n\n\tfunction isVideoSendRequired(media) {\n\t\tJanus.debug(\"isVideoSendRequired:\", media);\n\t\tif(!media)\n\t\t\treturn false;\t// Default\n\t\tif(media.video === false || media.videoSend === false)\n\t\t\treturn false;\t// If we're not asking to capture video, it's not required\n\t\tif(media.failIfNoVideo === undefined || media.failIfNoVideo === null)\n\t\t\treturn false;\t// Default\n\t\treturn (media.failIfNoVideo === true);\n\t}\n\n\tfunction isVideoRecvEnabled(media) {\n\t\tJanus.debug(\"isVideoRecvEnabled:\", media);\n\t\tif(!media)\n\t\t\treturn true;\t// Default\n\t\tif(media.video === false)\n\t\t\treturn false;\t// Generic video has precedence\n\t\tif(media.videoRecv === undefined || media.videoRecv === null)\n\t\t\treturn true;\t// Default\n\t\treturn (media.videoRecv === true);\n\t}\n\n\tfunction isScreenSendEnabled(media) {\n\t\tJanus.debug(\"isScreenSendEnabled:\", media);\n\t\tif (!media)\n\t\t\treturn false;\n\t\tif (typeof media.video !== 'object' || typeof media.video.mandatory !== 'object')\n\t\t\treturn false;\n\t\tvar constraints = media.video.mandatory;\n\t\tif (constraints.chromeMediaSource)\n\t\t\treturn constraints.chromeMediaSource === 'desktop' || constraints.chromeMediaSource === 'screen';\n\t\telse if (constraints.mozMediaSource)\n\t\t\treturn constraints.mozMediaSource === 'window' || constraints.mozMediaSource === 'screen';\n\t\telse if (constraints.mediaSource)\n\t\t\treturn constraints.mediaSource === 'window' || constraints.mediaSource === 'screen';\n\t\treturn false;\n\t}\n\n\tfunction isDataEnabled(media) {\n\t\tJanus.debug(\"isDataEnabled:\", media);\n\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"edge\") {\n\t\t\tJanus.warn(\"Edge doesn't support data channels yet\");\n\t\t\treturn false;\n\t\t}\n\t\tif(media === undefined || media === null)\n\t\t\treturn false;\t// Default\n\t\treturn (media.data === true);\n\t}\n\n\tfunction isTrickleEnabled(trickle) {\n\t\tJanus.debug(\"isTrickleEnabled:\", trickle);\n\t\treturn (trickle === false) ? false : true;\n\t}\n}\n\nexport default Janus;","import Janus from \"../../janus.js\";\nimport $ from \"jquery\";\nexport function sessionCreate(room) {\n  var self = this;\n  console.log(\"Trying to connect to\", room);\n  Janus.init({\n    debug: \"all\",\n    callback: function () {\n      var janus = new Janus({\n        server: self.state.server,\n        iceServers: [\n          { url: \"stun:stun.l.google.com:19302\" },\n          {\n            url: \"turn:sync1.ut.ac.ir:3478\",\n            username: \"shafiei\",\n            credential: \"12345678\",\n          },\n        ],\n        success: function () {\n          // Attach to AudioBridge plugin\n          janus.attach({\n            plugin: \"janus.plugin.audiobridge\",\n            opaqueId: self.state.opaqueId,\n            success: function (pluginHandle) {\n              self.setState({ mixertest: pluginHandle, janus: janus });\n              Janus.log(\n                \"Plugin attached! (\" +\n                  self.state.mixertest.getPlugin() +\n                  \", id=\" +\n                  self.state.mixertest.getId() +\n                  \")\"\n              );\n              self.registerUsername(room);\n            },\n            error: function (error) {\n              Janus.error(\"  -- Error attaching plugin...\", error);\n            },\n            consentDialog: function (on) {\n              Janus.debug(\n                \"Consent dialog should be \" + (on ? \"on\" : \"off\") + \" now\"\n              );\n            },\n            iceState: function (state) {\n              Janus.log(\"ICE state changed to \" + state);\n            },\n            mediaState: function (medium, on) {\n              Janus.log(\n                \"Janus \" +\n                  (on ? \"started\" : \"stopped\") +\n                  \" receiving our \" +\n                  medium\n              );\n            },\n            webrtcState: function (on) {\n              Janus.log(\n                \"Janus says our WebRTC PeerConnection is \" +\n                  (on ? \"up\" : \"down\") +\n                  \" now\"\n              );\n            },\n            onmessage: function (msg, jsep) {\n              Janus.debug(\" ::: Got a message :::\", msg);\n              var event = msg[\"audiobridge\"];\n              Janus.debug(\"Event: \" + event);\n              if (event) {\n                //console.log(event, msg);\n                if (event == \"talking\") {\n                  self.participantChangeStatus(msg[\"id\"], true);\n                }\n                if (event == \"stopped-talking\") {\n                  self.participantChangeStatus(msg[\"id\"], false);\n                }\n                if (event === \"joined\") {\n                  var role = self.currentRole();\n                  // Successfully joined, negotiate WebRTC now\n                  if (msg[\"id\"]) {\n                    self.setState({\n                      myid: msg[\"id\"],\n                    });\n                    console.log(\n                      \"Successfully joined room \" +\n                        msg[\"room\"] +\n                        \" with ID \" +\n                        self.state.myid +\n                        \"with role:\" +\n                        self.currentRole()\n                    );\n                    \n                    self.addParticipant(\n                      msg[\"id\"],\n                      self.state.fullname +\n                        \"\" +\n                        self.state.userUUID +\n                        \"\" +\n                        self.state.userColor +\n                        \"\" +\n                        self.state.initials +\n                        \"\" +\n                        role\n                    );\n\n                    if (!self.state.webrtcUp) {\n                      self.setState({ webrtcUp: true });\n                      // Publish our stream\n                      self.joinAudioRoom();\n                    }\n                  }\n                  // Any room participant?\n                  if (msg[\"participants\"]) {\n                    var list = msg[\"participants\"];\n                    Janus.debug(\"Got a list of participants:\", list);\n                    for (var f in list) {\n                      var id = list[f][\"id\"];\n                      var display = list[f][\"display\"];\n                      var setup = list[f][\"setup\"];\n                      var muted = list[f][\"muted\"];\n                      self.addParticipant(list[f][\"id\"], list[f][\"display\"]);\n                    }\n                  }\n                } else if (event === \"roomchanged\") {\n                  // The user switched to a different room\n                  self.setState({\n                    myid: msg[\"id\"],\n                  });\n                  Janus.log(\n                    \"Moved to room \" +\n                      msg[\"room\"] +\n                      \", new ID: \" +\n                      self.state.myid\n                  );\n                  if (msg[\"participants\"]) {\n                    var list = msg[\"participants\"];\n                    console.log(\">>>>>>>>>>>>>>>\");\n                    console.log(\"Got a list of participants:\", list);\n                    for (var f in list) {\n                      console.log(list[f]);\n                      var id = list[f][\"id\"];\n                      var display = list[f][\"display\"];\n                      var setup = list[f][\"setup\"];\n                      var muted = list[f][\"muted\"];\n                      var role = self.currentRole();\n                      self.addParticipant(\n                        msg[\"id\"],\n                        self.state.fullname +\n                          \"\" +\n                          self.state.userUUID +\n                          \"\" +\n                          self.state.userColor +\n                          \"\" +\n                          self.state.initials +\n                          \"\" +\n                          role\n                      );\n\n                      Janus.debug(\n                        \"  >> [\" +\n                          id +\n                          \"] \" +\n                          display +\n                          \" (setup=\" +\n                          setup +\n                          \", muted=\" +\n                          muted +\n                          \")\"\n                      );\n                    }\n                  }\n                } else if (event === \"destroyed\") {\n                  // The room has been destroyed\n                  Janus.warn(\"The room has been destroyed!\");\n                } else if (event === \"event\") {\n                  if (msg[\"participants\"]) {\n                    var list = msg[\"participants\"];\n                    Janus.debug(\"Got a list of participants:\", list);\n                    for (var f in list) {\n                      console.log(list[f]);\n                      var id = list[f][\"id\"];\n                      var display = list[f][\"display\"];\n                      var setup = list[f][\"setup\"];\n                      var muted = list[f][\"muted\"];\n                      var talking = list[f][\"talking\"];\n                      Janus.debug(\n                        \"  >> [\" +\n                          id +\n                          \"] \" +\n                          display +\n                          \" (setup=\" +\n                          setup +\n                          \", muted=\" +\n                          muted +\n                          \")\"\n                      );\n\n                      if (talking) {\n                        //console.log(\"%%%%%%%%\",list[f][\"id\"],\"is talking ...\");\n                      }\n                      if (muted) {\n                        self.participantChangeStatus(list[f][\"id\"], false);\n                      }\n                      self.addParticipant(list[f][\"id\"], list[f][\"display\"]);\n                    }\n                  } else if (msg[\"error\"]) {\n                    if (msg[\"error_code\"] === 485) {\n                      // This is a \"no such room\" error: give a more meaningful description\n                    } else {\n                    }\n                    return;\n                  }\n                  // Any new feed to attach to?\n                  if (msg[\"leaving\"]) {\n                    // One of the participants has gone away?\n                    var leaving = msg[\"leaving\"];\n                    self.removeParticipant(leaving);\n                    Janus.log(\n                      \"Participant left: \" +\n                        leaving +\n                        \" elements with ID #rp\" +\n                        leaving +\n                        \")\"\n                    );\n                    //$('#rp' + leaving).remove();\n                  }\n                }\n              }\n              if (jsep) {\n                Janus.debug(\"Handling SDP as well...\", jsep);\n                self.state.mixertest.handleRemoteJsep({ jsep: jsep });\n              }\n            },\n            onlocalstream: function (stream) {\n              Janus.debug(\" ::: Got a local stream :::\", stream);\n              self.setState({ localStream: stream });\n            },\n            onremotestream: function (stream) {\n              if ($(\"#roomaudio\").length === 0) {\n                $(\"#mixedaudio\").append(\n                  '<audio class=\"rounded centered\" id=\"roomaudio\"  width=\"100%\" height=\"100%\" autoplay/>'\n                );\n              }\n                Janus.attachMediaStream(\n                  document.getElementById(\"roomaudio\"),\n                  stream\n                );\n                console.log('stream', stream, 'attached to', $(\"#mixedaudio\"))\n                self.setState({ remoteStream: stream });\n              //}\n            },\n            oncleanup: function () {\n              Janus.log(\" ::: Got a cleanup notification :::\");\n            },\n          });\n        },\n        error: function (error) {},\n        destroyed: function () {\n          window.location.reload();\n        },\n      });\n    },\n  });\n}\n\nexport function joinAudioRoom(){\n  var self = this;\n  self.state.mixertest.createOffer({\n    media: {\n      video: false,\n      audio: { echoCancellation: true, deviceId: self.state.microphoneDevice },\n    }, // This is an audio only room\n    success: function (jsep) {\n      Janus.debug(\"Got SDP!\", jsep);\n      var publish = { request: \"configure\", muted: self.state.muted };\n      self.state.mixertest.send({\n        message: publish,\n        jsep: jsep,\n      });\n    },\n    error: function (error) {\n      \n      console.error(\"WebRTC error:\", error);\n      self.setState({errorMessage: error.message})\n      self.joinAudioRoomWOMic();\n    },\n  });\n}\n\nexport function joinAudioRoomWOMic(){\n  console.log('Connecting without Mic ....');\n  var self = this;\n  self.state.mixertest.createOffer({\n    media: { video: false, audioSend: false, audioRecv: true }, // This is an audio only room\n    success: function (jsep) {\n      Janus.debug(\"Got SDP!\", jsep);\n      var publish = { request: \"configure\",  muted: true };\n      self.state.mixertest.send({\n        message: publish,\n        jsep: jsep,\n      });\n    },\n    error: function (error) {\n      console.error(\"WebRTC error:\", error);\n      self.setState({errorMessage: error.message})\n    },\n  });\n}\n\n\nexport function registerUsername(room) {\n\n\n  var self = this;\n  var role = this.currentRole();\n  console.log(\"registering user to audiobridge to room \",parseInt(room) , ' with role ' ,role);\n  var register = {\n    request: \"join\",\n    room: parseInt(room),\n    pin: self.state.pin,\n    display:\n      self.state.fullname +\n      \" \" +\n      self.state.userUUID +\n      \"\" +\n      self.state.userColor +\n      \"\" +\n      self.state.initials +\n      \"\" +\n      role,\n  };\n  self.state.mixertest.send({ message: register });\n  self.setState({ myId: self.state.mixertest.id, role: role });\n}\n\nexport function changeUsername(room) {\n  var self = this;\n  var role = this.currentRole();\n  console.log(\"changing role to ..\", role, parseInt(room));\n  var register = {\n    request: \"configure\",\n    room: parseInt(room),\n    pin: self.state.vpin,\n    display:\n      self.state.fullname +\n      \" \" +\n      self.state.userUUID +\n      \"\" +\n      self.state.userColor +\n      \"\" +\n      self.state.initials +\n      \"\" +\n      role,\n  };\n  //console.log(\"changing role to ..\", role, parseInt(room), register);\n  self.state.mixertest.send({ message: register });\n  self.setState({ myId: self.state.mixertest.id, role: role });\n  self.changeOwn(self.state.userUUID, role);\n}\n\nexport function currentRole() {\n  var role = \"listener\";\n  if (this.state.is_speaker) {\n    role = \"speaker\";\n  }\n  if (this.state.is_presenter) {\n    role = \"presenter\";\n  }\n  if (this.state.is_moderator) {\n    role = \"moderator\";\n  }\n  return role;\n}\n\nexport function removeParticipant(id) {\n  var self = this;\n  self.setState({\n    participants: self.state.participants.filter((item) => item.id !== id),\n  });\n}\n\nexport function addParticipant(id, p) {\n  var self = this;\n  var participant = p.split(\"\");\n  if (participant.length > 4 && this.exisitingParticipant(participant[1])) {\n    self.setState({\n      participants: self.state.participants.concat({\n        id: id,\n        display: participant[0],\n        uuid: participant[1],\n        userColor: participant[2],\n        initials: participant[3],\n        role: participant[4],\n        current: \"stopped-talking\",\n      }),\n    });\n  } else {\n    self.changeParticipant(id, p);\n  }\n  //console.log(\"Adding Participants ...\", participant[0], participant[4]);\n}\n\nexport function exisitingParticipant(participantId) {\n  var self = this;\n  var exisiting = self.state.participants.filter(\n    (item) => item.uuid === participantId\n  );\n  if (exisiting.length === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport function changeOwn(uuid, role){\n  var self = this;\n  var exisiting = self.state.participants.filter(\n    (item) => item.uuid === uuid\n  );\n  if(exisiting && exisiting.length > 0) {\n    self.setState(\n      {\n        participants: self.state.participants.filter(\n          (item) => item.uuid !== uuid\n        ),\n      },\n      () => { \n        exisiting[0]['role'] = role\n        self.setState({\n          participants: self.state.participants.concat(exisiting[0]) \n        })\n      })\n  }\n}\n\nexport function changeParticipant(id, p) {\n  var self = this;\n  var participant = p.split(\"\");\n  if (participant[1] && participant[4]) {\n    //console.log('%%%%%%%', participant[1], id)\n    self.setState(\n      {\n        participants: self.state.participants.filter(\n          (item) => item.uuid !== participant[1]\n        ),\n      },\n      () => {\n        self.setState({\n          participants: self.state.participants.concat({\n            id: id,\n            display: participant[0],\n            uuid: participant[1],\n            userColor: participant[2],\n            initials: participant[3],\n            role: participant[4],\n            current: \"stopped-talking\",\n          }),\n        });\n      }\n    );\n    console.log(\"Adding Participants ...\", participant[0], participant[4]);\n  }\n}\n\nexport function participantDisplay(participantId) {\n  var self = this;\n  var exisiting = self.state.participants.filter(\n    (item) => item.uuid === participantId\n  );\n  if (exisiting.length === 0) {\n    return \"\";\n  } else {\n    return exisiting[0].display;\n  }\n}\n\nexport function participantChangeStatus(participantId, status) {\n  this.setState((prevState) => ({\n    talking: {\n      ...prevState.talking,\n      [participantId]: status,\n    },\n  }));\n}\n\nexport function participantChangeRoom(participantId, room) {\n  this.setState((prevState) => ({\n    participantRoom: {\n      ...prevState.participantRoom,\n      [participantId]: room,\n    },\n  }));\n}\n\nexport function toggleMute() {\n  var self = this;\n\n  this.setState({ muted: !this.state.muted }, () => {\n    self.state.mixertest.send({\n      message: { request: \"configure\", muted: self.state.muted },\n    });\n    if (this.state.muted) {\n      $(\"#microphone-on\").show();\n      $(\"#microphone-off\").hide();\n      $(\"#microphone-off\").css(\"color\", \"initial\");\n    } else {\n      $(\"#microphone-off\").show();\n      $(\"#microphone-off\").css(\"color\", \"black\");\n      $(\"#microphone-on\").hide();\n    }\n    console.log(\"muted\", this.state.muted, this.state.myId);\n  });\n\n  //if(self.state.muted){\n  self.participantChangeStatus(this.state.myId, false);\n  //}\n}\n\nexport function forceMute() {\n  var self = this;\n\n  this.state.mixertest.send({\n    message: { request: \"configure\", muted: true },\n  });\n  self.participantChangeStatus(this.state.myId, false);\n}\n\nexport function exitAudioRoom() {\n  var self = this;\n  console.log(\"exitAudioRoom\");\n  if (this.state.mixertest) {\n    console.log(\"exitAudioRoom\");\n    this.state.mixertest.send({ message: { request: \"leave\" } });\n  }\n}\n","/*\n\tThe MIT License (MIT)\n\n\tCopyright (c) 2016 Meetecho\n\n\tPermission is hereby granted, free of charge, to any person obtaining\n\ta copy of this software and associated documentation files (the \"Software\"),\n\tto deal in the Software without restriction, including without limitation\n\tthe rights to use, copy, modify, merge, publish, distribute, sublicense,\n\tand/or sell copies of the Software, and to permit persons to whom the\n\tSoftware is furnished to do so, subject to the following conditions:\n\n\tThe above copyright notice and this permission notice shall be included\n\tin all copies or substantial portions of the Software.\n\n\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\tOR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n\tTHE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR\n\tOTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\n\tARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n\tOTHER DEALINGS IN THE SOFTWARE.\n */\n\n// List of sessions\nimport jQuery from 'jquery';\nimport adapter from 'webrtc-adapter';\nconst RTCRtpTransceiver = window.RTCRtpTransceiver;\nJanus.sessions = {};\n\nJanus.isExtensionEnabled = function() {\n\tif(navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {\n\t\t// No need for the extension, getDisplayMedia is supported\n\t\treturn true;\n\t}\n\tif(window.navigator.userAgent.match('Chrome')) {\n\t\tvar chromever = parseInt(window.navigator.userAgent.match(/Chrome\\/(.*) /)[1], 10);\n\t\tvar maxver = 33;\n\t\tif(window.navigator.userAgent.match('Linux'))\n\t\t\tmaxver = 35;\t// \"known\" crash in chrome 34 and 35 on linux\n\t\tif(chromever >= 26 && chromever <= maxver) {\n\t\t\t// Older versions of Chrome don't support this extension-based approach, so lie\n\t\t\treturn true;\n\t\t}\n\t\treturn Janus.extension.isInstalled();\n\t} else {\n\t\t// Firefox and others, no need for the extension (but this doesn't mean it will work)\n\t\treturn true;\n\t}\n};\n\nvar defaultExtension = {\n\t// Screensharing Chrome Extension ID\n\textensionId: 'hapfgfdkleiggjjpfpenajgdnfckjpaj',\n\tisInstalled: function() { return document.querySelector('#janus-extension-installed') !== null; },\n\tgetScreen: function (callback) {\n\t\tvar pending = window.setTimeout(function () {\n\t\t\tvar error = new Error('NavigatorUserMediaError');\n\t\t\terror.name = 'The required Chrome extension is not installed: click <a href=\"#\">here</a> to install it. (NOTE: this will need you to refresh the page)';\n\t\t\treturn callback(error);\n\t\t}, 1000);\n\t\tthis.cache[pending] = callback;\n\t\twindow.postMessage({ type: 'janusGetScreen', id: pending }, '*');\n\t},\n\tinit: function () {\n\t\tvar cache = {};\n\t\tthis.cache = cache;\n\t\t// Wait for events from the Chrome Extension\n\t\twindow.addEventListener('message', function (event) {\n\t\t\tif(event.origin != window.location.origin)\n\t\t\t\treturn;\n\t\t\tif(event.data.type == 'janusGotScreen' && cache[event.data.id]) {\n\t\t\t\tvar callback = cache[event.data.id];\n\t\t\t\tdelete cache[event.data.id];\n\n\t\t\t\tif (event.data.sourceId === '') {\n\t\t\t\t\t// user canceled\n\t\t\t\t\tvar error = new Error('NavigatorUserMediaError');\n\t\t\t\t\terror.name = 'You cancelled the request for permission, giving up...';\n\t\t\t\t\tcallback(error);\n\t\t\t\t} else {\n\t\t\t\t\tcallback(null, event.data.sourceId);\n\t\t\t\t}\n\t\t\t} else if (event.data.type == 'janusGetScreenPending') {\n\t\t\t\tconsole.log('clearing ', event.data.id);\n\t\t\t\twindow.clearTimeout(event.data.id);\n\t\t\t}\n\t\t});\n\t}\n};\n\nJanus.UseDefaultDependencies = function (deps) {\n\tvar f = (deps && deps.fetch) || fetch;\n\tvar p = (deps && deps.Promise) || Promise;\n\tvar socketCls = (deps && deps.WebSocket) || WebSocket;\n\n\treturn {\n\t\tnewWebSocket: function(server, proto) { return new socketCls(server, proto); },\n\t\textension: (deps && deps.extension) || defaultExtension,\n\t\tisArray: function(arr) { return Array.isArray(arr); },\n\t\twebRTCAdapter: (deps && deps.adapter) || adapter,\n\t\thttpAPICall: function(url, options) {\n\t\t\tvar fetchOptions = {\n\t\t\t\tmethod: options.verb,\n\t\t\t\theaders: {\n\t\t\t\t\t'Accept': 'application/json, text/plain, */*'\n\t\t\t\t},\n\t\t\t\tcache: 'no-cache'\n\t\t\t};\n\t\t\tif(options.verb === \"POST\") {\n\t\t\t\tfetchOptions.headers['Content-Type'] = 'application/json';\n\t\t\t}\n\t\t\tif(options.withCredentials !== undefined) {\n\t\t\t\tfetchOptions.credentials = options.withCredentials === true ? 'include' : (options.withCredentials ? options.withCredentials : 'omit');\n\t\t\t}\n\t\t\tif(options.body) {\n\t\t\t\tfetchOptions.body = JSON.stringify(options.body);\n\t\t\t}\n\n\t\t\tvar fetching = f(url, fetchOptions).catch(function(error) {\n\t\t\t\treturn p.reject({message: 'Probably a network error, is the server down?', error: error});\n\t\t\t});\n\n\t\t\t/*\n\t\t\t * fetch() does not natively support timeouts.\n\t\t\t * Work around this by starting a timeout manually, and racing it agains the fetch() to see which thing resolves first.\n\t\t\t */\n\n\t\t\tif(options.timeout) {\n\t\t\t\tvar timeout = new p(function(resolve, reject) {\n\t\t\t\t\tvar timerId = setTimeout(function() {\n\t\t\t\t\t\tclearTimeout(timerId);\n\t\t\t\t\t\treturn reject({message: 'Request timed out', timeout: options.timeout});\n\t\t\t\t\t}, options.timeout);\n\t\t\t\t});\n\t\t\t\tfetching = p.race([fetching, timeout]);\n\t\t\t}\n\n\t\t\tfetching.then(function(response) {\n\t\t\t\tif(response.ok) {\n\t\t\t\t\tif(typeof(options.success) === typeof(Janus.noop)) {\n\t\t\t\t\t\treturn response.json().then(function(parsed) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\toptions.success(parsed);\n\t\t\t\t\t\t\t} catch(error) {\n\t\t\t\t\t\t\t\tJanus.error('Unhandled httpAPICall success callback error', error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, function(error) {\n\t\t\t\t\t\t\treturn p.reject({message: 'Failed to parse response body', error: error, response: response});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn p.reject({message: 'API call failed', response: response});\n\t\t\t\t}\n\t\t\t}).catch(function(error) {\n\t\t\t\tif(typeof(options.error) === typeof(Janus.noop)) {\n\t\t\t\t\toptions.error(error.message || '<< internal error >>', error);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn fetching;\n\t\t}\n\t}\n};\n\nJanus.useOldDependencies = function (deps) {\n\tvar jq = (deps && deps.jQuery) || jQuery;\n\tvar socketCls = (deps && deps.WebSocket) || WebSocket;\n\treturn {\n\t\tnewWebSocket: function(server, proto) { return new socketCls(server, proto); },\n\t\tisArray: function(arr) { return jq.isArray(arr); },\n\t\textension: (deps && deps.extension) || defaultExtension,\n\t\twebRTCAdapter: (deps && deps.adapter) || adapter,\n\t\thttpAPICall: function(url, options) {\n\t\t\tvar payload = options.body !== undefined ? {\n\t\t\t\tcontentType: 'application/json',\n\t\t\t\tdata: JSON.stringify(options.body)\n\t\t\t} : {};\n\t\t\tvar credentials = options.withCredentials !== undefined ? {xhrFields: {withCredentials: options.withCredentials}} : {};\n\n\t\t\treturn jq.ajax(jq.extend(payload, credentials, {\n\t\t\t\turl: url,\n\t\t\t\ttype: options.verb,\n\t\t\t\tcache: false,\n\t\t\t\tdataType: 'json',\n\t\t\t\tasync: options.async,\n\t\t\t\ttimeout: options.timeout,\n\t\t\t\tsuccess: function(result) {\n\t\t\t\t\tif(typeof(options.success) === typeof(Janus.noop)) {\n\t\t\t\t\t\toptions.success(result);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function(xhr, status, err) {\n\t\t\t\t\tif(typeof(options.error) === typeof(Janus.noop)) {\n\t\t\t\t\t\toptions.error(status, err);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t};\n};\n\nJanus.noop = function() {};\n\nJanus.dataChanDefaultLabel = \"JanusDataChannel\";\n\n// Note: in the future we may want to change this, e.g., as was\n// attempted in https://github.com/meetecho/janus-gateway/issues/1670\nJanus.endOfCandidates = null;\n\n// Stop all tracks from a given stream\nJanus.stopAllTracks = function(stream) {\n\ttry {\n\t\t// Try a MediaStreamTrack.stop() for each track\n\t\tvar tracks = stream.getTracks();\n\t\tfor(var mst of tracks) {\n\t\t\tJanus.log(mst);\n\t\t\tif(mst) {\n\t\t\t\tmst.stop();\n\t\t\t}\n\t\t}\n\t} catch(e) {\n\t\t// Do nothing if this fails\n\t}\n}\n\n// Initialization\nJanus.init = function(options) {\n\toptions = options || {};\n\toptions.callback = (typeof options.callback == \"function\") ? options.callback : Janus.noop;\n\tif(Janus.initDone) {\n\t\t// Already initialized\n\t\toptions.callback();\n\t} else {\n\t\tif(typeof console == \"undefined\" || typeof console.log == \"undefined\") {\n\t\t\tconsole = { log: function() {} };\n\t\t}\n\t\t// Console logging (all debugging disabled by default)\n\t\tJanus.trace = Janus.noop;\n\t\tJanus.debug = Janus.noop;\n\t\tJanus.vdebug = Janus.noop;\n\t\tJanus.log = Janus.noop;\n\t\tJanus.warn = Janus.noop;\n\t\tJanus.error = Janus.noop;\n\t\tif(options.debug === true || options.debug === \"all\") {\n\t\t\t// Enable all debugging levels\n\t\t\tJanus.trace = console.trace.bind(console);\n\t\t\tJanus.debug = console.debug.bind(console);\n\t\t\tJanus.vdebug = console.debug.bind(console);\n\t\t\tJanus.log = console.log.bind(console);\n\t\t\tJanus.warn = console.warn.bind(console);\n\t\t\tJanus.error = console.error.bind(console);\n\t\t} else if(Array.isArray(options.debug)) {\n\t\t\tfor(var d of options.debug) {\n\t\t\t\tswitch(d) {\n\t\t\t\t\tcase \"trace\":\n\t\t\t\t\t\tJanus.trace = console.trace.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"debug\":\n\t\t\t\t\t\tJanus.debug = console.debug.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"vdebug\":\n\t\t\t\t\t\tJanus.vdebug = console.debug.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"log\":\n\t\t\t\t\t\tJanus.log = console.log.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"warn\":\n\t\t\t\t\t\tJanus.warn = console.warn.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"error\":\n\t\t\t\t\t\tJanus.error = console.error.bind(console);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.error(\"Unknown debugging option '\" + d + \"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tJanus.log(\"Initializing library\");\n\n\t\tvar usedDependencies = options.dependencies || Janus.UseDefaultDependencies();\n\t\tJanus.isArray = usedDependencies.isArray;\n\t\tJanus.webRTCAdapter = usedDependencies.webRTCAdapter;\n\t\tJanus.httpAPICall = usedDependencies.httpAPICall;\n\t\tJanus.newWebSocket = usedDependencies.newWebSocket;\n\t\tJanus.extension = usedDependencies.extension;\n\t\tJanus.extension.init();\n\n\t\t// Helper method to enumerate devices\n\t\tJanus.listDevices = function(callback, config) {\n\t\t\tcallback = (typeof callback == \"function\") ? callback : Janus.noop;\n\t\t\tif (config == null) config = { audio: true, video: true };\n\t\t\tif(Janus.isGetUserMediaAvailable()) {\n\t\t\t\tnavigator.mediaDevices.getUserMedia(config)\n\t\t\t\t.then(function(stream) {\n\t\t\t\t\tnavigator.mediaDevices.enumerateDevices().then(function(devices) {\n\t\t\t\t\t\tJanus.debug(devices);\n\t\t\t\t\t\tcallback(devices);\n\t\t\t\t\t\t// Get rid of the now useless stream\n\t\t\t\t\t\tJanus.stopAllTracks(stream)\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(function(err) {\n\t\t\t\t\tJanus.error(err);\n\t\t\t\t\tcallback([]);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tJanus.warn(\"navigator.mediaDevices unavailable\");\n\t\t\t\tcallback([]);\n\t\t\t}\n\t\t};\n\t\t// Helper methods to attach/reattach a stream to a video element (previously part of adapter.js)\n\t\tJanus.attachMediaStream = function(element, stream) {\n\t\t\ttry {\n\t\t\t\telement.srcObject = stream;\n\t\t\t} catch (e) {\n\t\t\t\ttry {\n\t\t\t\t\telement.src = URL.createObjectURL(stream);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tJanus.error(\"Error attaching stream to element\");\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tJanus.reattachMediaStream = function(to, from) {\n\t\t\ttry {\n\t\t\t\tto.srcObject = from.srcObject;\n\t\t\t} catch (e) {\n\t\t\t\ttry {\n\t\t\t\t\tto.src = from.src;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tJanus.error(\"Error reattaching stream to element\");\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t// Detect tab close: make sure we don't loose existing onbeforeunload handlers\n\t\t// (note: for iOS we need to subscribe to a different event, 'pagehide', see\n\t\t// https://gist.github.com/thehunmonkgroup/6bee8941a49b86be31a787fe8f4b8cfe)\n\t\tvar iOS = ['iPad', 'iPhone', 'iPod'].indexOf(navigator.platform) >= 0;\n\t\tvar eventName = iOS ? 'pagehide' : 'beforeunload';\n\t\tvar oldOBF = window[\"on\" + eventName];\n\t\twindow.addEventListener(eventName, function(event) {\n\t\t\tJanus.log(\"Closing window\");\n\t\t\tfor(var s in Janus.sessions) {\n\t\t\t\tif(Janus.sessions[s] && Janus.sessions[s].destroyOnUnload) {\n\t\t\t\t\tJanus.log(\"Destroying session \" + s);\n\t\t\t\t\tJanus.sessions[s].destroy({unload: true, notifyDestroyed: false});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(oldOBF && typeof oldOBF == \"function\") {\n\t\t\t\toldOBF();\n\t\t\t}\n\t\t});\n\t\t// If this is a Safari Technology Preview, check if VP8 is supported\n\t\tJanus.safariVp8 = false;\n\t\tif(Janus.webRTCAdapter.browserDetails.browser === 'safari' &&\n\t\t\t\tJanus.webRTCAdapter.browserDetails.version >= 605) {\n\t\t\t// Let's see if RTCRtpSender.getCapabilities() is there\n\t\t\tif(RTCRtpSender && RTCRtpSender.getCapabilities && RTCRtpSender.getCapabilities(\"video\") &&\n\t\t\t\t\tRTCRtpSender.getCapabilities(\"video\").codecs && RTCRtpSender.getCapabilities(\"video\").codecs.length) {\n\t\t\t\tfor(var codec of RTCRtpSender.getCapabilities(\"video\").codecs) {\n\t\t\t\t\tif(codec && codec.mimeType && codec.mimeType.toLowerCase() === \"video/vp8\") {\n\t\t\t\t\t\tJanus.safariVp8 = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(Janus.safariVp8) {\n\t\t\t\t\tJanus.log(\"This version of Safari supports VP8\");\n\t\t\t\t} else {\n\t\t\t\t\tJanus.warn(\"This version of Safari does NOT support VP8: if you're using a Technology Preview, \" +\n\t\t\t\t\t\t\"try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// We do it in a very ugly way, as there's no alternative...\n\t\t\t\t// We create a PeerConnection to see if VP8 is in an offer\n\t\t\t\tvar testpc = new RTCPeerConnection({});\n\t\t\t\ttestpc.createOffer({offerToReceiveVideo: true}).then(function(offer) {\n\t\t\t\t\tJanus.safariVp8 = offer.sdp.indexOf(\"VP8\") !== -1;\n\t\t\t\t\tif(Janus.safariVp8) {\n\t\t\t\t\t\tJanus.log(\"This version of Safari supports VP8\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tJanus.warn(\"This version of Safari does NOT support VP8: if you're using a Technology Preview, \" +\n\t\t\t\t\t\t\t\"try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu\");\n\t\t\t\t\t}\n\t\t\t\t\ttestpc.close();\n\t\t\t\t\ttestpc = null;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t// Check if this browser supports Unified Plan and transceivers\n\t\t// Based on https://codepen.io/anon/pen/ZqLwWV?editors=0010\n\t\tJanus.unifiedPlan = false;\n\t\tif(Janus.webRTCAdapter.browserDetails.browser === 'firefox' &&\n\t\t\t\tJanus.webRTCAdapter.browserDetails.version >= 59) {\n\t\t\t// Firefox definitely does, starting from version 59\n\t\t\tJanus.unifiedPlan = true;\n\t\t} else if(Janus.webRTCAdapter.browserDetails.browser === 'chrome' &&\n\t\t\t\tJanus.webRTCAdapter.browserDetails.version >= 72) {\n\t\t\t// Chrome does, but it's only usable from version 72 on\n\t\t\tJanus.unifiedPlan = true;\n\t\t} else if(!window.RTCRtpTransceiver || !('currentDirection' in RTCRtpTransceiver.prototype)) {\n\t\t\t// Safari supports addTransceiver() but not Unified Plan when\n\t\t\t// currentDirection is not defined (see codepen above).\n\t\t\tJanus.unifiedPlan = false;\n\t\t} else {\n\t\t\t// Check if addTransceiver() throws an exception\n\t\t\tvar tempPc = new RTCPeerConnection();\n\t\t\ttry {\n\t\t\t\ttempPc.addTransceiver('audio');\n\t\t\t\tJanus.unifiedPlan = true;\n\t\t\t} catch (e) {}\n\t\t\ttempPc.close();\n\t\t}\n\t\tJanus.initDone = true;\n\t\toptions.callback();\n\t}\n};\n\n// Helper method to check whether WebRTC is supported by this browser\nJanus.isWebrtcSupported = function() {\n\treturn !!window.RTCPeerConnection;\n};\n// Helper method to check whether devices can be accessed by this browser (e.g., not possible via plain HTTP)\nJanus.isGetUserMediaAvailable = function() {\n\treturn navigator.mediaDevices && navigator.mediaDevices.getUserMedia;\n};\n\n// Helper method to create random identifiers (e.g., transaction)\nJanus.randomString = function(len) {\n\tvar charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\tvar randomString = '';\n\tfor (var i = 0; i < len; i++) {\n\t\tvar randomPoz = Math.floor(Math.random() * charSet.length);\n\t\trandomString += charSet.substring(randomPoz,randomPoz+1);\n\t}\n\treturn randomString;\n};\n\nfunction Janus(gatewayCallbacks) {\n\tgatewayCallbacks = gatewayCallbacks || {};\n\tgatewayCallbacks.success = (typeof gatewayCallbacks.success == \"function\") ? gatewayCallbacks.success : Janus.noop;\n\tgatewayCallbacks.error = (typeof gatewayCallbacks.error == \"function\") ? gatewayCallbacks.error : Janus.noop;\n\tgatewayCallbacks.destroyed = (typeof gatewayCallbacks.destroyed == \"function\") ? gatewayCallbacks.destroyed : Janus.noop;\n\tif(!Janus.initDone) {\n\t\tgatewayCallbacks.error(\"Library not initialized\");\n\t\treturn {};\n\t}\n\tif(!Janus.isWebrtcSupported()) {\n\t\tgatewayCallbacks.error(\"WebRTC not supported by this browser\");\n\t\treturn {};\n\t}\n\tJanus.log(\"Library initialized: \" + Janus.initDone);\n\tif(!gatewayCallbacks.server) {\n\t\tgatewayCallbacks.error(\"Invalid server url\");\n\t\treturn {};\n\t}\n\tvar websockets = false;\n\tvar ws = null;\n\tvar wsHandlers = {};\n\tvar wsKeepaliveTimeoutId = null;\n\tvar servers = null;\n\tvar serversIndex = 0;\n\tvar server = gatewayCallbacks.server;\n\tif(Janus.isArray(server)) {\n\t\tJanus.log(\"Multiple servers provided (\" + server.length + \"), will use the first that works\");\n\t\tserver = null;\n\t\tservers = gatewayCallbacks.server;\n\t\tJanus.debug(servers);\n\t} else {\n\t\tif(server.indexOf(\"ws\") === 0) {\n\t\t\twebsockets = true;\n\t\t\tJanus.log(\"Using WebSockets to contact Janus: \" + server);\n\t\t} else {\n\t\t\twebsockets = false;\n\t\t\tJanus.log(\"Using REST API to contact Janus: \" + server);\n\t\t}\n\t}\n\tvar iceServers = gatewayCallbacks.iceServers || [{urls: \"stun:stun.l.google.com:19302\"}];\n\tvar iceTransportPolicy = gatewayCallbacks.iceTransportPolicy;\n\tvar bundlePolicy = gatewayCallbacks.bundlePolicy;\n\t// Whether IPv6 candidates should be gathered\n\tvar ipv6Support = (gatewayCallbacks.ipv6 === true);\n\t// Whether we should enable the withCredentials flag for XHR requests\n\tvar withCredentials = false;\n\tif(gatewayCallbacks.withCredentials !== undefined && gatewayCallbacks.withCredentials !== null)\n\t\twithCredentials = gatewayCallbacks.withCredentials === true;\n\t// Optional max events\n\tvar maxev = 10;\n\tif(gatewayCallbacks.max_poll_events !== undefined && gatewayCallbacks.max_poll_events !== null)\n\t\tmaxev = gatewayCallbacks.max_poll_events;\n\tif(maxev < 1)\n\t\tmaxev = 1;\n\t// Token to use (only if the token based authentication mechanism is enabled)\n\tvar token = null;\n\tif(gatewayCallbacks.token !== undefined && gatewayCallbacks.token !== null)\n\t\ttoken = gatewayCallbacks.token;\n\t// API secret to use (only if the shared API secret is enabled)\n\tvar apisecret = null;\n\tif(gatewayCallbacks.apisecret !== undefined && gatewayCallbacks.apisecret !== null)\n\t\tapisecret = gatewayCallbacks.apisecret;\n\t// Whether we should destroy this session when onbeforeunload is called\n\tthis.destroyOnUnload = true;\n\tif(gatewayCallbacks.destroyOnUnload !== undefined && gatewayCallbacks.destroyOnUnload !== null)\n\t\tthis.destroyOnUnload = (gatewayCallbacks.destroyOnUnload === true);\n\t// Some timeout-related values\n\tvar keepAlivePeriod = 25000;\n\tif(gatewayCallbacks.keepAlivePeriod !== undefined && gatewayCallbacks.keepAlivePeriod !== null)\n\t\tkeepAlivePeriod = gatewayCallbacks.keepAlivePeriod;\n\tif(isNaN(keepAlivePeriod))\n\t\tkeepAlivePeriod = 25000;\n\tvar longPollTimeout = 60000;\n\tif(gatewayCallbacks.longPollTimeout !== undefined && gatewayCallbacks.longPollTimeout !== null)\n\t\tlongPollTimeout = gatewayCallbacks.longPollTimeout;\n\tif(isNaN(longPollTimeout))\n\t\tlongPollTimeout = 60000;\n\n\t// overrides for default maxBitrate values for simulcasting\n\tfunction getMaxBitrates(simulcastMaxBitrates) {\n\t\tvar maxBitrates = {\n\t\t\thigh: 900000,\n\t\t\tmedium: 300000,\n\t\t\tlow: 100000,\n\t\t};\n\n\t\tif (simulcastMaxBitrates !== undefined && simulcastMaxBitrates !== null) {\n\t\t\tif (simulcastMaxBitrates.high)\n\t\t\t\tmaxBitrates.high = simulcastMaxBitrates.high;\n\t\t\tif (simulcastMaxBitrates.medium)\n\t\t\t\tmaxBitrates.medium = simulcastMaxBitrates.medium;\n\t\t\tif (simulcastMaxBitrates.low)\n\t\t\t\tmaxBitrates.low = simulcastMaxBitrates.low;\n\t\t}\n\n\t\treturn maxBitrates;\n\t}\n\n\tvar connected = false;\n\tvar sessionId = null;\n\tvar pluginHandles = {};\n\tvar that = this;\n\tvar retries = 0;\n\tvar transactions = {};\n\tcreateSession(gatewayCallbacks);\n\n\t// Public methods\n\tthis.getServer = function() { return server; };\n\tthis.isConnected = function() { return connected; };\n\tthis.reconnect = function(callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tcallbacks[\"reconnect\"] = true;\n\t\tcreateSession(callbacks);\n\t};\n\tthis.getSessionId = function() { return sessionId; };\n\tthis.getInfo = function(callbacks) { getInfo(callbacks); };\n\tthis.destroy = function(callbacks) { destroySession(callbacks); };\n\tthis.attach = function(callbacks) { createHandle(callbacks); };\n\n\tfunction eventHandler() {\n\t\tif(sessionId == null)\n\t\t\treturn;\n\t\tJanus.debug('Long poll...');\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar longpoll = server + \"/\" + sessionId + \"?rid=\" + new Date().getTime();\n\t\tif(maxev)\n\t\t\tlongpoll = longpoll + \"&maxev=\" + maxev;\n\t\tif(token)\n\t\t\tlongpoll = longpoll + \"&token=\" + encodeURIComponent(token);\n\t\tif(apisecret)\n\t\t\tlongpoll = longpoll + \"&apisecret=\" + encodeURIComponent(apisecret);\n\t\tJanus.httpAPICall(longpoll, {\n\t\t\tverb: 'GET',\n\t\t\twithCredentials: withCredentials,\n\t\t\tsuccess: handleEvent,\n\t\t\ttimeout: longPollTimeout,\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\n\t\t\t\tretries++;\n\t\t\t\tif(retries > 3) {\n\t\t\t\t\t// Did we just lose the server? :-(\n\t\t\t\t\tconnected = false;\n\t\t\t\t\tgatewayCallbacks.error(\"Lost connection to the server (is it down?)\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\teventHandler();\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private event handler: this will trigger plugin callbacks, if set\n\tfunction handleEvent(json, skipTimeout) {\n\t\tretries = 0;\n\t\tif(!websockets && sessionId !== undefined && sessionId !== null && skipTimeout !== true)\n\t\t\teventHandler();\n\t\tif(!websockets && Janus.isArray(json)) {\n\t\t\t// We got an array: it means we passed a maxev > 1, iterate on all objects\n\t\t\tfor(var i=0; i<json.length; i++) {\n\t\t\t\thandleEvent(json[i], true);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif(json[\"janus\"] === \"keepalive\") {\n\t\t\t// Nothing happened\n\t\t\tJanus.vdebug(\"Got a keepalive on session \" + sessionId);\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"server_info\") {\n\t\t\t// Just info on the Janus instance\n\t\t\tJanus.debug(\"Got info on the Janus instance\");\n\t\t\tJanus.debug(json);\n\t\t\tvar transaction = json[\"transaction\"];\n\t\t\tif(transaction) {\n\t\t\t\tvar reportSuccess = transactions[transaction];\n\t\t\t\tif(reportSuccess)\n\t\t\t\t\treportSuccess(json);\n\t\t\t\tdelete transactions[transaction];\n\t\t\t}\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"ack\") {\n\t\t\t// Just an ack, we can probably ignore\n\t\t\tJanus.debug(\"Got an ack on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar transaction = json[\"transaction\"];\n\t\t\tif(transaction) {\n\t\t\t\tvar reportSuccess = transactions[transaction];\n\t\t\t\tif(reportSuccess)\n\t\t\t\t\treportSuccess(json);\n\t\t\t\tdelete transactions[transaction];\n\t\t\t}\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"success\") {\n\t\t\t// Success!\n\t\t\tJanus.debug(\"Got a success on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar transaction = json[\"transaction\"];\n\t\t\tif(transaction) {\n\t\t\t\tvar reportSuccess = transactions[transaction];\n\t\t\t\tif(reportSuccess)\n\t\t\t\t\treportSuccess(json);\n\t\t\t\tdelete transactions[transaction];\n\t\t\t}\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"trickle\") {\n\t\t\t// We got a trickle candidate from Janus\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar candidate = json[\"candidate\"];\n\t\t\tJanus.debug(\"Got a trickled candidate on session \" + sessionId);\n\t\t\tJanus.debug(candidate);\n\t\t\tvar config = pluginHandle.webrtcStuff;\n\t\t\tif(config.pc && config.remoteSdp) {\n\t\t\t\t// Add candidate right now\n\t\t\t\tJanus.debug(\"Adding remote candidate:\", candidate);\n\t\t\t\tif(!candidate || candidate.completed === true) {\n\t\t\t\t\t// end-of-candidates\n\t\t\t\t\tconfig.pc.addIceCandidate(Janus.endOfCandidates);\n\t\t\t\t} else {\n\t\t\t\t\t// New candidate\n\t\t\t\t\tconfig.pc.addIceCandidate(candidate);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// We didn't do setRemoteDescription (trickle got here before the offer?)\n\t\t\t\tJanus.debug(\"We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate\");\n\t\t\t\tif(!config.candidates)\n\t\t\t\t\tconfig.candidates = [];\n\t\t\t\tconfig.candidates.push(candidate);\n\t\t\t\tJanus.debug(config.candidates);\n\t\t\t}\n\t\t} else if(json[\"janus\"] === \"webrtcup\") {\n\t\t\t// The PeerConnection with the server is up! Notify this\n\t\t\tJanus.debug(\"Got a webrtcup event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.webrtcState(true);\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"hangup\") {\n\t\t\t// A plugin asked the core to hangup a PeerConnection on one of our handles\n\t\t\tJanus.debug(\"Got a hangup event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.webrtcState(false, json[\"reason\"]);\n\t\t\tpluginHandle.hangup();\n\t\t} else if(json[\"janus\"] === \"detached\") {\n\t\t\t// A plugin asked the core to detach one of our handles\n\t\t\tJanus.debug(\"Got a detached event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\t// Don't warn here because destroyHandle causes this situation.\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.ondetached();\n\t\t\tpluginHandle.detach();\n\t\t} else if(json[\"janus\"] === \"media\") {\n\t\t\t// Media started/stopped flowing\n\t\t\tJanus.debug(\"Got a media event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.mediaState(json[\"type\"], json[\"receiving\"]);\n\t\t} else if(json[\"janus\"] === \"slowlink\") {\n\t\t\tJanus.debug(\"Got a slowlink event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\t// Trouble uplink or downlink\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.debug(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpluginHandle.slowLink(json[\"uplink\"], json[\"lost\"]);\n\t\t} else if(json[\"janus\"] === \"error\") {\n\t\t\t// Oops, something wrong happened\n\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\tJanus.debug(json);\n\t\t\tvar transaction = json[\"transaction\"];\n\t\t\tif(transaction) {\n\t\t\t\tvar reportSuccess = transactions[transaction];\n\t\t\t\tif(reportSuccess) {\n\t\t\t\t\treportSuccess(json);\n\t\t\t\t}\n\t\t\t\tdelete transactions[transaction];\n\t\t\t}\n\t\t\treturn;\n\t\t} else if(json[\"janus\"] === \"event\") {\n\t\t\tJanus.debug(\"Got a plugin event on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tvar sender = json[\"sender\"];\n\t\t\tif(!sender) {\n\t\t\t\tJanus.warn(\"Missing sender...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar plugindata = json[\"plugindata\"];\n\t\t\tif(!plugindata) {\n\t\t\t\tJanus.warn(\"Missing plugindata...\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tJanus.debug(\"  -- Event is coming from \" + sender + \" (\" + plugindata[\"plugin\"] + \")\");\n\t\t\tvar data = plugindata[\"data\"];\n\t\t\tJanus.debug(data);\n\t\t\tvar pluginHandle = pluginHandles[sender];\n\t\t\tif(!pluginHandle) {\n\t\t\t\tJanus.warn(\"This handle is not attached to this session\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar jsep = json[\"jsep\"];\n\t\t\tif(jsep) {\n\t\t\t\tJanus.debug(\"Handling SDP as well...\");\n\t\t\t\tJanus.debug(jsep);\n\t\t\t}\n\t\t\tvar callback = pluginHandle.onmessage;\n\t\t\tif(callback) {\n\t\t\t\tJanus.debug(\"Notifying application...\");\n\t\t\t\t// Send to callback specified when attaching plugin handle\n\t\t\t\tcallback(data, jsep);\n\t\t\t} else {\n\t\t\t\t// Send to generic callback (?)\n\t\t\t\tJanus.debug(\"No provided notification callback\");\n\t\t\t}\n\t\t} else if(json[\"janus\"] === \"timeout\") {\n\t\t\tJanus.error(\"Timeout on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t\tif (websockets) {\n\t\t\t\tws.close(3504, \"Gateway timeout\");\n\t\t\t}\n\t\t\treturn;\n\t\t} else {\n\t\t\tJanus.warn(\"Unknown message/event  '\" + json[\"janus\"] + \"' on session \" + sessionId);\n\t\t\tJanus.debug(json);\n\t\t}\n\t}\n\n\t// Private helper to send keep-alive messages on WebSockets\n\tfunction keepAlive() {\n\t\tif(!server || !websockets || !connected)\n\t\t\treturn;\n\t\twsKeepaliveTimeoutId = setTimeout(keepAlive, keepAlivePeriod);\n\t\tvar request = { \"janus\": \"keepalive\", \"session_id\": sessionId, \"transaction\": Janus.randomString(12) };\n\t\tif(token)\n\t\t\trequest[\"token\"] = token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tws.send(JSON.stringify(request));\n\t}\n\n\t// Private method to create a session\n\tfunction createSession(callbacks) {\n\t\tvar transaction = Janus.randomString(12);\n\t\tvar request = { \"janus\": \"create\", \"transaction\": transaction };\n\t\tif(callbacks[\"reconnect\"]) {\n\t\t\t// We're reconnecting, claim the session\n\t\t\tconnected = false;\n\t\t\trequest[\"janus\"] = \"claim\";\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\t// If we were using websockets, ignore the old connection\n\t\t\tif(ws) {\n\t\t\t\tws.onopen = null;\n\t\t\t\tws.onerror = null;\n\t\t\t\tws.onclose = null;\n\t\t\t\tif(wsKeepaliveTimeoutId) {\n\t\t\t\t\tclearTimeout(wsKeepaliveTimeoutId);\n\t\t\t\t\twsKeepaliveTimeoutId = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(token)\n\t\t\trequest[\"token\"] = token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(!server && Janus.isArray(servers)) {\n\t\t\t// We still need to find a working server from the list we were given\n\t\t\tserver = servers[serversIndex];\n\t\t\tif(server.indexOf(\"ws\") === 0) {\n\t\t\t\twebsockets = true;\n\t\t\t\tJanus.log(\"Server #\" + (serversIndex+1) + \": trying WebSockets to contact Janus (\" + server + \")\");\n\t\t\t} else {\n\t\t\t\twebsockets = false;\n\t\t\t\tJanus.log(\"Server #\" + (serversIndex+1) + \": trying REST API to contact Janus (\" + server + \")\");\n\t\t\t}\n\t\t}\n\t\tif(websockets) {\n\t\t\tws = Janus.newWebSocket(server, 'janus-protocol');\n\t\t\twsHandlers = {\n\t\t\t\t'error': function() {\n\t\t\t\t\tJanus.error(\"Error connecting to the Janus WebSockets server... \" + server);\n\t\t\t\t\tif (Janus.isArray(servers) && !callbacks[\"reconnect\"]) {\n\t\t\t\t\t\tserversIndex++;\n\t\t\t\t\t\tif (serversIndex === servers.length) {\n\t\t\t\t\t\t\t// We tried all the servers the user gave us and they all failed\n\t\t\t\t\t\t\tcallbacks.error(\"Error connecting to any of the provided Janus servers: Is the server down?\");\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Let's try the next server\n\t\t\t\t\t\tserver = null;\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tcreateSession(callbacks);\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcallbacks.error(\"Error connecting to the Janus WebSockets server: Is the server down?\");\n\t\t\t\t},\n\n\t\t\t\t'open': function() {\n\t\t\t\t\t// We need to be notified about the success\n\t\t\t\t\ttransactions[transaction] = function(json) {\n\t\t\t\t\t\tJanus.debug(json);\n\t\t\t\t\t\tif (json[\"janus\"] !== \"success\") {\n\t\t\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\t\t\tcallbacks.error(json[\"error\"].reason);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\twsKeepaliveTimeoutId = setTimeout(keepAlive, keepAlivePeriod);\n\t\t\t\t\t\tconnected = true;\n\t\t\t\t\t\tsessionId = json[\"session_id\"] ? json[\"session_id\"] : json.data[\"id\"];\n\t\t\t\t\t\tif(callbacks[\"reconnect\"]) {\n\t\t\t\t\t\t\tJanus.log(\"Claimed session: \" + sessionId);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tJanus.log(\"Created session: \" + sessionId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.sessions[sessionId] = that;\n\t\t\t\t\t\tcallbacks.success();\n\t\t\t\t\t};\n\t\t\t\t\tws.send(JSON.stringify(request));\n\t\t\t\t},\n\n\t\t\t\t'message': function(event) {\n\t\t\t\t\thandleEvent(JSON.parse(event.data));\n\t\t\t\t},\n\n\t\t\t\t'close': function() {\n\t\t\t\t\tif (!server || !connected) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconnected = false;\n\t\t\t\t\t// FIXME What if this is called when the page is closed?\n\t\t\t\t\tgatewayCallbacks.error(\"Lost connection to the server (is it down?)\");\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfor(var eventName in wsHandlers) {\n\t\t\t\tws.addEventListener(eventName, wsHandlers[eventName]);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\tcallbacks.error(json[\"error\"].reason);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconnected = true;\n\t\t\t\tsessionId = json[\"session_id\"] ? json[\"session_id\"] : json.data[\"id\"];\n\t\t\t\tif(callbacks[\"reconnect\"]) {\n\t\t\t\t\tJanus.log(\"Claimed session: \" + sessionId);\n\t\t\t\t} else {\n\t\t\t\t\tJanus.log(\"Created session: \" + sessionId);\n\t\t\t\t}\n\t\t\t\tJanus.sessions[sessionId] = that;\n\t\t\t\teventHandler();\n\t\t\t\tcallbacks.success();\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\tif(Janus.isArray(servers) && !callbacks[\"reconnect\"]) {\n\t\t\t\t\tserversIndex++;\n\t\t\t\t\tif(serversIndex === servers.length) {\n\t\t\t\t\t\t// We tried all the servers the user gave us and they all failed\n\t\t\t\t\t\tcallbacks.error(\"Error connecting to any of the provided Janus servers: Is the server down?\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// Let's try the next server\n\t\t\t\t\tserver = null;\n\t\t\t\t\tsetTimeout(function() { createSession(callbacks); }, 200);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(errorThrown === \"\")\n\t\t\t\t\tcallbacks.error(textStatus + \": Is the server down?\");\n\t\t\t\telse\n\t\t\t\t\tcallbacks.error(textStatus + \": \" + errorThrown);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to get info on the server\n\tfunction getInfo(callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\t// FIXME This method triggers a success even when we fail\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tJanus.log(\"Getting info on Janus instance\");\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\tcallbacks.error(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\t// We just need to send an \"info\" request\n\t\tvar transaction = Janus.randomString(12);\n\t\tvar request = { \"janus\": \"info\", \"transaction\": transaction };\n\t\tif(token)\n\t\t\trequest[\"token\"] = token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(websockets) {\n\t\t\ttransactions[transaction] = function(json) {\n\t\t\t\tJanus.log(\"Server info:\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"server_info\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t}\n\t\t\t\tcallbacks.success(json);\n\t\t\t}\n\t\t\tws.send(JSON.stringify(request));\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.log(\"Server info:\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"server_info\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t}\n\t\t\t\tcallbacks.success(json);\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\tif(errorThrown === \"\")\n\t\t\t\t\tcallbacks.error(textStatus + \": Is the server down?\");\n\t\t\t\telse\n\t\t\t\t\tcallbacks.error(textStatus + \": \" + errorThrown);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to destroy a session\n\tfunction destroySession(callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\t// FIXME This method triggers a success even when we fail\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar unload = (callbacks.unload === true);\n\t\tvar notifyDestroyed = true;\n\t\tif(callbacks.notifyDestroyed !== undefined && callbacks.notifyDestroyed !== null)\n\t\t\tnotifyDestroyed = (callbacks.notifyDestroyed === true);\n\t\tvar cleanupHandles = (callbacks.cleanupHandles === true);\n\t\tJanus.log(\"Destroying session \" + sessionId + \" (unload=\" + unload + \")\");\n\t\tif(!sessionId) {\n\t\t\tJanus.warn(\"No session to destroy\");\n\t\t\tcallbacks.success();\n\t\t\tif(notifyDestroyed)\n\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\treturn;\n\t\t}\n\t\tif(cleanupHandles) {\n\t\t\tfor(var handleId in pluginHandles)\n\t\t\t\tdestroyHandle(handleId, { noRequest: true });\n\t\t}\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\tsessionId = null;\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\t// No need to destroy all handles first, Janus will do that itself\n\t\tvar request = { \"janus\": \"destroy\", \"transaction\": Janus.randomString(12) };\n\t\tif(token)\n\t\t\trequest[\"token\"] = token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(unload) {\n\t\t\t// We're unloading the page: use sendBeacon for HTTP instead,\n\t\t\t// or just close the WebSocket connection if we're using that\n\t\t\tif(websockets) {\n\t\t\t\tws.onclose = null;\n\t\t\t\tws.close();\n\t\t\t\tws = null;\n\t\t\t} else {\n\t\t\t\tnavigator.sendBeacon(server + \"/\" + sessionId, JSON.stringify(request));\n\t\t\t}\n\t\t\tJanus.log(\"Destroyed session:\");\n\t\t\tsessionId = null;\n\t\t\tconnected = false;\n\t\t\tcallbacks.success();\n\t\t\tif(notifyDestroyed)\n\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\treturn;\n\t\t}\n\t\tif(websockets) {\n\t\t\trequest[\"session_id\"] = sessionId;\n\n\t\t\tvar unbindWebSocket = function() {\n\t\t\t\tfor(var eventName in wsHandlers) {\n\t\t\t\t\tws.removeEventListener(eventName, wsHandlers[eventName]);\n\t\t\t\t}\n\t\t\t\tws.removeEventListener('message', onUnbindMessage);\n\t\t\t\tws.removeEventListener('error', onUnbindError);\n\t\t\t\tif(wsKeepaliveTimeoutId) {\n\t\t\t\t\tclearTimeout(wsKeepaliveTimeoutId);\n\t\t\t\t}\n\t\t\t\tws.close();\n\t\t\t};\n\n\t\t\tvar onUnbindMessage = function(event){\n\t\t\t\tvar data = JSON.parse(event.data);\n\t\t\t\tif(data.session_id == request.session_id && data.transaction == request.transaction) {\n\t\t\t\t\tunbindWebSocket();\n\t\t\t\t\tcallbacks.success();\n\t\t\t\t\tif(notifyDestroyed)\n\t\t\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar onUnbindError = function(event) {\n\t\t\t\tunbindWebSocket();\n\t\t\t\tcallbacks.error(\"Failed to destroy the server: Is the server down?\");\n\t\t\t\tif(notifyDestroyed)\n\t\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\t};\n\n\t\t\tws.addEventListener('message', onUnbindMessage);\n\t\t\tws.addEventListener('error', onUnbindError);\n\n\t\t\tif (ws.readyState === 1) {\n\t\t\t\tws.send(JSON.stringify(request));\n\t\t\t} else {\n\t\t\t\tonUnbindError();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.log(\"Destroyed session:\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tsessionId = null;\n\t\t\t\tconnected = false;\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t}\n\t\t\t\tcallbacks.success();\n\t\t\t\tif(notifyDestroyed)\n\t\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\t// Reset everything anyway\n\t\t\t\tsessionId = null;\n\t\t\t\tconnected = false;\n\t\t\t\tcallbacks.success();\n\t\t\t\tif(notifyDestroyed)\n\t\t\t\t\tgatewayCallbacks.destroyed();\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to create a plugin handle\n\tfunction createHandle(callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tcallbacks.consentDialog = (typeof callbacks.consentDialog == \"function\") ? callbacks.consentDialog : Janus.noop;\n\t\tcallbacks.iceState = (typeof callbacks.iceState == \"function\") ? callbacks.iceState : Janus.noop;\n\t\tcallbacks.mediaState = (typeof callbacks.mediaState == \"function\") ? callbacks.mediaState : Janus.noop;\n\t\tcallbacks.webrtcState = (typeof callbacks.webrtcState == \"function\") ? callbacks.webrtcState : Janus.noop;\n\t\tcallbacks.slowLink = (typeof callbacks.slowLink == \"function\") ? callbacks.slowLink : Janus.noop;\n\t\tcallbacks.onmessage = (typeof callbacks.onmessage == \"function\") ? callbacks.onmessage : Janus.noop;\n\t\tcallbacks.onlocalstream = (typeof callbacks.onlocalstream == \"function\") ? callbacks.onlocalstream : Janus.noop;\n\t\tcallbacks.onremotestream = (typeof callbacks.onremotestream == \"function\") ? callbacks.onremotestream : Janus.noop;\n\t\tcallbacks.ondata = (typeof callbacks.ondata == \"function\") ? callbacks.ondata : Janus.noop;\n\t\tcallbacks.ondataopen = (typeof callbacks.ondataopen == \"function\") ? callbacks.ondataopen : Janus.noop;\n\t\tcallbacks.oncleanup = (typeof callbacks.oncleanup == \"function\") ? callbacks.oncleanup : Janus.noop;\n\t\tcallbacks.ondetached = (typeof callbacks.ondetached == \"function\") ? callbacks.ondetached : Janus.noop;\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\tcallbacks.error(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar plugin = callbacks.plugin;\n\t\tif(!plugin) {\n\t\t\tJanus.error(\"Invalid plugin\");\n\t\t\tcallbacks.error(\"Invalid plugin\");\n\t\t\treturn;\n\t\t}\n\t\tvar opaqueId = callbacks.opaqueId;\n\t\tvar handleToken = callbacks.token ? callbacks.token : token;\n\t\tvar transaction = Janus.randomString(12);\n\t\tvar request = { \"janus\": \"attach\", \"plugin\": plugin, \"opaque_id\": opaqueId, \"transaction\": transaction };\n\t\tif(handleToken)\n\t\t\trequest[\"token\"] = handleToken;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(websockets) {\n\t\t\ttransactions[transaction] = function(json) {\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\tcallbacks.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar handleId = json.data[\"id\"];\n\t\t\t\tJanus.log(\"Created handle: \" + handleId);\n\t\t\t\tvar pluginHandle =\n\t\t\t\t\t{\n\t\t\t\t\t\tsession : that,\n\t\t\t\t\t\tplugin : plugin,\n\t\t\t\t\t\tid : handleId,\n\t\t\t\t\t\ttoken : handleToken,\n\t\t\t\t\t\tdetached : false,\n\t\t\t\t\t\twebrtcStuff : {\n\t\t\t\t\t\t\tstarted : false,\n\t\t\t\t\t\t\tmyStream : null,\n\t\t\t\t\t\t\tstreamExternal : false,\n\t\t\t\t\t\t\tremoteStream : null,\n\t\t\t\t\t\t\tmySdp : null,\n\t\t\t\t\t\t\tmediaConstraints : null,\n\t\t\t\t\t\t\tpc : null,\n\t\t\t\t\t\t\tdataChannel : {},\n\t\t\t\t\t\t\tdtmfSender : null,\n\t\t\t\t\t\t\ttrickle : true,\n\t\t\t\t\t\t\ticeDone : false,\n\t\t\t\t\t\t\tvolume : {\n\t\t\t\t\t\t\t\tvalue : null,\n\t\t\t\t\t\t\t\ttimer : null\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbitrate : {\n\t\t\t\t\t\t\t\tvalue : null,\n\t\t\t\t\t\t\t\tbsnow : null,\n\t\t\t\t\t\t\t\tbsbefore : null,\n\t\t\t\t\t\t\t\ttsnow : null,\n\t\t\t\t\t\t\t\ttsbefore : null,\n\t\t\t\t\t\t\t\ttimer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetId : function() { return handleId; },\n\t\t\t\t\t\tgetPlugin : function() { return plugin; },\n\t\t\t\t\t\tgetVolume : function() { return getVolume(handleId, true); },\n\t\t\t\t\t\tgetRemoteVolume : function() { return getVolume(handleId, true); },\n\t\t\t\t\t\tgetLocalVolume : function() { return getVolume(handleId, false); },\n\t\t\t\t\t\tisAudioMuted : function() { return isMuted(handleId, false); },\n\t\t\t\t\t\tmuteAudio : function() { return mute(handleId, false, true); },\n\t\t\t\t\t\tunmuteAudio : function() { return mute(handleId, false, false); },\n\t\t\t\t\t\tisVideoMuted : function() { return isMuted(handleId, true); },\n\t\t\t\t\t\tmuteVideo : function() { return mute(handleId, true, true); },\n\t\t\t\t\t\tunmuteVideo : function() { return mute(handleId, true, false); },\n\t\t\t\t\t\tgetBitrate : function() { return getBitrate(handleId); },\n\t\t\t\t\t\tsend : function(callbacks) { sendMessage(handleId, callbacks); },\n\t\t\t\t\t\tdata : function(callbacks) { sendData(handleId, callbacks); },\n\t\t\t\t\t\tdtmf : function(callbacks) { sendDtmf(handleId, callbacks); },\n\t\t\t\t\t\tconsentDialog : callbacks.consentDialog,\n\t\t\t\t\t\ticeState : callbacks.iceState,\n\t\t\t\t\t\tmediaState : callbacks.mediaState,\n\t\t\t\t\t\twebrtcState : callbacks.webrtcState,\n\t\t\t\t\t\tslowLink : callbacks.slowLink,\n\t\t\t\t\t\tonmessage : callbacks.onmessage,\n\t\t\t\t\t\tcreateOffer : function(callbacks) { prepareWebrtc(handleId, true, callbacks); },\n\t\t\t\t\t\tcreateAnswer : function(callbacks) { prepareWebrtc(handleId, false, callbacks); },\n\t\t\t\t\t\thandleRemoteJsep : function(callbacks) { prepareWebrtcPeer(handleId, callbacks); },\n\t\t\t\t\t\tonlocalstream : callbacks.onlocalstream,\n\t\t\t\t\t\tonremotestream : callbacks.onremotestream,\n\t\t\t\t\t\tondata : callbacks.ondata,\n\t\t\t\t\t\tondataopen : callbacks.ondataopen,\n\t\t\t\t\t\toncleanup : callbacks.oncleanup,\n\t\t\t\t\t\tondetached : callbacks.ondetached,\n\t\t\t\t\t\thangup : function(sendRequest) { cleanupWebrtc(handleId, sendRequest === true); },\n\t\t\t\t\t\tdetach : function(callbacks) { destroyHandle(handleId, callbacks); }\n\t\t\t\t\t};\n\t\t\t\tpluginHandles[handleId] = pluginHandle;\n\t\t\t\tcallbacks.success(pluginHandle);\n\t\t\t};\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\tws.send(JSON.stringify(request));\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\tcallbacks.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar handleId = json.data[\"id\"];\n\t\t\t\tJanus.log(\"Created handle: \" + handleId);\n\t\t\t\tvar pluginHandle =\n\t\t\t\t\t{\n\t\t\t\t\t\tsession : that,\n\t\t\t\t\t\tplugin : plugin,\n\t\t\t\t\t\tid : handleId,\n\t\t\t\t\t\ttoken : handleToken,\n\t\t\t\t\t\tdetached : false,\n\t\t\t\t\t\twebrtcStuff : {\n\t\t\t\t\t\t\tstarted : false,\n\t\t\t\t\t\t\tmyStream : null,\n\t\t\t\t\t\t\tstreamExternal : false,\n\t\t\t\t\t\t\tremoteStream : null,\n\t\t\t\t\t\t\tmySdp : null,\n\t\t\t\t\t\t\tmediaConstraints : null,\n\t\t\t\t\t\t\tpc : null,\n\t\t\t\t\t\t\tdataChannel : {},\n\t\t\t\t\t\t\tdtmfSender : null,\n\t\t\t\t\t\t\ttrickle : true,\n\t\t\t\t\t\t\ticeDone : false,\n\t\t\t\t\t\t\tvolume : {\n\t\t\t\t\t\t\t\tvalue : null,\n\t\t\t\t\t\t\t\ttimer : null\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbitrate : {\n\t\t\t\t\t\t\t\tvalue : null,\n\t\t\t\t\t\t\t\tbsnow : null,\n\t\t\t\t\t\t\t\tbsbefore : null,\n\t\t\t\t\t\t\t\ttsnow : null,\n\t\t\t\t\t\t\t\ttsbefore : null,\n\t\t\t\t\t\t\t\ttimer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetId : function() { return handleId; },\n\t\t\t\t\t\tgetPlugin : function() { return plugin; },\n\t\t\t\t\t\tgetVolume : function() { return getVolume(handleId, true); },\n\t\t\t\t\t\tgetRemoteVolume : function() { return getVolume(handleId, true); },\n\t\t\t\t\t\tgetLocalVolume : function() { return getVolume(handleId, false); },\n\t\t\t\t\t\tisAudioMuted : function() { return isMuted(handleId, false); },\n\t\t\t\t\t\tmuteAudio : function() { return mute(handleId, false, true); },\n\t\t\t\t\t\tunmuteAudio : function() { return mute(handleId, false, false); },\n\t\t\t\t\t\tisVideoMuted : function() { return isMuted(handleId, true); },\n\t\t\t\t\t\tmuteVideo : function() { return mute(handleId, true, true); },\n\t\t\t\t\t\tunmuteVideo : function() { return mute(handleId, true, false); },\n\t\t\t\t\t\tgetBitrate : function() { return getBitrate(handleId); },\n\t\t\t\t\t\tsend : function(callbacks) { sendMessage(handleId, callbacks); },\n\t\t\t\t\t\tdata : function(callbacks) { sendData(handleId, callbacks); },\n\t\t\t\t\t\tdtmf : function(callbacks) { sendDtmf(handleId, callbacks); },\n\t\t\t\t\t\tconsentDialog : callbacks.consentDialog,\n\t\t\t\t\t\ticeState : callbacks.iceState,\n\t\t\t\t\t\tmediaState : callbacks.mediaState,\n\t\t\t\t\t\twebrtcState : callbacks.webrtcState,\n\t\t\t\t\t\tslowLink : callbacks.slowLink,\n\t\t\t\t\t\tonmessage : callbacks.onmessage,\n\t\t\t\t\t\tcreateOffer : function(callbacks) { prepareWebrtc(handleId, true, callbacks); },\n\t\t\t\t\t\tcreateAnswer : function(callbacks) { prepareWebrtc(handleId, false, callbacks); },\n\t\t\t\t\t\thandleRemoteJsep : function(callbacks) { prepareWebrtcPeer(handleId, callbacks); },\n\t\t\t\t\t\tonlocalstream : callbacks.onlocalstream,\n\t\t\t\t\t\tonremotestream : callbacks.onremotestream,\n\t\t\t\t\t\tondata : callbacks.ondata,\n\t\t\t\t\t\tondataopen : callbacks.ondataopen,\n\t\t\t\t\t\toncleanup : callbacks.oncleanup,\n\t\t\t\t\t\tondetached : callbacks.ondetached,\n\t\t\t\t\t\thangup : function(sendRequest) { cleanupWebrtc(handleId, sendRequest === true); },\n\t\t\t\t\t\tdetach : function(callbacks) { destroyHandle(handleId, callbacks); }\n\t\t\t\t\t}\n\t\t\t\tpluginHandles[handleId] = pluginHandle;\n\t\t\t\tcallbacks.success(pluginHandle);\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\tif(errorThrown === \"\")\n\t\t\t\t\tcallbacks.error(textStatus + \": Is the server down?\");\n\t\t\t\telse\n\t\t\t\t\tcallbacks.error(textStatus + \": \" + errorThrown);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to send a message\n\tfunction sendMessage(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\tcallbacks.error(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar message = callbacks.message;\n\t\tvar jsep = callbacks.jsep;\n\t\tvar transaction = Janus.randomString(12);\n\t\tvar request = { \"janus\": \"message\", \"body\": message, \"transaction\": transaction };\n\t\tif(pluginHandle.token)\n\t\t\trequest[\"token\"] = pluginHandle.token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(jsep) {\n\t\t\trequest.jsep = {\n\t\t\t\ttype: jsep.type,\n\t\t\t\tsdp: jsep.sdp\n\t\t\t};\n\t\t\tif(jsep.e2ee)\n\t\t\t\trequest.jsep.e2ee = true;\n\t\t\tif(jsep.rid_order === \"hml\" || jsep.rid_order === \"lmh\")\n\t\t\t\trequest.jsep.rid_order = jsep.rid_order;\n\t\t}\n\t\tJanus.debug(\"Sending message to plugin (handle=\" + handleId + \"):\");\n\t\tJanus.debug(request);\n\t\tif(websockets) {\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\trequest[\"handle_id\"] = handleId;\n\t\t\ttransactions[transaction] = function(json) {\n\t\t\t\tJanus.debug(\"Message sent!\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] === \"success\") {\n\t\t\t\t\t// We got a success, must have been a synchronous transaction\n\t\t\t\t\tvar plugindata = json[\"plugindata\"];\n\t\t\t\t\tif(!plugindata) {\n\t\t\t\t\t\tJanus.warn(\"Request succeeded, but missing plugindata...\");\n\t\t\t\t\t\tcallbacks.success();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tJanus.log(\"Synchronous transaction successful (\" + plugindata[\"plugin\"] + \")\");\n\t\t\t\t\tvar data = plugindata[\"data\"];\n\t\t\t\t\tJanus.debug(data);\n\t\t\t\t\tcallbacks.success(data);\n\t\t\t\t\treturn;\n\t\t\t\t} else if(json[\"janus\"] !== \"ack\") {\n\t\t\t\t\t// Not a success and not an ack, must be an error\n\t\t\t\t\tif(json[\"error\"]) {\n\t\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\t\tcallbacks.error(json[\"error\"].code + \" \" + json[\"error\"].reason);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tJanus.error(\"Unknown error\");\t// FIXME\n\t\t\t\t\t\tcallbacks.error(\"Unknown error\");\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// If we got here, the plugin decided to handle the request asynchronously\n\t\t\t\tcallbacks.success();\n\t\t\t};\n\t\t\tws.send(JSON.stringify(request));\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId + \"/\" + handleId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.debug(\"Message sent!\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] === \"success\") {\n\t\t\t\t\t// We got a success, must have been a synchronous transaction\n\t\t\t\t\tvar plugindata = json[\"plugindata\"];\n\t\t\t\t\tif(!plugindata) {\n\t\t\t\t\t\tJanus.warn(\"Request succeeded, but missing plugindata...\");\n\t\t\t\t\t\tcallbacks.success();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tJanus.log(\"Synchronous transaction successful (\" + plugindata[\"plugin\"] + \")\");\n\t\t\t\t\tvar data = plugindata[\"data\"];\n\t\t\t\t\tJanus.debug(data);\n\t\t\t\t\tcallbacks.success(data);\n\t\t\t\t\treturn;\n\t\t\t\t} else if(json[\"janus\"] !== \"ack\") {\n\t\t\t\t\t// Not a success and not an ack, must be an error\n\t\t\t\t\tif(json[\"error\"]) {\n\t\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\t\tcallbacks.error(json[\"error\"].code + \" \" + json[\"error\"].reason);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tJanus.error(\"Unknown error\");\t// FIXME\n\t\t\t\t\t\tcallbacks.error(\"Unknown error\");\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// If we got here, the plugin decided to handle the request asynchronously\n\t\t\t\tcallbacks.success();\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\tcallbacks.error(textStatus + \": \" + errorThrown);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to send a trickle candidate\n\tfunction sendTrickleCandidate(handleId, candidate) {\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar request = { \"janus\": \"trickle\", \"candidate\": candidate, \"transaction\": Janus.randomString(12) };\n\t\tif(pluginHandle.token)\n\t\t\trequest[\"token\"] = pluginHandle.token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tJanus.vdebug(\"Sending trickle candidate (handle=\" + handleId + \"):\");\n\t\tJanus.vdebug(request);\n\t\tif(websockets) {\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\trequest[\"handle_id\"] = handleId;\n\t\t\tws.send(JSON.stringify(request));\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId + \"/\" + handleId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.vdebug(\"Candidate sent!\");\n\t\t\t\tJanus.vdebug(json);\n\t\t\t\tif(json[\"janus\"] !== \"ack\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t}\n\t\t});\n\t}\n\n\t// Private method to create a data channel\n\tfunction createDataChannel(handleId, dclabel, dcprotocol, incoming, pendingData) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.pc) {\n\t\t\tJanus.warn(\"Invalid PeerConnection\");\n\t\t\treturn;\n\t\t}\n\t\tvar onDataChannelMessage = function(event) {\n\t\t\tJanus.log('Received message on data channel:', event);\n\t\t\tvar label = event.target.label;\n\t\t\tpluginHandle.ondata(event.data, label);\n\t\t};\n\t\tvar onDataChannelStateChange = function(event) {\n\t\t\tJanus.log('Received state change on data channel:', event);\n\t\t\tvar label = event.target.label;\n\t\t\tvar protocol = event.target.protocol;\n\t\t\tvar dcState = config.dataChannel[label] ? config.dataChannel[label].readyState : \"null\";\n\t\t\tJanus.log('State change on <' + label + '> data channel: ' + dcState);\n\t\t\tif(dcState === 'open') {\n\t\t\t\t// Any pending messages to send?\n\t\t\t\tif(config.dataChannel[label].pending && config.dataChannel[label].pending.length > 0) {\n\t\t\t\t\tJanus.log(\"Sending pending messages on <\" + label + \">:\", config.dataChannel[label].pending.length);\n\t\t\t\t\tfor(var data of config.dataChannel[label].pending) {\n\t\t\t\t\t\tJanus.log(\"Sending data on data channel <\" + label + \">\");\n\t\t\t\t\t\tJanus.debug(data);\n\t\t\t\t\t\tconfig.dataChannel[label].send(data);\n\t\t\t\t\t}\n\t\t\t\t\tconfig.dataChannel[label].pending = [];\n\t\t\t\t}\n\t\t\t\t// Notify the open data channel\n\t\t\t\tpluginHandle.ondataopen(label, protocol);\n\t\t\t}\n\t\t};\n\t\tvar onDataChannelError = function(error) {\n\t\t\tJanus.error('Got error on data channel:', error);\n\t\t\t// TODO\n\t\t};\n\t\tif(!incoming) {\n\t\t\t// FIXME Add options (ordered, maxRetransmits, etc.)\n\t\t\tvar dcoptions = { ordered: true };\n\t\t\tif(dcprotocol)\n\t\t\t\tdcoptions.protocol = dcprotocol;\n\t\t\tconfig.dataChannel[dclabel] = config.pc.createDataChannel(dclabel, dcoptions);\n\t\t} else {\n\t\t\t// The channel was created by Janus\n\t\t\tconfig.dataChannel[dclabel] = incoming;\n\t\t}\n\t\tconfig.dataChannel[dclabel].onmessage = onDataChannelMessage;\n\t\tconfig.dataChannel[dclabel].onopen = onDataChannelStateChange;\n\t\tconfig.dataChannel[dclabel].onclose = onDataChannelStateChange;\n\t\tconfig.dataChannel[dclabel].onerror = onDataChannelError;\n\t\tconfig.dataChannel[dclabel].pending = [];\n\t\tif(pendingData)\n\t\t\tconfig.dataChannel[dclabel].pending.push(pendingData);\n\t}\n\n\t// Private method to send a data channel message\n\tfunction sendData(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tvar data = callbacks.text || callbacks.data;\n\t\tif(!data) {\n\t\t\tJanus.warn(\"Invalid data\");\n\t\t\tcallbacks.error(\"Invalid data\");\n\t\t\treturn;\n\t\t}\n\t\tvar label = callbacks.label ? callbacks.label : Janus.dataChanDefaultLabel;\n\t\tif(!config.dataChannel[label]) {\n\t\t\t// Create new data channel and wait for it to open\n\t\t\tcreateDataChannel(handleId, label, callbacks.protocol, false, data, callbacks.protocol);\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tif(config.dataChannel[label].readyState !== \"open\") {\n\t\t\tconfig.dataChannel[label].pending.push(data);\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tJanus.log(\"Sending data on data channel <\" + label + \">\");\n\t\tJanus.debug(data);\n\t\tconfig.dataChannel[label].send(data);\n\t\tcallbacks.success();\n\t}\n\n\t// Private method to send a DTMF tone\n\tfunction sendDtmf(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.dtmfSender) {\n\t\t\t// Create the DTMF sender the proper way, if possible\n\t\t\tif(config.pc) {\n\t\t\t\tvar senders = config.pc.getSenders();\n\t\t\t\tvar audioSender = senders.find(function(sender) {\n\t\t\t\t\treturn sender.track && sender.track.kind === 'audio';\n\t\t\t\t});\n\t\t\t\tif(!audioSender) {\n\t\t\t\t\tJanus.warn(\"Invalid DTMF configuration (no audio track)\");\n\t\t\t\t\tcallbacks.error(\"Invalid DTMF configuration (no audio track)\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconfig.dtmfSender = audioSender.dtmf;\n\t\t\t\tif(config.dtmfSender) {\n\t\t\t\t\tJanus.log(\"Created DTMF Sender\");\n\t\t\t\t\tconfig.dtmfSender.ontonechange = function(tone) { Janus.debug(\"Sent DTMF tone: \" + tone.tone); };\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!config.dtmfSender) {\n\t\t\t\tJanus.warn(\"Invalid DTMF configuration\");\n\t\t\t\tcallbacks.error(\"Invalid DTMF configuration\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tvar dtmf = callbacks.dtmf;\n\t\tif(!dtmf) {\n\t\t\tJanus.warn(\"Invalid DTMF parameters\");\n\t\t\tcallbacks.error(\"Invalid DTMF parameters\");\n\t\t\treturn;\n\t\t}\n\t\tvar tones = dtmf.tones;\n\t\tif(!tones) {\n\t\t\tJanus.warn(\"Invalid DTMF string\");\n\t\t\tcallbacks.error(\"Invalid DTMF string\");\n\t\t\treturn;\n\t\t}\n\t\tvar duration = (typeof dtmf.duration === 'number') ? dtmf.duration : 500; // We choose 500ms as the default duration for a tone\n\t\tvar gap = (typeof dtmf.gap === 'number') ? dtmf.gap : 50; // We choose 50ms as the default gap between tones\n\t\tJanus.debug(\"Sending DTMF string \" + tones + \" (duration \" + duration + \"ms, gap \" + gap + \"ms)\");\n\t\tconfig.dtmfSender.insertDTMF(tones, duration, gap);\n\t\tcallbacks.success();\n\t}\n\n\t// Private method to destroy a plugin handle\n\tfunction destroyHandle(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar noRequest = (callbacks.noRequest === true);\n\t\tJanus.log(\"Destroying handle \" + handleId + \" (only-locally=\" + noRequest + \")\");\n\t\tcleanupWebrtc(handleId);\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || pluginHandle.detached) {\n\t\t\t// Plugin was already detached by Janus, calling detach again will return a handle not found error, so just exit here\n\t\t\tdelete pluginHandles[handleId];\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tpluginHandle.detached = true;\n\t\tif(noRequest) {\n\t\t\t// We're only removing the handle locally\n\t\t\tdelete pluginHandles[handleId];\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tif(!connected) {\n\t\t\tJanus.warn(\"Is the server down? (connected=false)\");\n\t\t\tcallbacks.error(\"Is the server down? (connected=false)\");\n\t\t\treturn;\n\t\t}\n\t\tvar request = { \"janus\": \"detach\", \"transaction\": Janus.randomString(12) };\n\t\tif(pluginHandle.token)\n\t\t\trequest[\"token\"] = pluginHandle.token;\n\t\tif(apisecret)\n\t\t\trequest[\"apisecret\"] = apisecret;\n\t\tif(websockets) {\n\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\trequest[\"handle_id\"] = handleId;\n\t\t\tws.send(JSON.stringify(request));\n\t\t\tdelete pluginHandles[handleId];\n\t\t\tcallbacks.success();\n\t\t\treturn;\n\t\t}\n\t\tJanus.httpAPICall(server + \"/\" + sessionId + \"/\" + handleId, {\n\t\t\tverb: 'POST',\n\t\t\twithCredentials: withCredentials,\n\t\t\tbody: request,\n\t\t\tsuccess: function(json) {\n\t\t\t\tJanus.log(\"Destroyed handle:\");\n\t\t\t\tJanus.debug(json);\n\t\t\t\tif(json[\"janus\"] !== \"success\") {\n\t\t\t\t\tJanus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n\t\t\t\t}\n\t\t\t\tdelete pluginHandles[handleId];\n\t\t\t\tcallbacks.success();\n\t\t\t},\n\t\t\terror: function(textStatus, errorThrown) {\n\t\t\t\tJanus.error(textStatus + \":\", errorThrown);\t// FIXME\n\t\t\t\t// We cleanup anyway\n\t\t\t\tdelete pluginHandles[handleId];\n\t\t\t\tcallbacks.success();\n\t\t\t}\n\t\t});\n\t}\n\n\t// WebRTC stuff\n\tfunction streamsDone(handleId, jsep, media, callbacks, stream) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\t// Close all tracks if the given stream has been created internally\n\t\t\tif(!callbacks.stream) {\n\t\t\t\tJanus.stopAllTracks(stream);\n\t\t\t}\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tJanus.debug(\"streamsDone:\", stream);\n\t\tif(stream) {\n\t\t\tJanus.debug(\"  -- Audio tracks:\", stream.getAudioTracks());\n\t\t\tJanus.debug(\"  -- Video tracks:\", stream.getVideoTracks());\n\t\t}\n\t\t// We're now capturing the new stream: check if we're updating or if it's a new thing\n\t\tvar addTracks = false;\n\t\tif(!config.myStream || !media.update || (config.streamExternal && !media.replaceAudio && !media.replaceVideo)) {\n\t\t\tconfig.myStream = stream;\n\t\t\taddTracks = true;\n\t\t} else {\n\t\t\t// We only need to update the existing stream\n\t\t\tif(((!media.update && isAudioSendEnabled(media)) || (media.update && (media.addAudio || media.replaceAudio))) &&\n\t\t\t\t\tstream.getAudioTracks() && stream.getAudioTracks().length) {\n\t\t\t\tconfig.myStream.addTrack(stream.getAudioTracks()[0]);\n\t\t\t\tif(Janus.unifiedPlan) {\n\t\t\t\t\t// Use Transceivers\n\t\t\t\t\tJanus.log((media.replaceAudio ? \"Replacing\" : \"Adding\") + \" audio track:\", stream.getAudioTracks()[0]);\n\t\t\t\t\tvar audioTransceiver = null;\n\t\t\t\t\tvar transceivers = config.pc.getTransceivers();\n\t\t\t\t\tif(transceivers && transceivers.length > 0) {\n\t\t\t\t\t\tfor(var t of transceivers) {\n\t\t\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"audio\") ||\n\t\t\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"audio\")) {\n\t\t\t\t\t\t\t\taudioTransceiver = t;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(audioTransceiver && audioTransceiver.sender) {\n\t\t\t\t\t\taudioTransceiver.sender.replaceTrack(stream.getAudioTracks()[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig.pc.addTrack(stream.getAudioTracks()[0], stream);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tJanus.log((media.replaceAudio ? \"Replacing\" : \"Adding\") + \" audio track:\", stream.getAudioTracks()[0]);\n\t\t\t\t\tconfig.pc.addTrack(stream.getAudioTracks()[0], stream);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(((!media.update && isVideoSendEnabled(media)) || (media.update && (media.addVideo || media.replaceVideo))) &&\n\t\t\t\t\tstream.getVideoTracks() && stream.getVideoTracks().length) {\n\t\t\t\tconfig.myStream.addTrack(stream.getVideoTracks()[0]);\n\t\t\t\tif(Janus.unifiedPlan) {\n\t\t\t\t\t// Use Transceivers\n\t\t\t\t\tJanus.log((media.replaceVideo ? \"Replacing\" : \"Adding\") + \" video track:\", stream.getVideoTracks()[0]);\n\t\t\t\t\tvar videoTransceiver = null;\n\t\t\t\t\tvar transceivers = config.pc.getTransceivers();\n\t\t\t\t\tif(transceivers && transceivers.length > 0) {\n\t\t\t\t\t\tfor(var t of transceivers) {\n\t\t\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"video\") ||\n\t\t\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"video\")) {\n\t\t\t\t\t\t\t\tvideoTransceiver = t;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(videoTransceiver && videoTransceiver.sender) {\n\t\t\t\t\t\tvideoTransceiver.sender.replaceTrack(stream.getVideoTracks()[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig.pc.addTrack(stream.getVideoTracks()[0], stream);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tJanus.log((media.replaceVideo ? \"Replacing\" : \"Adding\") + \" video track:\", stream.getVideoTracks()[0]);\n\t\t\t\t\tconfig.pc.addTrack(stream.getVideoTracks()[0], stream);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// If we still need to create a PeerConnection, let's do that\n\t\tif(!config.pc) {\n\t\t\tvar pc_config = {\"iceServers\": iceServers, \"iceTransportPolicy\": iceTransportPolicy, \"bundlePolicy\": bundlePolicy};\n\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"chrome\") {\n\t\t\t\t// For Chrome versions before 72, we force a plan-b semantic, and unified-plan otherwise\n\t\t\t\tpc_config[\"sdpSemantics\"] = (Janus.webRTCAdapter.browserDetails.version < 72) ? \"plan-b\" : \"unified-plan\";\n\t\t\t}\n\t\t\tvar pc_constraints = {\n\t\t\t\t\"optional\": [{\"DtlsSrtpKeyAgreement\": true}]\n\t\t\t};\n\t\t\tif(ipv6Support) {\n\t\t\t\tpc_constraints.optional.push({\"googIPv6\":true});\n\t\t\t}\n\t\t\t// Any custom constraint to add?\n\t\t\tif(callbacks.rtcConstraints && typeof callbacks.rtcConstraints === 'object') {\n\t\t\t\tJanus.debug(\"Adding custom PeerConnection constraints:\", callbacks.rtcConstraints);\n\t\t\t\tfor(var i in callbacks.rtcConstraints) {\n\t\t\t\t\tpc_constraints.optional.push(callbacks.rtcConstraints[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"edge\") {\n\t\t\t\t// This is Edge, enable BUNDLE explicitly\n\t\t\t\tpc_config.bundlePolicy = \"max-bundle\";\n\t\t\t}\n\t\t\t// Check if a sender or receiver transform has been provided\n\t\t\tif(RTCRtpSender && (RTCRtpSender.prototype.createEncodedStreams ||\n\t\t\t\t\t(RTCRtpSender.prototype.createEncodedAudioStreams &&\n\t\t\t\t\tRTCRtpSender.prototype.createEncodedVideoStreams)) &&\n\t\t\t\t\t(callbacks.senderTransforms || callbacks.receiverTransforms)) {\n\t\t\t\tconfig.senderTransforms = callbacks.senderTransforms;\n\t\t\t\tconfig.receiverTransforms = callbacks.receiverTransforms;\n\t\t\t\tpc_config[\"forceEncodedAudioInsertableStreams\"] = true;\n\t\t\t\tpc_config[\"forceEncodedVideoInsertableStreams\"] = true;\n\t\t\t\tpc_config[\"encodedInsertableStreams\"] = true;\n\t\t\t}\n\t\t\tJanus.log(\"Creating PeerConnection\");\n\t\t\tJanus.debug(pc_constraints);\n\t\t\tconfig.pc = new RTCPeerConnection(pc_config, pc_constraints);\n\t\t\tJanus.debug(config.pc);\n\t\t\tif(config.pc.getStats) {\t// FIXME\n\t\t\t\tconfig.volume = {};\n\t\t\t\tconfig.bitrate.value = \"0 kbits/sec\";\n\t\t\t}\n\t\t\tJanus.log(\"Preparing local SDP and gathering candidates (trickle=\" + config.trickle + \")\");\n\t\t\tconfig.pc.oniceconnectionstatechange = function(e) {\n\t\t\t\tif(config.pc)\n\t\t\t\t\tpluginHandle.iceState(config.pc.iceConnectionState);\n\t\t\t};\n\t\t\tconfig.pc.onicecandidate = function(event) {\n\t\t\t\tif (!event.candidate ||\n\t\t\t\t\t\t(Janus.webRTCAdapter.browserDetails.browser === 'edge' && event.candidate.candidate.indexOf('endOfCandidates') > 0)) {\n\t\t\t\t\tJanus.log(\"End of candidates.\");\n\t\t\t\t\tconfig.iceDone = true;\n\t\t\t\t\tif(config.trickle === true) {\n\t\t\t\t\t\t// Notify end of candidates\n\t\t\t\t\t\tsendTrickleCandidate(handleId, {\"completed\": true});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// No trickle, time to send the complete SDP (including all candidates)\n\t\t\t\t\t\tsendSDP(handleId, callbacks);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// JSON.stringify doesn't work on some WebRTC objects anymore\n\t\t\t\t\t// See https://code.google.com/p/chromium/issues/detail?id=467366\n\t\t\t\t\tvar candidate = {\n\t\t\t\t\t\t\"candidate\": event.candidate.candidate,\n\t\t\t\t\t\t\"sdpMid\": event.candidate.sdpMid,\n\t\t\t\t\t\t\"sdpMLineIndex\": event.candidate.sdpMLineIndex\n\t\t\t\t\t};\n\t\t\t\t\tif(config.trickle === true) {\n\t\t\t\t\t\t// Send candidate\n\t\t\t\t\t\tsendTrickleCandidate(handleId, candidate);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tconfig.pc.ontrack = function(event) {\n\t\t\t\tJanus.log(\"Handling Remote Track\");\n\t\t\t\tJanus.debug(event);\n\t\t\t\tif(!event.streams)\n\t\t\t\t\treturn;\n\t\t\t\tconfig.remoteStream = event.streams[0];\n\t\t\t\tpluginHandle.onremotestream(config.remoteStream);\n\t\t\t\tif(event.track.onended)\n\t\t\t\t\treturn;\n\t\t\t\tif(config.receiverTransforms) {\n\t\t\t\t\tvar receiverStreams = null;\n\t\t\t\t\tif(RTCRtpSender.prototype.createEncodedStreams) {\n\t\t\t\t\t\treceiverStreams = event.receiver.createEncodedStreams();\n\t\t\t\t\t} else if(RTCRtpSender.prototype.createAudioEncodedStreams || RTCRtpSender.prototype.createEncodedVideoStreams) {\n\t\t\t\t\t\tif(event.track.kind === \"audio\" && config.receiverTransforms[\"audio\"]) {\n\t\t\t\t\t\t\treceiverStreams = event.receiver.createEncodedAudioStreams();\n\t\t\t\t\t\t} else if(event.track.kind === \"video\" && config.receiverTransforms[\"video\"]) {\n\t\t\t\t\t\t\treceiverStreams = event.receiver.createEncodedVideoStreams();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(receiverStreams) {\n\t\t\t\t\t\tconsole.log(receiverStreams);\n\t\t\t\t\t\tif(receiverStreams.readableStream && receiverStreams.writableStream) {\n\t\t\t\t\t\t\treceiverStreams.readableStream\n\t\t\t\t\t\t\t\t.pipeThrough(config.receiverTransforms[event.track.kind])\n\t\t\t\t\t\t\t\t.pipeTo(receiverStreams.writableStream);\n\t\t\t\t\t\t} else if(receiverStreams.readable && receiverStreams.writable) {\n\t\t\t\t\t\t\treceiverStreams.readable\n\t\t\t\t\t\t\t\t.pipeThrough(config.receiverTransforms[event.track.kind])\n\t\t\t\t\t\t\t\t.pipeTo(receiverStreams.writable);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar trackMutedTimeoutId = null;\n\t\t\t\tJanus.log(\"Adding onended callback to track:\", event.track);\n\t\t\t\tevent.track.onended = function(ev) {\n\t\t\t\t\tJanus.log(\"Remote track removed:\", ev);\n\t\t\t\t\tif(config.remoteStream) {\n\t\t\t\t\t\tclearTimeout(trackMutedTimeoutId);\n\t\t\t\t\t\tconfig.remoteStream.removeTrack(ev.target);\n\t\t\t\t\t\tpluginHandle.onremotestream(config.remoteStream);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tevent.track.onmute = function(ev) {\n\t\t\t\t\tJanus.log(\"Remote track muted:\", ev);\n\t\t\t\t\tif(config.remoteStream && trackMutedTimeoutId == null) {\n\t\t\t\t\t\ttrackMutedTimeoutId = setTimeout(function() {\n\t\t\t\t\t\t\tJanus.log(\"Removing remote track\");\n\t\t\t\t\t\t\tif (config.remoteStream) {\n\t\t\t\t\t\t\t\tconfig.remoteStream.removeTrack(ev.target);\n\t\t\t\t\t\t\t\tpluginHandle.onremotestream(config.remoteStream);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttrackMutedTimeoutId = null;\n\t\t\t\t\t\t// Chrome seems to raise mute events only at multiples of 834ms;\n\t\t\t\t\t\t// we set the timeout to three times this value (rounded to 840ms)\n\t\t\t\t\t\t}, 3 * 840);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tevent.track.onunmute = function(ev) {\n\t\t\t\t\tJanus.log(\"Remote track flowing again:\", ev);\n\t\t\t\t\tif(trackMutedTimeoutId != null) {\n\t\t\t\t\t\tclearTimeout(trackMutedTimeoutId);\n\t\t\t\t\t\ttrackMutedTimeoutId = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconfig.remoteStream.addTrack(ev.target);\n\t\t\t\t\t\t\tpluginHandle.onremotestream(config.remoteStream);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\t\tif(addTracks && stream) {\n\t\t\tJanus.log('Adding local stream');\n\t\t\tvar simulcast2 = (callbacks.simulcast2 === true);\n\t\t\tstream.getTracks().forEach(function(track) {\n\t\t\t\tJanus.log('Adding local track:', track);\n\t\t\t\tvar sender = null;\n\t\t\t\tif(!simulcast2 || track.kind === 'audio') {\n\t\t\t\t\tsender = config.pc.addTrack(track, stream);\n\t\t\t\t} else {\n\t\t\t\t\tJanus.log('Enabling rid-based simulcasting:', track);\n\t\t\t\t\tvar maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);\n\t\t\t\t\tvar tr = config.pc.addTransceiver(track, {\n\t\t\t\t\t\tdirection: \"sendrecv\",\n\t\t\t\t\t\tstreams: [stream],\n\t\t\t\t\t\tsendEncodings: callbacks.sendEncodings || [\n\t\t\t\t\t\t\t{ rid: \"h\", active: true, maxBitrate: maxBitrates.high },\n\t\t\t\t\t\t\t{ rid: \"m\", active: true, maxBitrate: maxBitrates.medium, scaleResolutionDownBy: 2 },\n\t\t\t\t\t\t\t{ rid: \"l\", active: true, maxBitrate: maxBitrates.low, scaleResolutionDownBy: 4 }\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t\tif(tr)\n\t\t\t\t\t\tsender = tr.sender;\n\t\t\t\t}\n\t\t\t\t// Check if insertable streams are involved\n\t\t\t\tif(sender && config.senderTransforms) {\n\t\t\t\t\tvar senderStreams = null;\n\t\t\t\t\tif(RTCRtpSender.prototype.createEncodedStreams) {\n\t\t\t\t\t\tsenderStreams = sender.createEncodedStreams();\n\t\t\t\t\t} else if(RTCRtpSender.prototype.createAudioEncodedStreams || RTCRtpSender.prototype.createEncodedVideoStreams) {\n\t\t\t\t\t\tif(sender.track.kind === \"audio\" && config.senderTransforms[\"audio\"]) {\n\t\t\t\t\t\t\tsenderStreams = sender.createEncodedAudioStreams();\n\t\t\t\t\t\t} else if(sender.track.kind === \"video\" && config.senderTransforms[\"video\"]) {\n\t\t\t\t\t\t\tsenderStreams = sender.createEncodedVideoStreams();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(senderStreams) {\n\t\t\t\t\t\tconsole.log(senderStreams);\n\t\t\t\t\t\tif(senderStreams.readableStream && senderStreams.writableStream) {\n\t\t\t\t\t\t\tsenderStreams.readableStream\n\t\t\t\t\t\t\t\t.pipeThrough(config.senderTransforms[sender.track.kind])\n\t\t\t\t\t\t\t\t.pipeTo(senderStreams.writableStream);\n\t\t\t\t\t\t} else if(senderStreams.readable && senderStreams.writable) {\n\t\t\t\t\t\t\tsenderStreams.readable\n\t\t\t\t\t\t\t\t.pipeThrough(config.senderTransforms[sender.track.kind])\n\t\t\t\t\t\t\t\t.pipeTo(senderStreams.writable);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// Any data channel to create?\n\t\tif(isDataEnabled(media) && !config.dataChannel[Janus.dataChanDefaultLabel]) {\n\t\t\tJanus.log(\"Creating default data channel\");\n\t\t\tcreateDataChannel(handleId, Janus.dataChanDefaultLabel, null, false);\n\t\t\tconfig.pc.ondatachannel = function(event) {\n\t\t\t\tJanus.log(\"Data channel created by Janus:\", event);\n\t\t\t\tcreateDataChannel(handleId, event.channel.label, event.channel.protocol, event.channel);\n\t\t\t};\n\t\t}\n\t\t// If there's a new local stream, let's notify the application\n\t\tif(config.myStream) {\n\t\t\tpluginHandle.onlocalstream(config.myStream);\n\t\t}\n\t\t// Create offer/answer now\n\t\tif(!jsep) {\n\t\t\tcreateOffer(handleId, media, callbacks);\n\t\t} else {\n\t\t\tconfig.pc.setRemoteDescription(jsep)\n\t\t\t\t.then(function() {\n\t\t\t\t\tJanus.log(\"Remote description accepted!\");\n\t\t\t\t\tconfig.remoteSdp = jsep.sdp;\n\t\t\t\t\t// Any trickle candidate we cached?\n\t\t\t\t\tif(config.candidates && config.candidates.length > 0) {\n\t\t\t\t\t\tfor(var i = 0; i< config.candidates.length; i++) {\n\t\t\t\t\t\t\tvar candidate = config.candidates[i];\n\t\t\t\t\t\t\tJanus.debug(\"Adding remote candidate:\", candidate);\n\t\t\t\t\t\t\tif(!candidate || candidate.completed === true) {\n\t\t\t\t\t\t\t\t// end-of-candidates\n\t\t\t\t\t\t\t\tconfig.pc.addIceCandidate(Janus.endOfCandidates);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// New candidate\n\t\t\t\t\t\t\t\tconfig.pc.addIceCandidate(candidate);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconfig.candidates = [];\n\t\t\t\t\t}\n\t\t\t\t\t// Create the answer now\n\t\t\t\t\tcreateAnswer(handleId, media, callbacks);\n\t\t\t\t}, callbacks.error);\n\t\t}\n\t}\n\n\tfunction prepareWebrtc(handleId, offer, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : webrtcError;\n\t\tvar jsep = callbacks.jsep;\n\t\tif(offer && jsep) {\n\t\t\tJanus.error(\"Provided a JSEP to a createOffer\");\n\t\t\tcallbacks.error(\"Provided a JSEP to a createOffer\");\n\t\t\treturn;\n\t\t} else if(!offer && (!jsep || !jsep.type || !jsep.sdp)) {\n\t\t\tJanus.error(\"A valid JSEP is required for createAnswer\");\n\t\t\tcallbacks.error(\"A valid JSEP is required for createAnswer\");\n\t\t\treturn;\n\t\t}\n\t\t/* Check that callbacks.media is a (not null) Object */\n\t\tcallbacks.media = (typeof callbacks.media === 'object' && callbacks.media) ? callbacks.media : { audio: true, video: true };\n\t\tvar media = callbacks.media;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tconfig.trickle = isTrickleEnabled(callbacks.trickle);\n\t\t// Are we updating a session?\n\t\tif(!config.pc) {\n\t\t\t// Nope, new PeerConnection\n\t\t\tmedia.update = false;\n\t\t\tmedia.keepAudio = false;\n\t\t\tmedia.keepVideo = false;\n\t\t} else {\n\t\t\tJanus.log(\"Updating existing media session\");\n\t\t\tmedia.update = true;\n\t\t\t// Check if there's anything to add/remove/replace, or if we\n\t\t\t// can go directly to preparing the new SDP offer or answer\n\t\t\tif(callbacks.stream) {\n\t\t\t\t// External stream: is this the same as the one we were using before?\n\t\t\t\tif(callbacks.stream !== config.myStream) {\n\t\t\t\t\tJanus.log(\"Renegotiation involves a new external stream\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Check if there are changes on audio\n\t\t\t\tif(media.addAudio) {\n\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\tmedia.replaceAudio = false;\n\t\t\t\t\tmedia.removeAudio = false;\n\t\t\t\t\tmedia.audioSend = true;\n\t\t\t\t\tif(config.myStream && config.myStream.getAudioTracks() && config.myStream.getAudioTracks().length) {\n\t\t\t\t\t\tJanus.error(\"Can't add audio stream, there already is one\");\n\t\t\t\t\t\tcallbacks.error(\"Can't add audio stream, there already is one\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else if(media.removeAudio) {\n\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\tmedia.replaceAudio = false;\n\t\t\t\t\tmedia.addAudio = false;\n\t\t\t\t\tmedia.audioSend = false;\n\t\t\t\t} else if(media.replaceAudio) {\n\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\tmedia.addAudio = false;\n\t\t\t\t\tmedia.removeAudio = false;\n\t\t\t\t\tmedia.audioSend = true;\n\t\t\t\t}\n\t\t\t\tif(!config.myStream) {\n\t\t\t\t\t// No media stream: if we were asked to replace, it's actually an \"add\"\n\t\t\t\t\tif(media.replaceAudio) {\n\t\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\t\tmedia.replaceAudio = false;\n\t\t\t\t\t\tmedia.addAudio = true;\n\t\t\t\t\t\tmedia.audioSend = true;\n\t\t\t\t\t}\n\t\t\t\t\tif(isAudioSendEnabled(media)) {\n\t\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\t\tmedia.addAudio = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {\n\t\t\t\t\t\t// No audio track: if we were asked to replace, it's actually an \"add\"\n\t\t\t\t\t\tif(media.replaceAudio) {\n\t\t\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\t\t\tmedia.replaceAudio = false;\n\t\t\t\t\t\t\tmedia.addAudio = true;\n\t\t\t\t\t\t\tmedia.audioSend = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(isAudioSendEnabled(media)) {\n\t\t\t\t\t\t\tmedia.keepAudio = false;\n\t\t\t\t\t\t\tmedia.addAudio = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// We have an audio track: should we keep it as it is?\n\t\t\t\t\t\tif(isAudioSendEnabled(media) &&\n\t\t\t\t\t\t\t\t!media.removeAudio && !media.replaceAudio) {\n\t\t\t\t\t\t\tmedia.keepAudio = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Check if there are changes on video\n\t\t\t\tif(media.addVideo) {\n\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\tmedia.replaceVideo = false;\n\t\t\t\t\tmedia.removeVideo = false;\n\t\t\t\t\tmedia.videoSend = true;\n\t\t\t\t\tif(config.myStream && config.myStream.getVideoTracks() && config.myStream.getVideoTracks().length) {\n\t\t\t\t\t\tJanus.error(\"Can't add video stream, there already is one\");\n\t\t\t\t\t\tcallbacks.error(\"Can't add video stream, there already is one\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else if(media.removeVideo) {\n\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\tmedia.replaceVideo = false;\n\t\t\t\t\tmedia.addVideo = false;\n\t\t\t\t\tmedia.videoSend = false;\n\t\t\t\t} else if(media.replaceVideo) {\n\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\tmedia.addVideo = false;\n\t\t\t\t\tmedia.removeVideo = false;\n\t\t\t\t\tmedia.videoSend = true;\n\t\t\t\t}\n\t\t\t\tif(!config.myStream) {\n\t\t\t\t\t// No media stream: if we were asked to replace, it's actually an \"add\"\n\t\t\t\t\tif(media.replaceVideo) {\n\t\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\t\tmedia.replaceVideo = false;\n\t\t\t\t\t\tmedia.addVideo = true;\n\t\t\t\t\t\tmedia.videoSend = true;\n\t\t\t\t\t}\n\t\t\t\t\tif(isVideoSendEnabled(media)) {\n\t\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\t\tmedia.addVideo = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {\n\t\t\t\t\t\t// No video track: if we were asked to replace, it's actually an \"add\"\n\t\t\t\t\t\tif(media.replaceVideo) {\n\t\t\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\t\t\tmedia.replaceVideo = false;\n\t\t\t\t\t\t\tmedia.addVideo = true;\n\t\t\t\t\t\t\tmedia.videoSend = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(isVideoSendEnabled(media)) {\n\t\t\t\t\t\t\tmedia.keepVideo = false;\n\t\t\t\t\t\t\tmedia.addVideo = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// We have a video track: should we keep it as it is?\n\t\t\t\t\t\tif(isVideoSendEnabled(media) && !media.removeVideo && !media.replaceVideo) {\n\t\t\t\t\t\t\tmedia.keepVideo = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Data channels can only be added\n\t\t\t\tif(media.addData) {\n\t\t\t\t\tmedia.data = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If we're updating and keeping all tracks, let's skip the getUserMedia part\n\t\t\tif((isAudioSendEnabled(media) && media.keepAudio) &&\n\t\t\t\t\t(isVideoSendEnabled(media) && media.keepVideo)) {\n\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, config.myStream);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// If we're updating, check if we need to remove/replace one of the tracks\n\t\tif(media.update && (!config.streamExternal || (config.streamExternal && (media.replaceAudio || media.replaceVideo)))) {\n\t\t\tif(media.removeAudio || media.replaceAudio) {\n\t\t\t\tif(config.myStream && config.myStream.getAudioTracks() && config.myStream.getAudioTracks().length) {\n\t\t\t\t\tvar at = config.myStream.getAudioTracks()[0];\n\t\t\t\t\tJanus.log(\"Removing audio track:\", at);\n\t\t\t\t\tconfig.myStream.removeTrack(at);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tat.stop();\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t}\n\t\t\t\tif(config.pc.getSenders() && config.pc.getSenders().length) {\n\t\t\t\t\tvar ra = true;\n\t\t\t\t\tif(media.replaceAudio && Janus.unifiedPlan) {\n\t\t\t\t\t\t// We can use replaceTrack\n\t\t\t\t\t\tra = false;\n\t\t\t\t\t}\n\t\t\t\t\tif(ra) {\n\t\t\t\t\t\tfor(var asnd of config.pc.getSenders()) {\n\t\t\t\t\t\t\tif(asnd && asnd.track && asnd.track.kind === \"audio\") {\n\t\t\t\t\t\t\t\tJanus.log(\"Removing audio sender:\", asnd);\n\t\t\t\t\t\t\t\tconfig.pc.removeTrack(asnd);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(media.removeVideo || media.replaceVideo) {\n\t\t\t\tif(config.myStream && config.myStream.getVideoTracks() && config.myStream.getVideoTracks().length) {\n\t\t\t\t\tvar vt = config.myStream.getVideoTracks()[0];\n\t\t\t\t\tJanus.log(\"Removing video track:\", vt);\n\t\t\t\t\tconfig.myStream.removeTrack(vt);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvt.stop();\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t}\n\t\t\t\tif(config.pc.getSenders() && config.pc.getSenders().length) {\n\t\t\t\t\tvar rv = true;\n\t\t\t\t\tif(media.replaceVideo && Janus.unifiedPlan) {\n\t\t\t\t\t\t// We can use replaceTrack\n\t\t\t\t\t\trv = false;\n\t\t\t\t\t}\n\t\t\t\t\tif(rv) {\n\t\t\t\t\t\tfor(var vsnd of config.pc.getSenders()) {\n\t\t\t\t\t\t\tif(vsnd && vsnd.track && vsnd.track.kind === \"video\") {\n\t\t\t\t\t\t\t\tJanus.log(\"Removing video sender:\", vsnd);\n\t\t\t\t\t\t\t\tconfig.pc.removeTrack(vsnd);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Was a MediaStream object passed, or do we need to take care of that?\n\t\tif(callbacks.stream) {\n\t\t\tvar stream = callbacks.stream;\n\t\t\tJanus.log(\"MediaStream provided by the application\");\n\t\t\tJanus.debug(stream);\n\t\t\t// If this is an update, let's check if we need to release the previous stream\n\t\t\tif(media.update && config.myStream && config.myStream !== callbacks.stream && !config.streamExternal && !media.replaceAudio && !media.replaceVideo) {\n\t\t\t\t// We're replacing a stream we captured ourselves with an external one\n\t\t\t\tJanus.stopAllTracks(config.myStream);\n\t\t\t\tconfig.myStream = null;\n\t\t\t}\n\t\t\t// Skip the getUserMedia part\n\t\t\tconfig.streamExternal = true;\n\t\t\tpluginHandle.consentDialog(false);\n\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\treturn;\n\t\t}\n\t\tif(isAudioSendEnabled(media) || isVideoSendEnabled(media)) {\n\t\t\tif(!Janus.isGetUserMediaAvailable()) {\n\t\t\t\tcallbacks.error(\"getUserMedia not available\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar constraints = { mandatory: {}, optional: []};\n\t\t\tpluginHandle.consentDialog(true);\n\t\t\tvar audioSupport = isAudioSendEnabled(media);\n\t\t\tif(audioSupport && media && typeof media.audio === 'object')\n\t\t\t\taudioSupport = media.audio;\n\t\t\tvar videoSupport = isVideoSendEnabled(media);\n\t\t\tif(videoSupport && media) {\n\t\t\t\tvar simulcast = (callbacks.simulcast === true);\n\t\t\t\tvar simulcast2 = (callbacks.simulcast2 === true);\n\t\t\t\tif((simulcast || simulcast2) && !jsep && !media.video)\n\t\t\t\t\tmedia.video = \"hires\";\n\t\t\t\tif(media.video && media.video != 'screen' && media.video != 'window') {\n\t\t\t\t\tif(typeof media.video === 'object') {\n\t\t\t\t\t\tvideoSupport = media.video;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar width = 0;\n\t\t\t\t\t\tvar height = 0, maxHeight = 0;\n\t\t\t\t\t\tif(media.video === 'lowres') {\n\t\t\t\t\t\t\t// Small resolution, 4:3\n\t\t\t\t\t\t\theight = 240;\n\t\t\t\t\t\t\tmaxHeight = 240;\n\t\t\t\t\t\t\twidth = 320;\n\t\t\t\t\t\t} else if(media.video === 'lowres-16:9') {\n\t\t\t\t\t\t\t// Small resolution, 16:9\n\t\t\t\t\t\t\theight = 180;\n\t\t\t\t\t\t\tmaxHeight = 180;\n\t\t\t\t\t\t\twidth = 320;\n\t\t\t\t\t\t} else if(media.video === 'hires' || media.video === 'hires-16:9' || media.video === 'hdres') {\n\t\t\t\t\t\t\t// High(HD) resolution is only 16:9\n\t\t\t\t\t\t\theight = 720;\n\t\t\t\t\t\t\tmaxHeight = 720;\n\t\t\t\t\t\t\twidth = 1280;\n\t\t\t\t\t\t} else if(media.video === 'fhdres') {\n\t\t\t\t\t\t\t// Full HD resolution is only 16:9\n\t\t\t\t\t\t\theight = 1080;\n\t\t\t\t\t\t\tmaxHeight = 1080;\n\t\t\t\t\t\t\twidth = 1920;\n\t\t\t\t\t\t} else if(media.video === '4kres') {\n\t\t\t\t\t\t\t// 4K resolution is only 16:9\n\t\t\t\t\t\t\theight = 2160;\n\t\t\t\t\t\t\tmaxHeight = 2160;\n\t\t\t\t\t\t\twidth = 3840;\n\t\t\t\t\t\t} else if(media.video === 'stdres') {\n\t\t\t\t\t\t\t// Normal resolution, 4:3\n\t\t\t\t\t\t\theight = 480;\n\t\t\t\t\t\t\tmaxHeight = 480;\n\t\t\t\t\t\t\twidth = 640;\n\t\t\t\t\t\t} else if(media.video === 'stdres-16:9') {\n\t\t\t\t\t\t\t// Normal resolution, 16:9\n\t\t\t\t\t\t\theight = 360;\n\t\t\t\t\t\t\tmaxHeight = 360;\n\t\t\t\t\t\t\twidth = 640;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tJanus.log(\"Default video setting is stdres 4:3\");\n\t\t\t\t\t\t\theight = 480;\n\t\t\t\t\t\t\tmaxHeight = 480;\n\t\t\t\t\t\t\twidth = 640;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Adding media constraint:\", media.video);\n\t\t\t\t\t\tvideoSupport = {\n\t\t\t\t\t\t\t'height': {'ideal': height},\n\t\t\t\t\t\t\t'width': {'ideal': width}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tJanus.log(\"Adding video constraint:\", videoSupport);\n\t\t\t\t\t}\n\t\t\t\t} else if(media.video === 'screen' || media.video === 'window') {\n\t\t\t\t\tif(navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {\n\t\t\t\t\t\t// The new experimental getDisplayMedia API is available, let's use that\n\t\t\t\t\t\t// https://groups.google.com/forum/#!topic/discuss-webrtc/Uf0SrR4uxzk\n\t\t\t\t\t\t// https://webrtchacks.com/chrome-screensharing-getdisplaymedia/\n\t\t\t\t\t\tconstraints.video = {};\n\t\t\t\t\t\tif(media.screenshareFrameRate) {\n\t\t\t\t\t\t\tconstraints.video.frameRate = media.screenshareFrameRate;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(media.screenshareHeight) {\n\t\t\t\t\t\t\tconstraints.video.height = media.screenshareHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(media.screenshareWidth) {\n\t\t\t\t\t\t\tconstraints.video.width = media.screenshareWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconstraints.audio = media.captureDesktopAudio;\n\t\t\t\t\t\tnavigator.mediaDevices.getDisplayMedia(constraints)\n\t\t\t\t\t\t\t.then(function(stream) {\n\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\tif(isAudioSendEnabled(media) && !media.keepAudio) {\n\t\t\t\t\t\t\t\t\tnavigator.mediaDevices.getUserMedia({ audio: true, video: false })\n\t\t\t\t\t\t\t\t\t.then(function (audioStream) {\n\t\t\t\t\t\t\t\t\t\tstream.addTrack(audioStream.getAudioTracks()[0]);\n\t\t\t\t\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, function (error) {\n\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\tcallbacks.error(error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// We're going to try and use the extension for Chrome 34+, the old approach\n\t\t\t\t\t// for older versions of Chrome, or the experimental support in Firefox 33+\n\t\t\t\t\tfunction callbackUserMedia (error, stream) {\n\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\tif(error) {\n\t\t\t\t\t\t\tcallbacks.error(error);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfunction getScreenMedia(constraints, gsmCallback, useAudio) {\n\t\t\t\t\t\tJanus.log(\"Adding media constraint (screen capture)\");\n\t\t\t\t\t\tJanus.debug(constraints);\n\t\t\t\t\t\tnavigator.mediaDevices.getUserMedia(constraints)\n\t\t\t\t\t\t\t.then(function(stream) {\n\t\t\t\t\t\t\t\tif(useAudio) {\n\t\t\t\t\t\t\t\t\tnavigator.mediaDevices.getUserMedia({ audio: true, video: false })\n\t\t\t\t\t\t\t\t\t.then(function (audioStream) {\n\t\t\t\t\t\t\t\t\t\tstream.addTrack(audioStream.getAudioTracks()[0]);\n\t\t\t\t\t\t\t\t\t\tgsmCallback(null, stream);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tgsmCallback(null, stream);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(function(error) { pluginHandle.consentDialog(false); gsmCallback(error); });\n\t\t\t\t\t}\n\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === 'chrome') {\n\t\t\t\t\t\tvar chromever = Janus.webRTCAdapter.browserDetails.version;\n\t\t\t\t\t\tvar maxver = 33;\n\t\t\t\t\t\tif(window.navigator.userAgent.match('Linux'))\n\t\t\t\t\t\t\tmaxver = 35;\t// \"known\" crash in chrome 34 and 35 on linux\n\t\t\t\t\t\tif(chromever >= 26 && chromever <= maxver) {\n\t\t\t\t\t\t\t// Chrome 26->33 requires some awkward chrome://flags manipulation\n\t\t\t\t\t\t\tconstraints = {\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\tmandatory: {\n\t\t\t\t\t\t\t\t\t\tgoogLeakyBucket: true,\n\t\t\t\t\t\t\t\t\t\tmaxWidth: window.screen.width,\n\t\t\t\t\t\t\t\t\t\tmaxHeight: window.screen.height,\n\t\t\t\t\t\t\t\t\t\tminFrameRate: media.screenshareFrameRate,\n\t\t\t\t\t\t\t\t\t\tmaxFrameRate: media.screenshareFrameRate,\n\t\t\t\t\t\t\t\t\t\tchromeMediaSource: 'screen'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taudio: isAudioSendEnabled(media) && !media.keepAudio\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tgetScreenMedia(constraints, callbackUserMedia);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Chrome 34+ requires an extension\n\t\t\t\t\t\t\tJanus.extension.getScreen(function (error, sourceId) {\n\t\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\t\treturn callbacks.error(error);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconstraints = {\n\t\t\t\t\t\t\t\t\taudio: false,\n\t\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\t\tmandatory: {\n\t\t\t\t\t\t\t\t\t\t\tchromeMediaSource: 'desktop',\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth: window.screen.width,\n\t\t\t\t\t\t\t\t\t\t\tmaxHeight: window.screen.height,\n\t\t\t\t\t\t\t\t\t\t\tminFrameRate: media.screenshareFrameRate,\n\t\t\t\t\t\t\t\t\t\t\tmaxFrameRate: media.screenshareFrameRate,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\toptional: [\n\t\t\t\t\t\t\t\t\t\t\t{googLeakyBucket: true},\n\t\t\t\t\t\t\t\t\t\t\t{googTemporalLayeredScreencast: true}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tconstraints.video.mandatory.chromeMediaSourceId = sourceId;\n\t\t\t\t\t\t\t\tgetScreenMedia(constraints, callbackUserMedia,\n\t\t\t\t\t\t\t\t\tisAudioSendEnabled(media) && !media.keepAudio);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if(Janus.webRTCAdapter.browserDetails.browser === 'firefox') {\n\t\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.version >= 33) {\n\t\t\t\t\t\t\t// Firefox 33+ has experimental support for screen sharing\n\t\t\t\t\t\t\tconstraints = {\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\tmozMediaSource: media.video,\n\t\t\t\t\t\t\t\t\tmediaSource: media.video\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taudio: isAudioSendEnabled(media) && !media.keepAudio\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tgetScreenMedia(constraints, function (err, stream) {\n\t\t\t\t\t\t\t\tcallbackUserMedia(err, stream);\n\t\t\t\t\t\t\t\t// Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=1045810\n\t\t\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\t\t\tvar lastTime = stream.currentTime;\n\t\t\t\t\t\t\t\t\tvar polly = window.setInterval(function () {\n\t\t\t\t\t\t\t\t\t\tif(!stream)\n\t\t\t\t\t\t\t\t\t\t\twindow.clearInterval(polly);\n\t\t\t\t\t\t\t\t\t\tif(stream.currentTime == lastTime) {\n\t\t\t\t\t\t\t\t\t\t\twindow.clearInterval(polly);\n\t\t\t\t\t\t\t\t\t\t\tif(stream.onended) {\n\t\t\t\t\t\t\t\t\t\t\t\tstream.onended();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tlastTime = stream.currentTime;\n\t\t\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar error = new Error('NavigatorUserMediaError');\n\t\t\t\t\t\t\terror.name = 'Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)';\n\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\tcallbacks.error(error);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If we got here, we're not screensharing\n\t\t\tif(!media || media.video !== 'screen') {\n\t\t\t\t// Check whether all media sources are actually available or not\n\t\t\t\tnavigator.mediaDevices.enumerateDevices().then(function(devices) {\n\t\t\t\t\tvar audioExist = devices.some(function(device) {\n\t\t\t\t\t\treturn device.kind === 'audioinput';\n\t\t\t\t\t}),\n\t\t\t\t\tvideoExist = isScreenSendEnabled(media) || devices.some(function(device) {\n\t\t\t\t\t\treturn device.kind === 'videoinput';\n\t\t\t\t\t});\n\n\t\t\t\t\t// Check whether a missing device is really a problem\n\t\t\t\t\tvar audioSend = isAudioSendEnabled(media);\n\t\t\t\t\tvar videoSend = isVideoSendEnabled(media);\n\t\t\t\t\tvar needAudioDevice = isAudioSendRequired(media);\n\t\t\t\t\tvar needVideoDevice = isVideoSendRequired(media);\n\t\t\t\t\tif(audioSend || videoSend || needAudioDevice || needVideoDevice) {\n\t\t\t\t\t\t// We need to send either audio or video\n\t\t\t\t\t\tvar haveAudioDevice = audioSend ? audioExist : false;\n\t\t\t\t\t\tvar haveVideoDevice = videoSend ? videoExist : false;\n\t\t\t\t\t\tif(!haveAudioDevice && !haveVideoDevice) {\n\t\t\t\t\t\t\t// FIXME Should we really give up, or just assume recvonly for both?\n\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\tcallbacks.error('No capture device found');\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} else if(!haveAudioDevice && needAudioDevice) {\n\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\tcallbacks.error('Audio capture is required, but no capture device found');\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} else if(!haveVideoDevice && needVideoDevice) {\n\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\tcallbacks.error('Video capture is required, but no capture device found');\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar gumConstraints = {\n\t\t\t\t\t\taudio: (audioExist && !media.keepAudio) ? audioSupport : false,\n\t\t\t\t\t\tvideo: (videoExist && !media.keepVideo) ? videoSupport : false\n\t\t\t\t\t};\n\t\t\t\t\tJanus.debug(\"getUserMedia constraints\", gumConstraints);\n\t\t\t\t\tif (!gumConstraints.audio && !gumConstraints.video) {\n\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnavigator.mediaDevices.getUserMedia(gumConstraints)\n\t\t\t\t\t\t\t.then(function(stream) {\n\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\tstreamsDone(handleId, jsep, media, callbacks, stream);\n\t\t\t\t\t\t\t}).catch(function(error) {\n\t\t\t\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\t\t\t\tcallbacks.error({code: error.code, name: error.name, message: error.message});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\tpluginHandle.consentDialog(false);\n\t\t\t\t\tcallbacks.error(error);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\t// No need to do a getUserMedia, create offer/answer right away\n\t\t\tstreamsDone(handleId, jsep, media, callbacks);\n\t\t}\n\t}\n\n\tfunction prepareWebrtcPeer(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : webrtcError;\n\t\tcallbacks.customizeSdp = (typeof callbacks.customizeSdp == \"function\") ? callbacks.customizeSdp : Janus.noop;\n\t\tvar jsep = callbacks.jsep;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(jsep) {\n\t\t\tif(!config.pc) {\n\t\t\t\tJanus.warn(\"Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep\");\n\t\t\t\tcallbacks.error(\"No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcallbacks.customizeSdp(jsep);\n\t\t\tconfig.pc.setRemoteDescription(jsep)\n\t\t\t\t.then(function() {\n\t\t\t\t\tJanus.log(\"Remote description accepted!\");\n\t\t\t\t\tconfig.remoteSdp = jsep.sdp;\n\t\t\t\t\t// Any trickle candidate we cached?\n\t\t\t\t\tif(config.candidates && config.candidates.length > 0) {\n\t\t\t\t\t\tfor(var i = 0; i< config.candidates.length; i++) {\n\t\t\t\t\t\t\tvar candidate = config.candidates[i];\n\t\t\t\t\t\t\tJanus.debug(\"Adding remote candidate:\", candidate);\n\t\t\t\t\t\t\tif(!candidate || candidate.completed === true) {\n\t\t\t\t\t\t\t\t// end-of-candidates\n\t\t\t\t\t\t\t\tconfig.pc.addIceCandidate(Janus.endOfCandidates);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// New candidate\n\t\t\t\t\t\t\t\tconfig.pc.addIceCandidate(candidate);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconfig.candidates = [];\n\t\t\t\t\t}\n\t\t\t\t\t// Done\n\t\t\t\t\tcallbacks.success();\n\t\t\t\t}, callbacks.error);\n\t\t} else {\n\t\t\tcallbacks.error(\"Invalid JSEP\");\n\t\t}\n\t}\n\n\tfunction createOffer(handleId, media, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tcallbacks.customizeSdp = (typeof callbacks.customizeSdp == \"function\") ? callbacks.customizeSdp : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tvar simulcast = (callbacks.simulcast === true);\n\t\tif(!simulcast) {\n\t\t\tJanus.log(\"Creating offer (iceDone=\" + config.iceDone + \")\");\n\t\t} else {\n\t\t\tJanus.log(\"Creating offer (iceDone=\" + config.iceDone + \", simulcast=\" + simulcast + \")\");\n\t\t}\n\t\t// https://code.google.com/p/webrtc/issues/detail?id=3508\n\t\tvar mediaConstraints = {};\n\t\tif(Janus.unifiedPlan) {\n\t\t\t// We can use Transceivers\n\t\t\tvar audioTransceiver = null, videoTransceiver = null;\n\t\t\tvar transceivers = config.pc.getTransceivers();\n\t\t\tif(transceivers && transceivers.length > 0) {\n\t\t\t\tfor(var t of transceivers) {\n\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"audio\") ||\n\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"audio\")) {\n\t\t\t\t\t\tif(!audioTransceiver) {\n\t\t\t\t\t\t\taudioTransceiver = t;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"video\") ||\n\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"video\")) {\n\t\t\t\t\t\tif(!videoTransceiver) {\n\t\t\t\t\t\t\tvideoTransceiver = t;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Handle audio (and related changes, if any)\n\t\t\tvar audioSend = isAudioSendEnabled(media);\n\t\t\tvar audioRecv = isAudioRecvEnabled(media);\n\t\t\tif(!audioSend && !audioRecv) {\n\t\t\t\t// Audio disabled: have we removed it?\n\t\t\t\tif(media.removeAudio && audioTransceiver) {\n\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\taudioTransceiver.setDirection(\"inactive\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\taudioTransceiver.direction = \"inactive\";\n\t\t\t\t\t}\n\t\t\t\t\tJanus.log(\"Setting audio transceiver to inactive:\", audioTransceiver);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Take care of audio m-line\n\t\t\t\tif(audioSend && audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\taudioTransceiver.setDirection(\"sendrecv\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taudioTransceiver.direction = \"sendrecv\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to sendrecv:\", audioTransceiver);\n\t\t\t\t\t}\n\t\t\t\t} else if(audioSend && !audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\taudioTransceiver.setDirection(\"sendonly\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taudioTransceiver.direction = \"sendonly\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to sendonly:\", audioTransceiver);\n\t\t\t\t\t}\n\t\t\t\t} else if(!audioSend && audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\taudioTransceiver.setDirection(\"recvonly\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taudioTransceiver.direction = \"recvonly\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to recvonly:\", audioTransceiver);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// In theory, this is the only case where we might not have a transceiver yet\n\t\t\t\t\t\taudioTransceiver = config.pc.addTransceiver(\"audio\", { direction: \"recvonly\" });\n\t\t\t\t\t\tJanus.log(\"Adding recvonly audio transceiver:\", audioTransceiver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Handle video (and related changes, if any)\n\t\t\tvar videoSend = isVideoSendEnabled(media);\n\t\t\tvar videoRecv = isVideoRecvEnabled(media);\n\t\t\tif(!videoSend && !videoRecv) {\n\t\t\t\t// Video disabled: have we removed it?\n\t\t\t\tif(media.removeVideo && videoTransceiver) {\n\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\tvideoTransceiver.setDirection(\"inactive\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvideoTransceiver.direction = \"inactive\";\n\t\t\t\t\t}\n\t\t\t\t\tJanus.log(\"Setting video transceiver to inactive:\", videoTransceiver);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Take care of video m-line\n\t\t\t\tif(videoSend && videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"sendrecv\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvideoTransceiver.direction = \"sendrecv\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting video transceiver to sendrecv:\", videoTransceiver);\n\t\t\t\t\t}\n\t\t\t\t} else if(videoSend && !videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"sendonly\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvideoTransceiver.direction = \"sendonly\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting video transceiver to sendonly:\", videoTransceiver);\n\t\t\t\t\t}\n\t\t\t\t} else if(!videoSend && videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"recvonly\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvideoTransceiver.direction = \"recvonly\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting video transceiver to recvonly:\", videoTransceiver);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// In theory, this is the only case where we might not have a transceiver yet\n\t\t\t\t\t\tvideoTransceiver = config.pc.addTransceiver(\"video\", { direction: \"recvonly\" });\n\t\t\t\t\t\tJanus.log(\"Adding recvonly video transceiver:\", videoTransceiver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tmediaConstraints[\"offerToReceiveAudio\"] = isAudioRecvEnabled(media);\n\t\t\tmediaConstraints[\"offerToReceiveVideo\"] = isVideoRecvEnabled(media);\n\t\t}\n\t\tvar iceRestart = (callbacks.iceRestart === true);\n\t\tif(iceRestart) {\n\t\t\tmediaConstraints[\"iceRestart\"] = true;\n\t\t}\n\t\tJanus.debug(mediaConstraints);\n\t\t// Check if this is Firefox and we've been asked to do simulcasting\n\t\tvar sendVideo = isVideoSendEnabled(media);\n\t\tif(sendVideo && simulcast && Janus.webRTCAdapter.browserDetails.browser === \"firefox\") {\n\t\t\t// FIXME Based on https://gist.github.com/voluntas/088bc3cc62094730647b\n\t\t\tJanus.log(\"Enabling Simulcasting for Firefox (RID)\");\n\t\t\tvar sender = config.pc.getSenders().find(function(s) {return s.track && s.track.kind === \"video\"});\n\t\t\tif(sender) {\n\t\t\t\tvar parameters = sender.getParameters();\n\t\t\t\tif(!parameters) {\n\t\t\t\t\tparameters = {};\n\t\t\t\t}\n\t\t\t\tvar maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);\n\t\t\t\tparameters.encodings = callbacks.sendEncodings || [\n\t\t\t\t\t{ rid: \"h\", active: true, maxBitrate: maxBitrates.high },\n\t\t\t\t\t{ rid: \"m\", active: true, maxBitrate: maxBitrates.medium, scaleResolutionDownBy: 2 },\n\t\t\t\t\t{ rid: \"l\", active: true, maxBitrate: maxBitrates.low, scaleResolutionDownBy: 4 }\n\t\t\t\t];\n\t\t\t\tsender.setParameters(parameters);\n\t\t\t}\n\t\t}\n\t\tconfig.pc.createOffer(mediaConstraints)\n\t\t\t.then(function(offer) {\n\t\t\t\tJanus.debug(offer);\n\t\t\t\t// JSON.stringify doesn't work on some WebRTC objects anymore\n\t\t\t\t// See https://code.google.com/p/chromium/issues/detail?id=467366\n\t\t\t\tvar jsep = {\n\t\t\t\t\t\"type\": offer.type,\n\t\t\t\t\t\"sdp\": offer.sdp\n\t\t\t\t};\n\t\t\t\tcallbacks.customizeSdp(jsep);\n\t\t\t\toffer.sdp = jsep.sdp;\n\t\t\t\tJanus.log(\"Setting local description\");\n\t\t\t\tif(sendVideo && simulcast) {\n\t\t\t\t\t// This SDP munging only works with Chrome (Safari STP may support it too)\n\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"chrome\" ||\n\t\t\t\t\t\t\tJanus.webRTCAdapter.browserDetails.browser === \"safari\") {\n\t\t\t\t\t\tJanus.log(\"Enabling Simulcasting for Chrome (SDP munging)\");\n\t\t\t\t\t\toffer.sdp = mungeSdpForSimulcasting(offer.sdp);\n\t\t\t\t\t} else if(Janus.webRTCAdapter.browserDetails.browser !== \"firefox\") {\n\t\t\t\t\t\tJanus.warn(\"simulcast=true, but this is not Chrome nor Firefox, ignoring\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconfig.mySdp = {\n\t\t\t\t\ttype: \"offer\",\n\t\t\t\t\tsdp: offer.sdp\n\t\t\t\t};\n\t\t\t\tconfig.pc.setLocalDescription(offer)\n\t\t\t\t\t.catch(callbacks.error);\n\t\t\t\tconfig.mediaConstraints = mediaConstraints;\n\t\t\t\tif(!config.iceDone && !config.trickle) {\n\t\t\t\t\t// Don't do anything until we have all candidates\n\t\t\t\t\tJanus.log(\"Waiting for all candidates...\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// If transforms are present, notify Janus that the media is end-to-end encrypted\n\t\t\t\tif(config.senderTransforms || config.receiverTransforms) {\n\t\t\t\t\toffer[\"e2ee\"] = true;\n\t\t\t\t}\n\t\t\t\tcallbacks.success(offer);\n\t\t\t}, callbacks.error);\n\t}\n\n\tfunction createAnswer(handleId, media, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tcallbacks.customizeSdp = (typeof callbacks.customizeSdp == \"function\") ? callbacks.customizeSdp : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\tcallbacks.error(\"Invalid handle\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tvar simulcast = (callbacks.simulcast === true);\n\t\tif(!simulcast) {\n\t\t\tJanus.log(\"Creating answer (iceDone=\" + config.iceDone + \")\");\n\t\t} else {\n\t\t\tJanus.log(\"Creating answer (iceDone=\" + config.iceDone + \", simulcast=\" + simulcast + \")\");\n\t\t}\n\t\tvar mediaConstraints = null;\n\t\tif(Janus.unifiedPlan) {\n\t\t\t// We can use Transceivers\n\t\t\tmediaConstraints = {};\n\t\t\tvar audioTransceiver = null, videoTransceiver = null;\n\t\t\tvar transceivers = config.pc.getTransceivers();\n\t\t\tif(transceivers && transceivers.length > 0) {\n\t\t\t\tfor(var t of transceivers) {\n\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"audio\") ||\n\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"audio\")) {\n\t\t\t\t\t\tif(!audioTransceiver)\n\t\t\t\t\t\t\taudioTransceiver = t;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif((t.sender && t.sender.track && t.sender.track.kind === \"video\") ||\n\t\t\t\t\t\t\t(t.receiver && t.receiver.track && t.receiver.track.kind === \"video\")) {\n\t\t\t\t\t\tif(!videoTransceiver)\n\t\t\t\t\t\t\tvideoTransceiver = t;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Handle audio (and related changes, if any)\n\t\t\tvar audioSend = isAudioSendEnabled(media);\n\t\t\tvar audioRecv = isAudioRecvEnabled(media);\n\t\t\tif(!audioSend && !audioRecv) {\n\t\t\t\t// Audio disabled: have we removed it?\n\t\t\t\tif(media.removeAudio && audioTransceiver) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\taudioTransceiver.setDirection(\"inactive\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taudioTransceiver.direction = \"inactive\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to inactive:\", audioTransceiver);\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Take care of audio m-line\n\t\t\t\tif(audioSend && audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\t\taudioTransceiver.setDirection(\"sendrecv\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\taudioTransceiver.direction = \"sendrecv\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to sendrecv:\", audioTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if(audioSend && !audioRecv) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\t\taudioTransceiver.setDirection(\"sendonly\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\taudioTransceiver.direction = \"sendonly\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to sendonly:\", audioTransceiver);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t}\n\t\t\t\t} else if(!audioSend && audioRecv) {\n\t\t\t\t\tif(audioTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (audioTransceiver.setDirection) {\n\t\t\t\t\t\t\t\taudioTransceiver.setDirection(\"recvonly\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\taudioTransceiver.direction = \"recvonly\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting audio transceiver to recvonly:\", audioTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// In theory, this is the only case where we might not have a transceiver yet\n\t\t\t\t\t\taudioTransceiver = config.pc.addTransceiver(\"audio\", { direction: \"recvonly\" });\n\t\t\t\t\t\tJanus.log(\"Adding recvonly audio transceiver:\", audioTransceiver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Handle video (and related changes, if any)\n\t\t\tvar videoSend = isVideoSendEnabled(media);\n\t\t\tvar videoRecv = isVideoRecvEnabled(media);\n\t\t\tif(!videoSend && !videoRecv) {\n\t\t\t\t// Video disabled: have we removed it?\n\t\t\t\tif(media.removeVideo && videoTransceiver) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"inactive\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvideoTransceiver.direction = \"inactive\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tJanus.log(\"Setting video transceiver to inactive:\", videoTransceiver);\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Take care of video m-line\n\t\t\t\tif(videoSend && videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"sendrecv\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvideoTransceiver.direction = \"sendrecv\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting video transceiver to sendrecv:\", videoTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if(videoSend && !videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"sendonly\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvideoTransceiver.direction = \"sendonly\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting video transceiver to sendonly:\", videoTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if(!videoSend && videoRecv) {\n\t\t\t\t\tif(videoTransceiver) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (videoTransceiver.setDirection) {\n\t\t\t\t\t\t\t\tvideoTransceiver.setDirection(\"recvonly\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvideoTransceiver.direction = \"recvonly\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tJanus.log(\"Setting video transceiver to recvonly:\", videoTransceiver);\n\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\tJanus.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// In theory, this is the only case where we might not have a transceiver yet\n\t\t\t\t\t\tvideoTransceiver = config.pc.addTransceiver(\"video\", { direction: \"recvonly\" });\n\t\t\t\t\t\tJanus.log(\"Adding recvonly video transceiver:\", videoTransceiver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"firefox\" || Janus.webRTCAdapter.browserDetails.browser === \"edge\") {\n\t\t\t\tmediaConstraints = {\n\t\t\t\t\tofferToReceiveAudio: isAudioRecvEnabled(media),\n\t\t\t\t\tofferToReceiveVideo: isVideoRecvEnabled(media)\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tmediaConstraints = {\n\t\t\t\t\tmandatory: {\n\t\t\t\t\t\tOfferToReceiveAudio: isAudioRecvEnabled(media),\n\t\t\t\t\t\tOfferToReceiveVideo: isVideoRecvEnabled(media)\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tJanus.debug(mediaConstraints);\n\t\t// Check if this is Firefox and we've been asked to do simulcasting\n\t\tvar sendVideo = isVideoSendEnabled(media);\n\t\tif(sendVideo && simulcast && Janus.webRTCAdapter.browserDetails.browser === \"firefox\") {\n\t\t\t// FIXME Based on https://gist.github.com/voluntas/088bc3cc62094730647b\n\t\t\tJanus.log(\"Enabling Simulcasting for Firefox (RID)\");\n\t\t\tvar sender = config.pc.getSenders()[1];\n\t\t\tJanus.log(sender);\n\t\t\tvar parameters = sender.getParameters();\n\t\t\tJanus.log(parameters);\n\n\t\t\tvar maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);\n\t\t\tsender.setParameters({encodings: callbacks.sendEncodings || [\n\t\t\t\t{ rid: \"h\", active: true, maxBitrate: maxBitrates.high },\n\t\t\t\t{ rid: \"m\", active: true, maxBitrate: maxBitrates.medium, scaleResolutionDownBy: 2},\n\t\t\t\t{ rid: \"l\", active: true, maxBitrate: maxBitrates.low, scaleResolutionDownBy: 4}\n\t\t\t]});\n\t\t}\n\t\tconfig.pc.createAnswer(mediaConstraints)\n\t\t\t.then(function(answer) {\n\t\t\t\tJanus.debug(answer);\n\t\t\t\t// JSON.stringify doesn't work on some WebRTC objects anymore\n\t\t\t\t// See https://code.google.com/p/chromium/issues/detail?id=467366\n\t\t\t\tvar jsep = {\n\t\t\t\t\t\"type\": answer.type,\n\t\t\t\t\t\"sdp\": answer.sdp\n\t\t\t\t};\n\t\t\t\tcallbacks.customizeSdp(jsep);\n\t\t\t\tanswer.sdp = jsep.sdp;\n\t\t\t\tJanus.log(\"Setting local description\");\n\t\t\t\tif(sendVideo && simulcast) {\n\t\t\t\t\t// This SDP munging only works with Chrome\n\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"chrome\") {\n\t\t\t\t\t\t// FIXME Apparently trying to simulcast when answering breaks video in Chrome...\n\t\t\t\t\t\t//~ Janus.log(\"Enabling Simulcasting for Chrome (SDP munging)\");\n\t\t\t\t\t\t//~ answer.sdp = mungeSdpForSimulcasting(answer.sdp);\n\t\t\t\t\t\tJanus.warn(\"simulcast=true, but this is an answer, and video breaks in Chrome if we enable it\");\n\t\t\t\t\t} else if(Janus.webRTCAdapter.browserDetails.browser !== \"firefox\") {\n\t\t\t\t\t\tJanus.warn(\"simulcast=true, but this is not Chrome nor Firefox, ignoring\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconfig.mySdp = {\n\t\t\t\t\ttype: \"answer\",\n\t\t\t\t\tsdp: answer.sdp\n\t\t\t\t};\n\t\t\t\tconfig.pc.setLocalDescription(answer)\n\t\t\t\t\t.catch(callbacks.error);\n\t\t\t\tconfig.mediaConstraints = mediaConstraints;\n\t\t\t\tif(!config.iceDone && !config.trickle) {\n\t\t\t\t\t// Don't do anything until we have all candidates\n\t\t\t\t\tJanus.log(\"Waiting for all candidates...\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// If transforms are present, notify Janus that the media is end-to-end encrypted\n\t\t\t\tif(config.senderTransforms || config.receiverTransforms) {\n\t\t\t\t\tanswer[\"e2ee\"] = true;\n\t\t\t\t}\n\t\t\t\tcallbacks.success(answer);\n\t\t\t}, callbacks.error);\n\t}\n\n\tfunction sendSDP(handleId, callbacks) {\n\t\tcallbacks = callbacks || {};\n\t\tcallbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n\t\tcallbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle, not sending anything\");\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tJanus.log(\"Sending offer/answer SDP...\");\n\t\tif(!config.mySdp) {\n\t\t\tJanus.warn(\"Local SDP instance is invalid, not sending anything...\");\n\t\t\treturn;\n\t\t}\n\t\tconfig.mySdp = {\n\t\t\t\"type\": config.pc.localDescription.type,\n\t\t\t\"sdp\": config.pc.localDescription.sdp\n\t\t};\n\t\tif(config.trickle === false)\n\t\t\tconfig.mySdp[\"trickle\"] = false;\n\t\tJanus.debug(callbacks);\n\t\tconfig.sdpSent = true;\n\t\tcallbacks.success(config.mySdp);\n\t}\n\n\tfunction getVolume(handleId, remote) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn 0;\n\t\t}\n\t\tvar stream = remote ? \"remote\" : \"local\";\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.volume[stream])\n\t\t\tconfig.volume[stream] = { value: 0 };\n\t\t// Start getting the volume, if audioLevel in getStats is supported (apparently\n\t\t// they're only available in Chrome/Safari right now: https://webrtc-stats.callstats.io/)\n\t\tif(config.pc.getStats && (Janus.webRTCAdapter.browserDetails.browser === \"chrome\" ||\n\t\t\t\tJanus.webRTCAdapter.browserDetails.browser === \"safari\")) {\n\t\t\tif(remote && !config.remoteStream) {\n\t\t\t\tJanus.warn(\"Remote stream unavailable\");\n\t\t\t\treturn 0;\n\t\t\t} else if(!remote && !config.myStream) {\n\t\t\t\tJanus.warn(\"Local stream unavailable\");\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif(!config.volume[stream].timer) {\n\t\t\t\tJanus.log(\"Starting \" + stream + \" volume monitor\");\n\t\t\t\tconfig.volume[stream].timer = setInterval(function() {\n\t\t\t\t\tconfig.pc.getStats()\n\t\t\t\t\t\t.then(function(stats) {\n\t\t\t\t\t\t\tstats.forEach(function (res) {\n\t\t\t\t\t\t\t\tif(!res || res.kind !== \"audio\")\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\tif((remote && !res.remoteSource) || (!remote && res.type !== \"media-source\"))\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\tconfig.volume[stream].value = (res.audioLevel ? res.audioLevel : 0);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t}, 200);\n\t\t\t\treturn 0;\t// We don't have a volume to return yet\n\t\t\t}\n\t\t\treturn config.volume[stream].value;\n\t\t} else {\n\t\t\t// audioInputLevel and audioOutputLevel seem only available in Chrome? audioLevel\n\t\t\t// seems to be available on Chrome and Firefox, but they don't seem to work\n\t\t\tJanus.warn(\"Getting the \" + stream + \" volume unsupported by browser\");\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tfunction isMuted(handleId, video) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn true;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.pc) {\n\t\t\tJanus.warn(\"Invalid PeerConnection\");\n\t\t\treturn true;\n\t\t}\n\t\tif(!config.myStream) {\n\t\t\tJanus.warn(\"Invalid local MediaStream\");\n\t\t\treturn true;\n\t\t}\n\t\tif(video) {\n\t\t\t// Check video track\n\t\t\tif(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {\n\t\t\t\tJanus.warn(\"No video track\");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn !config.myStream.getVideoTracks()[0].enabled;\n\t\t} else {\n\t\t\t// Check audio track\n\t\t\tif(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {\n\t\t\t\tJanus.warn(\"No audio track\");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn !config.myStream.getAudioTracks()[0].enabled;\n\t\t}\n\t}\n\n\tfunction mute(handleId, video, mute) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn false;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.pc) {\n\t\t\tJanus.warn(\"Invalid PeerConnection\");\n\t\t\treturn false;\n\t\t}\n\t\tif(!config.myStream) {\n\t\t\tJanus.warn(\"Invalid local MediaStream\");\n\t\t\treturn false;\n\t\t}\n\t\tif(video) {\n\t\t\t// Mute/unmute video track\n\t\t\tif(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {\n\t\t\t\tJanus.warn(\"No video track\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconfig.myStream.getVideoTracks()[0].enabled = !mute;\n\t\t\treturn true;\n\t\t} else {\n\t\t\t// Mute/unmute audio track\n\t\t\tif(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {\n\t\t\t\tJanus.warn(\"No audio track\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconfig.myStream.getAudioTracks()[0].enabled = !mute;\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tfunction getBitrate(handleId) {\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle || !pluginHandle.webrtcStuff) {\n\t\t\tJanus.warn(\"Invalid handle\");\n\t\t\treturn \"Invalid handle\";\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(!config.pc)\n\t\t\treturn \"Invalid PeerConnection\";\n\t\t// Start getting the bitrate, if getStats is supported\n\t\tif(config.pc.getStats) {\n\t\t\tif(!config.bitrate.timer) {\n\t\t\t\tJanus.log(\"Starting bitrate timer (via getStats)\");\n\t\t\t\tconfig.bitrate.timer = setInterval(function() {\n\t\t\t\t\tconfig.pc.getStats()\n\t\t\t\t\t\t.then(function(stats) {\n\t\t\t\t\t\t\tstats.forEach(function (res) {\n\t\t\t\t\t\t\t\tif(!res)\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\tvar inStats = false;\n\t\t\t\t\t\t\t\t// Check if these are statistics on incoming media\n\t\t\t\t\t\t\t\tif((res.mediaType === \"video\" || res.id.toLowerCase().indexOf(\"video\") > -1) &&\n\t\t\t\t\t\t\t\t\t\tres.type === \"inbound-rtp\" && res.id.indexOf(\"rtcp\") < 0) {\n\t\t\t\t\t\t\t\t\t// New stats\n\t\t\t\t\t\t\t\t\tinStats = true;\n\t\t\t\t\t\t\t\t} else if(res.type == 'ssrc' && res.bytesReceived &&\n\t\t\t\t\t\t\t\t\t\t(res.googCodecName === \"VP8\" || res.googCodecName === \"\")) {\n\t\t\t\t\t\t\t\t\t// Older Chromer versions\n\t\t\t\t\t\t\t\t\tinStats = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Parse stats now\n\t\t\t\t\t\t\t\tif(inStats) {\n\t\t\t\t\t\t\t\t\tconfig.bitrate.bsnow = res.bytesReceived;\n\t\t\t\t\t\t\t\t\tconfig.bitrate.tsnow = res.timestamp;\n\t\t\t\t\t\t\t\t\tif(config.bitrate.bsbefore === null || config.bitrate.tsbefore === null) {\n\t\t\t\t\t\t\t\t\t\t// Skip this round\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.bsbefore = config.bitrate.bsnow;\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.tsbefore = config.bitrate.tsnow;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// Calculate bitrate\n\t\t\t\t\t\t\t\t\t\tvar timePassed = config.bitrate.tsnow - config.bitrate.tsbefore;\n\t\t\t\t\t\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"safari\")\n\t\t\t\t\t\t\t\t\t\t\ttimePassed = timePassed/1000;\t// Apparently the timestamp is in microseconds, in Safari\n\t\t\t\t\t\t\t\t\t\tvar bitRate = Math.round((config.bitrate.bsnow - config.bitrate.bsbefore) * 8 / timePassed);\n\t\t\t\t\t\t\t\t\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"safari\")\n\t\t\t\t\t\t\t\t\t\t\tbitRate = parseInt(bitRate/1000);\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.value = bitRate + ' kbits/sec';\n\t\t\t\t\t\t\t\t\t\t//~ Janus.log(\"Estimated bitrate is \" + config.bitrate.value);\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.bsbefore = config.bitrate.bsnow;\n\t\t\t\t\t\t\t\t\t\tconfig.bitrate.tsbefore = config.bitrate.tsnow;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t}, 1000);\n\t\t\t\treturn \"0 kbits/sec\";\t// We don't have a bitrate value yet\n\t\t\t}\n\t\t\treturn config.bitrate.value;\n\t\t} else {\n\t\t\tJanus.warn(\"Getting the video bitrate unsupported by browser\");\n\t\t\treturn \"Feature unsupported by browser\";\n\t\t}\n\t}\n\n\tfunction webrtcError(error) {\n\t\tJanus.error(\"WebRTC error:\", error);\n\t}\n\n\tfunction cleanupWebrtc(handleId, hangupRequest) {\n\t\tJanus.log(\"Cleaning WebRTC stuff\");\n\t\tvar pluginHandle = pluginHandles[handleId];\n\t\tif(!pluginHandle) {\n\t\t\t// Nothing to clean\n\t\t\treturn;\n\t\t}\n\t\tvar config = pluginHandle.webrtcStuff;\n\t\tif(config) {\n\t\t\tif(hangupRequest === true) {\n\t\t\t\t// Send a hangup request (we don't really care about the response)\n\t\t\t\tvar request = { \"janus\": \"hangup\", \"transaction\": Janus.randomString(12) };\n\t\t\t\tif(pluginHandle.token)\n\t\t\t\t\trequest[\"token\"] = pluginHandle.token;\n\t\t\t\tif(apisecret)\n\t\t\t\t\trequest[\"apisecret\"] = apisecret;\n\t\t\t\tJanus.debug(\"Sending hangup request (handle=\" + handleId + \"):\");\n\t\t\t\tJanus.debug(request);\n\t\t\t\tif(websockets) {\n\t\t\t\t\trequest[\"session_id\"] = sessionId;\n\t\t\t\t\trequest[\"handle_id\"] = handleId;\n\t\t\t\t\tws.send(JSON.stringify(request));\n\t\t\t\t} else {\n\t\t\t\t\tJanus.httpAPICall(server + \"/\" + sessionId + \"/\" + handleId, {\n\t\t\t\t\t\tverb: 'POST',\n\t\t\t\t\t\twithCredentials: withCredentials,\n\t\t\t\t\t\tbody: request\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Cleanup stack\n\t\t\tconfig.remoteStream = null;\n\t\t\tif(config.volume) {\n\t\t\t\tif(config.volume[\"local\"] && config.volume[\"local\"].timer)\n\t\t\t\t\tclearInterval(config.volume[\"local\"].timer);\n\t\t\t\tif(config.volume[\"remote\"] && config.volume[\"remote\"].timer)\n\t\t\t\t\tclearInterval(config.volume[\"remote\"].timer);\n\t\t\t}\n\t\t\tconfig.volume = {};\n\t\t\tif(config.bitrate.timer)\n\t\t\t\tclearInterval(config.bitrate.timer);\n\t\t\tconfig.bitrate.timer = null;\n\t\t\tconfig.bitrate.bsnow = null;\n\t\t\tconfig.bitrate.bsbefore = null;\n\t\t\tconfig.bitrate.tsnow = null;\n\t\t\tconfig.bitrate.tsbefore = null;\n\t\t\tconfig.bitrate.value = null;\n\t\t\tif(!config.streamExternal && config.myStream) {\n\t\t\t\tJanus.log(\"Stopping local stream tracks\");\n\t\t\t\tJanus.stopAllTracks(config.myStream);\n\t\t\t}\n\t\t\tconfig.streamExternal = false;\n\t\t\tconfig.myStream = null;\n\t\t\t// Close PeerConnection\n\t\t\ttry {\n\t\t\t\tconfig.pc.close();\n\t\t\t} catch(e) {\n\t\t\t\t// Do nothing\n\t\t\t}\n\t\t\tconfig.pc = null;\n\t\t\tconfig.candidates = null;\n\t\t\tconfig.mySdp = null;\n\t\t\tconfig.remoteSdp = null;\n\t\t\tconfig.iceDone = false;\n\t\t\tconfig.dataChannel = {};\n\t\t\tconfig.dtmfSender = null;\n\t\t\tconfig.senderTransforms = null;\n\t\t\tconfig.receiverTransforms = null;\n\t\t}\n\t\tpluginHandle.oncleanup();\n\t}\n\n\t// Helper method to munge an SDP to enable simulcasting (Chrome only)\n\tfunction mungeSdpForSimulcasting(sdp) {\n\t\t// Let's munge the SDP to add the attributes for enabling simulcasting\n\t\t// (based on https://gist.github.com/ggarber/a19b4c33510028b9c657)\n\t\tvar lines = sdp.split(\"\\r\\n\");\n\t\tvar video = false;\n\t\tvar ssrc = [ -1 ], ssrc_fid = [ -1 ];\n\t\tvar cname = null, msid = null, mslabel = null, label = null;\n\t\tvar insertAt = -1;\n\t\tfor(var i=0; i<lines.length; i++) {\n\t\t\tvar mline = lines[i].match(/m=(\\w+) */);\n\t\t\tif(mline) {\n\t\t\t\tvar medium = mline[1];\n\t\t\t\tif(medium === \"video\") {\n\t\t\t\t\t// New video m-line: make sure it's the first one\n\t\t\t\t\tif(ssrc[0] < 0) {\n\t\t\t\t\t\tvideo = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// We're done, let's add the new attributes here\n\t\t\t\t\t\tinsertAt = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// New non-video m-line: do we have what we were looking for?\n\t\t\t\t\tif(ssrc[0] > -1) {\n\t\t\t\t\t\t// We're done, let's add the new attributes here\n\t\t\t\t\t\tinsertAt = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(!video)\n\t\t\t\tcontinue;\n\t\t\tvar sim = lines[i].match(/a=ssrc-group:SIM (\\d+) (\\d+) (\\d+)/);\n\t\t\tif(sim) {\n\t\t\t\tJanus.warn(\"The SDP already contains a SIM attribute, munging will be skipped\");\n\t\t\t\treturn sdp;\n\t\t\t}\n\t\t\tvar fid = lines[i].match(/a=ssrc-group:FID (\\d+) (\\d+)/);\n\t\t\tif(fid) {\n\t\t\t\tssrc[0] = fid[1];\n\t\t\t\tssrc_fid[0] = fid[2];\n\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(ssrc[0]) {\n\t\t\t\tvar match = lines[i].match('a=ssrc:' + ssrc[0] + ' cname:(.+)')\n\t\t\t\tif(match) {\n\t\t\t\t\tcname = match[1];\n\t\t\t\t}\n\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' msid:(.+)')\n\t\t\t\tif(match) {\n\t\t\t\t\tmsid = match[1];\n\t\t\t\t}\n\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' mslabel:(.+)')\n\t\t\t\tif(match) {\n\t\t\t\t\tmslabel = match[1];\n\t\t\t\t}\n\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' label:(.+)')\n\t\t\t\tif(match) {\n\t\t\t\t\tlabel = match[1];\n\t\t\t\t}\n\t\t\t\tif(lines[i].indexOf('a=ssrc:' + ssrc_fid[0]) === 0) {\n\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif(lines[i].indexOf('a=ssrc:' + ssrc[0]) === 0) {\n\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(lines[i].length == 0) {\n\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tif(ssrc[0] < 0) {\n\t\t\t// Couldn't find a FID attribute, let's just take the first video SSRC we find\n\t\t\tinsertAt = -1;\n\t\t\tvideo = false;\n\t\t\tfor(var i=0; i<lines.length; i++) {\n\t\t\t\tvar mline = lines[i].match(/m=(\\w+) */);\n\t\t\t\tif(mline) {\n\t\t\t\t\tvar medium = mline[1];\n\t\t\t\t\tif(medium === \"video\") {\n\t\t\t\t\t\t// New video m-line: make sure it's the first one\n\t\t\t\t\t\tif(ssrc[0] < 0) {\n\t\t\t\t\t\t\tvideo = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// We're done, let's add the new attributes here\n\t\t\t\t\t\t\tinsertAt = i;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// New non-video m-line: do we have what we were looking for?\n\t\t\t\t\t\tif(ssrc[0] > -1) {\n\t\t\t\t\t\t\t// We're done, let's add the new attributes here\n\t\t\t\t\t\t\tinsertAt = i;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif(!video)\n\t\t\t\t\tcontinue;\n\t\t\t\tif(ssrc[0] < 0) {\n\t\t\t\t\tvar value = lines[i].match(/a=ssrc:(\\d+)/);\n\t\t\t\t\tif(value) {\n\t\t\t\t\t\tssrc[0] = value[1];\n\t\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar match = lines[i].match('a=ssrc:' + ssrc[0] + ' cname:(.+)')\n\t\t\t\t\tif(match) {\n\t\t\t\t\t\tcname = match[1];\n\t\t\t\t\t}\n\t\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' msid:(.+)')\n\t\t\t\t\tif(match) {\n\t\t\t\t\t\tmsid = match[1];\n\t\t\t\t\t}\n\t\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' mslabel:(.+)')\n\t\t\t\t\tif(match) {\n\t\t\t\t\t\tmslabel = match[1];\n\t\t\t\t\t}\n\t\t\t\t\tmatch = lines[i].match('a=ssrc:' + ssrc[0] + ' label:(.+)')\n\t\t\t\t\tif(match) {\n\t\t\t\t\t\tlabel = match[1];\n\t\t\t\t\t}\n\t\t\t\t\tif(lines[i].indexOf('a=ssrc:' + ssrc_fid[0]) === 0) {\n\t\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif(lines[i].indexOf('a=ssrc:' + ssrc[0]) === 0) {\n\t\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(lines[i].length === 0) {\n\t\t\t\t\tlines.splice(i, 1); i--;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(ssrc[0] < 0) {\n\t\t\t// Still nothing, let's just return the SDP we were asked to munge\n\t\t\tJanus.warn(\"Couldn't find the video SSRC, simulcasting NOT enabled\");\n\t\t\treturn sdp;\n\t\t}\n\t\tif(insertAt < 0) {\n\t\t\t// Append at the end\n\t\t\tinsertAt = lines.length;\n\t\t}\n\t\t// Generate a couple of SSRCs (for retransmissions too)\n\t\t// Note: should we check if there are conflicts, here?\n\t\tssrc[1] = Math.floor(Math.random()*0xFFFFFFFF);\n\t\tssrc[2] = Math.floor(Math.random()*0xFFFFFFFF);\n\t\tssrc_fid[1] = Math.floor(Math.random()*0xFFFFFFFF);\n\t\tssrc_fid[2] = Math.floor(Math.random()*0xFFFFFFFF);\n\t\t// Add attributes to the SDP\n\t\tfor(var i=0; i<ssrc.length; i++) {\n\t\t\tif(cname) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' cname:' + cname);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(msid) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' msid:' + msid);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(mslabel) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' mslabel:' + mslabel);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(label) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' label:' + label);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\t// Add the same info for the retransmission SSRC\n\t\t\tif(cname) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' cname:' + cname);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(msid) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' msid:' + msid);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(mslabel) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' mslabel:' + mslabel);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t\tif(label) {\n\t\t\t\tlines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' label:' + label);\n\t\t\t\tinsertAt++;\n\t\t\t}\n\t\t}\n\t\tlines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[2] + ' ' + ssrc_fid[2]);\n\t\tlines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[1] + ' ' + ssrc_fid[1]);\n\t\tlines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[0] + ' ' + ssrc_fid[0]);\n\t\tlines.splice(insertAt, 0, 'a=ssrc-group:SIM ' + ssrc[0] + ' ' + ssrc[1] + ' ' + ssrc[2]);\n\t\tsdp = lines.join(\"\\r\\n\");\n\t\tif(!sdp.endsWith(\"\\r\\n\"))\n\t\t\tsdp += \"\\r\\n\";\n\t\treturn sdp;\n\t}\n\n\t// Helper methods to parse a media object\n\tfunction isAudioSendEnabled(media) {\n\t\tJanus.debug(\"isAudioSendEnabled:\", media);\n\t\tif(!media)\n\t\t\treturn true;\t// Default\n\t\tif(media.audio === false)\n\t\t\treturn false;\t// Generic audio has precedence\n\t\tif(media.audioSend === undefined || media.audioSend === null)\n\t\t\treturn true;\t// Default\n\t\treturn (media.audioSend === true);\n\t}\n\n\tfunction isAudioSendRequired(media) {\n\t\tJanus.debug(\"isAudioSendRequired:\", media);\n\t\tif(!media)\n\t\t\treturn false;\t// Default\n\t\tif(media.audio === false || media.audioSend === false)\n\t\t\treturn false;\t// If we're not asking to capture audio, it's not required\n\t\tif(media.failIfNoAudio === undefined || media.failIfNoAudio === null)\n\t\t\treturn false;\t// Default\n\t\treturn (media.failIfNoAudio === true);\n\t}\n\n\tfunction isAudioRecvEnabled(media) {\n\t\tJanus.debug(\"isAudioRecvEnabled:\", media);\n\t\tif(!media)\n\t\t\treturn true;\t// Default\n\t\tif(media.audio === false)\n\t\t\treturn false;\t// Generic audio has precedence\n\t\tif(media.audioRecv === undefined || media.audioRecv === null)\n\t\t\treturn true;\t// Default\n\t\treturn (media.audioRecv === true);\n\t}\n\n\tfunction isVideoSendEnabled(media) {\n\t\tJanus.debug(\"isVideoSendEnabled:\", media);\n\t\tif(!media)\n\t\t\treturn true;\t// Default\n\t\tif(media.video === false)\n\t\t\treturn false;\t// Generic video has precedence\n\t\tif(media.videoSend === undefined || media.videoSend === null)\n\t\t\treturn true;\t// Default\n\t\treturn (media.videoSend === true);\n\t}\n\n\tfunction isVideoSendRequired(media) {\n\t\tJanus.debug(\"isVideoSendRequired:\", media);\n\t\tif(!media)\n\t\t\treturn false;\t// Default\n\t\tif(media.video === false || media.videoSend === false)\n\t\t\treturn false;\t// If we're not asking to capture video, it's not required\n\t\tif(media.failIfNoVideo === undefined || media.failIfNoVideo === null)\n\t\t\treturn false;\t// Default\n\t\treturn (media.failIfNoVideo === true);\n\t}\n\n\tfunction isVideoRecvEnabled(media) {\n\t\tJanus.debug(\"isVideoRecvEnabled:\", media);\n\t\tif(!media)\n\t\t\treturn true;\t// Default\n\t\tif(media.video === false)\n\t\t\treturn false;\t// Generic video has precedence\n\t\tif(media.videoRecv === undefined || media.videoRecv === null)\n\t\t\treturn true;\t// Default\n\t\treturn (media.videoRecv === true);\n\t}\n\n\tfunction isScreenSendEnabled(media) {\n\t\tJanus.debug(\"isScreenSendEnabled:\", media);\n\t\tif (!media)\n\t\t\treturn false;\n\t\tif (typeof media.video !== 'object' || typeof media.video.mandatory !== 'object')\n\t\t\treturn false;\n\t\tvar constraints = media.video.mandatory;\n\t\tif (constraints.chromeMediaSource)\n\t\t\treturn constraints.chromeMediaSource === 'desktop' || constraints.chromeMediaSource === 'screen';\n\t\telse if (constraints.mozMediaSource)\n\t\t\treturn constraints.mozMediaSource === 'window' || constraints.mozMediaSource === 'screen';\n\t\telse if (constraints.mediaSource)\n\t\t\treturn constraints.mediaSource === 'window' || constraints.mediaSource === 'screen';\n\t\treturn false;\n\t}\n\n\tfunction isDataEnabled(media) {\n\t\tJanus.debug(\"isDataEnabled:\", media);\n\t\tif(Janus.webRTCAdapter.browserDetails.browser === \"edge\") {\n\t\t\tJanus.warn(\"Edge doesn't support data channels yet\");\n\t\t\treturn false;\n\t\t}\n\t\tif(media === undefined || media === null)\n\t\t\treturn false;\t// Default\n\t\treturn (media.data === true);\n\t}\n\n\tfunction isTrickleEnabled(trickle) {\n\t\tJanus.debug(\"isTrickleEnabled:\", trickle);\n\t\treturn (trickle === false) ? false : true;\n\t}\n}\n\nexport default Janus;","import Janus from \"../../janus-2021.js\";\nimport React, { Component } from \"react\";\nimport $ from \"jquery\";\nimport { socket } from \"../../socket.js\";\n\nexport function vsessionCreate(room) {\n  var self = this;\n  Janus.init({\n    debug: \"none\",\n    callback: function () {\n      // Create session\n      var janus = new Janus({\n        server: self.state.server,\n        iceServers: [\n          { url: \"stun:stun.l.google.com:19302\" },\n          {\n            url: \"turn:sync1.ut.ac.ir:3478\",\n            username: \"shafiei\",\n            credential: \"12345678\",\n          },\n        ],\n        success: function () {\n          // Attach to VideoRoom plugin\n          janus.attach({\n            plugin: \"janus.plugin.videoroom\",\n            opaqueId: self.state.opaqueId,\n            success: function (pluginHandle) {\n              //sfutest = pluginHandle;\n              self.setState({ janus: janus });\n              self.setState({ sfutest: pluginHandle });\n              Janus.log(\n                \"Plugin attached! (\" +\n                  self.state.sfutest.getPlugin() +\n                  \", id=\" +\n                  self.state.sfutest.getId() +\n                  \")\"\n              );\n              Janus.log(\"  -- This is a publisher/manager\");\n              self.vregisterUsername(room);\n              //initDevices()\n              // Prepare the username registration\n            },\n            error: function (error) {\n              Janus.error(\"  -- Error attaching plugin...\", error);\n            },\n            consentDialog: function (on) {\n              Janus.debug(\n                \"Consent dialog should be \" + (on ? \"on\" : \"off\") + \" now\"\n              );\n            },\n            iceState: function (state) {\n              Janus.log(\"ICE state changed to \" + state);\n            },\n            mediaState: function (medium, on) {\n              Janus.log(\n                \"Janus \" +\n                  (on ? \"started\" : \"stopped\") +\n                  \" receiving our \" +\n                  medium\n              );\n            },\n            webrtcState: function (on) {\n              Janus.log(\n                \"Janus says our WebRTC PeerConnection is \" +\n                  (on ? \"up\" : \"down\") +\n                  \" now\"\n              );\n            },\n            onmessage: function (msg, jsep) {\n              Janus.debug(\" ::: Got a message (publisher) :::\", msg);\n              console.log(\" ::: Got a message (publisher) :::\", msg);\n              var event = msg[\"videoroom\"];\n              Janus.debug(\"Event: \" + event);\n              if (event) {\n                if (event === \"joined\") {\n                  console.log('><><><><><>', msg)\n                  // Publisher/manager created, negotiate WebRTC and attach to existing feeds, if any\n                  //myid = msg[\"id\"];\n                  //mypvtid = msg[\"private_id\"];\n                  self.setState({\n                    myVroomId: msg[\"id\"],\n                    vJoined: true,\n                  });\n                  Janus.log(\n                    \"Successfully joined room \" +\n                      msg[\"room\"] +\n                      \" with ID \" +\n                      msg[\"id\"]\n                  );\n                  var role = self.currentRole();\n                  self.vAddParticipant(\n                    msg[\"id\"],\n                    self.state.fullname +\n                    \" \" +\n                    self.state.userUUID +\n                    \"\" +\n                    self.state.userColor +\n                    \"\" +\n                    self.state.initials +\n                    \"\" +\n                    role +\n                    \"\" +\n                    self.state.slot,\n                  );\n\n                  //publishOwnFeed(true);\n                  //}\n                  // Any new feed to attach to?\n                  if (msg[\"publishers\"]) {\n                    var list = msg[\"publishers\"];\n                    console.debug(\n                      \"Got a list of available publishers/feeds:\",\n                      list\n                    );\n                    for (var f in list) {\n                      console.log(\"List >>\", list);\n                      var id = list[f][\"id\"];\n                      var display = list[f][\"display\"];\n                      var audio = list[f][\"audio_codec\"];\n                      var video = list[f][\"video_codec\"];\n                      Janus.debug(\n                        \"  >> [\" +\n                          id +\n                          \"] \" +\n                          display +\n                          \" (audio: \" +\n                          audio +\n                          \", video: \" +\n                          video +\n                          \")\"\n                      );\n                      self.vAddParticipant(list[f][\"id\"], list[f][\"display\"]);\n                      self.vNewRemoteFeed(id, \"\", display, audio, video);\n                    }\n                  }\n                } else if (event === \"destroyed\") {\n                  // The room has been destroyed\n                  Janus.warn(\"The room has been destroyed!\");\n                } else if (event === \"event\") {\n                  // Any new feed to attach to?\n                  if (msg[\"publishers\"]) {\n                    var list = msg[\"publishers\"];\n                    Janus.debug(\n                      \"Got a list of available publishers/feeds:\",\n                      list\n                    );\n                    for (var f in list) {\n                      var id = list[f][\"id\"];\n                      var display = list[f][\"display\"];\n                      var audio = list[f][\"audio_codec\"];\n                      var video = list[f][\"video_codec\"];\n                      console.log(list);\n                      Janus.debug(\n                        \"  >> [\" +\n                          id +\n                          \"] \" +\n                          display +\n                          \" (audio: \" +\n                          audio +\n                          \", video: \" +\n                          video +\n                          \")\"\n                      );\n                      self.vAddParticipant(list[f][\"id\"], list[f][\"display\"]);\n                      self.vNewRemoteFeed(id, \"\", display, audio, video);\n                    }\n                  } else if (msg[\"display\"]) {\n                    var role = msg[\"display\"].split(\"\")[4];\n                    var uuid = msg[\"display\"].split(\"\")[1];\n                    self.changeOwn(uuid, role);\n                    self.vChangeOwn(uuid, role);\n                    if (\n                      self.state.isSata &&\n                      (role === \"moderator\" || role === \"presenter\")\n                    ) {\n                      self.vNewRemoteFeed(\n                        msg[\"id\"],\n                        \"\",\n                        msg[\"display\"],\n                        audio,\n                        video\n                      );\n                    }\n                    if (\n                      self.state.isSata &&\n                      (role === \"speaker\" || role === \"listener\")\n                    ) {\n                      //console.log(msg[\"id\"], self.state.feeds);\n                      var unsubscribe = {\n                        request: \"leave\",\n                      };\n                      var feed = self.state.feeds.filter(\n                        (item) => item.rfid === msg[\"id\"]\n                      );\n                      if (feed && feed[0]) {\n                        console.log(feed[0]);\n                        feed[0].send({\n                          message: unsubscribe,\n                          success: function (result) {\n                            console.log(result);\n                          },\n                        });\n                      }\n                    }\n                  } else if (msg[\"leaving\"]) {\n                    // One of the publishers has gone away?\n                    var leaving = msg[\"leaving\"];\n                    console.log(\"Publisher leaving: \" + leaving);\n                    self.setState(\n                      {\n                        feeds: self.state.feeds.filter(\n                          (item) => item.rfid != leaving\n                        ),\n                      },\n                      () => console.log(\"feeds: >>>>\", self.state.feeds)\n                    );\n                    var unPublishedFeed = self.state.feeds.filter(\n                      (item) => item.rfid === leaving\n                    );\n                    var remoteFeed = unPublishedFeed.shift();\n                    if (remoteFeed != null) {\n                      remoteFeed.detach();\n                    }\n                    self.vremoveParticipant(leaving);\n                  } else if (msg[\"unpublished\"]) {\n                    // One of the publishers has unpublished?\n                    var unpublished = msg[\"unpublished\"];\n                    console.log(\"Publisher left: \" + unpublished);\n                    if (unpublished === \"ok\") {\n                      self.state.sfutest.hangup();\n                      self.vStreamDettacher(self.state.sfutest);\n                      return;\n                    }\n                    var unPublishedFeed = self.state.feeds.filter(\n                      (item) => item.rfid === unpublished\n                    );\n                    var remoteFeed = unPublishedFeed.shift();\n                    if (remoteFeed != null) {\n                      remoteFeed.detach();\n                      self.vStreamDettacher(remoteFeed);\n                    }\n                    self.vremoveParticipant(unpublished);\n\n                    self.setState({\n                      feeds: self.state.feeds.filter(\n                        (item) => item.rfid != unpublished\n                      ),\n                    });\n                  } else if (msg[\"error\"]) {\n                    if (msg[\"error_code\"] === 426) {\n                      // This is a \"no such room\" error: give a more meaningful description\n                    } else {\n                    }\n                  }\n                }\n              }\n              if (jsep) {\n                Janus.debug(\"Handling SDP as well...\", jsep);\n                self.state.sfutest.handleRemoteJsep({ jsep: jsep });\n              }\n            },\n            onlocalstream: function (stream) {\n              Janus.debug(\" ::: Got a local stream :::\", stream);\n              console.log(\" ::: Got a local stream :::\", stream);\n              console.log(self.state.sfutest.id);\n              var exisiting = self.state.feeds.filter(\n                (item) => item.id === self.state.sfutest.id\n              );\n              if (exisiting.length === 0) {\n                self.state.sfutest.rfid = self.state.myVroomId;\n                self.setState({\n                  feeds: self.state.feeds.concat(self.state.sfutest),\n                });\n              }\n\n              var videoTracks = stream.getVideoTracks();\n              console.log(\"onlocalstream\", videoTracks);\n              if (!videoTracks || videoTracks.length === 0) {\n                self.vStreamDettacher(self.state.sfutest);\n              } else {\n                console.log(self.state.vparticipants);\n                self.vStreamAttacher(self.state.sfutest, self.state.name);\n              }\n            },\n            onremotestream: function (stream) {\n              // The publisher stream is sendonly, we don't expect anything here\n            },\n            oncleanup: function () {\n              Janus.log(\n                \" ::: Got a cleanup notification: we are unpublished now :::\"\n              );\n            },\n          });\n        },\n        error: function (error) {\n          Janus.error(error);\n          //bootbox.alert(error, function() {\n          var params = \"\";\n          if (self.state.publishedCamera) {\n            params = params + \"?cam=true&roomId=\" + self.state.slot;\n          }\n          if (!self.state.muted) {\n            params = params + \"&mic=true\";\n          }\n          if (params === \"\") {\n            // var bar = self.getJsonFromUrl(self.$f7.view[0].history[0]);\n            // params = params + \"?cam=\" + bar[\"cam\"] + \"&mic=\" + bar[\"mic\"];\n          }\n          //console.log('%%%%%%%%%%%%%%%', params)\n          //window.location.replace(\"http://localhost:3000/\" + params);\n          //});\n        },\n        destroyed: function () {\n          window.location.reload();\n        },\n      });\n    },\n  });\n}\n\nexport function vNewRemoteFeed(\n  id,\n  feeds,\n  display,\n  audio,\n  video,\n  unsubscribe = false\n) {\n  var self = this;\n  var name = display.split(\"\")[0];\n  var role = display.split(\"\")[4];\n  //console.log('88888888', display)\n  // A new feed has been published, create a new plugin handle and attach to it as a subscriber\n  var remoteFeed = null;\n  self.state.janus.attach({\n    plugin: \"janus.plugin.videoroom\",\n    opaqueId: this.state.opaqueId,\n    success: function (pluginHandle) {\n      remoteFeed = pluginHandle;\n      remoteFeed.simulcastStarted = false;\n      Janus.log(\n        \"Plugin attached! (\" +\n          remoteFeed.getPlugin() +\n          \", id=\" +\n          remoteFeed.getId() +\n          \")\"\n      );\n      Janus.log(\"  -- This is a subscriber\");\n      // We wait for the plugin to send us an offer\n      var subscribe = {\n        request: \"join\",\n        room: parseInt(self.state.vroomId),\n        ptype: \"subscriber\",\n        pin: self.state.vpin,\n        feed: id,\n        private_id: self.state.mypvtid,\n      };\n      // In case you don't want to receive audio, video or data, even if the\n      // publisher is sending them, set the 'offer_audio', 'offer_video' or\n      // 'offer_data' properties to false (they're true by default), e.g.:\n      // \t\tsubscribe[\"offer_video\"] = false;\n      // For example, if the publisher is VP8 and this is Safari, let's avoid video\n      if (\n        Janus.webRTCAdapter.browserDetails.browser === \"safari\" &&\n        (video === \"vp9\" || (video === \"vp8\" && !Janus.safariVp8))\n      ) {\n        if (video) video = video.toUpperCase();\n        console.log(\n          \"Publisher is using \" +\n            video +\n            \", but Safari doesn't support it: disabling video\"\n        );\n        subscribe[\"offer_video\"] = false;\n      }\n\n      remoteFeed.videoCodec = video;\n      if (self.state.isSata && (role === \"moderator\" || role === \"presenter\")) {\n        remoteFeed.send({ message: subscribe });\n      }\n\n      if (!self.state.isSata) {\n        remoteFeed.send({ message: subscribe });\n      }\n    },\n    error: function (error) {\n      Janus.error(\"  -- Error attaching plugin...\", error);\n      window.alert(\"Error attaching plugin... \" + error);\n    },\n    onmessage: function (msg, jsep) {\n      Janus.debug(\" ::: Got a message (subscriber) :::\", msg);\n      console.log(\" ::: Got a message (subscriber) :::\", msg);\n      var event = msg[\"videoroom\"];\n      Janus.log(\"Event: \" + event);\n\n      if (msg[\"error\"]) {\n        // window.alert(msg[\"error\"]);\n      } else if (event) {\n        if (event === \"attached\") {\n          remoteFeed.rfid = msg[\"id\"];\n          remoteFeed.rfdisplay = msg[\"display\"];\n          self.setState({ feeds: self.state.feeds.concat(remoteFeed) }, () =>\n            console.log(\"@@@@\", self.state.feeds)\n          );\n\n          if (!video) {\n            self.vStreamDettacher(remoteFeed);\n          }\n\n          Janus.log(\n            \"Successfully attached to feed \" +\n              remoteFeed.rfid +\n              \" (\" +\n              remoteFeed.rfdisplay +\n              \") in room \" +\n              msg[\"room\"]\n          );\n        } else if (event === \"event\") {\n          if (msg[\"leaving\"]) {\n            //self.disher();\n          }\n        } else {\n          // What has just happened?\n        }\n      }\n      if (jsep) {\n        Janus.log(\"Handling SDP as well...\", jsep);\n        remoteFeed.createAnswer({\n          jsep: jsep,\n          // Add data:true here if you want to subscribe to datachannels as well\n          // (obviously only works if the publisher offered them in the first place)\n          media: { audioSend: false, videoSend: false, data: false }, // We want recvonly audio/video\n          success: function (jsep) {\n            Janus.log(\"Got SDP!\", jsep);\n            var body = { request: \"start\", room: self.state.roomId };\n            remoteFeed.send({ message: body, jsep: jsep });\n          },\n          error: function (error) {\n            Janus.log(\"WebRTC error:\", error);\n            window.alert(\"WebRTC error... \" + error.message);\n          },\n        });\n      }\n    },\n    iceState: function (state) {\n      Janus.log(\n        \"ICE state of this WebRTC PeerConnection (feed #\" +\n          remoteFeed.rfid +\n          \") changed to \" +\n          state\n      );\n    },\n    webrtcState: function (on) {\n      Janus.log(\n        \"Janus says this WebRTC PeerConnection (feed #\" +\n          remoteFeed.rfid +\n          \") is \" +\n          (on ? \"up\" : \"down\") +\n          \" now\"\n      );\n      if (on === \"down\") {\n        self.vremoveParticipant(remoteFeed.rfid);\n      }\n    },\n    onlocalstream: function (stream) {\n      console.log(\">>>>>>>>>>>\", stream);\n    },\n    onremotestream: function (stream) {\n      console.log(\">>>>>>>>>>>\", stream);\n      self.vStreamAttacher(remoteFeed, name);\n    },\n    ondata: function (data) {},\n    oncleanup: function () {\n      self.vStreamDettacher(remoteFeed);\n      self.setState({\n        feeds: self.state.feeds.filter((item) => item.id !== remoteFeed.id),\n      });\n      self.disher();\n      //self.vremoveParticipant(remoteFeed.rfid);\n      Janus.log(\" ::: Got a cleanup notification (remote feed \" + id + \") :::\");\n    },\n  });\n}\n\nexport function vregisterUsername(room) {\n  var self = this;\n  var role = this.currentRole();\n  var slot = 1;\n  var list = {\n    request: \"listparticipants\",\n    room: parseInt(this.state.vroomId),\n  };\n\n  self.state.sfutest.send({\n    message: list,\n    success: function (result) {\n      var uuids = [];\n      if (result.participants && result.participants.length > 0) {\n        result.participants.map((participant) => {\n          if(participant.display.split(\"\")[5] && participant.display.split(\"\")[5] !== 'NaN'){\n            uuids.push(parseInt(participant.display.split(\"\")[5]));\n          }\n        });\n      }\n      if(uuids.length > 0 ) {\n       // slot = Math.min(uuids) ;\n       slot = Math.max(...uuids) + 1;\n       console.log('&&&&&', uuids, slot);\n      }\n\n      if(self.state.is_moderator){\n        //slot = 0;\n      }\n      self.setState({slot: slot})\n\n\n      var register = {\n        request: \"join\",\n        room: parseInt(room),\n        ptype: \"publisher\",\n        pin: self.state.vpin,\n        display:\n          self.state.fullname +\n          \" \" +\n          self.state.userUUID +\n          \"\" +\n          self.state.userColor +\n          \"\" +\n          self.state.initials +\n          \"\" +\n          role +\n          \"\" +\n          slot,\n      };\n      self.state.sfutest.send({ message: register });\n    },\n  });\n\n  //self.setState({ myVroomId: self.state.mixertest.id });\n}\n\nexport function vChangeUsername(room) {\n  var self = this;\n  var role = this.currentRole();\n  console.log(\"changing role to ..\", role, parseInt(room));\n\n  var register = {\n    request: \"configure\",\n    room: parseInt(room),\n    pin: self.state.vpin,\n    display:\n      self.state.fullname +\n      \" \" +\n      self.state.userUUID +\n      \"\" +\n      self.state.userColor +\n      \"\" +\n      self.state.initials +\n      \"\" +\n      role +\n      \"\" +\n      self.state.slot,\n  };\n\n  self.state.sfutest.send({ message: register });\n  self.setState({ myId: self.state.mixertest.id, role: role });\n  self.changeOwn(self.state.userUUID, role);\n  self.vChangeOwn(self.state.userUUID, role);\n}\n\nexport function listParticipants(room) {\n  var self = this;\n  var list = {\n    request: \"listparticipants\",\n    room: parseInt(this.state.vroomId),\n  };\n  self.state.sfutest.send({\n    message: list,\n    success: function (result) {\n      console.log(result);\n    },\n  });\n}\n\nexport function vChangeOwn(uuid, role){\n  var self = this;\n  var exisiting = self.state.vparticipants.filter(\n    (item) => item.uuid === uuid\n  );\n  if(exisiting && exisiting.length > 0) {\n    self.setState(\n      {\n        vparticipants: self.state.vparticipants.filter(\n          (item) => item.uuid !== uuid\n        ),\n      },\n      () => { \n        exisiting[0]['role'] = role\n        self.setState({\n          vparticipants: self.state.vparticipants.concat(exisiting[0]) \n        })\n      })\n  }\n}\n\nexport function vStreamAttacher(feed, display = \"\") {\n  var self = this;\n  console.log(\"Attaching \" + feed);\n  console.log($(\"#video-\" + feed.id));\n  if ($(\"#video-\" + feed.id).length == 0) {\n    var localVideo = document.createElement(\"video\");\n    localVideo.autoplay = true;\n    localVideo.muted = true;\n    localVideo.id = \"video-\" + feed.id;\n  }\n\n  if (feed.id && feed.webrtcStuff && feed.webrtcStuff.remoteStream) {\n    if ($(\"#video-\" + feed.id).length == 0) {\n      $(\"#Dish\").append(\n        \"<div id='d-\" +\n          feed.id +\n          \"' class='Camera' data-content='\" +\n          display +\n          \"'></div>\"\n      );\n    }\n    if (localVideo) $(\"#d-\" + feed.id).append(localVideo);\n    Janus.attachMediaStream(\n      document.getElementById(\"video-\" + feed.id),\n      feed.webrtcStuff.remoteStream\n    );\n    self.disher('', \"Dish\", \"Camera\");\n  }\n  if (feed.id && feed.webrtcStuff && feed.webrtcStuff.myStream) {\n    if (self.state.isSata) {\n      if ($(\"#video-\" + feed.id).length == 0) {\n        $(\"#myDish\").append(\n          \"<div id='d-\" +\n            feed.id +\n            \"' class='myCamera' data-content='\" +\n            display +\n            \"'></div>\"\n        );\n      }\n    } else {\n      if ($(\"#video-\" + feed.id).length == 0) {\n        $(\"#Dish\").append(\n          \"<div id='d-\" +\n            feed.id +\n            \"' class='Camera' data-content='\" +\n            display +\n            \"'></div>\"\n        );\n      }\n    }\n    if (localVideo) $(\"#d-\" + feed.id).append(localVideo);\n    Janus.attachMediaStream(\n      document.getElementById(\"video-\" + feed.id),\n      feed.webrtcStuff.myStream\n    );\n    if (self.state.isSata) {\n      self.disher('', \"myDish\", \"myCamera\");\n    } else {\n      self.disher('', \"Dish\", \"Camera\");\n    }\n  }\n  $(\"#video-\" + feed.id).css(\"width\", \"inherit\");\n}\n\nexport function vStreamDettacher(feed) {\n  if (feed.id) {\n    //$(\"#video-\" + feed.id).trigger('pause');\n    $(\"#video-\" + feed.id).remove();\n    $(\"#d-\" + feed.id).remove();\n    this.disher('', \"Dish\", \"Camera\");\n  }\n}\n\nexport function vremoveParticipant(id) {\n  var self = this;\n  self.setState({\n    vparticipants: self.state.vparticipants.filter((item) => item.id !== id),\n  });\n}\n\nexport function vAddParticipant(id, p) {\n  var self = this;\n  var participant = p.split(\"\");\n  if (this.exisitingParticipant(participant[1])) {\n    self.setState({\n      vparticipants: self.state.vparticipants.concat({\n        id: id,\n        display: participant[0],\n        uuid: participant[1],\n        userColor: participant[2],\n        initials: participant[3],\n        role: participant[4],\n        slot: participant[5],\n        current: \"stopped-talking\",\n      }),\n    });\n  }\n}\n\nexport function publishCamera(bitrate =  4, deviceId = null) {\n  var self = this;\n  var video = true;\n  var device = true;\n  if (self.state.is_moderator) {\n    video = \"stdres-16:9\";\n    bitrate = 16;\n  } else {\n    video = \"lowres\";\n    bitrate = 16;\n  }\n  if (deviceId) {\n    device = { deviceId: deviceId };\n  }\n  self.state.sfutest.createOffer({\n    media: {\n      audioRecv: false,\n      videoRecv: false,\n      data: false,\n      videoSend: true,\n      audioSend: false,\n      video: video,\n      video: device,\n    },\n\n    success: function (jsep) {\n      Janus.debug(\"********* Got publisher SDP!\", jsep);\n      console.log(\"switching to \" + bitrate);\n      if (jsep) {\n        var publish = {\n          request: \"configure\",\n          audio: false,\n          video: true,\n          data: false,\n          bitrate: bitrate * 8000,\n          keyframe: true,\n          bitrate_cap: false,\n        };\n        self.state.sfutest.send({ message: publish, jsep: jsep });\n      }\n      self.setState({ publishedCamera: true });\n      $(\"#camera-spinner\").hide();\n      $(\"#camera-on\").hide();\n      $(\"#camera-off\").show();\n      $(\"#camera-off\").css(\"color\", \"black\");\n    },\n    error: function (error) {\n      Janus.error(\"***** WebRTC error:\", error);\n    },\n  });\n}\n\nexport function unPublishCamera() {\n  var self = this;\n  console.log(\"unPublishing ..\");\n  var unpublish = { request: \"unpublish\" };\n  self.state.sfutest.send({ message: unpublish });\n  self.vStreamDettacher(self.state.sfutest);\n  $(\"#camera-spinner\").hide();\n  $(\"#camera-on\").show();\n  $(\"#camera-off\").css(\"color\", \"initial\");\n  self.setState({ publishedCamera: false, videoState: \"initial\" });\n}\n\nexport function toggleVideoDevice(deviceId) {\n  var self = this;\n  if (self.state.publishedCamera) {\n    self.unPublishCamera();\n  }\n  self.publishCamera(16, deviceId);\n}\n\nexport function vexisitingParticipant(participantId) {\n  var self = this;\n  var exisiting = self.state.vparticipants.filter(\n    (item) => item.uuid === participantId\n  );\n  if (exisiting.length === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport function vparticipantDisplay(participantId) {\n  var self = this;\n  var exisiting = self.state.vparticipants.filter(\n    (item) => item.uuid === participantId\n  );\n  if (exisiting.length === 0) {\n    return \"\";\n  } else {\n    return exisiting[0].display;\n  }\n}\n\nexport function vparticipantChangeStatus(participantId, status) {\n  this.setState((prevState) => ({\n    talking: {\n      ...prevState.talking,\n      [participantId]: status,\n    },\n  }));\n}\n\nexport function vparticipantChangeRoom(participantId, room) {\n  this.setState((prevState) => ({\n    participantRoom: {\n      ...prevState.participantRoom,\n      [participantId]: room,\n    },\n  }));\n}\n\nexport function exitVideoRoom() {\n  var self = this;\n  if (this.state.sfutest) {\n    self.unPublishCamera();\n    this.state.sfutest.send({ message: { request: \"leave\" } });\n  }\n}\n\nexport function toggleCamera(deviceId= null, change=false) {\n  var self = this;\n  $(\"#camera-spinner\").show();\n  $(\"#camera-off\").hide();\n  $(\"#camera-on\").hide();\n  if (!self.state.publishedCamera) {\n    self.publishCamera(8, deviceId);\n  } else {\n    if (change) {\n      self.unPublishCamera();\n      setTimeout(\n        function () {\n          self.publishCamera(8, deviceId);\n        }\n          .bind(this),\n        2000\n      );\n    } else {\n      self.unPublishCamera();\n    }\n    //self.publishCamera(8,deviceId);\n   \n  }\n}\n","import Janus from \"../../janus-2021.js\";\nimport React, { Component } from \"react\";\nimport $ from \"jquery\";\nimport { socket } from \"../../socket.js\";\n\nexport function scSessionCreate(room) {\n  var self = this;\n  Janus.init({\n    debug: \"none\",\n    callback: function () {\n      // Create session\n      var janus = new Janus({\n        server: self.state.server,\n        iceServers: [\n          { url: \"stun:stun.l.google.com:19302\" },\n          {\n            url: \"turn:sync1.ut.ac.ir:3478\",\n            username: \"shafiei\",\n            credential: \"12345678\",\n          },\n        ],\n        success: function () {\n          console.log(\"sucess\");\n          // Attach to VideoRoom plugin\n          janus.attach({\n            plugin: \"janus.plugin.videoroom\",\n            opaqueId: self.state.opaqueId,\n            success: function (pluginHandle) {\n              console.log(\"pluginHandle\", pluginHandle);\n              //scSfutest = pluginHandle;\n              self.setState({ scJanus: janus });\n              self.setState({ scSfutest: pluginHandle });\n              Janus.log(\n                \"Plugin attached! (\" +\n                  self.state.scSfutest.getPlugin() +\n                  \", id=\" +\n                  self.state.scSfutest.getId() +\n                  \")\"\n              );\n              Janus.log(\"  -- This is a publisher/manager\");\n              self.scRegisterUsername(room);\n              // Prepare the username registration\n            },\n            error: function (error) {\n              Janus.error(\"  -- Error attaching plugin...\", error);\n              console.log(error);\n            },\n            consentDialog: function (on) {\n              Janus.debug(\n                \"Consent dialog should be \" + (on ? \"on\" : \"off\") + \" now\"\n              );\n            },\n            iceState: function (state) {\n              Janus.log(\"ICE state changed to \" + state);\n            },\n            mediaState: function (medium, on) {\n              Janus.log(\n                \"Janus \" +\n                  (on ? \"started\" : \"stopped\") +\n                  \" receiving our \" +\n                  medium\n              );\n            },\n            webrtcState: function (on) {\n              Janus.log(\n                \"Janus says our WebRTC PeerConnection is \" +\n                  (on ? \"up\" : \"down\") +\n                  \" now\"\n              );\n            },\n            onmessage: function (msg, jsep) {\n              Janus.debug(\" ::: Got a message (publisher) :::\", msg);\n              var event = msg[\"videoroom\"];\n              Janus.debug(\"Event: \" + event);\n              if (event) {\n                if (event === \"joined\") {\n                  // Publisher/manager created, negotiate WebRTC and attach to existing feeds, if any\n                  //myid = msg[\"id\"];\n                  //mypvtid = msg[\"private_id\"];\n                  self.setState({\n                    myScRoomId: msg[\"id\"],\n                    scJoined: true,\n                  });\n                  console.log(\">>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<\", msg);\n                  Janus.log(\n                    \"Successfully joined room \" +\n                      msg[\"room\"] +\n                      \" with ID \" +\n                      msg[\"id\"]\n                  );\n                  //self.addParticipant(\n                  //  msg[\"id\"],\n                  //  self.state.fullname + \"\" + self.state.userUUID\n                  //);\n                  //if (\n                  //  self.state.reloadParams &&\n                  //  self.state.reloadParams[\"cam\"]\n                  //) {\n                  //  self.ionRequestRoom();\n                  //}\n                  //publishOwnFeed(true);\n                  //}\n                  // Any new feed to attach to?\n                  if (msg[\"publishers\"]) {\n                    var list = msg[\"publishers\"];\n                    Janus.debug(\n                      \"Got a list of available publishers/feeds:\",\n                      list\n                    );\n                    for (var f in list) {\n                      console.log(\"List >>\", list);\n                      var id = list[f][\"id\"];\n                      var display = list[f][\"display\"];\n                      var audio = list[f][\"audio_codec\"];\n                      var video = list[f][\"video_codec\"];\n                      Janus.debug(\n                        \"  >> [\" +\n                          id +\n                          \"] \" +\n                          display +\n                          \" (audio: \" +\n                          audio +\n                          \", video: \" +\n                          video +\n                          \")\"\n                      );\n                      self.scAddParticipant(list[f][\"id\"], list[f][\"display\"]);\n                      self.scNewRemoteFeed(id, \"\", display, audio, video);\n                    }\n                  }\n                } else if (event === \"destroyed\") {\n                  // The room has been destroyed\n                  Janus.warn(\"The room has been destroyed!\");\n                } else if (event === \"event\") {\n                  // Any new feed to attach to?\n                  if (msg[\"publishers\"]) {\n                    var list = msg[\"publishers\"];\n                    console.debug(\n                      \"Got a list of available publishers/feeds:\",\n                      list\n                    );\n                    for (var f in list) {\n                      var id = list[f][\"id\"];\n                      var display = list[f][\"display\"];\n                      var audio = list[f][\"audio_codec\"];\n                      var video = list[f][\"video_codec\"];\n                      console.log(list);\n                      Janus.debug(\n                        \"  >> [\" +\n                          id +\n                          \"] \" +\n                          display +\n                          \" (audio: \" +\n                          audio +\n                          \", video: \" +\n                          video +\n                          \")\"\n                      );\n                      self.scAddParticipant(list[f][\"id\"], list[f][\"display\"]);\n                      self.scNewRemoteFeed(id, \"\", display, audio, video);\n                    }\n                  } else if (msg[\"leaving\"]) {\n                    // One of the publishers has gone away?\n                    var leaving = msg[\"leaving\"];\n                    console.log(\"Publisher leaving: \" + leaving);\n                    self.setState(\n                      {\n                        scFeeds: self.state.scFeeds.filter(\n                          (item) => item.rfid != leaving\n                        ),\n                      },\n                      () => console.log(\"feeds: >>>>\", self.state.scFeeds)\n                    );\n                    var unPublishedFeed = self.state.scFeeds.filter(\n                      (item) => item.rfid === leaving\n                    );\n                    var remoteFeed = unPublishedFeed.shift();\n                    if (remoteFeed != null) {\n                      remoteFeed.detach();\n                    }\n                    self.scRemoveParticipant(leaving);\n                  } else if (msg[\"unpublished\"]) {\n                    // One of the publishers has unpublished?\n                    var unpublished = msg[\"unpublished\"];\n                    console.log(\"Publisher left: \" + unpublished);\n                    if (unpublished === \"ok\") {\n                      self.state.scSfutest.hangup();\n                      self.scStreamDettacher(self.state.scSfutest);\n                      return;\n                    }\n                    var unPublishedFeed = self.state.scFeeds.filter(\n                      (item) => item.rfid === unpublished\n                    );\n                    var remoteFeed = unPublishedFeed.shift();\n                    if (remoteFeed != null) {\n                      remoteFeed.detach();\n                      self.scStreamDettacher(remoteFeed);\n                    }\n                    self.scRemoveParticipant(unpublished);\n\n                    self.setState({\n                      scFeeds: self.state.scFeeds.filter(\n                        (item) => item.rfid != unpublished\n                      ),\n                    });\n                  } else if (msg[\"error\"]) {\n                    if (msg[\"error_code\"] === 426) {\n                      // This is a \"no such room\" error: give a more meaningful description\n                    } else {\n                    }\n                  }\n                }\n              }\n              if (jsep) {\n                Janus.debug(\"Handling SDP as well...\", jsep);\n                self.state.scSfutest.handleRemoteJsep({ jsep: jsep });\n              }\n            },\n            onlocalstream: function (stream) {\n              Janus.debug(\" ::: Got a local stream :::\", stream);\n              //console.log(\" ::: Got a local stream :::\", stream);\n              var exisiting = self.state.scFeeds.filter(\n                (item) => item.id === self.state.scSfutest.id\n              );\n              if (exisiting.length === 0) {\n                self.state.scSfutest.rfid = self.state.myVroomId;\n                self.setState({\n                  scFeeds: self.state.scFeeds.concat(self.state.scSfutest),\n                });\n              }\n\n              var videoTracks = stream.getVideoTracks();\n              if (!videoTracks || videoTracks.length === 0) {\n                self.scStreamDettacher(self.state.scSfutest);\n              } else {\n                self.scStreamAttacher(self.state.scSfutest, self.state.name);\n              }\n\n              stream.getVideoTracks()[0].onended = function () {\n                self.toggleScreen();\n              };\n            },\n            onremotestream: function (stream) {\n              // The publisher stream is sendonly, we don't expect anything here\n            },\n            oncleanup: function () {\n              self.scStreamDettacher(self.state.scSfutest);\n              Janus.log(\n                \" ::: Got a cleanup notification: we are unpublished now :::\"\n              );\n            },\n          });\n        },\n        error: function (error) {\n          Janus.error(error);\n          //console.log(error)\n          //bootbox.alert(error, function() {\n        },\n        destroyed: function () {\n          window.location.reload();\n        },\n      });\n    },\n  });\n}\n\nexport function scNewRemoteFeed(id, feeds, display, audio, video) {\n  var self = this;\n  var name = display.split(\"\")[0];\n  // A new feed has been published, create a new plugin handle and attach to it as a subscriber\n  var remoteFeed = null;\n  self.state.janus.attach({\n    plugin: \"janus.plugin.videoroom\",\n    opaqueId: this.state.opaqueId,\n    success: function (pluginHandle) {\n      remoteFeed = pluginHandle;\n      remoteFeed.simulcastStarted = false;\n      Janus.log(\n        \"Plugin attached! (\" +\n          remoteFeed.getPlugin() +\n          \", id=\" +\n          remoteFeed.getId() +\n          \")\"\n      );\n      Janus.log(\"  -- This is a subscriber\");\n      // We wait for the plugin to send us an offer\n      var subscribe = {\n        request: \"join\",\n        room: parseInt(self.state.scRoomId),\n        ptype: \"subscriber\",\n        //pin: self.state.vpin,\n        feed: id,\n        private_id: self.state.mypvtid,\n      };\n      // In case you don't want to receive audio, video or data, even if the\n      // publisher is sending them, set the 'offer_audio', 'offer_video' or\n      // 'offer_data' properties to false (they're true by default), e.g.:\n      // \t\tsubscribe[\"offer_video\"] = false;\n      // For example, if the publisher is VP8 and this is Safari, let's avoid video\n      if (\n        Janus.webRTCAdapter.browserDetails.browser === \"safari\" &&\n        (video === \"vp9\" || (video === \"vp8\" && !Janus.safariVp8))\n      ) {\n        if (video) video = video.toUpperCase();\n        console.log(\n          \"Publisher is using \" +\n            video +\n            \", but Safari doesn't support it: disabling video\"\n        );\n        subscribe[\"offer_video\"] = false;\n      }\n      //subscribe[\"offer_video\"] = false;\n      remoteFeed.videoCodec = video;\n      remoteFeed.send({ message: subscribe });\n    },\n    error: function (error) {\n      Janus.error(\"  -- Error attaching plugin...\", error);\n      window.alert(\"Error attaching plugin... \" + error);\n    },\n    onmessage: function (msg, jsep) {\n      Janus.debug(\" ::: Got a message (subscriber) :::\", msg);\n      var event = msg[\"videoroom\"];\n      Janus.log(\"Event: \" + event);\n\n      if (msg[\"error\"]) {\n        window.alert(msg[\"error\"]);\n      } else if (event) {\n        if (event === \"attached\") {\n          remoteFeed.rfid = msg[\"id\"];\n          remoteFeed.rfdisplay = msg[\"display\"];\n          self.setState(\n            { scFeeds: self.state.scFeeds.concat(remoteFeed) },\n            () => console.log(\"@@@@\", self.state.scFeeds)\n          );\n\n          if (!video) {\n            self.scStreamDettacher(remoteFeed);\n          }\n\n          Janus.log(\n            \"Successfully attached to feed \" +\n              remoteFeed.rfid +\n              \" (\" +\n              remoteFeed.rfdisplay +\n              \") in room \" +\n              msg[\"room\"]\n          );\n        } else if (event === \"event\") {\n        } else {\n          // What has just happened?\n        }\n      }\n      if (jsep) {\n        Janus.log(\"Handling SDP as well...\", jsep);\n        remoteFeed.createAnswer({\n          jsep: jsep,\n          // Add data:true here if you want to subscribe to datachannels as well\n          // (obviously only works if the publisher offered them in the first place)\n          media: { audioSend: false, videoSend: false, data: false }, // We want recvonly audio/video\n          success: function (jsep) {\n            Janus.log(\"Got SDP!\", jsep);\n            var body = { request: \"start\", room: self.state.roomId };\n            remoteFeed.send({ message: body, jsep: jsep });\n          },\n          error: function (error) {\n            Janus.log(\"WebRTC error:\", error);\n            window.alert(\"WebRTC error... \" + error.message);\n          },\n        });\n      }\n    },\n    iceState: function (state) {\n      Janus.log(\n        \"ICE state of this WebRTC PeerConnection (feed #\" +\n          remoteFeed.rfid +\n          \") changed to \" +\n          state\n      );\n    },\n    webrtcState: function (on) {\n      Janus.log(\n        \"Janus says this WebRTC PeerConnection (feed #\" +\n          remoteFeed.rfid +\n          \") is \" +\n          (on ? \"up\" : \"down\") +\n          \" now\"\n      );\n      if (on === \"down\") {\n        self.scRemoveParticipant(remoteFeed.rfid);\n      }\n    },\n    onlocalstream: function (stream) {\n      console.log(\">>>>>>>>>>>\", stream);\n    },\n    onremotestream: function (stream) {\n      console.log(\">>>>>>>>>>>\", stream);\n      self.scStreamAttacher(remoteFeed, name);\n    },\n    ondata: function (data) {},\n    oncleanup: function () {\n      Janus.log(\" ::: Got a cleanup notification (remote feed \" + id + \") :::\");\n    },\n  });\n}\n\nexport function scRegisterUsername(room) {\n  var self = this;\n  console.log(parseInt(room));\n  var register = {\n    request: \"join\",\n    room: parseInt(room),\n    ptype: \"publisher\",\n    //pin: self.state.vpin,\n    display:\n      self.state.fullname +\n      \" \" +\n      self.state.userUUID +\n      \"\" +\n      self.state.userColor +\n      \"\" +\n      self.state.slot,\n  };\n  self.state.scSfutest.send({ message: register });\n  //self.setState({ myVroomId: self.state.mixertest.id });\n}\n\nexport function scStreamAttacher(feed, display = \"\") {\n  var self = this;\n  console.log(\"Attaching \" + feed);\n  console.log($(\"#screen-\" + feed.id));\n  if ($(\"#screen-\" + feed.id).length == 0) {\n    var localVideo = document.createElement(\"video\");\n    localVideo.autoplay = true;\n    localVideo.muted = true;\n    localVideo.width = 800;\n    localVideo.id = \"screen-\" + feed.id;\n    $(\"#screen\").append(\n      \"<div id='s-\" +\n        feed.id +\n        \"' class='Screen' data-content='\" +\n        display +\n        \"'></div>\"\n    );\n  }\n\n  if (localVideo) $(\"#s-\" + feed.id).append(localVideo);\n  if (feed.id && feed.webrtcStuff && feed.webrtcStuff.remoteStream) {\n    //self.setState({ vActive: true });\n    //if (localVideo) $(\"#remoteVideos\").append(localVideo);\n    Janus.attachMediaStream(\n      document.getElementById(\"screen-\" + feed.id),\n      feed.webrtcStuff.remoteStream\n    );\n    //self.disher();\n  }\n  if (feed.id && feed.webrtcStuff && feed.webrtcStuff.myStream) {\n    Janus.attachMediaStream(\n      document.getElementById(\"screen-\" + feed.id),\n      feed.webrtcStuff.myStream\n    );\n    //self.disher();\n  }\n  $(\"#screen-\" + feed.id).css(\"width\", \"-webkit-fill-available\");\n}\n\nexport function scStreamDettacher(feed) {\n  if (feed.id) {\n    //console.log(\"Dettaching \" + feed.id);\n    $(\"#screen-\" + feed.id).remove();\n    $(\"#s-\" + feed.id).remove();\n    //this.disher();\n  }\n}\n\nexport function scRemoveParticipant(id) {\n  var self = this;\n  self.setState({\n    scParticipants: self.state.scParticipants.filter((item) => item.id !== id),\n  });\n}\n\nexport function scAddParticipant(id, p) {\n  var self = this;\n  var participant = p.split(\"\");\n  if (this.exisitingParticipant(participant[1])) {\n    self.setState({\n      scParticipants: self.state.scParticipants.concat({\n        id: id,\n        display: participant[0],\n        uuid: participant[1],\n        userColor: participant[2],\n        role: \"listener\",\n        current: \"stopped-talking\",\n      }),\n    });\n  }\n}\n\nexport function exisitingParticipant(participantId) {\n  var self = this;\n  var exisiting = self.state.participants.filter(\n    (item) => item.uuid === participantId\n  );\n  if (exisiting.length === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport function publishScreen(bitrate = 16, deviceId = null, stream = null) {\n  var self = this;\n\n  self.state.scSfutest.createOffer({\n    media: {\n      audioRecv: false,\n      videoRecv: false,\n      data: false,\n      videoSend: true,\n      video: \"screen\",\n      screenshareFrameRate: 1,\n      screenshareWidth: 800,\n      audioSend: false,\n    },\n\n    success: function (jsep) {\n      Janus.debug(\"********* Got publisher SDP!\", jsep);\n      console.log(\"switching to \" + bitrate);\n      if (jsep) {\n        var publish = {\n          request: \"configure\",\n          audio: false,\n          video: true,\n          data: false,\n          bitrate: 5000000,\n          keyframe: true,\n          publishers: 1,\n        };\n        self.state.scSfutest.send({ message: publish, jsep: jsep });\n      }\n      self.setState({ publishedScreen: true });\n      $(\"#screen-spinner\").hide();\n      $(\"#screen-off\").show();\n      $(\"#screen-off\").css(\"color\", \"black\");\n    },\n    error: function (error) {\n      Janus.error(\"***** WebRTC error:\", error);\n    },\n  });\n}\n\nexport function unPublishScreen() {\n  var self = this;\n  console.log(\"unPublishing ..\");\n  var unpublish = { request: \"unpublish\" };\n  self.state.scSfutest.send({ message: unpublish });\n  self.scStreamDettacher(self.state.scSfutest);\n  $(\"#screen-spinner\").hide();\n  $(\"#screen-on\").show();\n  $(\"#screen-off\").css(\"color\", \"initial\");\n  self.setState({ publishedScreen: false, videoState: \"initial\", slot: null });\n}\n\nexport function scExisitingParticipant(participantId) {\n  var self = this;\n  var exisiting = self.state.scParticipants.filter(\n    (item) => item.uuid === participantId\n  );\n  if (exisiting.length === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport function scParticipantDisplay(participantId) {\n  var self = this;\n  var exisiting = self.state.scParticipants.filter(\n    (item) => item.uuid === participantId\n  );\n  if (exisiting.length === 0) {\n    return \"\";\n  } else {\n    return exisiting[0].display;\n  }\n}\n\nexport function scParticipantChangeStatus(participantId, status) {\n  this.setState((prevState) => ({\n    talking: {\n      ...prevState.talking,\n      [participantId]: status,\n    },\n  }));\n}\n\nexport function scParticipantChangeRoom(participantId, room) {\n  this.setState((prevState) => ({\n    participantRoom: {\n      ...prevState.participantRoom,\n      [participantId]: room,\n    },\n  }));\n}\n\nexport function exitScreenRoom() {\n  var self = this;\n  if (this.state.scSfutest) {\n    self.unPublishScreen();\n    // this.state.scSfutest.send({ message: { request: \"unpublish\" } });\n    this.state.scSfutest.send({ message: { request: \"leave\" } });\n  }\n}\n\nexport function toggleScreen() {\n  var self = this;\n  $(\"#screen-spinner\").show();\n  $(\"#screen-off\").hide();\n  $(\"#screen-on\").hide();\n  if (!self.state.publishedScreen) {\n    self.publishScreen();\n  } else {\n    self.unPublishScreen();\n  }\n}\n\n","// Area:\nexport function dishArea(Increment, Count, Width, Height, Margin = 10) {\n    let i =  0;\n    let w = 0;\n    let h = Increment * 0.75 + (Margin * 2);\n    while (i < (Count)) {\n        if ((w + Increment) > Width) {\n            w = 0;\n            h = h + (Increment * 0.75) + (Margin * 2);\n        }\n        w = w + Increment + (Margin * 2);\n        i++;\n    }\n    if (h > Height) return false;\n    else return Increment;\n}\n// Dish:\nexport function disher(el, dish='Dish', cam = 'Camera') {\n    console.log('Disher called', dish, cam)\n    // variables:\n        let Margin = 2;\n        let Scenary = document.getElementById(dish);\n        let Width = 0;\n        let Height = 0;\n        if (Scenary) {\n             Width = Scenary.offsetWidth - (Margin * 2);\n             Height = Scenary.offsetHeight - (Margin * 2);\n        }\n\n        let Cameras = document.getElementsByClassName(cam);\n        let max = 0;\n    \n    // loop (i recommend you optimize this)\n        let i = 1;\n        while (i < 5000) {\n            let w = dishArea(i, Cameras.length, Width, Height, Margin);\n            if (w === false) {\n                max =  i - 1;\n                break;\n            }\n            i++;\n        }\n    \n    // set styles\n        max = max - (Margin * 2);\n        setWidth(max, Margin, cam);\n}\n\n// Set Width and Margin \nexport function setWidth(width, margin, cam) {\n    console.log(width, margin, cam)\n    let Cameras = document.getElementsByClassName(cam);\n    for (var s = 0; s < Cameras.length; s++) {\n        Cameras[s].style.width = width + \"px\";\n        Cameras[s].style.margin = margin + \"px\";\n        Cameras[s].style.height = (width * 0.75) + \"px\";\n    }\n}\n\n// Load and Resize Event\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport $ from 'jquery';\nimport Header from \"../header/header.jsx\";\nimport Janus from \"../../janus.js\";\nimport { conf } from \"../../conf\";\nimport { socket } from '../../socket.js'\nimport { v4 as uuidv4 } from 'uuid';\nimport { CountdownCircleTimer } from \"react-countdown-circle-timer\";\n\nimport {\n  sessionCreate, addParticipant, exisitingParticipant, registerUsername,\n  toggleMute, exitAudioRoom, removeParticipant, participantChangeStatus,\n  participantDisplay, forceMute, participantChangeRoom, currentRole, changeUsername,\n  changeParticipant, changeOwn, joinAudioRoom, joinAudioRoomWOMic\n} from \"./janus-tools.js\";\n\nimport {\n  vsessionCreate, vregisterUsername, vNewRemoteFeed, publishCamera,\n  toggleCamera, vStreamAttacher, vStreamDettacher, unPublishCamera,\n  vChangeUsername, vAddParticipant, toggleVideoDevice, exitVideoRoom,\n  listParticipants, vremoveParticipant, vChangeOwn\n} from \"./janus-videoroom.js\";\n\nimport {\n  scSessionCreate, scRegisterUsername, scNewRemoteFeed, publishScreen,\n  toggleScreen, scStreamAttacher, scStreamDettacher, unPublishScreen,\n  scAddParticipant, exitScreenRoom\n} from \"./janus-screenroom.js\";\n\nimport {\n  dishArea, disher, setWidth\n} from \"./dish.js\";\n\nimport {\n  appendChat, chatItems, throttle, send, wsSend, keydownHandler, scrollChat,\n  handRaiseCreate, handRaiseDestroy, isHandRaised\n} from \"../rooms/chat.js\";\n\nvar t = dict['farsi']\n\nexport default class MeetingShow extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.getInstance = this.getInstance.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.setInstance = this.setInstance.bind(this);\n    this.handRaiseToggle = this.handRaiseToggle.bind(this);\n    this.initDevices = this.initDevices.bind(this);\n\n    this.vsessionCreate = vsessionCreate.bind(this)\n    this.vregisterUsername = vregisterUsername.bind(this)\n    this.vNewRemoteFeed = vNewRemoteFeed.bind(this)\n    this.publishCamera = publishCamera.bind(this)\n    this.toggleCamera = toggleCamera.bind(this)\n    this.vStreamAttacher = vStreamAttacher.bind(this)\n    this.vStreamDettacher = vStreamDettacher.bind(this)\n    this.vremoveParticipant = vremoveParticipant.bind(this)\n    this.unPublishCamera = unPublishCamera.bind(this)\n    this.vChangeUsername = vChangeUsername.bind(this)\n    this.vAddParticipant = vAddParticipant.bind(this)\n    this.toggleVideoDevice = toggleVideoDevice.bind(this)\n    this.exitVideoRoom = exitVideoRoom.bind(this);\n    this.changeUsername = changeUsername.bind(this);\n    this.listParticipants = listParticipants.bind(this);\n    this.vChangeOwn = vChangeOwn.bind(this);\n\n    this.currentRole = currentRole.bind(this)\n\n    this.sessionCreate = sessionCreate.bind(this);\n    this.registerUsername = registerUsername.bind(this);\n    this.participantChangeStatus = participantChangeStatus.bind(this);\n    this.participantDisplay = participantDisplay.bind(this);\n    this.forceMute = forceMute.bind(this);\n    this.participantChangeRoom = participantChangeRoom.bind(this);\n    this.exitAudioRoom = exitAudioRoom.bind(this);\n    this.removeParticipant = removeParticipant.bind(this);\n    this.addParticipant = addParticipant.bind(this);\n    this.toggleMute = toggleMute.bind(this);\n    this.exisitingParticipant = exisitingParticipant.bind(this);\n    this.changeParticipant = changeParticipant.bind(this);\n    this.changeOwn = changeOwn.bind(this);\n    this.handRaiseCreate = handRaiseCreate.bind(this);\n    this.handRaiseDestroy = handRaiseDestroy.bind(this);\n    this.isHandRaised = isHandRaised.bind(this);\n    this.joinAudioRoom = joinAudioRoom.bind(this);\n    this.joinAudioRoomWOMic = joinAudioRoomWOMic.bind(this);\n\n\n    this.scSessionCreate = scSessionCreate.bind(this);\n    this.scRegisterUsername = scRegisterUsername.bind(this);\n    this.scNewRemoteFeed = scNewRemoteFeed.bind(this);\n    this.publishScreen = publishScreen.bind(this);\n    this.toggleScreen = toggleScreen.bind(this);\n    this.scStreamAttacher = scStreamAttacher.bind(this);\n    this.scStreamDettacher = scStreamDettacher.bind(this);\n    this.unPublishScreen = unPublishScreen.bind(this);\n    this.scAddParticipant = scAddParticipant.bind(this);\n    this.exitScreenRoom = exitScreenRoom.bind(this);\n\n    this.dishArea = dishArea.bind(this);\n    this.disher = disher.bind(this);\n    this.setWidth = setWidth.bind(this);\n\n\n    this.appendChat = appendChat.bind(this);\n    this.chatItems = chatItems.bind(this);\n    this.throttle = throttle.bind(this);\n    this.send = send.bind(this);\n    this.wsSend = wsSend.bind(this);\n    this.keydownHandler = keydownHandler.bind(this);\n    this.scrollChat = scrollChat.bind(this);\n\n    this.socketHandle = this.socketHandle.bind(this);\n    this.handleChangedRole = this.handleChangedRole.bind(this)\n\n    this.broadcast = this.broadcast.bind(this)\n    this.changeLayout = this.changeLayout.bind(this)\n\n    this.state = {\n      token: window.localStorage.getItem('token'),\n      lang: window.localStorage.getItem('lang'),\n      dir: window.localStorage.getItem('dir'),\n      name: null,\n      fullname: null,\n      userUUID: null,\n      initials: null,\n      is_speaker: false,\n      is_moderator: false,\n      is_presenter: false,\n      role: null,\n      talking: {},\n\n      handRaised: [],\n      myHand: false,\n      sourceSettings: false,\n\n      opaqueId: \"videoroomtest-\" + Janus.randomString(12),\n      mixertest: null,\n      server: conf.janusServer,\n      roomId: null,\n      pin: null,\n      id: null,\n\n      participants: [],\n      vparticipants: [],\n      scParticipants: [],\n\n      muted: true,\n      talking: false,\n      myId: null,\n      vroomId: null,\n      vpin: null,\n\n      scRoomId: 1234,\n      scPin: null,\n      scJanus: null,\n      scSfutest: null,\n      scFeeds: [],\n\n      janus: null,\n      sfutest: null,\n      feeds: [],\n      propagates: [],\n\n      chats: [],\n      lastTime: Date.now(),\n      content: null,\n      item: null,\n\n      speakerDevices: [],\n      microphoneDevices: [],\n      cameraDevices: [],\n\n      isSata: false,\n      slot: 1,\n\n      layoutCol: 12,\n      errorMessage: null,\n\n      speakerDevice: null,\n      microphoneDevice: null,\n      cameraDevice: null,\n\n      theme: '',\n      playSoundBtn: false,\n\n      timer: 0,\n      timerDuration: 120,\n      timerPlaying: false,\n      timerStarted: true,\n      timerCard: false,\n      pollCard: false,\n\n      playingFiles: []\n    }\n\n  }\n\n\n\n  componentWillMount() {\n    ModelStore.on(\"set_instance\", this.setInstance);\n    ModelStore.on(\"got_instance\", this.getInstance);\n    ModelStore.on(\"deleted_instance\", this.getInstance);\n  }\n\n  componentWillUnmount() {\n    ModelStore.removeListener(\"got_instance\", this.getInstance);\n    ModelStore.removeListener(\"set_instance\", this.setInstance);\n    ModelStore.removeListener(\"deleted_instance\", this.getInstance);\n    window.localStorage.setItem(this.state.roomId, 'unchoke')\n    this.exitAll();\n    document.body.classList.remove('theme-dark');\n  }\n\n  exitAll() {\n    this.exitAudioRoom();\n    this.exitVideoRoom();\n  }\n\n  componentDidMount() {\n    t = dict[this.state.lang]\n    var self = this;\n    if (this.state.token && this.state.token.length > 10) {\n      MyActions.setInstance('users/validate_token', {}, this.state.token);\n    }\n    window.addEventListener(\"load\", function (event) {\n      self.disher();\n      window.onresize = disher;\n    }, false);\n\n    socket.on('connect', function () {\n      if (self.state.roomId) {\n        socket.emit('room', { room: self.state.roomId.toString(), uuid: self.state.userUUID });\n      }\n    });\n\n    socket.on('message', function (data) {\n      console.log('message', data)\n      if (data['sender'] !== self.state.userUUID) {\n        self.socketHandle(data)\n      }\n    });\n\n    $(window).on('resize', disher);\n    $('#videoz').on('resize', disher);\n\n\n    this.initDevices();\n\n    if (!window.localStorage.getItem(this.state.roomId)) {\n      window.localStorage.setItem(this.state.roomId, 'unchoke')\n    }\n\n    window.onunload = window.onbeforeunload = function () {\n      window.localStorage.setItem(this.state.roomId, 'unchoke')\n    }\n  }\n\n\n  handleChange(obj) {\n    this.setState(obj);\n  }\n\n  initDevices() {\n    var self = this;\n    navigator.mediaDevices.enumerateDevices()\n      .then(function (devices) {\n        devices.forEach(function (device) {\n         // console.log(device)\n          if (device.kind === 'audiooutput') {\n            self.setState({ speakerDevices: self.state.speakerDevices.concat({ id: device.deviceId, label: device.label }) })\n          }\n          if (device.kind === 'audioinput') {\n            self.setState({ microphoneDevices: self.state.microphoneDevices.concat({ id: device.deviceId, label: device.label }) })\n          }\n          if (device.kind === 'videoinput') {\n            self.setState({ cameraDevices: self.state.cameraDevices.concat({ id: device.deviceId, label: device.label }) })\n          }\n        });\n      })\n      .catch(function (err) {\n        console.log(err.name + \": \" + err.message);\n      });\n  }\n\n  socketHandle(msg) {\n    var self = this;\n    var parsed = msg;\n    switch (parsed.type) {\n      case \"chat\":\n        self.appendChat(parsed.c);\n        break;\n      case \"changeRole\":\n        self.handleChangedRole(parsed.c);\n        break;\n      case \"changeLayout\":\n        self.changeOwnLayout(parsed.c.x);\n        break;\n      case \"handRaise\":\n        self.handRaiseCreate(parsed.c);\n        break;\n      case \"handDown\":\n        self.handRaiseDestroy(parsed.c);\n        break;\n      case \"toggleTimer\":\n        this.setState({ timerStarted: false, timerDuration: parsed.c.timerDuration }, () => {\n          this.setState({ timerStarted: true });\n        });\n        break;\n      case \"startTimer\":\n        this.setState({ timerPlaying: true });\n        break;\n      case \"stopTimer\":\n        this.setState({ timerPlaying: false });\n        break;\n      case \"userCounter\":\n        self.setState({ userCounter: parsed.c });\n        break;\n    }\n  }\n\n  handleChangedRole(c) {\n    var self = this;\n    var uuid = c.uuid;\n    var role = c.role;\n    if (uuid == self.state.userUUID) {\n      if (role === \"listener\") {\n        self.setState(\n          { is_speaker: false, is_presenter: false, is_moderator: false },\n          () => {\n            //self.changeUsername(self.state.roomId);\n            self.vChangeUsername(self.state.vroomId)\n          }\n        );\n      }\n      if (role === \"speaker\") {\n        self.setState(\n          { is_speaker: true, is_presenter: false, is_moderator: false },\n          () => {\n            self.vChangeUsername(self.state.roomId);\n          }\n        );\n      }\n      if (role === \"presenter\") {\n        self.setState(\n          { is_presenter: true, is_speaker: false, is_moderator: false },\n          () => {\n            self.vChangeUsername(self.state.roomId);\n          }\n        );\n      }\n      if (role === \"moderator\") {\n        self.setState(\n          { is_moderator: true, is_speaker: false, is_presenter: false },\n          () => {\n            self.vChangeUsername(self.state.roomId);\n          }\n        );\n      }\n    }\n  }\n\n\n  getInstance() {\n    var klass = ModelStore.getKlass()\n    var model = ModelStore.getIntance()\n    if (klass === 'Room') {\n      this.setState({\n        id: model.id,\n        roomId: model.uuid,\n        pin: model.pin,\n        secret: model.secret,\n        vroomId: model.vuuid,\n        vpin: model.vpin,\n        vsecret: model.vsecret,\n        is_speaker: model.is_speaker,\n        is_moderator: model.is_moderator,\n        is_presenter: model.is_presenter,\n        isSata: model.is_sata,\n      }, () => {\n        this.sessionCreate(this.state.roomId)\n        this.vsessionCreate(this.state.vroomId)\n        this.scSessionCreate(1234)\n        if (window.localStorage.getItem(this.state.roomId) === 'unchoke') {\n          window.localStorage.setItem(this.state.roomId, 'choke')\n          window.location.reload();\n        }\n\n        this.connectSocketRoom();\n      })\n    }\n  }\n\n  setInstance() {\n    var self = this;\n    var klass = ModelStore.getKlass()\n    var user = ModelStore.getIntance();\n    if (klass === 'Validate') {\n      this.setState({ name: user.name, fullname: user.name, initials: user.initials, userUUID: user.uuid }, () => {\n        //console.log(self.state)\n        MyActions.getInstance('rooms', self.props.match.params.id, self.state.token);\n      });\n    }\n  }\n\n  broadcast() {\n    console.log('{}{}{}', this.state.feeds)\n    var rtpforward = { \"request\": \"rtp_forward\", \"room\": parseInt(this.state.vroomId), \"publisher_id\": this.state.feeds[0].rfid, \"host\": \"127.0.0.1\", \"audio_port\": 10001, \"video_port\": 10003, \"data_port\": 5000, \"secret\": this.state.vsecret };\n    this.state.sfutest.send({\n      \"message\": rtpforward,\n      success: function (result) {\n        console.log(result);\n      },\n    });\n  }\n\n  playSound(fileName) {\n    var self = this;\n    var playFile = { \"request\": \"play_file\", \"room\": parseInt(this.state.roomId), \"secret\": this.state.secret, \"filename\": \"/var/snap/janus-gateway/common/share/OPUS/\" + fileName + \".opus\", \"loop\": false };\n    this.state.mixertest.send({\n      \"message\": playFile,\n      success: function (result) {\n        self.setState({ playingFiles: self.state.playingFiles.concat({ fileName: fileName, fileId: result.file_id }) })\n        console.log(result);\n      },\n    });\n  }\n\n  stopSound() {\n    this.state.playingFiles.map((f) => {\n      var stopFile = { \"request\": \"stop_file\", \"room\": parseInt(this.state.roomId), \"secret\": this.state.secret, \"file_id\": f.fileId };\n      this.state.mixertest.send({\n        \"message\": stopFile,\n        success: function (result) {\n          console.log(result);\n        },\n      });\n    })\n  }\n\n  presentBtn() {\n    if (this.state.is_presenter || this.state.is_moderator) {\n      return (\n        <a class=\"m-10p\" onClick={() => this.toggleScreen()}>\n          <span class=\"avatar avatar-mini avatar-ctl\">\n            <div id='screen-spinner' class=\"spinner-border text-red\" role=\"status\" style={{ display: 'none' }}></div>\n            <svg id='screen-on' style={{ display: 'block' }} xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9\" /><line x1=\"7\" y1=\"20\" x2=\"17\" y2=\"20\" /><line x1=\"9\" y1=\"16\" x2=\"9\" y2=\"20\" /><line x1=\"15\" y1=\"16\" x2=\"15\" y2=\"20\" /><path d=\"M17 8l4 -4m-4 0l4 4\" /></svg>\n            <svg id='screen-off' style={{ display: 'none' }} xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9\" /><line x1=\"7\" y1=\"20\" x2=\"17\" y2=\"20\" /><line x1=\"9\" y1=\"16\" x2=\"9\" y2=\"20\" /><line x1=\"15\" y1=\"16\" x2=\"15\" y2=\"20\" /><path d=\"M17 4h4v4\" /><path d=\"M16 9l5 -5\" /></svg>\n          </span>\n        </a>\n      )\n    }\n  }\n\n  microphoneBtn() {\n    if (this.state.is_moderator || this.state.is_presenter || this.state.is_speaker) {\n      return (\n        <a class=\"m-10p\" onClick={() => this.toggleMute()}>\n          <span class=\"avatar avatar-mini avatar-ctl\">\n            <svg id='microphone-off' style={{ display: 'none' }} xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"9\" y=\"2\" width=\"6\" height=\"11\" rx=\"3\" /><path d=\"M5 10a7 7 0 0 0 14 0\" /><line x1=\"8\" y1=\"21\" x2=\"16\" y2=\"21\" /><line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"21\" /></svg>\n            <svg id='microphone-on' style={{ display: 'block' }} xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"3\" y1=\"3\" x2=\"21\" y2=\"21\" /><path d=\"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1\" /><path d=\"M5 10a7 7 0 0 0 10.846 5.85m2.002 -2a6.967 6.967 0 0 0 1.152 -3.85\" /><line x1=\"8\" y1=\"21\" x2=\"16\" y2=\"21\" /><line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"21\" /></svg>\n          </span>\n        </a>\n      )\n    }\n  }\n\n  cameraBtn() {\n    if (this.state.is_moderator || this.state.is_presenter || this.state.is_speaker) {\n      return (\n        <a class=\"m-10p\" onClick={() => this.toggleCamera(this.state.cameraDevices[0].id)}>\n          <span class=\"avatar avatar-mini avatar-ctl\">\n            <div id='camera-spinner' class=\"spinner-border text-red\" role=\"status\" style={{ display: 'none' }}></div>\n            <svg id='camera-off' style={{ display: 'none' }} xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"10\" r=\"7\" /><circle cx=\"12\" cy=\"10\" r=\"3\" /><path d=\"M8 16l-2.091 3.486a1 1 0 0 0 .857 1.514h10.468a1 1 0 0 0 .857 -1.514l-2.091 -3.486\" /></svg>\n            <svg id='camera-on' style={{ display: 'block' }} xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M6.15 6.153a7 7 0 0 0 9.696 9.696m2.003 -2.001a7 7 0 0 0 -9.699 -9.695\" /><path d=\"M9.13 9.122a3 3 0 0 0 3.743 3.749m2.001 -2.009a3 3 0 0 0 -3.737 -3.736\" /><path d=\"M8 16l-2.091 3.486a1 1 0 0 0 .857 1.514h10.468a1 1 0 0 0 .857 -1.514l-2.091 -3.486\" /><line x1=\"3\" y1=\"3\" x2=\"21\" y2=\"21\" /></svg>\n          </span>\n        </a>\n      )\n    }\n  }\n\n  settingsBtn() {\n    if (this.state.is_moderator || this.state.is_presenter || this.state.is_speaker) {\n      return (\n        <React.Fragment>\n\n          <a class=\"m-10p\" onClick={() => this.toggleSettings()}>\n            <span class=\"avatar avatar-mini avatar-ctl\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z\" /><circle cx=\"12\" cy=\"12\" r=\"3\" /></svg>\n            </span>\n          </a>\n        </React.Fragment>\n      )\n    }\n  }\n\n  handRaiseBtn() {\n    if (!this.state.is_moderator) {\n      return (\n        <a class=\"m-10p\" onClick={() => this.handRaiseToggle()}>\n          <span class=\"avatar avatar-mini avatar-ctl\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5\" /><path d=\"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5\" /><path d=\"M14 5.5a1.5 1.5 0 0 1 3 0v6.5\" /><path d=\"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47\" /></svg>\n          </span>\n        </a>\n      )\n    }\n  }\n\n  exitBtn() {\n    return (\n      <a class=\"m-10p\" onClick={() => this.exitAll()}>\n        <span class=\"avatar avatar-mini avatar-ctl\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2\" /><path d=\"M7 12h14l-3 -3m0 6l3 -3\" /></svg>\n        </span>\n      </a>\n    )\n  }\n\n  controls() {\n    return (\n      <div class=\"card card-active mb-3\" >\n        <div class=\"card-body p-0 py-1\" style={{ textAlign: 'center' }}>\n          {this.microphoneBtn()}\n          {this.cameraBtn()}\n          {this.presentBtn()}\n          {this.settingsBtn()}\n          {this.handRaiseBtn()}\n        </div>\n      </div>\n    )\n  }\n\n  changeOwnLayout(x) {\n    $('#content').css('min-height', '450px');\n    //$('#content-card').css('background-color', '#ffffffb5 !important')\n    if (x === 4) {\n      this.setState({ layoutCol: 6, timerCard: true, pollCard: true }, () => {\n        setTimeout(\n          function () {\n            this.disher('', \"Dish\", \"Camera\");\n          }\n            .bind(this),\n          700\n        );\n      });\n    }\n    if (x === 2) {\n      this.setState({ layoutCol: 6, timerCard: false, pollCard: false }, () => {\n        setTimeout(\n          function () {\n            this.disher('', \"Dish\", \"Camera\");\n          }\n            .bind(this),\n          700\n        );\n      });\n    }\n    if (x === 3) {\n      $('#content').css('min-height', '180px');\n      $('#content-card').css('background-color', '#ffffff00 !important')\n\n      \n      this.setState({ layoutCol: 12, timerCard: false, pollCard: false }, () => {\n        setTimeout(\n          function () {\n            this.disher('', \"Dish\", \"Camera\");\n          }\n            .bind(this),\n          700\n        );\n      });\n    }\n    if (x === 1) {\n      this.setState({ layoutCol: 12, timerCard: false, pollCard: false }, () => {\n        setTimeout(\n          function () {\n            this.disher('', \"Dish\", \"Camera\");\n          }\n            .bind(this),\n          700\n        );\n      });\n    }\n  }\n\n  changeLayout(x) {\n    this.wsSend({ type: 'changeLayout', c: { uuid: this.state.userUUID, x: x } })\n    this.changeOwnLayout(x);\n  }\n\n  toggleTheme() {\n    if (this.state.theme !== '') {\n      this.setState({ theme: '' })\n      document.body.classList.remove('theme-dark');\n    } else {\n      document.body.classList.add('theme-dark');\n      this.setState({ theme: 'theme-dark' })\n    }\n  }\n\n\n  layoutControl() {\n    if (this.state.is_moderator) {\n      return (\n        <div class=\"card card-active card-danger mb-3\" >\n          <div class=\"card-body p-0 py-1\" style={{ textAlign: 'center' }}>\n            <a class=\"m-10p\" onClick={() => this.changeLayout(2)}>\n              <span class=\"avatar avatar-mini avatar-ctl\" >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\" /><line x1=\"12\" y1=\"4\" x2=\"12\" y2=\"20\" /></svg>\n              </span>\n            </a>\n\n            <a class=\"m-10p\" onClick={() => this.changeLayout(1)}>\n              <span class=\"avatar avatar-mini avatar-ctl\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"4\" y=\"4\" width=\"16\" height=\"6\" rx=\"2\" /><rect x=\"4\" y=\"14\" width=\"16\" height=\"6\" rx=\"2\" /></svg>\n              </span>\n            </a>\n\n            <a class=\"m-10p\" onClick={() => this.changeLayout(4)}>\n              <span class=\"avatar avatar-mini avatar-ctl\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"4\" y=\"4\" width=\"6\" height=\"6\" rx=\"1\" /><rect x=\"14\" y=\"4\" width=\"6\" height=\"6\" rx=\"1\" /><rect x=\"4\" y=\"14\" width=\"6\" height=\"6\" rx=\"1\" /><rect x=\"14\" y=\"14\" width=\"6\" height=\"6\" rx=\"1\" /></svg>\n              </span>\n            </a>\n\n            <a class=\"m-10p\" onClick={() => this.changeLayout(3)}>\n              <span class=\"avatar avatar-mini avatar-ctl\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"4\" y=\"4\" width=\"6\" height=\"6\" rx=\"1\" /><rect x=\"14\" y=\"4\" width=\"6\" height=\"6\" rx=\"1\" fill='black' /><rect x=\"4\" y=\"14\" width=\"6\" height=\"6\" rx=\"1\" /><rect x=\"14\" y=\"14\" width=\"6\" height=\"6\" rx=\"1\" /></svg>\n              </span>\n            </a>\n\n\n            <a class=\"m-10p\" onClick={() => this.toggleTheme()}>\n              <span class=\"avatar avatar-mini avatar-ctl\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z\" /><path d=\"M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2\" /><path d=\"M19 11h2m-1 -1v2\" /></svg>\n              </span>\n            </a>\n\n          </div>\n        </div>\n      )\n    }\n  }\n\n  adminControl() {\n    if (this.state.is_moderator) {\n      return (\n        <div class=\"card card-active card-sucess mb-3\" >\n          <div class=\"card-body p-0 py-1\" style={{ textAlign: 'center' }}>\n            <a class=\"m-10p\" onClick={() => this.togglePlaySound()}>\n              <span class=\"avatar avatar-mini avatar-ctl\" >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M18 8a3 3 0 0 1 0 6\" /><path d=\"M10 8v11a1 1 0 0 1 -1 1h-1a1 1 0 0 1 -1 -1v-5\" /><path d=\"M12 8h0l4.524 -3.77a0.9 .9 0 0 1 1.476 .692v12.156a0.9 .9 0 0 1 -1.476 .692l-4.524 -3.77h-8a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h8\" /></svg>\n              </span>\n            </a>\n\n            <a class=\"m-10p\" onClick=''>\n              <span class=\"avatar avatar-mini avatar-ctl\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"3\" y=\"7\" width=\"18\" height=\"13\" rx=\"2\" /><polyline points=\"16 3 12 7 8 3\" /></svg>\n              </span>\n            </a>\n\n\n            <a class=\"m-10p\" onClick=''>\n              <span class=\"avatar avatar-mini avatar-ctl\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"3\" y1=\"19\" x2=\"3.01\" y2=\"19\" /><path d=\"M7 19a4 4 0 0 0 -4 -4\" /><path d=\"M11 19a8 8 0 0 0 -8 -8\" /><path d=\"M15 19h3a3 3 0 0 0 3 -3v-8a3 3 0 0 0 -3 -3h-12a3 3 0 0 0 -2.8 2\" /></svg>\n              </span>\n            </a>\n\n\n            <a class=\"m-10p\" onClick=''>\n              <span class=\"avatar avatar-mini avatar-ctl\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M4 8v-2a2 2 0 0 1 2 -2h2\" /><path d=\"M4 16v2a2 2 0 0 0 2 2h2\" /><path d=\"M16 4h2a2 2 0 0 1 2 2v2\" /><path d=\"M16 20h2a2 2 0 0 0 2 -2v-2\" /><rect x=\"8\" y=\"11\" width=\"8\" height=\"5\" rx=\"1\" /><path d=\"M10 11v-2a2 2 0 1 1 4 0v2\" /></svg>\n              </span>\n            </a>\n\n          </div>\n        </div>\n      )\n    }\n  }\n\n  showControl() {\n    // if (this.state.is_moderator || this.state.is_presenter || this.state.is_speaker) {\n    return (this.controls())\n    // }\n  }\n\n  talkingIndicator(id) {\n    if (this.state.talking[id]) {\n      return (<span class=\"badge bg-yellow\"></span>)\n    }\n  }\n\n  handRaiseToggle() {\n    if (!this.state.myHand) {\n      this.setState({ myHand: true }, () => {\n        this.handRaiseCreate({ uuid: this.state.userUUID })\n        this.wsSend({ type: 'handRaise', c: { uuid: this.state.userUUID } })\n      })\n    } else {\n      this.setState({ myHand: false }, () => {\n        this.handRaiseDestroy({ uuid: this.state.userUUID })\n        this.wsSend({ type: 'handDown', c: { uuid: this.state.userUUID } })\n      })\n    }\n  }\n\n  speakerList() {\n    var result = []\n    this.state.participants.map((participant) => {\n      if (participant.role === 'moderator' || participant.role === 'presenter') {\n        result.push(\n          <div class=\"col-6 mb-1\">\n            <div class=\"row g-3 align-items-center\">\n              <span class=\"avatar avatar-sm\">\n                {participant.initials}\n                {this.talkingIndicator(participant.id)}\n                {this.handRaiseIndicator(participant)}\n              </span>\n              <div class=\"col text-truncate\">\n                <span class=\" chat-title\">{participant.display}</span>\n                {this.roleSelect(participant)}\n              </div>\n            </div>\n          </div>\n        )\n      }\n    })\n    return result\n  }\n\n  handRaiseIndicator(participant) {\n    if (this.isHandRaised(participant.uuid)) {\n      return (\n        <span class=\"badge bg-yellow\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" style={{ width: '12px' }} width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"1\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5\" /><path d=\"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5\" /><path d=\"M14 5.5a1.5 1.5 0 0 1 3 0v6.5\" /><path d=\"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47\" /></svg>\n        </span>\n      )\n    }\n  }\n\n  listenerList() {\n    var result = []\n    this.state.participants.map((participant) => {\n      if (participant.role === 'listener' || participant.role === 'speaker') {\n        result.push(\n          <div class=\"col-6 mb-1\">\n            <div class=\"row g-3 align-items-center\">\n              <span class=\"avatar avatar-sm\">\n                {participant.initials}\n                {this.handRaiseIndicator(participant)}\n              </span>\n              <div class=\"col text-truncate\">\n                <span class=\" chat-title\">{participant.display}</span>\n                {this.roleSelect(participant)}\n              </div>\n            </div>\n          </div>\n        )\n      }\n    })\n    return result\n  }\n\n  changeRole(uuid, e) {\n    this.wsSend({ type: 'changeRole', c: { uuid: uuid, role: e } })\n    MyActions.setInstance('attendances/change_duty', { room_id: this.state.id, uuid: uuid, duty: e }, this.state.token);\n  }\n\n  roleSelect(participant) {\n    var role = participant.role\n    if (this.state.is_moderator) {\n      return (\n        <div class=\"form-hint mb-1\">\n          <select class=\"form-select role-select\" onChange={(e) => this.changeRole(participant.uuid, e.target.value)}>\n            <option value=\"listener\" selected={role === 'listener' ? true : false}>{t['listener']}</option>\n            <option value=\"presenter\" selected={role === 'presenter' ? true : false}>{t['presenter']}</option>\n            <option value=\"speaker\" selected={role === 'speaker' ? true : false}>{t['speaker']}</option>\n            <option value=\"moderator\" selected={role === 'moderator' ? true : false}>{t['moderator']}</option>\n          </select>\n        </div>\n      )\n    } else {\n      return (<div class=\"form-hint mb-1 role-select\">{t[participant.role]}</div>)\n    }\n  }\n\n  connectSocketRoom() {\n    if (this.state.userUUID && this.state.roomId) {\n      socket.emit('room', { room: this.state.roomId, uuid: this.state.userUUID });\n    }\n  }\n\n  toggleSettings() {\n    if (this.state.sourceSettings) {\n      $('#sourceSettings').hide()\n      this.setState({ sourceSettings: false })\n    } else {\n      this.setState({ sourceSettings: true })\n      $('#sourceSettings').show()\n    }\n\n  }\n\n  deviceOptions(items) {\n    var result = []\n    items.map((device) => {\n      result.push(<option value={device.id}>{device.label}</option>)\n    })\n    return result\n  }\n\n  selectDevice(obj) {\n    console.log(obj)\n    this.setState(obj, () => {\n      if (Object.keys(obj)[0] === 'microphoneDevice') {\n        this.joinAudioRoom();\n      }\n      if (Object.keys(obj)[0] === 'cameraDevice') {\n        this.toggleCamera(obj['cameraDevice'], true);\n      }\n    })\n  }\n\n  playList() {\n    if (this.state.playSoundBtn) {\n      return (\n        <div class=\"card mb-3 \">\n          <div class=\"card-status-top bg-success\"></div>\n          <div class=\"card-body\">\n            <h3 class=\"card-title\">{t['play_sound']}\n              <a onClick={() => this.stopSound()} class=\"btn btn-white btn-icon mx-1\" aria-label=\"Button\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"5\" y=\"5\" width=\"14\" height=\"14\" rx=\"2\" /></svg>\n              </a>\n            </h3>\n            <div class=\"row\">\n              <div className='btn-list'>\n                <button type=\"button\" class=\"btn\" onClick={() => this.playSound('anthem-iran')}>\n                  {t['anthem-iran']}\n                </button>\n                <button type=\"button\" class=\"btn\" onClick={() => this.playSound('quran')}>\n                  {t['quran']}\n                </button>\n                <button type=\"button\" class=\"btn\" onClick={() => this.playSound('applause1')}>\n                  {t['applause1']}\n                </button>\n                <button type=\"button\" class=\"btn\" onClick={() => this.playSound('applause2')}>\n                  {t['applause2']}\n                </button>\n                <button type=\"button\" class=\"btn\" onClick={() => this.playSound('laugh')}>\n                  {t['laugh']}\n                </button>\n                <button type=\"button\" class=\"btn\" onClick={() => this.playSound('laughing')}>\n                  {t['laughing']}\n                </button>\n                <button type=\"button\" class=\"btn\" onClick={() => this.playSound('snoring')}>\n                  {t['snoring']}\n                </button>\n                <button type=\"button\" class=\"btn\" onClick={() => this.playSound('throat')}>\n                  {t['throat']}\n                </button>\n                <button type=\"button\" class=\"btn\" onClick={() => this.playSound('footsteps')}>\n                  {t['footsteps']}\n                </button>\n                <button type=\"button\" class=\"btn\" onClick={() => this.playSound('piano1')}>\n                  {t['piano1']}\n                </button>\n                <button type=\"button\" class=\"btn\" onClick={() => this.playSound('piano2')}>\n                  {t['piano2']}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n    }\n  }\n\n  togglePlaySound() {\n    if (this.state.playSoundBtn) {\n      this.setState({ playSoundBtn: false })\n    } else {\n      this.setState({ playSoundBtn: true })\n    }\n  }\n\n  showSettings() {\n    if (this.state.microphoneDevices.length > 0) {\n      return (\n        <div class=\"card mb-3\" id='sourceSettings' style={{ display: 'none' }}>\n          <div class=\"card-body\">\n            <div className=\"mb-2\">\n              <label class=\"form-label mb-0\">Microphone</label>\n              <select id='audioSourceSelect' class=\"form-select\" onChange={(e) => this.selectDevice({ microphoneDevice: e.target.value })}>\n                {this.deviceOptions(this.state.microphoneDevices)}\n              </select>\n            </div>\n            <div className=\"mb-2\">\n              <label class=\"form-label mb-0\">Webcam</label>\n              <select id='videoSourceSelect' class=\"form-select\" onChange={(e) => {console.log(e.target);this.selectDevice({ cameraDevice: e.target.value })}}>\n                {this.deviceOptions(this.state.cameraDevices)}\n              </select>\n            </div>\n          </div>\n        </div>\n      )\n    }\n  }\n\n  sataPages() {\n    if (this.state.isSata && this.state.is_moderator) {\n      return (\n        <ul class=\"pagination \">\n          <li class=\"page-item\"><a class=\"page-link\" href={\"p.html?display=1&room_id=\" + this.state.vroomId + \"&pin=\" + this.state.vpin} target='_blank'>1</a></li>\n          <li class=\"page-item\"><a class=\"page-link\" href={\"p.html?display=2&room_id=\" + this.state.vroomId + \"&pin=\" + this.state.vpin} target='_blank'>2</a></li>\n          <li class=\"page-item\"><a class=\"page-link\" href={\"p.html?display=3&room_id=\" + this.state.vroomId + \"&pin=\" + this.state.vpin} target='_blank'>3</a></li>\n          <li class=\"page-item\"><a class=\"page-link\" href={\"p.html?display=4&room_id=\" + this.state.vroomId + \"&pin=\" + this.state.vpin} target='_blank'>4</a></li>\n          <li class=\"page-item\"><a class=\"page-link\" href={\"p.html?display=5&room_id=\" + this.state.vroomId + \"&pin=\" + this.state.vpin} target='_blank'>5</a></li>\n          <li class=\"page-item\"><a class=\"page-link\" href={\"p.html?display=6&room_id=\" + this.state.vroomId + \"&pin=\" + this.state.vpin} target='_blank'>6</a></li>\n          <li class=\"page-item\"><a class=\"page-link\" href={\"p.html?display=7&room_id=\" + this.state.vroomId + \"&pin=\" + this.state.vpin} target='_blank'>7</a></li>\n          <li class=\"page-item\"><a class=\"page-link\" href={\"p.html?display=8&room_id=\" + this.state.vroomId + \"&pin=\" + this.state.vpin} target='_blank'>8</a></li>\n          <li class=\"page-item\"><a class=\"page-link\" href={\"p.html?display=9&room_id=\" + this.state.vroomId + \"&pin=\" + this.state.vpin} target='_blank'>9</a></li>\n          <li class=\"page-item\"><a class=\"page-link\" href={\"p.html?display=10&room_id=\" + this.state.vroomId + \"&pin=\" + this.state.vpin} target='_blank'>10</a></li>\n          <li class=\"page-item\"><a class=\"page-link\" href={\"p.html?display=11&room_id=\" + this.state.vroomId + \"&pin=\" + this.state.vpin} target='_blank'>11</a></li>\n          <li class=\"page-item\"><a class=\"page-link\" href={\"p.html?display=12&room_id=\" + this.state.vroomId + \"&pin=\" + this.state.vpin} target='_blank'>12</a></li>\n        </ul>\n      )\n    }\n  }\n\n  webrtcAlerts() {\n    if (this.state.errorMessage) {\n      return (\n        <div class=\"alert alert-important alert-warning alert-dismissible\" role=\"alert\">\n          <div class=\"d-flex\">\n            <div>\n            </div>\n            <div>\n              {t['error']}: {t[this.state.errorMessage] ? t[this.state.errorMessage] : this.state.errorMessage}\n              <a className='mx-2 btn' onClick={() => this.justListen()}>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M6 10a7 7 0 1 1 13 3.6a10 10 0 0 1 -2 2a8 8 0 0 0 -2 3a4.5 4.5 0 0 1 -6.8 1.4\" /><path d=\"M10 10a3 3 0 1 1 5 2.2\" /></svg>\n                {t['just_listen_click']}\n              </a>\n            </div>\n          </div>\n          <a class=\"btn-close btn-close-white\" data-bs-dismiss=\"alert\" aria-label=\"close\"></a>\n        </div>\n      )\n    }\n  }\n\n  justListen() {\n    document.getElementById('roomaudio').play();\n    document.getElementById('roomaudio').muted = false;\n  }\n\n  renderTime() {\n\n    if (this.state.timer === 0) {\n      return <div className=\"timer\">{t['ended']}</div>;\n    } else {\n      return (\n        <div className=\"timer\">\n          <div className=\"text\">{t['remaining']}</div>\n          <div className=\"value\">{this.state.timer}</div>\n          <div className=\"text\">{t['seconds']}</div>\n        </div>\n      );\n    }\n  };\n\n  updateTimer(t) {\n    if (this.state.timer !== t) {\n      this.setState({ timer: t })\n    }\n  }\n\n  timerShow() {\n    if (this.state.timerStarted) {\n      return (\n        <CountdownCircleTimer\n          isPlaying={this.state.timerPlaying}\n          duration={parseInt(this.state.timerDuration)}\n          colors={[[\"#004777\", 0.33], [\"#F7B801\", 0.33], [\"#A30000\"], [\"#A30000\"]]}\n          onComplete={() => this.setState({ timerPlaying: false })}\n          renderAriaTime={(r) => this.updateTimer(r.remainingTime)}\n        >\n          {this.renderTime()}\n        </CountdownCircleTimer>\n      )\n    }\n  }\n\n  toggleTimer() {\n    this.setState({ timerStarted: false }, () => {\n      this.setState({ timerStarted: true });\n      this.wsSend({ type: 'toggleTimer', c: { uuid: this.state.userUUID, timerDuration: this.state.timerDuration } })\n    })\n  }\n\n  stratTimer() {\n    this.setState({ timerPlaying: true }, () => {\n      this.wsSend({ type: 'startTimer', c: { uuid: this.state.userUUID } })\n    })\n\n  }\n\n  stopTimer() {\n    this.setState({ timerPlaying: false }, () => {\n      this.wsSend({ type: 'stopTimer', c: { uuid: this.state.userUUID } })\n    })\n  }\n\n  timerCard() {\n    if (this.state.timerCard) {\n      return (\n        <div class={\"col-lg-\" + this.state.layoutCol + \" p-1 eff-\" + this.state.layoutCol} >\n          <div class=\"card \">\n            <div class=\"card-body\" style={{ minHeight: '150px' }}>\n              <div class=\"empty\">\n                <div class=\"row mb-3\">\n                  {this.timerShow()}\n                </div>\n                <div class=\"row\">\n                  <div class=\"col-auto\">\n                    <a onClick={() => this.toggleTimer()} class=\"btn btn-white btn-icon\" aria-label=\"Button\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4\" /><path d=\"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4\" /></svg>\n                    </a>\n                    <a onClick={() => this.stopTimer()} class=\"btn btn-white btn-icon mx-1\" aria-label=\"Button\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"5\" y=\"5\" width=\"14\" height=\"14\" rx=\"2\" /></svg>\n                    </a>\n                    <a onClick={() => this.stratTimer()} class=\"btn btn-white btn-icon mx-1\" aria-label=\"Button\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M7 4v16l13 -8z\" /></svg>\n                    </a>\n                  </div>\n                  <div class=\"col\" style={{ width: '100px' }}>\n                    <input type=\"number\" class=\"form-control\" placeholder={t['seconds']} onChange={(e) => this.setState({ timerDuration: e.target.value })} />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n    }\n  }\n\n  pollCard() {\n    if (this.state.pollCard) {\n      return (\n        <div class={\"col-lg-\" + this.state.layoutCol + \" p-1 eff-\" + this.state.layoutCol} >\n          <div class=\"card mb-1\">\n            <div class=\"card-body\" style={{ minHeight: '350px' }}>\n\n            </div>\n          </div>\n        </div>\n      )\n    }\n  }\n\n  render() {\n    return (\n\n      <div className=\"wrapper\">\n        <Header history={this.props.history} />\n        <div className=\"page-wrapper\">\n          <div className=\"page-body pt-2\">\n            <div className=\"container-fluid\">\n              <div className=\"row  row-cards\">\n\n\n                <div class=\"col-lg-3\">\n                  <div className={this.state.isSata ? 'show-element' : 'hide-element'}>\n                    <div class=\"card mb-3 p-1\" >\n                      <div class=\"card-body\" style={{ height: '180px' }}>\n                        <div id=\"myDish\"></div>\n                      </div>\n                    </div>\n                  </div>\n                  {this.layoutControl()}\n                  {this.adminControl()}\n                  {this.showControl()}\n                  {this.showSettings()}\n                  <div class=\"card mb-3 maxh-250 \">\n                    <div class=\"card-status-top bg-danger\"></div>\n                    <div class=\"card-body pt-2 pb-1\" style={{ overflowY: 'scroll' }}>\n                      <div class=\"row\">\n                        {this.speakerList()}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"card mb-3 maxh-250\">\n                    <div class=\"card-status-top bg-blue\"></div>\n                    <div class=\"card-body pt-2 pb-1\" style={{ overflowY: 'scroll' }}>\n                      <div class=\"row\">\n                        {this.listenerList()}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"card mb-3 maxh-350 minh-350\">\n                    <div className=\"card-header p-2 px-3 bg-dark-lt\" style={{ fontSize: '12px', fontWeight: '600' }}>{t['chats']}</div>\n                    <div class=\"list-group list-group-flush overflow-auto\" id='chat-box' style={{ maxHeight: '25rem' }}>\n                      {this.chatItems()}\n                    </div>\n                    <div class=\"card-footer bg-dark\">\n                      <div class=\"row\">\n                        <div class=\"col\">\n                          <textarea id='chat-form' class=\"form-control\" data-bs-toggle=\"autosize\" placeholder={t['write_something']} onChange={(e) => {\n                            this.handleChange({ item: { content: e.target.value, name: this.state.name, initials: this.state.initials, time: Date.now(), uuid: uuidv4() } })\n                          }} />\n                        </div>\n                        <div class=\"col-auto\">\n                          <a onClick={() => this.send()} class=\"btn  btn-icon\" aria-label=\"Button\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\" /><path d=\"M21 3l-6.5 18a0.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a0.55 .55 0 0 1 0 -1l18 -6.5\" /></svg>\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"col-lg-9 \">\n                  {this.webrtcAlerts()}\n                  {this.playList()}\n                  <div class=\"row \">\n\n                    <div id='videoz' class={\"col-lg-\" + this.state.layoutCol + \" p-1 eff-\" + this.state.layoutCol} >\n                      <div class=\"card mb-1\" id='content-card'>\n                        <div class=\"card-body p-1\" id='content' style={{ minHeight: '450px' }}>\n                          <div id=\"Dish\">\n\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class={\"col-lg-\" + this.state.layoutCol + \" p-1 eff-\" + this.state.layoutCol} >\n                      <div class=\"card mb-1 \">\n                        <div class=\"card-body p-1 \" id='content2' style={{ minHeight: '450px' }}>\n                          <div class=\"my-auto\" id=\"screen\">\n\n                          </div>\n                        </div>\n                      </div>\n                      <div id='mixedaudio' style={{ display: 'block' }}></div>\n                    </div>\n\n                    {this.pollCard()}\n                    {this.timerCard()}\n\n\n                  </div>\n                  {this.sataPages()}\n                </div>\n\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </div>\n\n\n    )\n  }\n}\n\n\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport $ from 'jquery';\nimport Header from \"../header/header.jsx\";\nimport queryString from 'query-string'\nvar t = dict['farsi']\nexport default class AttendanceCreate extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.setInstance = this.setInstance.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.getInstance = this.getInstance.bind(this);\n        this.getMultipleList = this.getMultipleList.bind(this);\n        this.search = this.search.bind(this);\n        this.getInstance = this.getInstance.bind(this);\n\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            title: null,\n            attendances: null,\n            users: null,\n            attendable_type: '',\n            attendable_id: 0,\n            q: '',\n            selectedUser: null,\n        }\n\n    }\n    componentWillMount() {\n        ModelStore.on(\"got_multiple_list\", this.getMultipleList);\n        ModelStore.on(\"set_instance\", this.setInstance);\n        ModelStore.on(\"deleted_instance\", this.setInstance);\n        ModelStore.on(\"got_instance\", this.getInstance);\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"got_multiple_list\", this.getMultipleList);\n        ModelStore.removeListener(\"set_instance\", this.setInstance);\n        ModelStore.removeListener(\"got_instance\", this.getInstance);\n        ModelStore.removeListener(\"deleted_instance\", this.setInstance);\n    }\n\n    componentDidMount() {\n        t = dict[this.state.lang]\n        const value = queryString.parse(this.props.location.search);\n        var attendable_type = '';\n        var attendable_id = 0;\n        Object.keys(value).map((key) => {\n            var splited = key.split(\"_\")\n            if (splited[0]) {\n                attendable_type = splited[0].charAt(0).toUpperCase() + splited[0].slice(1);\n                attendable_id = value[key]\n            }\n        })\n        this.setState({ attendable_type: attendable_type, attendable_id: attendable_id }, () => {\n            MyActions.getMultipleList('attendances', this.state.page, this.state, this.state.token);\n        })\n\n    }\n\n\n    getMultipleList() {\n        var multiple = ModelStore.getMutipleList()\n        var klass = ModelStore.getKlass()\n        console.log(multiple)\n        if (multiple && klass === 'Attendance') {\n            this.setState({\n                users: multiple.users,\n                attendances: multiple.attendances,\n            });\n        }\n    }\n\n\n    getInstance() {\n        MyActions.getMultipleList('attendances', this.state.page, this.state, this.state.token);\n    }\n\n\n\n    handleChange(obj) {\n        this.setState(obj);\n    }\n\n    search(q) {\n        if (q.length > 3) {\n            this.setState({ q: q }, () =>\n                MyActions.getMultipleList('attendances', this.state.page, this.state, this.state.token)\n            );\n        } else {\n            this.setState({ q: '' }, () =>\n                MyActions.getMultipleList('attendances', this.state.page, this.state, this.state.token)\n            );\n        }\n    }\n\n    getInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (klass === 'MeetingUrl') {\n          this.setState({url: model.url})\n        }\n      }\n\n    setInstance() {\n        MyActions.getMultipleList('attendances', this.state.page, this.state, this.state.token);\n    }\n\n    addParticipant(user_id) {\n        if (this.state.attendable_type !== '') {\n            var data = { attendable_id: this.state.attendable_id, attendable_type: this.state.attendable_type, user_id: user_id }\n            MyActions.setInstance('attendances', data, this.state.token);\n        }\n    }\n\n    removeParticipant(id) {\n        var data = { id: id, attendable_id: this.state.attendable_id, attendable_type: this.state.attendable_type }\n        MyActions.removeInstance('attendances', data, this.state.token);\n    }\n\n    userItems(users) {\n        var result = []\n        if (users) {\n            users.map((user) => {\n                result.push(\n                    <div class=\"list-group-item\" style={{ border: 'none' }}>\n                        <div class=\"row align-items-center\">\n                            <div class=\"col-auto\">\n                                <a onClick={() => this.addParticipant(user.user_id)}>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n                                </a>\n                            </div>\n                            <div class=\"col-auto\">\n                                <a >\n                                    <span class=\"avatar\" >{user.initials}</span>\n                                </a>\n                            </div>\n                            <div class=\"col text-truncate\">\n                                <a href=\"#\" class=\"text-body d-block\">{user.name}</a>\n                                <small class=\"d-block text-muted text-truncate mt-n1\">{user.bio}</small>\n                            </div>\n                            <div class=\"col-auto\">\n                            </div>\n\n                        </div>\n                    </div>\n                )\n            })\n        }\n        return result\n    }\n\n    changeDuty(id, value) {\n        console.log(id, value)\n        MyActions.setInstance('attendances/change_duty', { id: id, duty: value }, this.state.token);\n        //MyActions.updateInstance('')\n    }\n\n    dutyOptions(attendance) {\n        if (this.props.duties) {\n            var options = []\n            this.props.duties.map((duty) => {\n                options.push(\n                    <option value={duty} selected={attendance.duty === duty ? true : false}>{t[duty]}</option>\n                )\n                return (\n                    <select class=\"form-select\" onChange={(e) => this.changeDuty(attendance.id, e.target.value)}>\n                        {options}\n                    </select>\n                )\n            })\n\n        } else {\n            return (\n                <select class=\"form-select\" onChange={(e) => this.changeDuty(attendance.id, e.target.value)}>\n                    <option value='moderator' selected={attendance.duty === 'moderator' ? true : false}>{t['moderator']}</option>\n                    <option value='presenter' selected={attendance.duty === 'presenter' ? true : false}>{t['presenter']}</option>\n                    <option value='speaker' selected={attendance.duty === 'speaker' ? true : false}>{t['speaker']}</option>\n                    <option value='listener' selected={attendance.duty === 'listener' ? true : false}>{t['listener']}</option>\n                </select>\n            )\n        }   \n    }\n\n    createBigBlue(id) {\n        $('#bigblue-spinner').show();\n        MyActions.getInstance('meetings/join_bigblue', id, this.state.token);\n      }\n\n    attendanceItems(attendances) {\n        var result = []\n        if (attendances) {\n            attendances.map((attendance) => {\n                console.log(attendance)\n                var user = attendance.profile\n                result.push(\n                    <div class=\"list-group-item\" style={{ border: 'none' }}>\n                        <div class=\"row align-items-center\">\n                            <div class=\"col-auto\">\n                                <a onClick={() => this.removeParticipant(attendance.id)}>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" /></svg>\n                                </a>\n                            </div>\n                            <div class=\"col-auto\">\n                                <a href=\"#\">\n                                    <span class=\"avatar\" >{user.initials}</span>\n                                </a>\n                            </div>\n                            <div class=\"col text-truncate\">\n                                <a href=\"#\" class=\"text-body d-block\">{user.name}</a>\n                                <small class=\"d-block text-muted text-truncate mt-n1\">{user.bio}</small>\n                            </div>\n                            <div class=\"col-auto\" >\n                                <a onClick={() => this.createBigBlue(attendance.attendable_id)}>\n                                    +\n                                    <div id='bigblue-spinner' class=\"spinner-border text-black\" role=\"status\" style={{ display: 'none' }}></div>\n                                </a>\n                            </div>\n                            <div class=\"col-auto\" >\n                                {this.dutyOptions(attendance)}\n                            </div>\n\n                        </div>\n                    </div>\n                )\n            })\n        }\n        return result\n    }\n\n\n    render() {\n\n        return (\n            <body className=\"antialiased\">\n                <div className=\"wrapper\">\n                    <Header history={this.props.history} />\n                    <div className=\"page-wrapper\">\n                        <div className=\"container-xl\">\n                            <div className=\"page-header d-print-none\">\n                                <div className=\"row align-items-center\"></div>\n                                <div className=\"col\">\n                                    <div className=\"page-pretitle\">{t['add_participants']}</div>\n                                    <h2 className=\"page-title\">{t['choose_participants']}</h2>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"page-body\">\n                            <div className=\"container-xl\">\n                                <div className=\"row row-deck row-cards\">\n                                    <div className=\"col-md-6\">\n                                        <div class=\"card mb-3\">\n                                            <div class=\"card-header\">\n                                                <h3 class=\"card-title\">{t['all_users']}</h3>\n                                            </div>\n                                            <div class=\"list-group list-group-flush list-group-hoverable\">\n                                                <div class=\"list-group-item\">\n                                                    <div class=\"input-icon \">\n                                                        <input type=\"text\" class=\"form-control\" placeholder={t['search_placeholder']} onInput={(e) => { this.search(e.target.value) }} />\n                                                        <span class=\"input-icon-addon\">\n\n                                                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"10\" cy=\"10\" r=\"7\"></circle><line x1=\"21\" y1=\"21\" x2=\"15\" y2=\"15\"></line></svg>\n                                                        </span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            {this.userItems(this.state.users)}\n                                        </div>\n                                    </div>\n\n                                    <div className=\"col-md-6\">\n                                        <div class=\"card mb-3\">\n                                            <div class=\"card-header\">\n                                                <h3 class=\"card-title\">{t['participants']}</h3>\n                                            </div>\n                                            <div class=\"list-group list-group-flush list-group-hoverable\">\n                                                {this.attendanceItems(this.state.attendances)}\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        )\n    }\n}\n\n\n\n\n","import React from \"react\";\nimport crypto from 'crypto-js';\nimport { dict } from \"../../Dict\";\nimport { conf } from '../../conf';\nimport { v4 as uuidv4 } from 'uuid';\nimport { Typeahead, withAsync } from 'react-bootstrap-typeahead';\nimport moment from 'jalali-moment'\nmoment.locale('fa', { useGregorianParser: true });\n\nconst AsyncTypeahead = withAsync(Typeahead);\nconst server = conf.server;\n\n\nconst AbilityCard = (props) => {\n    var t = dict[props.lang]\n    function profileItems(profiles) {\n        var result = []\n        if (profiles) {\n            profiles.map((profile) => {\n                result.push(\n                    <div class=\"list-group-item\" style={{ border: 'none' }}>\n                        <div class=\"row align-items-center\">\n                            <div class=\"col-auto\">\n                                <a onClick={() => props.userAbility(profile.user_id)}>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"9\" /><path d=\"M9 12l2 2l4 -4\" /></svg>\n                                </a>\n                            </div>\n                            <div class=\"col-auto\">\n                                <a href=\"#\">\n                                    <span class=\"avatar\" >{profile.initials}</span>\n                                </a>\n                            </div>\n                            <div class=\"col text-truncate\">\n                                <a href=\"#\" class=\"text-body d-block\">{profile.name}</a>\n                                <small class=\"d-block text-muted text-truncate mt-n1\">{profile.bio}</small>\n                            </div>\n                            <div class=\"col-auto\">\n                            </div>\n\n                        </div>\n                    </div>\n                )\n            })\n        }\n        return result\n    }\n\n    function abilityForm(ability) {\n        console.log(ability)\n        var result = []\n        if (ability) {\n            result.push(\n                <div class=\"mb-3\" style={{ width: '100%' }}>\n                    <label class=\"form-label \">{t['create_event']}</label>\n                    <select class=\"form-select\" onChange={(e) => props.changeAbility('create_event', e.target.value)}>\n                        <option value={true} selected={ability['create_event'] ? true : false}>{t['true']}</option>\n                        <option value={false} selected={ability['create_event'] ? false : true} >{t['false']}</option>\n                    </select>\n                </div>\n            )\n            result.push(\n                <div class=\"mb-3\" style={{ width: '100%' }}>\n                    <label class=\"form-label \">{t['create_exhibition']}</label>\n                    <select class=\"form-select\" onChange={(e) => props.changeAbility('create_exhibition', e.target.value)}>\n                        <option value={true} selected={ability['create_exhibition'] ? true : false}>{t['true']}</option>\n                        <option value={false} selected={ability['create_exhibition'] ? false : true} >{t['false']}</option>\n                    </select>\n                </div>\n            )\n            result.push(\n                <div class=\"mb-3\" style={{ width: '100%' }}>\n                    <label class=\"form-label \">{t['modify_ability']}</label>\n                    <select class=\"form-select\" onChange={(e) => props.changeAbility('modify_ability', e.target.value)}>\n                        <option value={true} selected={ability['modify_ability'] ? true : false}>{t['true']}</option>\n                        <option value={false} selected={ability['modify_ability'] ? false : true} >{t['false']}</option>\n                    </select>\n                </div>\n            )\n            result.push(\n                <div class=\"mb-3\" style={{ width: '100%' }}>\n                    <label class=\"form-label \">{t['administration']}</label>\n                    <select class=\"form-select\" onChange={(e) => props.changeAbility('administration', e.target.value)}>\n                        <option value={true} selected={ability['administration'] ? true : false}>{t['true']}</option>\n                        <option value={false} selected={ability['administration'] ? false : true} >{t['false']}</option>\n                    </select>\n                </div>\n            )\n        }\n        return result\n    }\n\n    function abilityShow(ability) {\n        if (ability) {\n            return (\n                <div className='card'>\n                    <div className='card-header  bg-dark-lt'>\n                        {ability.profile.name}\n                    </div>\n                    <div className='card-body'>\n                        {abilityForm(ability)}\n                    </div>\n                    <div class=\"card-footer\">\n                        <div class=\"d-flex\">\n                            <button id='submit-button' onClick={() => props.submitAbility()} class=\"btn btn-primary ms-auto\">{t['submit']}</button>\n                            <div id='submit-spinner' class=\"spinner-border text-red ms-auto\" role=\"status\" style={{ display: 'none' }}></div>\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n    }\n    return (\n        <div className='row'>\n            <div className=\"col-md-6\">\n                <div className='card'>\n                    <div className='card-body'>\n                        <div class=\"input-icon mb-3\">\n                            <span class=\"input-icon-addon\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"12\" cy=\"7\" r=\"4\"></circle><path d=\"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2\"></path></svg>\n                            </span>\n                            <input type=\"text\" class=\"form-control\" placeholder={t['name']} onInput={(e) => { props.searchUser(e.target.value) }} />\n                        </div>\n                        {profileItems(props.profiles)}\n                    </div>\n                </div>\n            </div>\n            <div className=\"col-md-6\">\n                {abilityShow(props.selectedAbility)}\n            </div>\n        </div>\n    )\n}\nexport default AbilityCard;\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport Header from \"../header/header.jsx\";\nimport AbilityCard from \"../settings/ability.jsx\"\nvar t = dict['farsi']\n\nexport default class SettingsIndex extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.getList = this.getList.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.searchUser = this.searchUser.bind(this);\n        this.userAbility = this.userAbility.bind(this);\n        this.getInstance = this.getInstance.bind(this);\n        this.changeAbility = this.changeAbility.bind(this);\n        this.submitAbility = this.submitAbility.bind(this);\n        \n        \n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            profiles: [],\n            selectedAbility: null,\n            profile: null,\n            userAbilities: null,\n        }\n\n    }\n\n\n\n    componentWillMount() {\n        ModelStore.on(\"got_list\", this.getList);\n        ModelStore.on(\"got_instance\", this.getInstance);\n        if (this.state.lang) {\n            t = dict[this.state.lang]\n        }\n\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"got_list\", this.getList);\n        ModelStore.removeListener(\"got_instance\", this.getInstance);\n    }\n\n    componentDidMount() {\n        if (this.state.token && this.state.token.length > 10) {\n            MyActions.getInstance('profiles/my', 1, this.state.token);\n        } else {\n            this.props.history.push(\"login\")\n        }\n    }\n\n\n\n    handleChange(obj) {\n        this.setState(obj);\n    }\n\n    searchUser(q) {\n        if (q.length > 2) {\n            var data = { q: q }\n            MyActions.getList('profiles/search', this.state.page, data, this.state.token);\n        } else {\n            this.setState({ profiles: [] })\n        }\n\n    }\n\n    getInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (klass === 'Ability') {\n            this.setState({ selectedAbility: model });\n        }\n        if (model && klass === 'Profile') {\n            this.setState({\n                profile: model,\n                userAbilities: model.abilities\n            });\n            if (model.abilities && !model.abilities.administration) {\n                this.props.history.push(\"/#/\")\n            }\n        }\n       \n    }\n\n    getList() {\n        var list = ModelStore.getList()\n        var klass = ModelStore.getKlass()\n        if (list && klass === 'Profile') {\n            this.setState({ profiles: list })\n        }\n    }\n\n    userAbility(user_id) {\n        MyActions.getInstance('abilities', user_id, this.state.token);\n    }\n\n    changeAbility(key, value) {\n        var selectedAbility = this.state.selectedAbility\n        selectedAbility[key] = JSON.parse(value.toLowerCase()); \n        this.setState({ selectedAbility: selectedAbility })\n    }\n\n    submitAbility(){\n        MyActions.updateInstance('abilities', this.state.selectedAbility, this.state.token);\n    }\n\n    render() {\n\n        return (\n            <body className=\"antialiased\">\n                <div className=\"wrapper\">\n                    <Header history={this.props.history} />\n                    <div className=\"page-wrapper\">\n                        <div className=\"container-xl\">\n                            <div className=\"page-header d-print-none\">\n                                <div className=\"row align-items-center\"></div>\n                                <div className=\"col\">\n                                    <div className=\"page-pretitle\">{t['overview']}</div>\n                                    <h2 className=\"page-title\">{t['settings']}</h2>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"page-body\">\n                            <div className=\"container-xl\">\n                                <div className=\"row row-cards\">\n                                    <div className=\"col-md-3\">\n                                        <div className='card'>\n                                            <div className='card-header bg-dark-lt'>\n                                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z\" /><circle cx=\"12\" cy=\"12\" r=\"3\" /></svg>\n                                                {t['settings']}\n                                            </div>\n                                            <div className='list-group list-group-flush'>\n                                                <div class=\"list-group-item\">\n                                                    <div class=\"row align-items-center\">\n                                                        <div class=\"col text-truncate\">\n                                                            <a href=\"#\" class=\"text-body d-block\">{t['abilities']}</a>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div class=\"list-group-item\">\n                                                    <div class=\"row align-items-center\">\n                                                        <div class=\"col text-truncate\">\n                                                            <a href=\"#\" class=\"text-body d-block\">{t['restrictions']}</a>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div class=\"list-group-item\">\n                                                    <div class=\"row align-items-center\">\n                                                        <div class=\"col text-truncate\">\n                                                            <a href=\"#\" class=\"text-body d-block\">{t['reports']}</a>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"col-md-9\">\n                                        <AbilityCard\n                                            profiles={this.state.profiles}\n                                            selectedAbility={this.state.selectedAbility}\n                                            searchUser={this.searchUser}\n                                            userAbility={this.userAbility}\n                                            changeAbility={this.changeAbility}\n                                            submitAbility={this.submitAbility}\n                                            lang = {this.state.lang}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        )\n    }\n}\n\n\n\n\n","import React from 'react'\nimport { useHistory } from \"react-router-dom\";\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport Header from \"../header/header.jsx\";\nimport EventCalendar from \"../events/calendar.jsx\";\nimport MeetingMasonry from \"../meetings/masonry.jsx\";\nimport moment from 'moment-jalaali'\nimport DatePicker2 from 'react-datepicker2';\nimport randomColor from \"randomcolor\";\nvar t = dict['farsi']\nexport default class MyCalendar extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.getInstance = this.getInstance.bind(this);\n        this.getList = this.getList.bind(this);\n        this.dateSelect = this.dateSelect.bind(this);\n\n\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            meetings: [],\n            calendar: false,\n            today: moment(),\n            highlightRanges: [],\n            selectedMeeting: [],\n        }\n\n    }\n\n\n    componentWillMount() {\n        ModelStore.on(\"got_instance\", this.getInstance);\n        ModelStore.on(\"got_list\", this.getList);\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"got_list\", this.getList);\n        ModelStore.removeListener(\"got_instance\", this.getInstance);\n    }\n\n    componentDidMount() {\n        t = dict[this.state.lang]\n        MyActions.getList('meetings/my', this.state.page, {}, this.state.token);\n\n    }\n\n    getInstance() {\n\n    }\n\n    getList() {\n        var list = ModelStore.getList()\n        var klass = ModelStore.getKlass()\n        if (list && klass === 'Meeting') {\n            this.setState({ meetings: list }, () => {\n                this.constructCalendar();\n                this.dateSelect(this.state.today);\n            })\n        }\n    }\n\n\n\n    handleChange(obj) {\n\n    }\n\n    dateSelect(val) {\n        var result = []\n        this.state.meetings.map((meeting) => {\n            if (Date.parse(meeting.start_day) <= val._d && Date.parse(meeting.end_day) >= val._d) {\n                result.push(meeting)\n            }\n        })\n        this.setState({ selectedMeeting: result })\n    }\n\n    showCalendar() {\n        if (this.state.meetings && this.state.meetings.length > 0 && this.state.meetingLoaded) {\n            return (\n                <div class=\"col-lg-4\">\n                    <div class=\"card mb-3\" >\n                        <div class=\"card-body\" >\n                            <EventCalendar highlightRanges={this.state.highlightRanges} today={this.state.today} dateSelect={this.dateSelect} />\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n    }\n\n    constructCalendar() {\n        var result = []\n        this.state.meetings.map((meeting) => {\n            console.log(meeting)\n            result.push(\n                {\n                    color: randomColor(),\n                    start: meeting.start_time,\n                    end: meeting.end_time\n                }\n            )\n        })\n        this.setState({ highlightRanges: this.state.highlightRanges.concat(result), today: null, meetingLoaded: true, })\n    }\n\n    cardMasonry() {\n        var result = []\n        if (this.state.selectedMeeting) {\n            if (this.state.selectedMeeting.length !== 0) {\n                result.push(\n                    <div class='row row-cards' data-masonry='{\"percentPosition\": true }' >\n                        <MeetingMasonry meetings={this.state.selectedMeeting} col={6} attend={this.attend} lang={this.state.lang} />\n                    </div>\n                )\n            }\n            if (this.state.selectedMeeting.length === 0) {\n                result.push(this.noMeetingCard())\n            }\n        }\n\n        return result\n    }\n\n    noMeetingCard() {\n        return (\n            <div class=\"card\">\n                <div class=\"empty\">\n                    <div class=\"empty-img\">\n                        <div className=\"demo-icon-preview\"><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M12 9v2m0 4v.01\"></path><path d=\"M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75\"></path></svg></div>\n                    </div>\n                    <p class=\"empty-title\">{t['no_result_to_show']}</p>\n                    <p class=\"empty-subtitle text-muted\">\n                        {t['try_adjusting_your_search']}\n                    </p>\n                </div>\n            </div>\n        )\n    }\n\n\n\n    render() {\n      \n        return (\n            <body className=\"antialiased\">\n                <div className=\"wrapper\">\n                    <Header history={this.props.history} />\n                    <div className=\"page-wrapper\">\n                        <div className=\"container-xl\">\n                            <div className=\"page-header d-print-none\">\n                                <div className=\"row align-items-center\">\n                                    <div className=\"col\">\n                                        <div className=\"page-pretitle\">{t['overview']}</div>\n                                        <h2 className=\"page-title\">{t['calendar']}</h2>\n                                    </div>\n                                    <div class=\"col-auto ms-auto d-print-none\">\n\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"page-body\">\n                            <div className=\"container-xl\">\n                                <div class=\"row\" id='calendar'>\n                                    {this.showCalendar()}\n                                    <div class=\"col-lg-8\">\n                                        {this.cardMasonry()}\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        )\n    }\n}\n\n\n\n\n","import React from 'react'\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport { dict } from '../../Dict';\nimport Header from \"../header/header.jsx\";\nvar t = dict['farsi']\n\nexport default class ProfileIndex extends React.Component {\n\n    constructor(props) {\n        super(props);\n        //this.submit = this.submit.bind(this);\n        this.getList = this.getList.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            profiles: [],\n            page: 1,\n            pages: 1,\n            q: '',\n        }\n\n    }\n\n\n\n    componentWillMount() {\n        ModelStore.on(\"got_list\", this.getList);\n\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"got_list\", this.getList);\n    }\n\n    componentDidMount() {\n        t = dict[this.state.lang]\n        MyActions.getList('profiles/search', this.state.page, { page: this.state.page }, this.state.token)\n    }\n\n\n\n    handleChange(obj) {\n\n    }\n\n    getList() {\n        var list = ModelStore.getList()\n        var klass = ModelStore.getKlass()\n        if (list && klass === 'Profile') {\n            if (list[0] && list[0].page) {\n                if (list[0].page == 1) {\n                    this.setState({\n                        profiles: list,\n                    });\n                } else {\n                    this.setState({\n                        profiles: this.state.profiles.concat(list),\n                    });\n                }\n                this.setState({ page: list[0].page, pages: list[0].pages })\n            } else {\n                this.setState({\n                    profiles: [],\n                    pages: 0,\n                });\n            }\n        }\n        console.log(list)\n    }\n\n    tags(profile) {\n        var result = []\n        profile.tags.map((tag) => {\n            result.push(<span class=\"badge bg-lime-lt\" style={{ margin: '2px' }}>{tag.title}</span>)\n        })\n        return result\n    }\n\n\n    avatar(profile) {\n        if (profile.cover) {\n            return (\n                <span class=\"avatar avatar-xl mb-3 avatar-rounded\" style={{ backgroundImage: \"url(\" + profile.cover + \")\" }} ></span>\n            )\n        } else {\n            return (\n                <span class=\"avatar avatar-xl mb-3 avatar-rounded\" >\n                    {profile.initials}\n                </span>\n            )\n        }\n    }\n\n    items() {\n        var result = []\n        this.state.profiles.map((profile) => {\n            result.push(\n                <div class=\"col-md-6 col-lg-3\">\n                    <div class=\"card\">\n                        <div class=\"card-body p-4 text-center\">\n                        {this.avatar(profile)}\n                            <h3 class=\"m-0 mb-1\"><a href={\"#/profiles/\"+profile.id}>{profile.name}</a></h3>\n                            <div class=\"text-muted\">{profile.short_bio}</div>\n                            <div class=\"mt-3\">\n                                <div className='example-content'>\n                                    {this.tags(profile)}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n        })\n        return result\n    }\n\n    search(q) {\n        if (q.length > 3) {\n            this.setState({ q: q, page: 1 }, () =>\n                MyActions.getList('profiles/search', this.state.page, { q: q }, this.state.token)\n            );\n        } else {\n            this.setState({ q: '', page: 1 }, () =>\n                MyActions.getList('profiles/search', this.state.page, {}, this.state.token)\n            );\n        }\n    }\n\n\n    loadMore() {\n        var data = { page: this.state.page + 1, q: this.state.q }\n        MyActions.getList('profiles/search', this.state.page + 1, data, this.state.token);\n    }\n\n    moreBtn() {\n        if (this.state.pages > this.state.page) {\n            return (\n                <div class=\"hr-text\">\n                    <a onClick={() => this.loadMore()}>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"12\" r=\"9\" /><line x1=\"8\" y1=\"12\" x2=\"12\" y2=\"16\" /><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\" /><line x1=\"16\" y1=\"12\" x2=\"12\" y2=\"16\" /></svg>\n                        {t['more']}\n                    </a>\n                </div>\n            )\n        }\n    }\n\n\n    render() {\n\n        return (\n            <body className=\"antialiased\">\n                <div className=\"wrapper\">\n                    <Header history={this.props.history} />\n                    <div className=\"page-wrapper\">\n                        <div className=\"container-xl\">\n                            <div className=\"page-header d-print-none\">\n                                <div className=\"row align-items-center\"></div>\n                                <div className=\"col\">\n                                    <div className=\"page-pretitle\">{t['overview']}</div>\n                                    <h2 className=\"page-title\">{t['profiles']}</h2>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"page-body\">\n                            <div className=\"container-xl\">\n                                <div className=\"row row-deck row-cards\">\n                                    <div class=\"mb-3\">\n                                        <div class=\"input-icon mb-3\">\n                                            <input type=\"text\" class=\"form-control form-giant\" placeholder={t['search_placeholder']} onInput={(e) => this.search(e.target.value)} />\n                                            <span class=\"input-icon-addon\">\n\n                                                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><circle cx=\"10\" cy=\"10\" r=\"7\"></circle><line x1=\"21\" y1=\"21\" x2=\"15\" y2=\"15\"></line></svg>\n                                            </span>\n                                        </div>\n                                    </div>\n                                    {this.items()}\n                                    {this.moreBtn()}\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        )\n    }\n}\n\n\n\n\n","import React, { useCallback } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport ModelStore from \"../../stores/ModelStore\";\nimport * as MyActions from \"../../actions/MyActions\";\nimport Header from \"../header/header.jsx\";\nimport MeetingMasonry from \"../meetings/masonry.jsx\";\nimport ExhibitionCard from \"../exhibitions/card.jsx\";\nimport EventCard from \"../events/card.jsx\";\nimport { dict } from '../../Dict';\nimport { conf } from '../../conf';\n\nimport axios, { put } from 'axios';\nconst server = conf.server;\n\nvar t = dict['farsi']\nexport default class ProfileShow extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.getInstance = this.getInstance.bind(this);\n        this.uploader = this.uploader.bind(this);\n        this.handleFileUpload = this.handleFileUpload.bind(this);\n\n        this.state = {\n            token: window.localStorage.getItem('token'),\n            lang: window.localStorage.getItem('lang'),\n            dir: window.localStorage.getItem('dir'),\n            name: null,\n            bio: null,\n            initials: null,\n            id: null,\n            tags: [],\n            country: null,\n            twitter: null,\n            instagram: null,\n            telegram: null,\n            email: null,\n            phone: null,\n            linkdin: null,\n            recent_events: null,\n            recent_meetings: null,\n            recent_exhibitions: null,\n            is_owner: false,\n            cover: null\n        }\n\n    }\n\n\n    componentWillMount() {\n        ModelStore.on(\"got_instance\", this.getInstance);\n        if (this.state.lang || this.state.lang !== null) {\n            t = dict[this.state.lang]\n        }\n    }\n\n    componentWillUnmount() {\n        ModelStore.removeListener(\"got_instance\", this.getInstance);\n    }\n\n    componentDidMount() {\n        MyActions.getInstance('profiles', this.props.match.params.id, this.state.token);\n    }\n\n    getInstance() {\n        var klass = ModelStore.getKlass()\n        var model = ModelStore.getIntance()\n        if (klass === 'Profile') {\n            this.setState({\n                name: model.fullname,\n                bio: model.bio,\n                initials: model.initials,\n                id: model.id,\n                tags: model.tags,\n                country: model.country,\n                twitter: model.twitter,\n                instagram: model.instagram,\n                telegram: model.telegram,\n                email: model.email,\n                phone: model.phone,\n                linkdin: model.linkdin,\n                recent_meetings: model.recent_meetings,\n                recent_events: model.recent_events,\n                recent_exhibitions: model.recent_exhibitions,\n                is_owner: model.is_owner,\n                cover: model.cover\n            })\n        }\n        console.log(model)\n    }\n\n\n\n    handleChange(obj) {\n\n    }\n\n    socialLinks() {\n        var result = []\n        if (this.state.linkdin) {\n            result.push(\n                <a href={'//' + this.state.linkdin} target='_blank'>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\" /><line x1=\"8\" y1=\"11\" x2=\"8\" y2=\"16\" /><line x1=\"8\" y1=\"8\" x2=\"8\" y2=\"8.01\" /><line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"11\" /><path d=\"M16 16v-3a2 2 0 0 0 -4 0\" /></svg>\n                </a>\n            )\n        }\n        if (this.state.twitter) {\n            result.push(\n                <a href={'//' + this.state.twitter} target='_blank'>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z\" /></svg>\n                </a>\n            )\n        }\n\n        if (this.state.telegram) {\n            result.push(\n                <a href={'//' + this.state.telegram} target='_blank'>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4\" /></svg>\n                </a>\n            )\n        }\n        if (this.state.instagram) {\n            result.push(\n                <a href={'//' + this.state.instagram} style={{ color: 'red' }} target='_blank'>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"4\" /><circle cx=\"12\" cy=\"12\" r=\"3\" /><line x1=\"16.5\" y1=\"7.5\" x2=\"16.5\" y2=\"7.501\" /></svg>\n                </a>\n            )\n        }\n        return result\n    }\n\n    contactBlock() {\n        var result = []\n        if (this.state.email) {\n            result.push(\n                <div className='row'>\n                    <h4><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><rect x=\"3\" y=\"5\" width=\"18\" height=\"14\" rx=\"2\" /><polyline points=\"3 7 12 13 21 7\" /></svg></h4>\n                    <div class=\"text-muted mb-3\">\n                        {this.state.email}\n                    </div>\n                </div>\n            )\n        }\n        if (this.state.phone) {\n            result.push(\n                <div className='row'>\n                    <h4><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2\" /></svg></h4>\n                    <div class=\"text-muted mb-3\">\n                        {this.state.phone}\n                    </div>\n                </div>\n            )\n        }\n        return result\n    }\n\n    uploader() {\n        var self = this;\n        //console.log(file)\n        self.setState({ progressShow: true }, () => console.log(this.state.progressShow))\n        const config = {\n            onUploadProgress: function (progressEvent) {\n                var percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total)\n                //console.log(percentCompleted)\n                self.setState({ progress: percentCompleted })\n\n            },\n            headers: { 'Content-Type': 'application/json', 'Authorization': \"bearer \" + self.state.token }\n        }\n\n        let data = new FormData()\n        data.append('upload[attached_document]', this.state.file)\n        data.append('upload[uploadable_id]', this.props.match.params.id)\n        data.append('upload[uploadable_type]', 'Profile')\n        data.append('upload[upload_type]', 'avatar')\n\n\n        axios.post(conf.server + '/uploads', data, config)\n            .then(res => {\n                self.setState({ progressShow: false, uploadedRecently: true });\n                this.props.history.push(\"/uploads/cropper/\" + res.data.data.uuid + '?profile=' + this.state.id)\n                //MyActions.getInstance('uploads/recent', 1, this.state.token);\n                //self.props.fileUploaded()\n            })\n            .catch(err => self.setState({ progressShow: false }))\n    }\n\n    handleFileUpload(event) {\n        console.log(event.target.files[0].name);\n        this.setState({ file: event.target.files[0] }, () => {\n            this.uploader();\n        })\n    }\n\n    editBtn() {\n        if (this.state.is_owner) {\n            return (\n                <a href='#/wizard'>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M9 7h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3\" /><path d=\"M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3\" /><line x1=\"16\" y1=\"5\" x2=\"19\" y2=\"8\" /></svg>\n                </a>\n            )\n        }\n    }\n\n    avatarBtn() {\n        if (this.state.is_owner) {\n            return (\n                <React.Fragment>\n                    <input\n                        ref=\"fileInput\"\n                        onChange={this.handleFileUpload}\n                        type=\"file\"\n                        style={{ display: \"none\" }}\n                    />\n                    <button onClick={() => this.refs.fileInput.click()} class=\"btn btn-outline-dark \">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" /><circle cx=\"12\" cy=\"13\" r=\"3\" /><path d=\"M5 7h2a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h2m9 7v7a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2\" /><line x1=\"15\" y1=\"6\" x2=\"21\" y2=\"6\" /><line x1=\"18\" y1=\"3\" x2=\"18\" y2=\"9\" /></svg>\n                        {t['change_avatar']}\n                    </button>\n                </React.Fragment>\n\n            )\n        }\n    }\n\n    avatar() {\n        if (this.state.cover) {\n            return (\n                <span class=\"avatar avatar-xl avatar-rounded\" style={{ backgroundImage: \"url(\" + this.state.cover + \")\" }} ></span>\n            )\n        } else {\n            return (\n                <span class=\"avatar avatar-xl avatar-rounded\" >\n                    {this.state.initials}\n                </span>\n            )\n        }\n    }\n\n\n\n    render() {\n        return (\n            <body className=\"antialiased\">\n                <div className=\"wrapper\">\n                    <Header history={this.props.history} />\n                    <div className=\"page-wrapper\">\n                        <div className=\"container-xl\">\n                            <div className=\"page-header d-print-none\">\n                                <div className=\"row align-items-center\"></div>\n                                <div className=\"col\">\n                                    <div className=\"page-pretitle\">{t['overview']}</div>\n                                    <h2 className=\"page-title\">{t['profile']}</h2>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"page-body\">\n                            <div className=\"container-xl\">\n                                <div className=\"row\">\n                                    <div class=\"col-md-4 col-xl-4\">\n                                        <div class=\"card\">\n                                            <div class=\"card-body text-center\">\n                                                <div class=\"mb-3\">\n                                                    {this.avatar()}\n                                                </div>\n                                                {this.avatarBtn()}\n                                                <div class=\"card-title mb-1\">{this.state.name}\n                                                    <span style={{ verticalAlign: '5px' }}>{this.editBtn()}</span>\n                                                </div>\n\n                                            </div>\n                                            <div class=\"card-body\">\n                                                <div class=\"text-muted mb-1\" >{this.state.bio}</div>\n\n                                                <h4>{t['country']}</h4>\n                                                <div class=\"text-muted mb-3\">\n                                                    {this.state.country}\n                                                </div>\n\n                                                <h4>{t['tags']}</h4>\n                                                <div class=\"text-muted mb-3\">\n                                                    {this.state.tags}\n                                                </div>\n\n                                            </div>\n                                            <div class=\"card-body\">\n                                                {this.contactBlock()}\n                                            </div>\n                                            <div class=\"card-footer text-center\">\n                                                {this.socialLinks()}\n                                            </div>\n\n                                        </div>\n\n                                    </div>\n                                    <div class=\"col-md-8 col-xl-8\">\n                                        <div class=\"alert alert-important bg-dark-lt\" role=\"alert\">\n                                            <div class=\"d-flex\">\n                                                <div>\n                                                </div>\n                                                <div>\n                                                    {t['recent_meetings']}\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <div className='row'>\n                                            <MeetingMasonry meetings={this.state.recent_meetings} col={6} attend={this.attend} lang={this.state.lang} />\n                                        </div>\n\n                                        <div class=\"alert alert-important bg-dark-lt\" role=\"alert\">\n                                            <div class=\"d-flex\">\n                                                <div>\n                                                </div>\n                                                <div>\n                                                    {t['recent_events']}\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <div className='row'>\n                                            <EventCard events={this.state.recent_events} col={6} lang={this.state.lang} />\n                                        </div>\n\n                                        <div class=\"alert alert-important bg-dark-lt\" role=\"alert\">\n                                            <div class=\"d-flex\">\n                                                <div>\n                                                </div>\n                                                <div>\n                                                    {t['recent_exhibitions']}\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <div className='row'>\n                                            <ExhibitionCard exhibitions={this.state.recent_exhibitions} col={6} lang={this.state.lang} />\n                                        </div>\n                                    </div>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        )\n    }\n}\n\n\n\n\n","import logo from \"./logo.svg\";\nimport \"./App.css\";\nimport React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  HashRouter,\n  useParams,\n  Link,\n  Redirect,\n  withRouter,\n} from \"react-router-dom\";\n\nimport Dashboard from \"./components/dashboard/index.jsx\";\nimport UserWizard from \"./components/users/wizard.jsx\";\nimport UserLogin from \"./components/users/login.jsx\";\nimport Forget from \"./components/users/forget.jsx\";\n\nimport EventIndex from \"./components/events/index.jsx\";\nimport EventShow from \"./components/events/show.jsx\";\nimport EventCreate from \"./components/events/create.jsx\";\nimport EventAttendance from \"./components/events/attendance.jsx\";\nimport EventEdit from \"./components/events/create.jsx\";\nimport EventDetail from \"./components/events/detail.jsx\";\nimport EventName from \"./components/events/name.jsx\";\n\nimport MeetingIndex from \"./components/meetings/index.jsx\";\nimport MeetingShow from \"./components/meetings/show.jsx\";\nimport MeetingCreate from \"./components/meetings/create.jsx\";\nimport MeetingAttendance from \"./components/meetings/attendance.jsx\";\nimport MeetingEdit from \"./components/meetings/create.jsx\";\n\nimport ExhibitionIndex from \"./components/exhibitions/index.jsx\";\nimport ExhibitionShow from \"./components/exhibitions/show.jsx\";\nimport ExhibitionCreate from \"./components/exhibitions/create.jsx\";\nimport ExhibitionEdit from \"./components/exhibitions/create.jsx\";\n\nimport DiscussionIndex from \"./components/discussions/index.jsx\";\n\nimport PollIndex from \"./components/polls/index.jsx\";\n\nimport CropperShow from \"./components/uploads/cropper.jsx\";\nimport UploadCreate from \"./components/uploads/create.jsx\";\n\nimport FlyerCreate from \"./components/flyers/create.jsx\";\nimport FlyerEdit from \"./components/flyers/create.jsx\";\n\nimport LoginJwt from \"./components/users/loginJwt.jsx\";\n\nimport QuestionCreate from \"./components/questions/create.jsx\";\n\nimport RoomShow from \"./components/rooms/show.jsx\";\nimport AttendanceCreate from \"./components/attendances/create.jsx\";\n\nimport SettingsIndex from \"./components/settings/index.jsx\";\n\nimport MyCalendar from \"./components/common/calendar.jsx\";\n\nimport ProfileIndex from \"./components/profiles/index.jsx\";\nimport ProfileShow from \"./components/profiles/show.jsx\";\n\nimport { createBrowserHistory } from 'history';\nconst history = createBrowserHistory();\nexport default class App extends React.Component {\n\n  render() {\n    return (\n      <HashRouter history={history}>\n        <Switch>\n          <Route path=\"/\" exact component={EventIndex} />\n          <Route path=\"/wizard\" exact component={UserWizard} />\n          <Route path=\"/login\" exact component={UserLogin} />\n          <Route path=\"/login_jwt/:id\" exact component={LoginJwt} />\n          <Route path=\"/forget\" exact component={Forget} />\n\n          <Route path=\"/settings\" exact component={SettingsIndex} />\n\n          <Route path=\"/polls\" exact component={PollIndex} />\n          \n          <Route path=\"/calendar\" exact component={MyCalendar} />\n\n          <Route path=\"/uploads/:id\" exact component={UploadCreate} />\n          <Route path=\"/uploads/cropper/:id\" exact component={CropperShow} />\n\n          <Route path=\"/events\" exact component={EventIndex} />\n          <Route path=\"/events/create\" exact component={EventCreate} />\n          <Route path=\"/events/attendance\" exact component={EventAttendance} />\n          <Route path=\"/events/:id\" exact component={EventShow} />\n          <Route path=\"/events/detail/:id\" exact component={EventDetail} />\n          <Route path=\"/events/edit/:id\" exact component={EventEdit} />\n          <Route path=\"/events/name/:shortname\" exact component={EventName} />\n\n          <Route path=\"/exhibitions\" exact component={ExhibitionIndex} />\n          <Route path=\"/exhibitions/create\" exact component={ExhibitionCreate} />\n          <Route path=\"/exhibitions/:id\" exact component={ExhibitionShow} />\n          <Route path=\"/exhibitions/edit/:id\" exact component={ExhibitionEdit} />\n\n\n          <Route path=\"/meetings\" exact component={MeetingIndex} />\n          <Route path=\"/meetings/create\" exact component={MeetingCreate} />\n          <Route\n            path=\"/meetings/attendance\"\n            exact\n            component={MeetingAttendance}\n          />\n          <Route path=\"/meetings/:id\" exact component={MeetingShow} />\n          <Route path=\"/meetings/edit/:id\" exact component={MeetingEdit} />\n\n          <Route path=\"/flyers/create\" exact component={FlyerCreate} />\n          <Route path=\"/flyers/edit/:id\" exact component={FlyerEdit} />\n\n          <Route path=\"/questions/create\" exact component={QuestionCreate} />\n\n          <Route\n            path=\"/attendances/create\"\n            exact\n            component={AttendanceCreate}\n          />\n\n          <Route path=\"/rooms/:id\" exact component={RoomShow} />\n\n          <Route path=\"/discussions\" exact component={DiscussionIndex} />\n\n          <Route path=\"/profiles\" exact component={ProfileIndex} />\n          <Route path=\"/profiles/:id\" exact component={ProfileShow} />\n\n        </Switch>\n      </HashRouter>\n    );\n  }\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n//import './css/demo.min.css';\n//import './css/tabler.min.css';\n//import './css/demo.rtl.min.css';\n//import './css/tabler.rtl.min.css';\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport 'react-bootstrap-range-slider/dist/react-bootstrap-range-slider.css';\nimport './css/quill.snow.css';\n//import './css/app.css';\nimport './css/dish.css';\n\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst RtlTheme = React.lazy(() => import('./components/common/rtl'));\nconst LtrTheme = React.lazy(() => import('./components/common/ltr'));\n\n//STEP 2:\n//create a parent component that will load the components conditionally using React.Suspense\nconst ThemeSelector = ({ children }) => {\n  const CHOSEN_THEME = window.localStorage.getItem('dir') || 'rtl';\n  return (\n    <>\n      <React.Suspense fallback={<></>}>\n        {(CHOSEN_THEME === 'rtl') && <RtlTheme />}\n        {(CHOSEN_THEME === 'ltr') && <LtrTheme />}\n      </React.Suspense>\n      {children}\n    </>\n  )\n}\n\nReactDOM.render(\n  <ThemeSelector>\n    <App />\n  </ThemeSelector>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}